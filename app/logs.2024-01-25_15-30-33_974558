INFO     2024-01-25 16:50:38.375 request id: app - uvicorn.server:serve - Started server process [2415673]
INFO     2024-01-25 16:50:38.376 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 16:50:38.376 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 16:53:45.891 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57238 - "GET / HTTP/1.1" 404
INFO     2024-01-25 16:53:45.953 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57238 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-01-25 16:53:51.169 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57250 - "GET /docs HTTP/1.1" 200
INFO     2024-01-25 16:53:51.239 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57250 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-01-25 16:53:51.242 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57266 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-01-25 16:53:51.471 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57266 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-25 16:56:05.561 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 16:56:05.663 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 16:56:05.663 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 16:56:05.664 request id: app - uvicorn.server:serve - Finished server process [2415673]
INFO     2024-01-25 16:56:06.701 request id: app - uvicorn.server:serve - Started server process [2418060]
INFO     2024-01-25 16:56:06.702 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 16:56:06.703 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 16:56:10.233 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60504 - "GET /docs HTTP/1.1" 200
INFO     2024-01-25 16:56:10.474 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60504 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-25 17:00:11.715 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:00:11.730 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f612b980280>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f612b980310>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f612cdc7ac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f612cf5e8c0>
           └ <SpawnProcess name='SpawnProcess-2' parent=2415671 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f612cf5df30>
    └ <SpawnProcess name='SpawnProcess-2' parent=2415671 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f612ce0c0d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2415671 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2415671 started>
    │    └ <function subprocess_started at 0x7f612c29a3b0>
    └ <SpawnProcess name='SpawnProcess-2' parent=2415671 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f612ce0c1f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f612c299870>
    │    │                  └ <uvicorn.server.Server object at 0x7f612ce0c1f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f612cb8e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f612cb8e320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f612cb8fe20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f612cae31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f6122baaa40>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6122baaa40>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6122baaa40>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6122baaa40>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f612c1944c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f612c194550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f612c3027a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f612b55ea70>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f612c3027a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f612a2b2cb0>
          └ <fastapi.applications.FastAPI object at 0x7f612b55ea70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6122bab520>
                     │    └ <function error_handle_business at 0x7f612b3e3520>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f612a2b2cb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6122b4d000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f612a2b2c80>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f612a2b2cb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6122b4d000>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f612b413d00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f612a2b2c80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f612a2b2c80>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f612a2b2bf0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f612a2b2c80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6122b4d480>
                     │    │             └ <starlette.requests.Request object at 0x7f6122bab7f0>
                     │    └ <function process_middleware_common at 0x7f612b3e3880>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f612a2b2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6122bab7f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6122b4d480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f612b9809d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f612b4dff10>
          │    │   │      └ <starlette.requests.Request object at 0x7f6122bab7f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f612a2b2bc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f612a2b2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6122b9b910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f612a2b2b60>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f612a2b2bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6122b9b910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f612b3da1d0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f612a2b2b60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6122b9b910>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f612b52e3b0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f612b41dff0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6122b9b910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6122bab2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f612a2a5630>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f612b41dff0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6122baafe0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f612a2a55a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f6122baafe0>
                               └ <function get_request_handler.<locals>.app at 0x7f612a2a4e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f612b52f010>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f6122baba90>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f6128784b80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f612b41de10>
                 └ <function run_in_threadpool at 0x7f612be82dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f6128784b80>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f6122a7d3c0>
                 │     │         └ <function run_sync at 0x7f612bf49000>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f612bf48790>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f6122...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f6122b61240>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f6122a7e800>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 29, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f6122baba90>
    │            └ <function UserService.authenticate at 0x7f61287844c0>
    └ <app.src.services.user_service.UserService object at 0x7f6129870f10>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f6122baba90>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f612969f760>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f612b41e590>
           └ <app.src.services.user_service.UserService object at 0x7f6129870f10>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 22, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f612cf50af0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:00:11.744 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57690 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:08:18.931 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:08:19.034 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:08:19.036 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:08:19.037 request id: app - uvicorn.server:serve - Finished server process [2418060]
INFO     2024-01-25 17:08:19.932 request id: app - uvicorn.server:serve - Started server process [2422545]
INFO     2024-01-25 17:08:19.933 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:08:19.934 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:09:27.216 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:09:27.319 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:09:27.321 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:09:27.323 request id: app - uvicorn.server:serve - Finished server process [2422545]
INFO     2024-01-25 17:09:28.231 request id: app - uvicorn.server:serve - Started server process [2422923]
INFO     2024-01-25 17:09:28.232 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:09:28.232 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:10:37.315 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:10:37.417 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:10:37.418 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:10:37.418 request id: app - uvicorn.server:serve - Finished server process [2422923]
INFO     2024-01-25 17:10:38.658 request id: app - uvicorn.server:serve - Started server process [2423459]
INFO     2024-01-25 17:10:38.660 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:10:38.661 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:10:45.105 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42638 - "GET /docs HTTP/1.1" 200
INFO     2024-01-25 17:10:45.507 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42638 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-25 17:11:31.455 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:11:31.473 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe4e1668310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe4e16683a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe4e2ac7ac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe4e2c5e8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe4e2c5df30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe4e2b0c0d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
    │    └ <function subprocess_started at 0x7fe4e1f963b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe4e2b0c1f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe4e1f95870>
    │    │                  └ <uvicorn.server.Server object at 0x7fe4e2b0c1f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe4e23ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe4e23ae320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe4e23afe20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe4e2ab31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7fe4e1109c30>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe4e1109c30>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe4e1109c30>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe4e1109c30>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe4e1e904c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe4e1e90550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe4e1ffe7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe4e124aa10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe4e1ffe7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
          └ <fastapi.applications.FastAPI object at 0x7fe4e124aa10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe4d8be40d0>
                     │    └ <function error_handle_business at 0x7fe4e10cf5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe4d8b8d360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe4d8b8d360>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe4e1103d90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe4d8b8d7e0>
                     │    │             └ <starlette.requests.Request object at 0x7fe4d8be46d0>
                     │    └ <function process_middleware_common at 0x7fe4e10cf910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe4d8be46d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe4d8b8d7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe4e1668a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe4e11dc130>
          │    │   │      └ <starlette.requests.Request object at 0x7fe4d8be46d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe4d8e3ef80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe4d8e3ef20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe4d8e3ef80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe4e10ca170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe4d8e3ef20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe4e121a440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe4e1109f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe4d8e31990>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe4e1109f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe4d8be7610>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fe4d8e31900>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fe4d8be7610>
                               └ <function get_request_handler.<locals>.app at 0x7fe4d8e311b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe4e121b0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe4d8be6c50>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7fe4da6c0ee0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe4e1109db0>
                 └ <function run_in_threadpool at 0x7fe4e1b6ae60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7fe4da6c0ee0>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe4d8ab8c40>
                 │     │         └ <function run_sync at 0x7fe4e1c31090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe4e1c30820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe4d8...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe4d8ba6ec0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe4d8ba6440>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7fe4d8be6c50>
    │            └ <function UserService.authenticate at 0x7fe4da6c0820>
    └ <app.src.services.user_service.UserService object at 0x7fe4db558eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7fe4d8be6c50>
           │    │               └ <function UserRepository.get_user_by_email at 0x7fe4db50f520>
           │    └ <app.src.repositories.user.UserRepository object at 0x7fe4e110a530>
           └ <app.src.services.user_service.UserService object at 0x7fe4db558eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 22, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fe4e2c50af0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:11:31.492 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42654 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:11:38.300 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:11:38.303 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe4e1668310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe4e16683a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe4e2ac7ac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe4e2c5e8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe4e2c5df30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe4e2b0c0d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
    │    └ <function subprocess_started at 0x7fe4e1f963b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2423456 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe4e2b0c1f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe4e1f95870>
    │    │                  └ <uvicorn.server.Server object at 0x7fe4e2b0c1f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe4e23ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe4e23ae320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe4e23afe20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe4e2ab31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7fe4d8ba1a20>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe4d8ba1a20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe4d8ba1a20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe4d8ba1a20>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe4e1e904c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe4e1e90550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe4e1ffe7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe4e124aa10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe4e1ffe7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
          └ <fastapi.applications.FastAPI object at 0x7fe4e124aa10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe4d8be7460>
                     │    └ <function error_handle_business at 0x7fe4e10cf5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe4d8be3e20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe4d8be3e20>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe4e1103d90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe4d812beb0>
                     │    │             └ <starlette.requests.Request object at 0x7fe4d8ba1ff0>
                     │    └ <function process_middleware_common at 0x7fe4e10cf910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe4d8ba1ff0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe4d812beb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe4e1668a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe4e11dc130>
          │    │   │      └ <starlette.requests.Request object at 0x7fe4d8ba1ff0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe4d8e3ef80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4cff40700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe4d8e3ef20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe4d8e3ef80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4cff40700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe4e10ca170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe4d8e3ef20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4cff40700>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe4e121a440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe4e1109f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4cff40700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be4340>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe4d8e31990>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe4e1109f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe4d8be6050>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fe4d8e31900>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fe4d8be6050>
                               └ <function get_request_handler.<locals>.app at 0x7fe4d8e311b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe4e121b0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe4d8be7520>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7fe4da6c0ee0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe4e1109db0>
                 └ <function run_in_threadpool at 0x7fe4e1b6ae60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7fe4da6c0ee0>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe4d8ba6d40>
                 │     │         └ <function run_sync at 0x7fe4e1c31090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe4e1c30820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe4d8...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe4d8ab9e40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe4d8aadd40>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7fe4d8be7520>
    │            └ <function UserService.authenticate at 0x7fe4da6c0820>
    └ <app.src.services.user_service.UserService object at 0x7fe4db558eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7fe4d8be7520>
           │    │               └ <function UserRepository.get_user_by_email at 0x7fe4db50f520>
           │    └ <app.src.repositories.user.UserRepository object at 0x7fe4e110a530>
           └ <app.src.services.user_service.UserService object at 0x7fe4db558eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 22, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fe4e2c50af0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe4e1e904c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe4e1e90550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe4e1ffe7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe4e124aa10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe4e1ffe7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
          └ <fastapi.applications.FastAPI object at 0x7fe4e124aa10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe4d8be40d0>
                     │    └ <function error_handle_business at 0x7fe4e10cf5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe4d8b8d360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe4d8e3f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe4d8b8d360>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe4e1103d90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe4d8e3f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe4d8b8d7e0>
                     │    │             └ <starlette.requests.Request object at 0x7fe4d8be46d0>
                     │    └ <function process_middleware_common at 0x7fe4e10cf910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe4d8be46d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe4d8b8d7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe4e1668a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe4e11dc130>
          │    │   │      └ <starlette.requests.Request object at 0x7fe4d8be46d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe4d8e3ef80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe4d8e3efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe4d8e3ef20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe4d8e3ef80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe4e10ca170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe4d8e3ef20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe4e121a440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe4e1109f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe4d8be3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe4d8be7910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe4d8e31990>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe4e1109f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe4d8be7610>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fe4d8e31900>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fe4d8be7610>
                               └ <function get_request_handler.<locals>.app at 0x7fe4d8e311b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe4e121b0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe4d8be6c50>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7fe4da6c0ee0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe4e1109db0>
                 └ <function run_in_threadpool at 0x7fe4e1b6ae60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7fe4da6c0ee0>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe4d8ab8c40>
                 │     │         └ <function run_sync at 0x7fe4e1c31090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe4e1c30820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe4d8...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe4d8ab9e40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe4d8aadd40>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7fe4d8be6c50>
    │            └ <function UserService.authenticate at 0x7fe4da6c0820>
    └ <app.src.services.user_service.UserService object at 0x7fe4db558eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7fe4d8be6c50>
           │    │               └ <function UserRepository.get_user_by_email at 0x7fe4db50f520>
           │    └ <app.src.repositories.user.UserRepository object at 0x7fe4e110a530>
           └ <app.src.services.user_service.UserService object at 0x7fe4db558eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 22, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fe4e2c50af0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:11:38.326 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36118 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:12:23.019 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:12:23.121 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:12:23.123 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:12:23.125 request id: app - uvicorn.server:serve - Finished server process [2423459]
INFO     2024-01-25 17:12:24.131 request id: app - uvicorn.server:serve - Started server process [2424112]
INFO     2024-01-25 17:12:24.132 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:12:24.133 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:12:29.756 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:12:29.858 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:12:29.860 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:12:29.862 request id: app - uvicorn.server:serve - Finished server process [2424112]
INFO     2024-01-25 17:12:31.023 request id: app - uvicorn.server:serve - Started server process [2424145]
INFO     2024-01-25 17:12:31.024 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:12:31.025 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:12:33.817 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:12:33.832 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f531ecec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f531ecec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f532010bac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f532025a8c0>
           └ <SpawnProcess name='SpawnProcess-3' parent=2423456 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5320259f30>
    └ <SpawnProcess name='SpawnProcess-3' parent=2423456 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f53201500d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2423456 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2423456 started>
    │    └ <function subprocess_started at 0x7f531f6623b0>
    └ <SpawnProcess name='SpawnProcess-3' parent=2423456 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f53201501f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f531f661870>
    │    │                  └ <uvicorn.server.Server object at 0x7f53201501f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f531fee23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f531fee2320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f531fee3e20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f53200f31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f53161dd360>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f53161dd360>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f53161dd360>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f53161dd360>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f531f5204c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f531f520550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f531f6ca7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f531e8cea10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f531f6ca7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f531630b070>
          └ <fastapi.applications.FastAPI object at 0x7f531e8cea10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f53161de4a0>
                     │    └ <function error_handle_business at 0x7f531e7575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f531630b070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f53161c88b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f531630b040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f531630b070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f53161c88b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f531e787d90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f531630b040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f531630b040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f531630afb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f531630b040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f53161c8940>
                     │    │             └ <starlette.requests.Request object at 0x7f53161dd810>
                     │    └ <function process_middleware_common at 0x7f531e757910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f531630afb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f53161dd810>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f53161c8940>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f531ececa60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f531e860130>
          │    │   │      └ <starlette.requests.Request object at 0x7f53161dd810>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f531630af80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f531630afb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f53161c96c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f531630af20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f531630af80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f53161c96c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f531e74e170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f531630af20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f53161c96c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f531e89e440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f531e78df90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f53161c96c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f53161ddde0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f53162fd990>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f531e78df90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f53161dfc40>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f53162fd900>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f53161dfc40>
                               └ <function get_request_handler.<locals>.app at 0x7f53162fd1b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f531e89f0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f53161dd300>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f531c590ee0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f531e78ddb0>
                 └ <function run_in_threadpool at 0x7f531f1eee60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f531c590ee0>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f53161e1600>
                 │     │         └ <function run_sync at 0x7f531f2b5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f531f2b4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f5316...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f531cf91b40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f531629c600>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f53161dd300>
    │            └ <function UserService.authenticate at 0x7f531c590820>
    └ <app.src.services.user_service.UserService object at 0x7f531cbc0eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f53161dd300>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f531cb744c0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f531e78e530>
           └ <app.src.services.user_service.UserService object at 0x7f531cbc0eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 22, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f532024caf0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:12:33.852 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33928 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:14:35.660 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:14:35.762 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:14:35.764 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:14:35.766 request id: app - uvicorn.server:serve - Finished server process [2424145]
INFO     2024-01-25 17:14:37.145 request id: app - uvicorn.server:serve - Started server process [2424904]
INFO     2024-01-25 17:14:37.146 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:14:37.147 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:14:46.145 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:14:46.159 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f44574ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f44574ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f445890bac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4458a5a8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2424902 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4458a59f30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2424902 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f44589500d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2424902 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2424902 started>
    │    └ <function subprocess_started at 0x7f4457e623b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2424902 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f44589501f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4457e61870>
    │    │                  └ <uvicorn.server.Server object at 0x7f44589501f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f44586e23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f44586e2320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f44586e3e20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f44588f31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f444e9a7fd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f444e9a7fd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f444e9a7fd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f444e9a7fd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4457d204c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4457d20550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4457eca7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f44570cea10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4457eca7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f444ec43070>
          └ <fastapi.applications.FastAPI object at 0x7f44570cea10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f444e9a64a0>
                     │    └ <function error_handle_business at 0x7f4456f575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f444ec43070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f444e9908b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f444ec43040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f444ec43070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f444e9908b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f4456f87d90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f444ec43040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f444ec43040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f444ec42fb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f444ec43040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f444e990940>
                     │    │             └ <starlette.requests.Request object at 0x7f444e9a5810>
                     │    └ <function process_middleware_common at 0x7f4456f57910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f444ec42fb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f444e9a5810>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f444e990940>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f44574eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4457060130>
          │    │   │      └ <starlette.requests.Request object at 0x7f444e9a5810>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f444ec42f80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f444ec42fb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f444e9916c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f444ec42f20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f444ec42f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f444e9916c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4456f4e170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f444ec42f20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f444e9916c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f445709e440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f4456f8df90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f444e9916c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f444e9a5de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f444ec35990>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f4456f8df90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f444e9a7c40>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f444ec35900>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f444e9a7c40>
                               └ <function get_request_handler.<locals>.app at 0x7f444ec351b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f445709f0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f444e9a4e80>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f44545b8ee0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f4456f8ddb0>
                 └ <function run_in_threadpool at 0x7f44579eee60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f44545b8ee0>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f444e9a9a80>
                 │     │         └ <function run_sync at 0x7f4457ab5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4457ab4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f444e...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f444ebe8140>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f444e9a9340>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f444e9a4e80>
    │            └ <function UserService.authenticate at 0x7f44545b8820>
    └ <app.src.services.user_service.UserService object at 0x7f44553e4eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f444e9a4e80>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f445539b520>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f4456f8e530>
           └ <app.src.services.user_service.UserService object at 0x7f44553e4eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 22, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f4458a4caf0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:14:46.182 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60244 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:15:05.366 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:15:05.467 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:15:05.470 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:15:05.472 request id: app - uvicorn.server:serve - Finished server process [2424904]
INFO     2024-01-25 17:15:08.366 request id: app - uvicorn.server:serve - Started server process [2425090]
INFO     2024-01-25 17:15:08.368 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:15:08.369 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:15:11.026 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:16:06.721 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:16:06.824 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:16:12.431 request id: app - uvicorn.server:serve - Started server process [2425507]
INFO     2024-01-25 17:16:12.432 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:16:12.433 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:16:15.920 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:16:15.938 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f3db2024310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f3db20243a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f3db340fac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f3db355e8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2425505 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f3db355df30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2425505 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f3db34540d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2425505 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2425505 started>
    │    └ <function subprocess_started at 0x7f3db29923b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2425505 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f3db34541f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f3db2991870>
    │    │                  └ <uvicorn.server.Server object at 0x7f3db34541f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3db2da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3db2da6320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3db2da7e20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3db33f71c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f3da9577ee0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3da9577ee0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3da9577ee0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3da9577ee0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f3db284c4c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f3db284c550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3db29f67a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f3db1c06a10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3db29f67a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3da980f070>
          └ <fastapi.applications.FastAPI object at 0x7f3db1c06a10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3da95764a0>
                     │    └ <function error_handle_business at 0x7f3db1a8f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3da980f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3da95609d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3da980f040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3da980f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3da95609d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f3db1abfd90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3da980f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f3da980f040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3da980efb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3da980f040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3da9560a60>
                     │    │             └ <starlette.requests.Request object at 0x7f3da9575810>
                     │    └ <function process_middleware_common at 0x7f3db1a8f910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3da980efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3da9575810>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3da9560a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f3db2024a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f3db1b98090>
          │    │   │      └ <starlette.requests.Request object at 0x7f3da9575810>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3da980ef80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3da980efb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3da95617e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3da980ef20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3da980ef80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3da95617e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f3db1a86170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3da980ef20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3da95617e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f3db1bd6440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f3db1ac9f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3da95617e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3da9575de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3da9801ab0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f3db1ac9f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3da9577c40>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f3da9801a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f3da9577c40>
                               └ <function get_request_handler.<locals>.app at 0x7f3da98012d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f3db1bd70a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f3da95779a0>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f3daafa5000>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f3db1ac9db0>
                 └ <function run_in_threadpool at 0x7f3db2526e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f3daafa5000>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f3da9579bc0>
                 │     │         └ <function run_sync at 0x7f3db25ed090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f3db25ec820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f3da9...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f3da959a440>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f3da9579700>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f3da95779a0>
    │            └ <function UserService.authenticate at 0x7f3daafa4940>
    └ <app.src.services.user_service.UserService object at 0x7f3dabe8ceb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f3da95779a0>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f3dabe43520>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f3db1aca530>
           └ <app.src.services.user_service.UserService object at 0x7f3dabe8ceb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 23, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f3db3550af0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:16:15.953 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54798 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:17:27.052 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:17:27.155 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:17:27.157 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:17:27.159 request id: app - uvicorn.server:serve - Finished server process [2425507]
INFO     2024-01-25 17:17:30.693 request id: app - uvicorn.server:serve - Started server process [2425966]
INFO     2024-01-25 17:17:30.695 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:17:30.695 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:17:34.389 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:20:11.165 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:20:11.269 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:20:18.282 request id: app - uvicorn.server:serve - Started server process [2426957]
INFO     2024-01-25 17:20:18.284 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:20:18.286 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:20:19.379 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:21:48.807 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:21:48.909 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:22:12.055 request id: app - uvicorn.server:serve - Finished server process [2426957]
INFO     2024-01-25 17:22:20.500 request id: app - uvicorn.server:serve - Started server process [2427708]
INFO     2024-01-25 17:22:20.502 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:22:20.503 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:22:24.308 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:24:34.878 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:24:34.983 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:24:38.310 request id: app - uvicorn.server:serve - Finished server process [2427708]
INFO     2024-01-25 17:24:43.642 request id: app - uvicorn.server:serve - Started server process [2428579]
INFO     2024-01-25 17:24:43.644 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:24:43.645 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:24:45.794 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:25:17.163 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:25:17.265 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:25:21.088 request id: app - uvicorn.server:serve - Finished server process [2428579]
INFO     2024-01-25 17:25:26.392 request id: app - uvicorn.server:serve - Started server process [2429326]
INFO     2024-01-25 17:25:26.394 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:25:26.395 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:25:26.696 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:27:01.036 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:27:01.141 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:27:03.160 request id: app - uvicorn.server:serve - Finished server process [2429326]
INFO     2024-01-25 17:27:10.439 request id: app - uvicorn.server:serve - Started server process [2429997]
INFO     2024-01-25 17:27:10.441 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:27:10.443 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:27:13.618 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:27:40.141 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:27:40.246 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:28:02.799 request id: app - uvicorn.server:serve - Finished server process [2429997]
INFO     2024-01-25 17:28:10.608 request id: app - uvicorn.server:serve - Started server process [2430490]
INFO     2024-01-25 17:28:10.610 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:28:10.611 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:28:12.075 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:28:43.921 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:28:44.023 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:28:45.835 request id: app - uvicorn.server:serve - Finished server process [2430490]
INFO     2024-01-25 17:29:36.415 request id: app - uvicorn.server:serve - Started server process [2431154]
INFO     2024-01-25 17:29:36.417 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:29:36.418 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:29:38.681 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:30:13.853 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:30:13.959 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:30:15.674 request id: app - uvicorn.server:serve - Finished server process [2431154]
INFO     2024-01-25 17:30:28.958 request id: app - uvicorn.server:serve - Started server process [2431518]
INFO     2024-01-25 17:30:28.960 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:30:28.961 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:30:29.660 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:30:57.337 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:30:57.439 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:30:59.755 request id: app - uvicorn.server:serve - Finished server process [2431518]
INFO     2024-01-25 17:31:05.802 request id: app - uvicorn.server:serve - Started server process [2431790]
INFO     2024-01-25 17:31:05.805 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:31:05.806 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:31:06.581 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:34:47.811 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:34:47.914 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:35:09.407 request id: app - uvicorn.server:serve - Started server process [2433223]
INFO     2024-01-25 17:35:09.408 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:35:09.409 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:35:18.691 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:35:32.972 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f1d0ff87b50>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f1d0ff87be0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f1d1eb31090>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f1d1eac7d90>
           └ <SpawnProcess name='SpawnProcess-1' parent=2433218 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1d1eac7400>
    └ <SpawnProcess name='SpawnProcess-1' parent=2433218 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1d1eb461d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2433218 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2433218 started>
    │    └ <function subprocess_started at 0x7f1d1ca49b40>
    └ <SpawnProcess name='SpawnProcess-1' parent=2433218 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1d1eb457b0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1d1ca48e50>
    │    │                  └ <uvicorn.server.Server object at 0x7f1d1eb457b0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1d1ea6d990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1d1ea6d900>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1d1ea6f400>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f1d1ecea7a0>
    └ <Handle <TaskStepMethWrapper object at 0x7f1d0f9f7f10>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1d0f9f7f10>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1d0f9f7f10>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1d0f9f7f10>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1d1c8db1c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1d1c8db250>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1d1edf86d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1d0fbb4490>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1d1edf86d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1d0342aaa0>
          └ <fastapi.applications.FastAPI object at 0x7f1d0fbb4490>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1d032f1ed0>
                     │    └ <function error_handle_business at 0x7f1d0fbd7520>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1d0342aaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1d034c9900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1d0342aa70>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1d0342aaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1d034c9900>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f1d0fa50310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1d0342aa70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f1d0342aa70>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1d0342a9e0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1d0342aa70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1d034c9990>
                     │    │             └ <starlette.requests.Request object at 0x7f1d032f1240>
                     │    └ <function process_middleware_common at 0x7f1d0fbd7ac0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1d0342a9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1d032f1240>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1d034c9990>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1d0ffa0310>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1d0fb453f0>
          │    │   │      └ <starlette.requests.Request object at 0x7f1d032f1240>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1d0342a9b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1d0342a9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d034ca710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1d0342a950>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1d0342a9b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d034ca710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1d0f9f5210>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1d0342a950>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d034ca710>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1d0fb797e0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f1d0fa3d1e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d034ca710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d032f1810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1d0340dfc0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f1d0fa3d1e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1d032f3820>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f1d0340df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f1d032f3820>
                               └ <function get_request_handler.<locals>.app at 0x7f1d0340d7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1d0fb7a440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f1d032f08b0>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f1d0d1e5f30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f1d0fa3d000>
                 └ <function run_in_threadpool at 0x7f1d1c61a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f1d0d1e5f30>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1d0334e300>
                 │     │         └ <function run_sync at 0x7f1d0ff1c700>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f1d1c61be20>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f1d03...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1d0fa42240>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1d021ebf00>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f1d032f08b0>
    │            └ <function UserService.authenticate at 0x7f1d0d1e5360>
    └ <app.src.services.user_service.UserService object at 0x7f1d1edf8b80>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f1d032f08b0>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f1d0de74dc0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f1d0e001570>
           └ <app.src.services.user_service.UserService object at 0x7f1d1edf8b80>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 23, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f1d1fb96e60>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:35:33.049 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47352 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:41:23.284 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:41:23.386 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:41:23.390 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:41:23.393 request id: app - uvicorn.server:serve - Finished server process [2433223]
INFO     2024-01-25 17:41:26.870 request id: app - uvicorn.server:serve - Started server process [2435386]
INFO     2024-01-25 17:41:26.872 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:41:26.873 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:41:29.644 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:41:55.752 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb7a1ffbb50>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb7a1ffbbe0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fb7a8b59090>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fb7a8af3d90>
           └ <SpawnProcess name='SpawnProcess-1' parent=2435360 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb7a8af3400>
    └ <SpawnProcess name='SpawnProcess-1' parent=2435360 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb7a8b721d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2435360 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2435360 started>
    │    └ <function subprocess_started at 0x7fb7a8079b40>
    └ <SpawnProcess name='SpawnProcess-1' parent=2435360 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb7a8b71780>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb7a8078e50>
    │    │                  └ <uvicorn.server.Server object at 0x7fb7a8b71780>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb7a8a99990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb7a8a99900>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb7a8a9b400>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb7a8d0a7a0>
    └ <Handle <TaskStepMethWrapper object at 0x7fb7a1a4fe80>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb7a1a4fe80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb7a1a4fe80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb7a1a4fe80>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb7a810b1c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb7a810b250>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb7a8e13fa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb7a1c144c0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb7a8e13fa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb789426ad0>
          └ <fastapi.applications.FastAPI object at 0x7fb7a1c144c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb7a8e3aad0>
                     │    └ <function error_handle_business at 0x7fb7a1c37520>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb789426ad0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb7894bda20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb789426aa0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb789426ad0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb7894bda20>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb7a1aac430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb789426aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb789426aa0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb789426a10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb789426aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb7894bdab0>
                     │    │             └ <starlette.requests.Request object at 0x7fb7892e9270>
                     │    └ <function process_middleware_common at 0x7fb7a1c37ac0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb789426a10>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb7892e9270>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb7894bdab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb7a2010310>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb7a1ba49a0>
          │    │   │      └ <starlette.requests.Request object at 0x7fb7892e9270>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb7894269e0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb789426a10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7894be830>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb789426980>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb7894269e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7894be830>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb7a1a4d240>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb789426980>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7894be830>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb7a1bd97e0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fb7a1a99210>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7894be830>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7892e9840>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb7893fe0e0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fb7a1a99210>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb7892eb880>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fb7893fe050>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fb7892eb880>
                               └ <function get_request_handler.<locals>.app at 0x7fb7893fd900>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb7a1bda440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fb7892e8c40>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7fb78b0d2050>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fb7a1a99030>
                 └ <function run_in_threadpool at 0x7fb7a262a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7fb78b0d2050>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fb7892e7a40>
                 │     │         └ <function run_sync at 0x7fb7a1f8c700>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fb7a262be20>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fb789...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fb78b0d63c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fb78b0d5c40>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7fb7892e8c40>
    │            └ <function UserService.authenticate at 0x7fb78b0d1480>
    └ <app.src.services.user_service.UserService object at 0x7fb78bf855a0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7fb7892e8c40>
           │    │               └ <function UserRepository.get_user_by_email at 0x7fb78bff8ee0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7fb7a1a999f0>
           └ <app.src.services.user_service.UserService object at 0x7fb78bf855a0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 23, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fb7a9b96e60>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:41:55.865 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59080 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:42:06.032 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:42:06.133 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:42:06.135 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:42:06.135 request id: app - uvicorn.server:serve - Finished server process [2435386]
INFO     2024-01-25 17:42:08.453 request id: app - uvicorn.server:serve - Started server process [2435680]
INFO     2024-01-25 17:42:08.454 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:42:08.455 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:42:11.868 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:42:11.892 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f63c21a8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f63c21a83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f63c360fac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f63c375e8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2435678 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f63c375df30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2435678 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f63c36540d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2435678 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2435678 started>
    │    └ <function subprocess_started at 0x7f63c2b223b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2435678 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f63c36541f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f63c2b21870>
    │    │                  └ <uvicorn.server.Server object at 0x7f63c36541f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f63c33b23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f63c33b2320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f63c33b3e20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f63c35fb1c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f63b968bfd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f63b968bfd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f63b968bfd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f63b968bfd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f63c29dc4c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f63c29dc550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f63c2b8a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f63c1d86a10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f63c2b8a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63b9927070>
          └ <fastapi.applications.FastAPI object at 0x7f63c1d86a10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f63b968a4a0>
                     │    └ <function error_handle_business at 0x7f63c1c0b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63b9927070>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f63b96749d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63b9927040>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63b9927070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f63b96749d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f63c1c3bd90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63b9927040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f63b9927040>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9926fb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63b9927040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f63b9674a60>
                     │    │             └ <starlette.requests.Request object at 0x7f63b9689810>
                     │    └ <function process_middleware_common at 0x7f63c1c0b910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9926fb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f63b9689810>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f63b9674a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f63c21a8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f63c1d18040>
          │    │   │      └ <starlette.requests.Request object at 0x7f63b9689810>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f63b9926f80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63b9926fb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b96757e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f63b9926f20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f63b9926f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b96757e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f63c1c02170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f63b9926f20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b96757e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f63c1d56440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f63c1c41f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63b96757e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63b9689de0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f63b991dab0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f63c1c41f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f63b968bc40>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f63b991da20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f63b968bc40>
                               └ <function get_request_handler.<locals>.app at 0x7f63b991d2d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f63c1d570a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f63b9689240>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f63bb1a1000>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f63c1c41db0>
                 └ <function run_in_threadpool at 0x7f63c26a6e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f63bb1a1000>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f63b968d800>
                 │     │         └ <function run_sync at 0x7f63c2771090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f63c2770820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f63b9...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f63ba192d40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f63b968d3c0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f63b9689240>
    │            └ <function UserService.authenticate at 0x7f63bb1a0940>
    └ <app.src.services.user_service.UserService object at 0x7f63c0098eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f63b9689240>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f63c004f5b0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f63c1c42530>
           └ <app.src.services.user_service.UserService object at 0x7f63c0098eb0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 23, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f63c3750af0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:42:11.910 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50672 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:42:37.775 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:42:37.876 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:42:37.878 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:42:37.880 request id: app - uvicorn.server:serve - Finished server process [2435680]
INFO     2024-01-25 17:42:40.764 request id: app - uvicorn.server:serve - Started server process [2435866]
INFO     2024-01-25 17:42:40.767 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:42:40.769 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:42:44.453 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:43:57.649 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:43:57.751 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:44:30.248 request id: app - uvicorn.server:serve - Finished server process [2435866]
INFO     2024-01-25 17:44:33.864 request id: app - uvicorn.server:serve - Started server process [2436602]
INFO     2024-01-25 17:44:33.865 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:44:33.866 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:44:37.237 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:45:14.337 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:45:17.375 request id: app - uvicorn.server:serve - Started server process [2436892]
INFO     2024-01-25 17:45:17.377 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:45:17.378 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:45:19.712 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:46:16.141 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:46:16.246 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:46:17.255 request id: app - uvicorn.server:serve - Finished server process [2436892]
INFO     2024-01-25 17:46:20.312 request id: app - uvicorn.server:serve - Started server process [2437318]
INFO     2024-01-25 17:46:20.314 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:46:20.315 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:46:22.366 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:46:54.131 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:46:54.233 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:47:49.765 request id: app - uvicorn.server:serve - Started server process [2437875]
INFO     2024-01-25 17:47:49.767 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:47:49.767 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:47:53.962 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:48:04.263 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:48:04.366 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:51:54.792 request id: app - uvicorn.server:serve - Started server process [2439365]
INFO     2024-01-25 17:51:54.793 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:51:54.793 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:51:58.980 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:51:59.011 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f73f093c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f73f093c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f73f1d0bac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f73f1e5a8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2439363 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f73f1e59f30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2439363 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f73f1d500d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2439363 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2439363 started>
    │    └ <function subprocess_started at 0x7f73f128e3b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2439363 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f73f1d501f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f73f128d870>
    │    │                  └ <uvicorn.server.Server object at 0x7f73f1d501f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f73f1b023b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f73f1b02320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f73f1b03e20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f73f1cf31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f73e7e89270>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f73e7e89270>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f73e7e89270>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f73e7e89270>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f73f11584c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f73f1158550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f73f12f67a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f73f051ea10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f73f12f67a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f73ec133010>
          └ <fastapi.applications.FastAPI object at 0x7f73f051ea10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f73e7e8a440>
                     │    └ <function error_handle_business at 0x7f73f03a75b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f73ec133010>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f73e7e749d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f73ec132fe0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f73ec133010>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f73e7e749d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f73f03d7d90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f73ec132fe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f73ec132fe0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f73ec132f50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f73ec132fe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f73e7e74a60>
                     │    │             └ <starlette.requests.Request object at 0x7f73e7e897b0>
                     │    └ <function process_middleware_common at 0x7f73f03a7910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f73ec132f50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f73e7e897b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f73e7e74a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f73f093ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f73f04b0270>
          │    │   │      └ <starlette.requests.Request object at 0x7f73e7e897b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f73ec132f20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f73ec132f50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f73e7e757e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f73ec132ec0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f73ec132f20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f73e7e757e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f73f039e170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f73ec132ec0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f73e7e757e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f73f04ee440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f73f03ddf90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f73e7e757e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f73e7e89d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f73ec125ab0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f73f03ddf90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f73e7e8bd00>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f73ec125a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f73e7e8bd00>
                               └ <function get_request_handler.<locals>.app at 0x7f73ec1252d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f73f04ef0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f73e7e892d0>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f73ed9b1000>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f73f03dddb0>
                 └ <function run_in_threadpool at 0x7f73f0e46e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f73ed9b1000>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f73e7e8d880>
                 │     │         └ <function run_sync at 0x7f73f0f0d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f73f0f0c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f73e7...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f73ec9a2d40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f73e7e8d4c0>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f73e7e892d0>
    │            └ <function UserService.authenticate at 0x7f73ed9b0940>
    └ <app.src.services.user_service.UserService object at 0x7f73ee83a500>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f73e7e892d0>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f73ee7eb5b0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f73f03de530>
           └ <app.src.services.user_service.UserService object at 0x7f73ee83a500>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 23, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f73f1e4caf0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:51:59.033 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57212 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:52:06.742 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:52:06.844 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:52:06.846 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:52:06.848 request id: app - uvicorn.server:serve - Finished server process [2439365]
INFO     2024-01-25 17:52:10.195 request id: app - uvicorn.server:serve - Started server process [2439454]
INFO     2024-01-25 17:52:10.197 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:52:10.198 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:52:13.464 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:52:49.035 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:52:49.137 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:52:50.847 request id: app - uvicorn.server:serve - Finished server process [2439454]
INFO     2024-01-25 17:52:54.406 request id: app - uvicorn.server:serve - Started server process [2439768]
INFO     2024-01-25 17:52:54.407 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:52:54.407 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:52:56.473 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-25 17:52:56.501 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f967a720310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f967a7203a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f967bb0bac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f967bc5a8c0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2439766 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f967bc59f30>
    └ <SpawnProcess name='SpawnProcess-1' parent=2439766 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f967bb500d0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2439766 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2439766 started>
    │    └ <function subprocess_started at 0x7f967b08e3b0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2439766 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f967bb501f0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f967b08d870>
    │    │                  └ <uvicorn.server.Server object at 0x7f967bb501f0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f967b9023b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f967b902320>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f967b903e20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f967baf31c0>
    └ <Handle <TaskStepMethWrapper object at 0x7f9671c81300>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9671c81300>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9671c81300>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9671c81300>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f967af584c0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f967af58550>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f967b0f67a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f967a302a10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f967b0f67a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9671f1b010>
          └ <fastapi.applications.FastAPI object at 0x7f967a302a10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9671c82440>
                     │    └ <function error_handle_business at 0x7f967a18b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9671f1b010>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9671c6c9d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9671f1afe0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9671f1b010>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9671c6c9d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f967a1bbd90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9671f1afe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f9671f1afe0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9671f1af50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9671f1afe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9671c6ca60>
                     │    │             └ <starlette.requests.Request object at 0x7f9671c817b0>
                     │    └ <function process_middleware_common at 0x7f967a18b910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9671f1af50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9671c817b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9671c6ca60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f967a720a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f967a294180>
          │    │   │      └ <starlette.requests.Request object at 0x7f9671c817b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9671f1af20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9671f1af50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9671c6d7e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9671f1aec0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9671f1af20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9671c6d7e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f967a182170>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9671f1aec0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9671c6d7e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f967a2d2440>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f967a1c1f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9671c6d7e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9671c81d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9671f0dab0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f967a1c1f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9671c83d00>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f9671f0da20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f9671c83d00>
                               └ <function get_request_handler.<locals>.app at 0x7f9671f0d2d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f967a2d30a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f9671c80d90>, 'login_data': UserLogin(email='admin@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f96737ad000>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f967a1c1db0>
                 └ <function run_in_threadpool at 0x7f967ac26e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f96737ad000>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f96781cc940>
                 │     │         └ <function run_sync at 0x7f967aced090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f967acec820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9671...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f9671f72440>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f9671c85700>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'admin@rabiloo.com'
    │            │            │           └ UserLogin(email='admin@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f9671c80d90>
    │            └ <function UserService.authenticate at 0x7f96737ac940>
    └ <app.src.services.user_service.UserService object at 0x7f9678622500>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/services/user_service.py", line 63, in authenticate
    user = self.user_repository.get_user_by_email(db_session, email)
           │    │               │                 │           └ 'admin@rabiloo.com'
           │    │               │                 └ <sqlalchemy.orm.session.Session object at 0x7f9671c80d90>
           │    │               └ <function UserRepository.get_user_by_email at 0x7f96785d35b0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f967a1c2530>
           └ <app.src.services.user_service.UserService object at 0x7f9678622500>

  File "/home/rb103/Downloads/resource-management-feature-refactor-struct/app/../app/src/repositories/user.py", line 23, in get_user_by_email
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f967bc4caf0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-25 17:52:56.517 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53510 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-25 17:53:05.254 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:53:05.355 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 17:53:05.358 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 17:53:05.360 request id: app - uvicorn.server:serve - Finished server process [2439768]
INFO     2024-01-25 17:53:07.829 request id: app - uvicorn.server:serve - Started server process [2439861]
INFO     2024-01-25 17:53:07.831 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:53:07.832 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:53:10.372 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:56:24.088 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:56:24.194 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:56:29.551 request id: app - uvicorn.server:serve - Started server process [2441504]
INFO     2024-01-25 17:56:29.553 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:56:29.554 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:56:35.176 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 17:57:47.021 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 17:57:47.127 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 17:57:52.120 request id: app - uvicorn.server:serve - Started server process [2442048]
INFO     2024-01-25 17:57:52.122 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 17:57:52.123 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 17:57:59.230 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 18:00:11.556 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 18:00:11.658 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-25 18:00:17.083 request id: app - uvicorn.server:serve - Started server process [2443178]
INFO     2024-01-25 18:00:17.085 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 18:00:17.086 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 18:00:18.719 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 18:00:37.446 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjE4MjIzNX0.5u3fY0dSJpadyLWKHXz4uppBgVfrXJe_v0uM2evs0z8","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjE5ODQzNX0.K8eh2M4AoeHCwg16fsYtV6TxnXYZPXoVvHI9NIfSwgM"},"links":null,"relationships":null,"timestamp":"2024-01-25 18:00:16"}'}
INFO     2024-01-25 18:00:37.449 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33516 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-25 18:21:17.955 request id: app - uvicorn.server:serve - Started server process [2452082]
INFO     2024-01-25 18:21:17.957 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 18:21:17.957 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 18:22:12.618 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50650 - "GET / HTTP/1.1" 404
INFO     2024-01-25 18:22:15.662 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50650 - "GET /docs HTTP/1.1" 200
INFO     2024-01-25 18:22:15.914 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50650 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-25 18:23:00.116 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 18:23:00.396 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjE4MzU4MH0.0Y8bqYwXoazTfvXWTWmthCgnauLgfBLi55hI_bV_UWY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjE5OTc4MH0.cTvs2M0H1VpY_SboGQ3xpKsOpmX7ph8o7gkrtpgL-T8"},"links":null,"relationships":null,"timestamp":"2024-01-25 18:21:17"}'}
INFO     2024-01-25 18:23:00.397 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50654 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-25 18:24:51.510 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 18:24:51.612 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 18:24:51.613 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 18:24:51.614 request id: app - uvicorn.server:serve - Finished server process [2452082]
INFO     2024-01-25 18:40:21.879 request id: app - uvicorn.server:serve - Started server process [2459969]
INFO     2024-01-25 18:40:21.881 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 18:40:21.881 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 18:40:45.529 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-25 18:40:45.809 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjE4NDY0NX0.y0_Sa3kbFDy76JBpE_7YugDerZQzruH5M7SiqG2eFwU","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjIwMDg0NX0.PZoh7OzVFvwTk_goSIWDczAdHGJ_XyLjdGtf7RsEBP8"},"links":null,"relationships":null,"timestamp":"2024-01-25 18:40:21"}'}
INFO     2024-01-25 18:40:45.810 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36590 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-25 18:41:40.406 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 18:41:40.507 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 18:41:40.508 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 18:41:40.509 request id: app - uvicorn.server:serve - Finished server process [2459969]
INFO     2024-01-25 18:41:54.365 request id: app - uvicorn.server:serve - Started server process [2461046]
INFO     2024-01-25 18:41:54.367 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-25 18:41:54.368 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-25 18:44:04.868 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-25 18:44:04.970 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-25 18:44:04.971 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-25 18:44:04.971 request id: app - uvicorn.server:serve - Finished server process [2461046]
INFO     2024-01-26 08:49:08.718 request id: app - uvicorn.server:serve - Started server process [2757638]
INFO     2024-01-26 08:49:08.719 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 08:49:08.719 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 08:49:09.904 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51500 - "GET / HTTP/1.1" 404
INFO     2024-01-26 08:49:09.956 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51500 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-01-26 08:49:16.059 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51502 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 08:49:16.137 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51502 - "GET /static/swagger-ui.css HTTP/1.1" 304
INFO     2024-01-26 08:49:16.139 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44612 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-01-26 08:49:16.370 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44612 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 08:49:39.523 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 08:49:39.822 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjIzNTU3OX0.czvsNpTgFMbdhPjq3usnt378C0atMh2nguxF08INovM","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1MTc3OX0.xwG46VW2O3T_m9dH6CDBmEWw-aIzQrHVWYPLg6mFi1E"},"links":null,"relationships":null,"timestamp":"2024-01-26 08:49:08"}'}
INFO     2024-01-26 08:49:39.823 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33572 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 09:21:52.055 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 09:21:52.157 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 09:21:52.159 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 09:21:52.161 request id: app - uvicorn.server:serve - Finished server process [2757638]
INFO     2024-01-26 09:21:53.233 request id: app - uvicorn.server:serve - Started server process [2769428]
INFO     2024-01-26 09:21:53.235 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 09:21:53.235 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 09:21:54.824 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54958 - "GET / HTTP/1.1" 404
INFO     2024-01-26 09:22:00.891 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54968 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 09:22:01.167 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54968 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 09:22:30.924 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-26 09:22:30.968 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa4dc004310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa4dc0043a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa4dd40fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa4dd562950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2769426 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa4dd561fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2769426 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa4dd4581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2769426 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2769426 started>
    │    └ <function subprocess_started at 0x7fa4dc976440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2769426 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa4dd458310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa4dc975900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa4dd458310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa4dcdaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa4dcdaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa4dcdabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa4dd3fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa4d3754df0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa4d3754df0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa4d3754df0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa4d3754df0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa4dc83c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa4dc83c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa4dd459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa4dbbdeb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa4dd459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa4d388e470>
          └ <fastapi.applications.FastAPI object at 0x7fa4dbbdeb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa4d3843850>
                     │    └ <function error_handle_business at 0x7fa4dba6b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa4d388e470>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa4d393ca60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d388e440>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa4d388e470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa4d393ca60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa4dba97e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d388e440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d388e440>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa4d388e3b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d388e440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa4d393cc10>
                     │    │             └ <starlette.requests.Request object at 0x7fa4d37affd0>
                     │    └ <function process_middleware_common at 0x7fa4dba6b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa4d388e3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa4d37affd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa4d393cc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa4dc004a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa4dbb70680>
          │    │   │      └ <starlette.requests.Request object at 0x7fa4d37affd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa4d388e380>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa4d388e3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d37a4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa4d388e320>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa4d388e380>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d37a4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa4dba5e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa4d388e320>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d37a4040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa4dbbb24d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fa4dbaa2080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d37a4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d37af880>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa4d387db40>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fa4dbaa2080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa4d37af6a0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fa4d387dab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fa4d37af6a0>
                               └ <function get_request_handler.<locals>.app at 0x7fa4d387d360>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa4dbbb3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa4d37afac0>, 'login_data': UserLogin(email='anhtt@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7fa4d8dded40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fa4dbaa1ea0>
                 └ <function run_in_threadpool at 0x7fa4dc506dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7fa4d8dded40>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fa4d38ea980>
                 │     │         └ <function run_sync at 0x7fa4dc5cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fa4dc5cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fa4d3...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fa4d375d780>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fa4d374be40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'anhtt@rabiloo.com'
    │            │            │           └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7fa4d37afac0>
    │            └ <function UserService.authenticate at 0x7fa4d8dde560>
    └ <app.src.services.user_service.UserService object at 0x7fa4dbaa25c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 65, in authenticate
    raise AuthErrorCode.USERNAME_NOT_FOUND.value
          │             │                  └ <types.DynamicClassAttribute object at 0x7fa4dd54cbe0>
          │             └ <AuthErrorCode.USERNAME_NOT_FOUND: BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
          └ <enum 'AuthErrorCode'>

app.src.exceptions.exception.BusinessException: code='AUTH0001' message='User Not Found' data=None
INFO     2024-01-26 09:22:30.993 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54978 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-26 09:24:14.387 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 09:24:14.489 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 09:24:14.492 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 09:24:14.495 request id: app - uvicorn.server:serve - Finished server process [2769428]
INFO     2024-01-26 09:24:15.646 request id: app - uvicorn.server:serve - Started server process [2770364]
INFO     2024-01-26 09:24:15.648 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 09:24:15.648 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 09:24:19.741 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-26 09:24:19.785 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb78bfa4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb78bfa43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb78d40bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb78d55e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2770362 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb78d55dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2770362 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb78d4541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2770362 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2770362 started>
    │    └ <function subprocess_started at 0x7fb78c892440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2770362 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb78d454310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb78c891900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb78d454310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb78d1b2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb78d1b23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb78d1b3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb78d3f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb783822e00>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb783822e00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb783822e00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb783822e00>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb78c78c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb78c78c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb78d455e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb78bb82b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb78d455e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb783892470>
          └ <fastapi.applications.FastAPI object at 0x7fb78bb82b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb783822bc0>
                     │    └ <function error_handle_business at 0x7fb78ba135b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb783892470>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb783940a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb783892440>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb783892470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb783940a60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb78ba3fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb783892440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb783892440>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb7838923b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb783892440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb783940af0>
                     │    │             └ <starlette.requests.Request object at 0x7fb783758c10>
                     │    └ <function process_middleware_common at 0x7fb78ba139a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb7838923b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb783758c10>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb783940af0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb78bfa4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb78bb145e0>
          │    │   │      └ <starlette.requests.Request object at 0x7fb783758c10>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb783892380>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb7838923b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb783941900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb783892320>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb783892380>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb783941900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb78ba06260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb783892320>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb783941900>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb78bb564d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fb78ba46080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb783941900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb783759210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb783881b40>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fb78ba46080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb78375b4c0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fb783881ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fb78375b4c0>
                               └ <function get_request_handler.<locals>.app at 0x7fb783881360>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb78bb57130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fb783758640>, 'login_data': UserLogin(email='anhtt@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7fb788dead40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fb78ba45ea0>
                 └ <function run_in_threadpool at 0x7fb78c4a6dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7fb788dead40>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fb783764780>
                 │     │         └ <function run_sync at 0x7fb78c56d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fb78c56c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fb783...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fb78378d2c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fb783764180>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'anhtt@rabiloo.com'
    │            │            │           └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7fb783758640>
    │            └ <function UserService.authenticate at 0x7fb788dea560>
    └ <app.src.services.user_service.UserService object at 0x7fb78ba465c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 65, in authenticate
    raise AuthErrorCode.USERNAME_NOT_FOUND.value
          │             │                  └ <types.DynamicClassAttribute object at 0x7fb78d548be0>
          │             └ <AuthErrorCode.USERNAME_NOT_FOUND: BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
          └ <enum 'AuthErrorCode'>

app.src.exceptions.exception.BusinessException: code='AUTH0001' message='User Not Found' data=None
INFO     2024-01-26 09:24:19.801 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56724 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-26 09:24:22.855 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56726 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 09:24:23.084 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56726 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 09:24:47.047 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 09:24:47.280 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjIzNzY4N30.UcbwnuRrcqP7WE23zT-75D66zyp2ygYYQx9ur-7d_jg","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1Mzg4N30.qB1yMBwEMVo0XhPVTmSSBhGJDXvkblFAxiX7R7f1usw"},"links":null,"relationships":null,"timestamp":"2024-01-26 09:24:15"}'}
INFO     2024-01-26 09:24:47.281 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56738 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 09:32:14.099 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 09:32:14.201 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 09:32:14.202 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 09:32:14.203 request id: app - uvicorn.server:serve - Finished server process [2770364]
INFO     2024-01-26 09:32:26.365 request id: app - uvicorn.server:serve - Started server process [2774084]
INFO     2024-01-26 09:32:26.366 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 09:32:26.367 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 09:32:33.023 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56104 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 09:32:33.233 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56104 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 09:32:57.236 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 09:32:57.504 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjIzODE3N30.MzupvP474E__lTr-hPCh90vAROt0zCR4AlegzquiI68","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1NDM3N30.wBUYIJliXSTqiSvCnoLISWj4M-7qPuKwr_HRx6GXA84"},"links":null,"relationships":null,"timestamp":"2024-01-26 09:32:26"}'}
INFO     2024-01-26 09:32:57.505 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56120 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 10:21:11.918 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 10:21:12.023 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 10:21:12.023 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 10:21:12.024 request id: app - uvicorn.server:serve - Finished server process [2774084]
INFO     2024-01-26 10:21:49.388 request id: app - uvicorn.server:serve - Started server process [2792592]
INFO     2024-01-26 10:21:49.389 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 10:21:49.389 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 10:25:05.615 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 10:25:05.716 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 10:25:05.719 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 10:25:05.722 request id: app - uvicorn.server:serve - Finished server process [2792592]
INFO     2024-01-26 10:25:06.701 request id: app - uvicorn.server:serve - Started server process [2794164]
INFO     2024-01-26 10:25:06.702 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 10:25:06.703 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 10:25:27.679 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 10:25:27.781 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 10:25:27.782 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 10:25:27.782 request id: app - uvicorn.server:serve - Finished server process [2794164]
INFO     2024-01-26 10:25:28.650 request id: app - uvicorn.server:serve - Started server process [2794431]
INFO     2024-01-26 10:25:28.651 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 10:25:28.651 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 10:25:55.751 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 10:25:55.852 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 10:25:55.853 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 10:25:55.854 request id: app - uvicorn.server:serve - Finished server process [2794431]
INFO     2024-01-26 10:25:56.757 request id: app - uvicorn.server:serve - Started server process [2794621]
INFO     2024-01-26 10:25:56.758 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 10:25:56.759 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 10:26:01.881 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 10:26:01.984 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 10:26:01.984 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 10:26:01.985 request id: app - uvicorn.server:serve - Finished server process [2794621]
INFO     2024-01-26 10:26:03.003 request id: app - uvicorn.server:serve - Started server process [2794651]
INFO     2024-01-26 10:26:03.004 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 10:26:03.005 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 10:28:46.383 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34938 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 10:28:46.661 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34938 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 10:32:48.911 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 10:32:49.013 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 10:32:49.014 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 10:32:49.014 request id: app - uvicorn.server:serve - Finished server process [2794651]
INFO     2024-01-26 10:32:50.014 request id: app - uvicorn.server:serve - Started server process [2797161]
INFO     2024-01-26 10:32:50.016 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 10:32:50.016 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:00:43.165 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36764 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 11:00:43.384 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36764 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 11:33:29.903 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:33:30.005 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:33:30.006 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:33:30.007 request id: app - uvicorn.server:serve - Finished server process [2797161]
INFO     2024-01-26 11:33:31.181 request id: app - uvicorn.server:serve - Started server process [2819835]
INFO     2024-01-26 11:33:31.183 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:33:31.184 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:33:52.064 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:33:52.167 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:33:52.168 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:33:52.170 request id: app - uvicorn.server:serve - Finished server process [2819835]
INFO     2024-01-26 11:33:53.070 request id: app - uvicorn.server:serve - Started server process [2819963]
INFO     2024-01-26 11:33:53.071 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:33:53.072 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:34:30.829 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:34:30.931 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:34:30.934 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:34:30.936 request id: app - uvicorn.server:serve - Finished server process [2819963]
INFO     2024-01-26 11:34:35.369 request id: app - uvicorn.server:serve - Started server process [2820245]
INFO     2024-01-26 11:34:35.370 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:34:35.370 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:34:38.160 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52206 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 11:34:38.486 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52206 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 11:38:36.157 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-26 11:38:36.204 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7695d80310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7695d803a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f769720fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7697362950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2820243 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7697361fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2820243 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f76972581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2820243 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2820243 started>
    │    └ <function subprocess_started at 0x7f7696696440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2820243 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7697258310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7696695900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7697258310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7696f96440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7696f963b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7696f97eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f76971e7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7695821090>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7695821090>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7695821090>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7695821090>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7696590550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f76965905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7697259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f769595eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7697259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f768d6862c0>
          └ <fastapi.applications.FastAPI object at 0x7f769595eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f768d553340>
                     │    └ <function error_handle_business at 0x7f76957ef5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f768d6862c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f768d58bf40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f768d686290>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f768d6862c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f768d58bf40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f769581be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f768d686290>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f768d686290>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f768d686200>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f768d686290>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f768d594160>
                     │    │             └ <starlette.requests.Request object at 0x7f768d5bcd90>
                     │    └ <function process_middleware_common at 0x7f76957ef9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f768d686200>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f768d5bcd90>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f768d594160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7695d80a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f76958f06d0>
          │    │   │      └ <starlette.requests.Request object at 0x7f768d5bcd90>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f768d6861d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f768d686200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f768d594040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f768d686170>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f768d6861d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f768d594040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f76957e2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f768d686170>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f768d594040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f76959324d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f7695822080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f768d594040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f768d5bd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f768d669bd0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f7695822080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f768d5bd450>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f768d669b40>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f768d5bd450>
                               └ <function get_request_handler.<locals>.app at 0x7f768d6693f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7695933130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f768d5bd570>, 'login_data': UserLogin(email='anhtt@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f768eb82d40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f7695821ea0>
                 └ <function run_in_threadpool at 0x7f769627add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f768eb82d40>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f768d452900>
                 │     │         └ <function run_sync at 0x7f7696341090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f7696340820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f768d...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f768d73f640>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f768d7ed880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'anhtt@rabiloo.com'
    │            │            │           └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f768d5bd570>
    │            └ <function UserService.authenticate at 0x7f768eb82560>
    └ <app.src.services.user_service.UserService object at 0x7f76958225c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 65, in authenticate
    raise AuthErrorCode.USERNAME_NOT_FOUND.value
          │             │                  └ <types.DynamicClassAttribute object at 0x7f769734cbe0>
          │             └ <AuthErrorCode.USERNAME_NOT_FOUND: BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
          └ <enum 'AuthErrorCode'>

app.src.exceptions.exception.BusinessException: code='AUTH0001' message='User Not Found' data=None
INFO     2024-01-26 11:38:36.231 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44576 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-26 11:39:26.643 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:39:26.744 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:39:26.746 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:39:26.748 request id: app - uvicorn.server:serve - Finished server process [2820245]
INFO     2024-01-26 11:39:28.677 request id: app - uvicorn.server:serve - Started server process [2821993]
INFO     2024-01-26 11:39:28.678 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:39:28.679 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:39:31.247 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35962 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 11:39:31.588 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35962 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 11:39:47.256 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 11:39:47.533 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI0NTc4N30.-QzAZG3buDtOqNttXd37GYX481WR3tljmnf0KD1WAAI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2MTk4N30.ATHynie7IS2vGSytgWY2VmZlTcKumudn8-lOqFeq-4M"},"links":null,"relationships":null,"timestamp":"2024-01-26 11:39:28"}'}
INFO     2024-01-26 11:39:47.534 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35964 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 11:41:41.458 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56600 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 11:41:41.626 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56600 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 11:42:06.711 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 11:42:06.949 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI0NTkyNn0.fdH12d77e8X1teVTk3gusZCkn9JfWCouiHDPa7lax0c","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2MjEyNn0.W4LoJsI45QRxCp-uC9uw27c6u_7Iu7CaBRHFrvyOTxw"},"links":null,"relationships":null,"timestamp":"2024-01-26 11:39:28"}'}
INFO     2024-01-26 11:42:06.950 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56616 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 11:47:00.333 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:47:00.437 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:47:00.439 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:47:00.441 request id: app - uvicorn.server:serve - Finished server process [2821993]
INFO     2024-01-26 11:47:01.386 request id: app - uvicorn.server:serve - Started server process [2824597]
INFO     2024-01-26 11:47:01.388 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:47:01.388 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:47:34.628 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:47:34.730 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:47:34.732 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:47:34.732 request id: app - uvicorn.server:serve - Finished server process [2824597]
INFO     2024-01-26 11:47:35.654 request id: app - uvicorn.server:serve - Started server process [2824797]
INFO     2024-01-26 11:47:35.655 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:47:35.657 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:47:49.214 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:47:49.318 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:47:49.320 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:47:49.322 request id: app - uvicorn.server:serve - Finished server process [2824797]
INFO     2024-01-26 11:48:24.962 request id: app - uvicorn.server:serve - Started server process [2825103]
INFO     2024-01-26 11:48:24.965 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:48:24.966 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:48:41.732 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:48:41.834 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:48:41.837 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:48:41.838 request id: app - uvicorn.server:serve - Finished server process [2825103]
INFO     2024-01-26 11:48:42.884 request id: app - uvicorn.server:serve - Started server process [2825206]
INFO     2024-01-26 11:48:42.885 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:48:42.886 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:50:47.292 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:50:47.397 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:50:47.398 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:50:47.399 request id: app - uvicorn.server:serve - Finished server process [2825206]
INFO     2024-01-26 11:50:48.284 request id: app - uvicorn.server:serve - Started server process [2825959]
INFO     2024-01-26 11:50:48.286 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:50:48.286 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:53:07.450 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:53:07.554 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:53:07.554 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:53:07.555 request id: app - uvicorn.server:serve - Finished server process [2825959]
INFO     2024-01-26 11:53:08.486 request id: app - uvicorn.server:serve - Started server process [2826765]
INFO     2024-01-26 11:53:08.487 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 11:53:08.487 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 11:53:19.933 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 11:53:20.037 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 11:53:20.038 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 11:53:20.039 request id: app - uvicorn.server:serve - Finished server process [2826765]
INFO     2024-01-26 12:48:00.752 request id: app - uvicorn.server:serve - Started server process [2846453]
INFO     2024-01-26 12:48:00.754 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 12:48:00.754 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 12:48:06.435 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53942 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 12:48:06.749 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53942 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 12:48:27.005 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-01-26 12:48:27.047 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5127288310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f51272883a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f512870bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f512885e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=2830551 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f512885dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=2830551 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f51287541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2830551 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2830551 started>
    │    └ <function subprocess_started at 0x7f5127b8e440>
    └ <SpawnProcess name='SpawnProcess-2' parent=2830551 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5128754310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5127b8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5128754310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5127fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5127fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5127fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f51286f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f511e94a4d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f511e94a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f511e94a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f511e94a4d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5127a88550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5127a885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5128755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5126e6ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5128755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f511eb92ec0>
          └ <fastapi.applications.FastAPI object at 0x7f5126e6ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f511e949e70>
                     │    └ <function error_handle_business at 0x7f5126cfb5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f511eb92ec0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f511ec2d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f511eb92e90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f511eb92ec0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '63', 'accept': 'application/json', 'user-age...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f511ec2d120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f5126d27e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f511eb92e90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f511eb92e90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f511eb92e00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f511eb92e90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f511ec2dea0>
                     │    │             └ <starlette.requests.Request object at 0x7f511ea9ba30>
                     │    └ <function process_middleware_common at 0x7f5126cfb9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f511eb92e00>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f511ea9ba30>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f511ec2dea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5127288a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5126dfc8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f511ea9ba30>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f511eb92dd0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f511eb92e00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f511eaa43a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f511eb92d70>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f511eb92dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f511eaa43a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5126cee260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f511eb92d70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f511eaa43a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f5126e3e4d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f5126d32080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f511eaa43a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f511ea9b910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f511eb71fc0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f5126d32080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f511ea9b820>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f511eb71f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f511ea9b820>
                               └ <function get_request_handler.<locals>.app at 0x7f511eb717e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5126e3f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f511ea9b9a0>, 'login_data': UserLogin(email='anhtt@rabiloo.com', ...
                 │                 │         └ <function login_email_password at 0x7f512417ed40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f5126d31ea0>
                 └ <function run_in_threadpool at 0x7f512778add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function login_email_password at 0x7f512417ed40>, db_session=<sqlalchemy.orm.session.Session object at 0x...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f511ea4b540>
                 │     │         └ <function run_sync at 0x7f5127851090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f5127850820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f511e...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f511ea4bd40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f511ecd3680>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 30, in login_email_password
    user_service.authenticate(db_session, login_data.email, login_data.password)
    │            │            │           │          │      │          └ 'Rabiloo@123'
    │            │            │           │          │      └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            │           │          └ 'anhtt@rabiloo.com'
    │            │            │           └ UserLogin(email='anhtt@rabiloo.com', password='Rabiloo@123')
    │            │            └ <sqlalchemy.orm.session.Session object at 0x7f511ea9b9a0>
    │            └ <function UserService.authenticate at 0x7f512417e560>
    └ <app.src.services.user_service.UserService object at 0x7f5126d325c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 65, in authenticate
    raise AuthErrorCode.USERNAME_NOT_FOUND.value
          │             │                  └ <types.DynamicClassAttribute object at 0x7f5128848be0>
          │             └ <AuthErrorCode.USERNAME_NOT_FOUND: BusinessException(ExceptionDetail(code='AUTH0001', message='User Not Found', data=None))>
          └ <enum 'AuthErrorCode'>

app.src.exceptions.exception.BusinessException: code='AUTH0001' message='User Not Found' data=None
INFO     2024-01-26 12:48:27.063 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53944 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-26 12:48:42.897 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 12:48:43.151 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI0OTkyM30.lm5wBdPCivNCH_wTf2vPPgRZMp728CUbzKwT5JD49OE","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NjEyM30.cg5WqHq9stpS761isJLc-Mc6WAo-2IOGpsBgFXCCPBg"},"links":null,"relationships":null,"timestamp":"2024-01-26 12:48:00"}'}
INFO     2024-01-26 12:48:43.152 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52780 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 12:52:12.221 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 12:52:12.323 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 12:52:12.324 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 12:52:12.326 request id: app - uvicorn.server:serve - Finished server process [2846453]
INFO     2024-01-26 12:52:13.262 request id: app - uvicorn.server:serve - Started server process [2847896]
INFO     2024-01-26 12:52:13.263 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 12:52:13.265 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 12:52:16.941 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58216 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 12:52:17.200 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58216 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 12:53:55.751 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 12:53:56.031 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1MDIzNn0.x9wjiiyhxpR9CQFuE3lL7lAqPEg-i9YuUVHkIEQzxxY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NjQzNn0.lspHAT3NvQcJoY7Qtf2CMloHvviIilWBQmWc0wXqmCc"},"links":null,"relationships":null,"timestamp":"2024-01-26 12:52:12"}'}
INFO     2024-01-26 12:53:56.032 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53246 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 12:57:48.002 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 12:57:48.104 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 12:57:48.106 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 12:57:48.108 request id: app - uvicorn.server:serve - Finished server process [2847896]
INFO     2024-01-26 12:57:49.086 request id: app - uvicorn.server:serve - Started server process [2850368]
INFO     2024-01-26 12:57:49.088 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 12:57:49.089 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:01:36.251 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:01:36.353 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:01:36.355 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:01:36.358 request id: app - uvicorn.server:serve - Finished server process [2850368]
INFO     2024-01-26 13:01:40.077 request id: app - uvicorn.server:serve - Started server process [2851903]
INFO     2024-01-26 13:01:40.078 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:01:40.080 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:01:59.789 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47102 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 13:02:00.100 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47102 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 13:02:12.008 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47118 - "GET /actuator/health HTTP/1.1" 200
INFO     2024-01-26 13:03:11.261 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 13:03:11.546 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1MDc5MX0.mnLc4pEEp3BIFLE0YGoCZqwgJC36-UQVJeZQNyO5rlQ","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2Njk5MX0.5SdD2kh0pJuNce0NG_fRVaiJ2L7fCRympPL2IXpkrBc"},"links":null,"relationships":null,"timestamp":"2024-01-26 13:01:39"}'}
INFO     2024-01-26 13:03:11.548 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35258 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 13:06:07.949 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:06:08.050 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:06:08.053 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:06:08.055 request id: app - uvicorn.server:serve - Finished server process [2851903]
INFO     2024-01-26 13:06:11.514 request id: app - uvicorn.server:serve - Started server process [2853482]
INFO     2024-01-26 13:06:11.516 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:06:11.517 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:07:49.700 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4f5ebf3910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f4f5ebf39a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f4f65771120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f4f65737e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2853474 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4f65737490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2853474 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4f6578a9b0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2853474 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2853474 started>
    │    └ <function subprocess_started at 0x7f4f64495bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2853474 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4f65789ab0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4f64494ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f4f65789ab0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f4f656b5a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f4f656b5990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f4f656b7490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f4f65942830>
    └ <Handle <TaskStepMethWrapper object at 0x7f4f65a63160>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4f65a63160>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4f65a63160>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4f65a63160>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4f6451b250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4f6451b2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4f6572b4f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4f5e81cc40>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4f6572b4f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4f4a74dc90>
          └ <fastapi.applications.FastAPI object at 0x7f4f5e81cc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4f4a38f9a0>
                     │    └ <function error_handle_business at 0x7f4f5e843370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4f4a74dc90>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4f4a76fd90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4f4a74dc60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4f4a74dc90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4f4a76fd90>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f4f5e6bc160>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4f4a74dc60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f4f4a74dc60>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4f4a74dbd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4f4a74dc60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4f4a76fe20>
                     │    │             └ <starlette.requests.Request object at 0x7f4f4a3db6a0>
                     │    └ <function process_middleware_common at 0x7f4f5e843910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4f4a74dbd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4f4a3db6a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4f4a76fe20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4f5ec080d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4f5e7ad990>
          │    │   │      └ <starlette.requests.Request object at 0x7f4f4a3db6a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4f4a74dba0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4f4a74dbd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4f4a76fb50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4f4a74db40>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4f4a74dba0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4f4a76fb50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4f5e65d240>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4f4a74db40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4f4a76fb50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f4f5e7e9630>
          └ <fastapi.routing.APIRoute object at 0x7f4f4a779a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4f4a76fb50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4f4a3daa10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4f4a76cc10>
          └ <fastapi.routing.APIRoute object at 0x7f4f4a779a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4f4a38ff70>
                     └ <function get_request_handler.<locals>.app at 0x7f4f4a76cb80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4f5e7ea290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f4f4a6bfe20>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f4f4a779ae0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f4f4a3da950>
                 │                └ <function ResourceService.upload_resource at 0x7f4f5ef301f0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f4f5c129960>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    resource_create.key = key
    │                     └ 'resources/1706249269_Screenshot from 2024-01-26 11-32-17.png'
    └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-01-26 13:07:49.754 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57708 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:07:58.709 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:07:58.812 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:07:58.816 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:07:58.819 request id: app - uvicorn.server:serve - Finished server process [2853482]
INFO     2024-01-26 13:08:02.425 request id: app - uvicorn.server:serve - Started server process [2854196]
INFO     2024-01-26 13:08:02.427 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:08:02.428 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:08:08.255 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7ff42f3a8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7ff42f3a83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7ff43080fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7ff430962950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7ff430961fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7ff4308581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2854194 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2854194 started>
    │    └ <function subprocess_started at 0x7ff42fd26440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2854194 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7ff430858310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7ff42fd25900>
    │    │                  └ <uvicorn.server.Server object at 0x7ff430858310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7ff4305b6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7ff4305b63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7ff4305b7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7ff4307fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7ff426b57fd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7ff426b57fd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7ff426b57fd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7ff426b57fd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7ff42fbe0550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7ff42fbe05e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff430859e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7ff42ef82b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff430859e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff426c8e5f0>
          └ <fastapi.applications.FastAPI object at 0x7ff42ef82b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7ff426b55900>
                     │    └ <function error_handle_business at 0x7ff42ee0f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff426c8e5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff426d25000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff426c8e5c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff426c8e5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff426d25000>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7ff42ee3be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff426c8e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7ff426c8e5c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff426c8e530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff426c8e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff426d25090>
                     │    │             └ <starlette.requests.Request object at 0x7ff426b54be0>
                     │    └ <function process_middleware_common at 0x7ff42ee0f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff426c8e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7ff426b54be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff426d25090>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7ff42f3a8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7ff42ef146d0>
          │    │   │      └ <starlette.requests.Request object at 0x7ff426b54be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff426c8e500>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff426c8e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff426d25ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff426c8e4a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff426c8e500>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff426d25ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7ff42ee02260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff426c8e4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff426d25ea0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7ff42ef564d0>
          └ <fastapi.routing.APIRoute object at 0x7ff426cbe380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff426d25ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff426b55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7ff426c6e8c0>
          └ <fastapi.routing.APIRoute object at 0x7ff426cbe380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7ff426b57460>
                     └ <function get_request_handler.<locals>.app at 0x7ff426c6e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7ff42ef57130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7ff426c6db40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7ff426cbe440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7ff426b57a60>
                 │                └ <function ResourceService.upload_resource at 0x7ff4273da0e0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7ff42c1cf400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    resource_create.key = key
    │                     └ 'resources/1706249288_Screenshot from 2024-01-26 11-32-17.png'
    └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-01-26 13:08:08.272 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55162 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:10:46.962 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:10:47.067 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:10:47.067 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:10:47.068 request id: app - uvicorn.server:serve - Finished server process [2854196]
INFO     2024-01-26 13:15:37.910 request id: app - uvicorn.server:serve - Started server process [2856831]
INFO     2024-01-26 13:15:37.911 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:15:37.913 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:16:25.600 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:16:25.702 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:16:25.705 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:16:25.708 request id: app - uvicorn.server:serve - Finished server process [2856831]
INFO     2024-01-26 13:17:07.859 request id: app - uvicorn.server:serve - Started server process [2857379]
INFO     2024-01-26 13:17:07.860 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:17:07.861 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:18:00.245 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f0bfa7cc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f0bfa7cc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f0bfbc0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f0bfbd62950>
           └ <SpawnProcess name='SpawnProcess-9' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f0bfbd61fc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f0bfbc581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=2854194 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=2854194 started>
    │    └ <function subprocess_started at 0x7f0bfb14a440>
    └ <SpawnProcess name='SpawnProcess-9' parent=2854194 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f0bfbc58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0bfb149900>
    │    │                  └ <uvicorn.server.Server object at 0x7f0bfbc58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f0bfb58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f0bfb58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f0bfb58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f0bfbbfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0bf1f5b940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0bf1f5b940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0bf1f5b940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0bf1f5b940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0bfb008550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f0bfb0085e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0bfbc59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f0bfa3aab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0bfbc59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0bf2092620>
          └ <fastapi.applications.FastAPI object at 0x7f0bfa3aab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0bf1f59990>
                     │    └ <function error_handle_business at 0x7f0bfa23b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0bf2092620>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_by_attribute'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0bf2128e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0bf20925f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0bf2092620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0bf2128e50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f0bfa267e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0bf20925f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f0bf20925f0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0bf2092560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0bf20925f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0bf2128ee0>
                     │    │             └ <starlette.requests.Request object at 0x7f0bf1f58c70>
                     │    └ <function process_middleware_common at 0x7f0bfa23b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0bf2092560>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0bf1f58c70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0bf2128ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_by_attribute'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f0bfa7cca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f0bfa33c810>
          │    │   │      └ <starlette.requests.Request object at 0x7f0bf1f58c70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0bf2092530>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0bf2092560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0bf2129cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0bf20924d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0bf2092530>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0bf2129cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0bfa22e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0bf20924d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0bf2129cf0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f0bfa37e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f0bf20c63b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0bf2129cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0bf1f592d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0bf207a710>
          └ <fastapi.routing.APIRoute object at 0x7f0bf20c63b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0bf1f5b760>
                     └ <function get_request_handler.<locals>.app at 0x7f0bf207a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f0bfa37f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f0bf2079990>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f0bf20c6470>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f0bf1f5b460>
                 │                └ <function ResourceService.upload_resource at 0x7f0bf27ddf30>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f0bf357b400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f0bf27de170>
    └ <app.src.services.resource_service.ResourceService object at 0x7f0bf357b400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), info_value, "name")
               │    │            │                                          │       │   └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                                          │       └ 'ResourceStage'
               │    │            │                                          └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f0bf35cff40>
               │    └ <app.src.services.base_service.BaseService object at 0x7f0bf357b430>
               └ <app.src.services.resource_service.ResourceService object at 0x7f0bf357b400>

AttributeError: 'PostgreSQLDB' object has no attribute 'get_by_attribute'
INFO     2024-01-26 13:18:00.259 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57568 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:20:52.062 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:20:52.164 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:20:52.165 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:20:52.166 request id: app - uvicorn.server:serve - Finished server process [2857379]
INFO     2024-01-26 13:20:53.084 request id: app - uvicorn.server:serve - Started server process [2858683]
INFO     2024-01-26 13:20:53.085 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:20:53.086 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:21:04.334 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:21:04.438 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:21:04.439 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:21:04.440 request id: app - uvicorn.server:serve - Finished server process [2858683]
INFO     2024-01-26 13:21:05.369 request id: app - uvicorn.server:serve - Started server process [2858767]
INFO     2024-01-26 13:21:05.370 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:21:05.371 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:21:17.270 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f977cae8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f977cae83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f977df0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f977e05e950>
           └ <SpawnProcess name='SpawnProcess-11' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f977e05dfc0>
    └ <SpawnProcess name='SpawnProcess-11' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f977df541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=2854194 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=2854194 started>
    │    └ <function subprocess_started at 0x7f977d466440>
    └ <SpawnProcess name='SpawnProcess-11' parent=2854194 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f977df54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f977d465900>
    │    │                  └ <uvicorn.server.Server object at 0x7f977df54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f977dd06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f977dd063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f977dd07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f977def7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f977825b7f0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f977825b7f0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f977825b7f0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f977825b7f0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f977d324550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f977d3245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f977df55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f977c6c6b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f977df55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f977838e5f0>
          └ <fastapi.applications.FastAPI object at 0x7f977c6c6b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9778259900>
                     │    └ <function error_handle_business at 0x7f977c5575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f977838e5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9778421000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f977838e5c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f977838e5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9778421000>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f977c587e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f977838e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f977838e5c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f977838e530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f977838e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9778421090>
                     │    │             └ <starlette.requests.Request object at 0x7f9778258be0>
                     │    └ <function process_middleware_common at 0x7f977c5579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f977838e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9778258be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9778421090>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f977cae8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f977c658900>
          │    │   │      └ <starlette.requests.Request object at 0x7f9778258be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f977838e500>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f977838e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9778421ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f977838e4a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f977838e500>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9778421ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f977c54a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f977838e4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9778421ea0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f977c69a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f97783be380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9778421ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9778259240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f977836e8c0>
          └ <fastapi.routing.APIRoute object at 0x7f97783be380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f977825b460>
                     └ <function get_request_handler.<locals>.app at 0x7f977836e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f977c69b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f977836db40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f97783be440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f977825ba60>
                 │                └ <function ResourceService.upload_resource at 0x7f9778ad60e0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f977996f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f9778ad6320>
    └ <app.src.services.resource_service.ResourceService object at 0x7f977996f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), info_value, "name")
               │    │            │                 │                        │       │   └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f97799aeb00>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f977996f5b0>
               │    └ <app.src.services.base_service.BaseService object at 0x7f977996f430>
               └ <app.src.services.resource_service.ResourceService object at 0x7f977996f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 21, in get_by_attribute
    return self.session.query(model).filter(getattr(model, attribute_name) == attribute_value).first()
           │                  │                     │      │                  └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │                  │                     │      └ 'name'
           │                  │                     └ <class 'app.src.models.resource_stage.ResourceStage'>
           │                  └ <class 'app.src.models.resource_stage.ResourceStage'>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f977996f5b0>

AttributeError: 'PostgreSQLDB' object has no attribute 'session'
INFO     2024-01-26 13:21:17.288 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52150 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:23:28.425 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:23:28.527 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:23:28.528 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:23:28.529 request id: app - uvicorn.server:serve - Finished server process [2858767]
INFO     2024-01-26 13:29:53.083 request id: app - uvicorn.server:serve - Started server process [2862581]
INFO     2024-01-26 13:29:53.084 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:29:53.086 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:30:01.107 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f718c4f8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f718c4f83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f718d90bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f718da5e950>
           └ <SpawnProcess name='SpawnProcess-22' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f718da5dfc0>
    └ <SpawnProcess name='SpawnProcess-22' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f718d9541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=2854194 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=2854194 started>
    │    └ <function subprocess_started at 0x7f718ce76440>
    └ <SpawnProcess name='SpawnProcess-22' parent=2854194 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f718d954310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f718ce75900>
    │    │                  └ <uvicorn.server.Server object at 0x7f718d954310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f718d706440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f718d7063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f718d707eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f718d8f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7183d17790>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7183d17790>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7183d17790>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7183d17790>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f718cd30550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f718cd305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f718d955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f718c0d2b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f718d955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7183e4a5c0>
          └ <fastapi.applications.FastAPI object at 0x7f718c0d2b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7183d158d0>
                     │    └ <function error_handle_business at 0x7f718bf5f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7183e4a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceService' object has no attribute 'check_info'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7183ee8dc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7183e4a590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7183e4a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7183ee8dc0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f718bf8be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7183e4a590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f7183e4a590>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7183e4a500>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7183e4a590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7183ee8e50>
                     │    │             └ <starlette.requests.Request object at 0x7f7183d14bb0>
                     │    └ <function process_middleware_common at 0x7f718bf5f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7183e4a500>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7183d14bb0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7183ee8e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceService' object has no attribute 'check_info'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f718c4f8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f718c064630>
          │    │   │      └ <starlette.requests.Request object at 0x7f7183d14bb0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7183e4a4d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7183e4a500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7183ee9c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7183e4a470>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7183e4a4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7183ee9c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f718bf52260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7183e4a470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7183ee9c60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f718c0a64d0>
          └ <fastapi.routing.APIRoute object at 0x7f7183e7e350>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7183ee9c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7183d15210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7183e32680>
          └ <fastapi.routing.APIRoute object at 0x7f7183e7e350>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7183d174c0>
                     └ <function get_request_handler.<locals>.app at 0x7f7183e325f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f718c0a7130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f7183e31900>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f7183e7e410>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f7183d17a60>
                 │                └ <function ResourceService.upload_resource at 0x7f71884d9f30>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f7189300040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │               └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    └ <app.src.services.resource_service.ResourceService object at 0x7f7189300040>

AttributeError: 'ResourceService' object has no attribute 'check_info'
INFO     2024-01-26 13:30:01.131 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53020 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:30:51.839 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:30:51.940 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:30:51.942 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:30:51.944 request id: app - uvicorn.server:serve - Finished server process [2862581]
INFO     2024-01-26 13:31:24.813 request id: app - uvicorn.server:serve - Started server process [2863153]
INFO     2024-01-26 13:31:24.814 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:31:24.815 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:31:36.761 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:31:36.862 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:31:36.863 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:31:36.863 request id: app - uvicorn.server:serve - Finished server process [2863153]
INFO     2024-01-26 13:32:07.620 request id: app - uvicorn.server:serve - Started server process [2863420]
INFO     2024-01-26 13:32:07.622 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:32:07.623 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:32:13.140 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f1441d20310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f1441d203a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f144310bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f144325e950>
           └ <SpawnProcess name='SpawnProcess-27' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f144325dfc0>
    └ <SpawnProcess name='SpawnProcess-27' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f14431541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=2854194 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=2854194 started>
    │    └ <function subprocess_started at 0x7f1442692440>
    └ <SpawnProcess name='SpawnProcess-27' parent=2854194 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1443154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1442691900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1443154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1442f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1442f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1442f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f14430f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f143952f850>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f143952f850>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f143952f850>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f143952f850>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f144255c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f144255c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1443155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f14418feb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1443155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f143966a620>
          └ <fastapi.applications.FastAPI object at 0x7f14418feb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f143952d930>
                     │    └ <function error_handle_business at 0x7f144178f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f143966a620>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_by_attribute'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f14396f8ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f143966a5f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f143966a620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f14396f8ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f14417bbe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f143966a5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f143966a5f0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f143966a560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f143966a5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f14396f8f70>
                     │    │             └ <starlette.requests.Request object at 0x7f143952cc10>
                     │    └ <function process_middleware_common at 0x7f144178f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f143966a560>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f143952cc10>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f14396f8f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_by_attribute'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1441d20a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1441890680>
          │    │   │      └ <starlette.requests.Request object at 0x7f143952cc10>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f143966a530>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f143966a560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f14396f9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f143966a4d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f143966a530>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f14396f9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1441782260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f143966a4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f14396f9d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f14418d24d0>
          └ <fastapi.routing.APIRoute object at 0x7f14396923b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f14396f9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f143952d270>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f143964a7a0>
          └ <fastapi.routing.APIRoute object at 0x7f14396923b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f143952f250>
                     └ <function get_request_handler.<locals>.app at 0x7f143964a710>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f14418d3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f1439649a20>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f1439692470>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f143952f460>
                 │                └ <function ResourceService.upload_resource at 0x7f1439d95fc0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f143ab6f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f1439d96200>
    └ <app.src.services.resource_service.ResourceService object at 0x7f143ab6f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), info_value, "name")
               │    │            │                                          │       │   └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                                          │       └ 'ResourceStage'
               │    │            │                                          └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f143abc3f40>
               │    └ <app.src.services.base_service.BaseService object at 0x7f143ab6f430>
               └ <app.src.services.resource_service.ResourceService object at 0x7f143ab6f400>

AttributeError: 'PostgreSQLDB' object has no attribute 'get_by_attribute'
INFO     2024-01-26 13:32:13.154 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58204 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:34:44.243 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:34:44.345 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:34:44.346 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:34:44.346 request id: app - uvicorn.server:serve - Finished server process [2863420]
INFO     2024-01-26 13:34:45.223 request id: app - uvicorn.server:serve - Started server process [2864413]
INFO     2024-01-26 13:34:45.225 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:34:45.226 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:34:50.143 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f988fdb8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f988fdb83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f989120fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9891362950>
           └ <SpawnProcess name='SpawnProcess-28' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9891361fc0>
    └ <SpawnProcess name='SpawnProcess-28' parent=2854194 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f98912581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=2854194 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=2854194 started>
    │    └ <function subprocess_started at 0x7f989071e440>
    └ <SpawnProcess name='SpawnProcess-28' parent=2854194 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9891258310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f989071d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9891258310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9890fd2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9890fd23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9890fd3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f98911fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f988755ffd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f988755ffd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f988755ffd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f988755ffd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f98905e8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f98905e85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9891259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f988f99ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9891259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f98876965f0>
          └ <fastapi.applications.FastAPI object at 0x7f988f99ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f988755fe20>
                     │    └ <function error_handle_business at 0x7f988f82b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f98876965f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9887729000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f98876965c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f98876965f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9887729000>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f988f857e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f98876965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f98876965c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9887696530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f98876965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9887729090>
                     │    │             └ <starlette.requests.Request object at 0x7f988755cbe0>
                     │    └ <function process_middleware_common at 0x7f988f82b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9887696530>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f988755cbe0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9887729090>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f988fdb8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f988f92c680>
          │    │   │      └ <starlette.requests.Request object at 0x7f988755cbe0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9887696500>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9887696530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9887729ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f98876964a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9887696500>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9887729ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f988f81e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f98876964a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9887729ea0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f988f96e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f98876c2380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9887729ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f988755d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f98876768c0>
          └ <fastapi.routing.APIRoute object at 0x7f98876c2380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f988755f460>
                     └ <function get_request_handler.<locals>.app at 0x7f9887676830>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f988f96f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f9887675b40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f98876c2440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f988755fa60>
                 │                └ <function ResourceService.upload_resource at 0x7f988c1260e0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f988cbcf400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f988c126320>
    └ <app.src.services.resource_service.ResourceService object at 0x7f988cbcf400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), info_value, "name")
               │    │            │                 │                        │       │   └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f988cc0ab00>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f988cbcf5b0>
               │    └ <app.src.services.base_service.BaseService object at 0x7f988cbcf430>
               └ <app.src.services.resource_service.ResourceService object at 0x7f988cbcf400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 23, in get_by_attribute
    query = session.query(model).filter(getattr(model, attribute) == value)
            │       │     │                     │      │             └ 'name'
            │       │     │                     │      └ '367814e6-063c-560c-b428-20ed1ed85f4f'
            │       │     │                     └ <class 'app.src.models.resource_stage.ResourceStage'>
            │       │     └ <class 'app.src.models.resource_stage.ResourceStage'>
            │       └ <function Session.query at 0x7f988dce3d90>
            └ <sqlalchemy.orm.session.Session object at 0x7f988755f820>

AttributeError: type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'
INFO     2024-01-26 13:34:50.165 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60602 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:40:46.729 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:40:46.831 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:40:46.833 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:40:46.836 request id: app - uvicorn.server:serve - Finished server process [2864413]
INFO     2024-01-26 13:40:50.139 request id: app - uvicorn.server:serve - Started server process [2866531]
INFO     2024-01-26 13:40:50.141 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:40:50.142 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:40:55.571 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5e6341b760>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f5e6341b7f0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f5e71f88f70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f5e71f4fc70>
           └ <SpawnProcess name='SpawnProcess-1' parent=2866526 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5e71f4f2e0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2866526 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5e71fa27a0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2866526 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2866526 started>
    │    └ <function subprocess_started at 0x7f5e704a9a20>
    └ <SpawnProcess name='SpawnProcess-1' parent=2866526 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5e71fa2050>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5e704a8d30>
    │    │                  └ <uvicorn.server.Server object at 0x7f5e71fa2050>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5e71ecda20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5e71ecd990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5e71ecf490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5e7213e830>
    └ <Handle <TaskStepMethWrapper object at 0x7f5e52bc7d00>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5e52bc7d00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5e52bc7d00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5e52bc7d00>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5e705330a0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5e70533130>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5e72230d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5e63040a30>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5e72230d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5e52ce1a80>
          └ <fastapi.applications.FastAPI object at 0x7f5e63040a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f5e52bc4d90>
                     │    └ <function error_handle_business at 0x7f5e630671c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5e52ce1a80>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5e52cff910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5e52ce1a50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5e52ce1a80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5e52cff910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f5e62e9fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5e52ce1a50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f5e52ce1a50>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5e52ce19c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5e52ce1a50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5e52cff9a0>
                     │    │             └ <starlette.requests.Request object at 0x7f5e52bc4070>
                     │    └ <function process_middleware_common at 0x7f5e63067760>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5e52ce19c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5e52bc4070>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5e52cff9a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5e6341beb0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5e62fcd760>
          │    │   │      └ <starlette.requests.Request object at 0x7f5e52bc4070>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5e52ce1990>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5e52ce19c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5e52bd8820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5e52ce1930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5e52ce1990>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5e52bd8820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5e62e7d7b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5e52ce1930>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5e52bd8820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f5e6300d480>
          └ <fastapi.routing.APIRoute object at 0x7f5e52d05810>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5e52bd8820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5e52bc46d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5e52cfc820>
          └ <fastapi.routing.APIRoute object at 0x7f5e52d05810>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5e52bc7e20>
                     └ <function get_request_handler.<locals>.app at 0x7f5e52cfc790>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5e6300e0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f5e52c57a30>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f5e52d058d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f5e52bc7ac0>
                 │                └ <function ResourceService.upload_resource at 0x7f5e53187e20>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f5e60393fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f5e531a00d0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f5e60393fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), info_value, "name")
               │    │            │                 │                        │       │   └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f5e603e5870>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f5e603fb8e0>
               │    └ <app.src.services.base_service.BaseService object at 0x7f5e60393fd0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f5e60393fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 23, in get_by_attribute
    query = session.query(model).filter(getattr(model, attribute) == value)
            │       │     │                     │      │             └ 'name'
            │       │     │                     │      └ '367814e6-063c-560c-b428-20ed1ed85f4f'
            │       │     │                     └ <class 'app.src.models.resource_stage.ResourceStage'>
            │       │     └ <class 'app.src.models.resource_stage.ResourceStage'>
            │       └ <function Session.query at 0x7f5e613ea050>
            └ <sqlalchemy.orm.session.Session object at 0x7f5e62ebc790>

AttributeError: type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'
INFO     2024-01-26 13:40:55.616 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55384 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:41:08.199 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:41:08.305 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:41:08.306 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:41:08.307 request id: app - uvicorn.server:serve - Finished server process [2866531]
INFO     2024-01-26 13:41:13.041 request id: app - uvicorn.server:serve - Started server process [2866677]
INFO     2024-01-26 13:41:13.043 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:41:13.043 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:44:18.125 request id: app - uvicorn.server:serve - Started server process [2867807]
INFO     2024-01-26 13:44:18.127 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:44:18.127 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:47:45.193 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fcfeab6d000>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fcfe840d2a0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fcfe8060040; closed: -1>

psycopg2.errors.UndefinedColumn: column resource_stages.update_at does not exist
LINE 1: ..._stages.created_at AS resource_stages_created_at, resource_s...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_stages.updated_at".



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fcffb679120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fcffb63fe20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2867800 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcffb63f490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2867800 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcffb692830>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2867800 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2867800 started>
    │    └ <function subprocess_started at 0x7fcff9395bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2867800 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcffb691e40>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcff9394ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7fcffb691e40>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcffb5bda20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcffb5bd990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcffb5bf490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcffb83e830>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfe81542b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcfe81542b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcfe81542b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfe81542b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcff941f250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcff941f2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcffb917b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcff873cac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcffb917b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfe8655b10>
          └ <fastapi.applications.FastAPI object at 0x7fcff873cac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcfe82e3520>
                     │    └ <function error_handle_business at 0x7fcff8763370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfe8655b10>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_stages.update_at does not exist\nLINE 1: ..._stages.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfe86779a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfe8655ae0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfe8655b10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfe86779a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcff85d8040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfe8655ae0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcfe8655ae0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfe8655a50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfe8655ae0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfe8677a30>
                     │    │             └ <starlette.requests.Request object at 0x7fcfe82e0100>
                     │    └ <function process_middleware_common at 0x7fcff8763910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfe8655a50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcfe82e0100>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfe8677a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_stages.update_at does not exist\nLINE 1: ..._stages.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcff8b340d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcff86c1850>
          │    │   │      └ <starlette.requests.Request object at 0x7fcfe82e0100>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfe8655a20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfe8655a50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfe82f48b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfe86559c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfe8655a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfe82f48b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcff8581840>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfe86559c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfe82f48b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcff8709630>
          └ <fastapi.routing.APIRoute object at 0x7fcfe82258a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfe82f48b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfe82e0760>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcfe86748b0>
          └ <fastapi.routing.APIRoute object at 0x7fcfe82258a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcfe82e3e20>
                     └ <function get_request_handler.<locals>.app at 0x7fcfe8674820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcff870a290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7fcfe85c7ac0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcfe8225960>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcfe82e3ac0>
                 │                └ <function ResourceService.upload_resource at 0x7fcff8ea7f40>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcfe99dc1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7fcff8ec01f0>
    └ <app.src.services.resource_service.ResourceService object at 0x7fcfe99dc1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7fcfe91a1900>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfe91b7970>
               │    └ <app.src.services.base_service.BaseService object at 0x7fcfe99dc190>
               └ <app.src.services.resource_service.ResourceService object at 0x7fcfe99dc1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 26, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7fcfea977e20>
             └ <sqlalchemy.orm.query.Query object at 0x7fcfe82e3640>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7fcfea9885e0>
           └ <sqlalchemy.orm.query.Query object at 0x7fcfe82e3640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7fcfea801b40>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7fcfe82e2e90>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7fcfe82e3640>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7fcfea801ab0>
           └ <sqlalchemy.orm.session.Session object at 0x7fcfe82e2e90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7fcfeaab9c60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7fcfeafca320>
             └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7fcfe81e3fd0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fcfeafca5f0>
           └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fcfeafca7a0>
          └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fcfeafca830>
           └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fcfeafcaa70>
    └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resource_stages.update_at does not exist\nLINE 1: ..._stages.created_at AS resource_stages_created_at...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resource_stages.update_at does not exist\nLINE 1: ..._sta...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_stages.update_at does not exist\nLINE 1: ..._stages.creat...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fcfeab6d000>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fcfe840d2a0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fcfe8214790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fcfe8060040; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resource_stages.update_at does not exist
LINE 1: ..._stages.created_at AS resource_stages_created_at, resource_s...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_stages.updated_at".

[SQL: SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS resource_stages_created_at, resource_stages.update_at AS resource_stages_update_at, resource_stages.is_deleted AS resource_stages_is_deleted 
FROM resource_stages 
WHERE resource_stages.id = %(id_1)s::UUID]
[parameters: {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-01-26 13:47:45.303 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51444 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:49:05.637 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:49:05.740 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:49:05.744 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:49:05.747 request id: app - uvicorn.server:serve - Finished server process [2867807]
INFO     2024-01-26 13:49:07.995 request id: app - uvicorn.server:serve - Started server process [2869609]
INFO     2024-01-26 13:49:07.997 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:49:07.998 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:49:09.508 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:49:09.611 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:49:09.615 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:49:09.617 request id: app - uvicorn.server:serve - Finished server process [2869609]
INFO     2024-01-26 13:49:12.034 request id: app - uvicorn.server:serve - Started server process [2869649]
INFO     2024-01-26 13:49:12.035 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:49:12.037 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:49:19.738 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6f7b762c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6f79379cf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '535816d8-5da3-5539-aee9-f512d7eb6519'}
    │      │       └ 'SELECT resource_statuss.id AS resource_statuss_id, resource_statuss.name AS resource_statuss_name, resource_statuss.created_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6f79014b80; closed: -1>

psycopg2.errors.UndefinedColumn: column resource_statuss.update_at does not exist
LINE 1: ...tatuss.created_at AS resource_statuss_created_at, resource_s...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_statuss.updated_at".



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f6f82c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f6f82d62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2869647 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6f82d61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2869647 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6f82c581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2869647 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2869647 started>
    │    └ <function subprocess_started at 0x7f6f8215a440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2869647 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6f82c58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6f82159900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6f82c58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6f825aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6f825aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6f825abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6f82bfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6f78f5ff40>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6f78f5ff40>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6f78f5ff40>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6f78f5ff40>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6f8201c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6f8201c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6f82c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6f813c6b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6f82c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6f7909a5f0>
          └ <fastapi.applications.FastAPI object at 0x7f6f813c6b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6f78f5d900>
                     │    └ <function error_handle_business at 0x7f6f812575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6f7909a5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6f79129090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6f7909a5c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6f7909a5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6f79129090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6f81283e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6f7909a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f6f7909a5c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6f7909a530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6f7909a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6f79129120>
                     │    │             └ <starlette.requests.Request object at 0x7f6f78f5cbe0>
                     │    └ <function process_middleware_common at 0x7f6f812579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6f7909a530>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6f78f5cbe0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6f79129120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6f817e4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6f813587c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f6f78f5cbe0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6f7909a500>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6f7909a530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6f79129f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6f7909a4a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6f7909a500>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6f79129f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6f8124a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6f7909a4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6f79129f30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6f8139a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f6f790c6380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6f79129f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6f78f5d240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f6f79076950>
          └ <fastapi.routing.APIRoute object at 0x7f6f790c6380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6f78f5fdf0>
                     └ <function get_request_handler.<locals>.app at 0x7f6f790768c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6f8139b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f6f79075bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f6f790c6440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6f78f5f8b0>
                 │                └ <function ResourceService.upload_resource at 0x7f6f797e2170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6f7a57f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f6f797e23b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f6f7a57f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '535816d8-5da3-5539-aee9-f512d7eb6519'
               │    │            │                 │                        │       └ 'ResourceStatus'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f6f7a5bab00>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6f7a57f5b0>
               │    └ <app.src.services.base_service.BaseService object at 0x7f6f7a57f430>
               └ <app.src.services.resource_service.ResourceService object at 0x7f6f7a57f400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 26, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f6f7b581ab0>
             └ <sqlalchemy.orm.query.Query object at 0x7f6f79023c40>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f6f7b582200>
           └ <sqlalchemy.orm.query.Query object at 0x7f6f79023c40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f6f7b5f7760>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f6f790238e0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f6f79023c40>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f6f7b5f76d0>
           └ <sqlalchemy.orm.session.Session object at 0x7f6f790238e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f6f7b6ab880>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f6f7b8cff40>
             └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f6f79023760>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f6f7b8d4280>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f6f7b8d4430>
          └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f6f7b8d44c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f6f7b8d4700>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.created_at AS resource_statuss_created_a...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resource_statuss.update_at does not exist\nLINE 1: ...tat...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.creat...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6f7b762c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6f79379cf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6f78650d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '535816d8-5da3-5539-aee9-f512d7eb6519'}
    │      │       └ 'SELECT resource_statuss.id AS resource_statuss_id, resource_statuss.name AS resource_statuss_name, resource_statuss.created_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6f79014b80; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist
LINE 1: ...tatuss.created_at AS resource_statuss_created_at, resource_s...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_statuss.updated_at".

[SQL: SELECT resource_statuss.id AS resource_statuss_id, resource_statuss.name AS resource_statuss_name, resource_statuss.created_at AS resource_statuss_created_at, resource_statuss.update_at AS resource_statuss_update_at, resource_statuss.is_deleted AS resource_statuss_is_deleted 
FROM resource_statuss 
WHERE resource_statuss.id = %(id_1)s::UUID]
[parameters: {'id_1': '535816d8-5da3-5539-aee9-f512d7eb6519'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-01-26 13:49:19.764 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33386 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:49:50.403 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:49:50.505 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:49:50.507 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:49:50.509 request id: app - uvicorn.server:serve - Finished server process [2869649]
INFO     2024-01-26 13:49:51.366 request id: app - uvicorn.server:serve - Started server process [2869875]
INFO     2024-01-26 13:49:51.368 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:49:51.369 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:49:58.598 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:49:58.700 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:49:58.702 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:49:58.703 request id: app - uvicorn.server:serve - Finished server process [2869875]
INFO     2024-01-26 13:49:59.588 request id: app - uvicorn.server:serve - Started server process [2869943]
INFO     2024-01-26 13:49:59.589 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:49:59.591 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:50:04.510 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:50:04.612 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:50:04.614 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:50:04.616 request id: app - uvicorn.server:serve - Finished server process [2869943]
INFO     2024-01-26 13:50:05.491 request id: app - uvicorn.server:serve - Started server process [2870004]
INFO     2024-01-26 13:50:05.493 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:50:05.494 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:50:16.541 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:50:16.643 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:50:16.646 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:50:16.648 request id: app - uvicorn.server:serve - Finished server process [2870004]
INFO     2024-01-26 13:50:17.596 request id: app - uvicorn.server:serve - Started server process [2870091]
INFO     2024-01-26 13:50:17.598 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:50:17.599 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:51:23.266 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:51:23.368 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:51:23.369 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:51:23.370 request id: app - uvicorn.server:serve - Finished server process [2870091]
INFO     2024-01-26 13:51:24.314 request id: app - uvicorn.server:serve - Started server process [2870501]
INFO     2024-01-26 13:51:24.316 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:51:24.317 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:51:35.460 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:51:35.563 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:51:35.565 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:51:35.568 request id: app - uvicorn.server:serve - Finished server process [2870501]
INFO     2024-01-26 13:51:36.459 request id: app - uvicorn.server:serve - Started server process [2870614]
INFO     2024-01-26 13:51:36.460 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:51:36.461 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:51:36.864 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:51:36.965 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:51:36.967 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:51:36.969 request id: app - uvicorn.server:serve - Finished server process [2870614]
INFO     2024-01-26 13:51:37.965 request id: app - uvicorn.server:serve - Started server process [2870624]
INFO     2024-01-26 13:51:37.966 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:51:37.967 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:51:38.569 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:51:38.675 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:51:38.676 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:51:38.677 request id: app - uvicorn.server:serve - Finished server process [2870624]
INFO     2024-01-26 13:51:39.579 request id: app - uvicorn.server:serve - Started server process [2870657]
INFO     2024-01-26 13:51:39.580 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:51:39.581 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 13:51:55.039 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:51:55.140 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:51:55.141 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:51:55.142 request id: app - uvicorn.server:serve - Finished server process [2870657]
INFO     2024-01-26 13:51:57.134 request id: app - uvicorn.server:serve - Started server process [2870791]
INFO     2024-01-26 13:51:57.135 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:51:57.136 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:52:00.158 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f2e1f756c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f2e1d36dab0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'cda764ee-1a2a-53e4-98d6-85d72986a01d\t'}
    │      │       └ 'SELECT product_types.id AS product_types_id, product_types.name AS product_types_name, product_types.created_at AS product_t...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f2e1d004b80; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "cda764ee-1a2a-53e4-98d6-85d72986a01d	"
LINE 3: WHERE product_types.id = 'cda764ee-1a2a-53e4-98d6-85d72986a0...
                                 ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2e26c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2e26d62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2e26d61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2e26c581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
    │    └ <function subprocess_started at 0x7f2e26096440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2e26c58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2e26095900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2e26c58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2e269b6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2e269b63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2e269b7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2e26bfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2e1cf4f3a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2e1cf4f3a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2e1cf4f3a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2e1cf4f3a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2e25f90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2e25f905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e26c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2e25386b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e26c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
          └ <fastapi.applications.FastAPI object at 0x7f2e25386b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2e1cf4fbe0>
                     │    └ <function error_handle_business at 0x7f2e252175b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "cda764ee-1a2a-53e4-98d6-85d72986a...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e1d11d090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169592', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e1d11d090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2e25243e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2e1d11d120>
                     │    │             └ <starlette.requests.Request object at 0x7f2e1cf4c9a0>
                     │    └ <function process_middleware_common at 0x7f2e252179a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2e1cf4c9a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2e1d11d120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "cda764ee-1a2a-53e4-98d6-85d72986a...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2e257a8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2e253187c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f2e1cf4c9a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e1d0862c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1d11df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2e1d086260>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e1d0862c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1d11df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2e2520a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2e1d086260>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1d11df30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2e2535a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f2e1d0ba140>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1d11df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1cf4d000>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2e1d066950>
          └ <fastapi.routing.APIRoute object at 0x7f2e1d0ba140>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2e1cf4fe20>
                     └ <function get_request_handler.<locals>.app at 0x7f2e1d0668c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2e2535b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f2e1d065bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2e1d0ba200>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f2e1cf4f520>
                 │                └ <function ResourceService.upload_resource at 0x7f2e1d7d6170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f2e1d7d63b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ 'cda764ee-1a2a-53e4-98d6-85d72986a01d\t'
               │    │            │                 │                        │       └ 'ProductType'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f2e1e5aeb00>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f2e1e573370>
               │    └ <app.src.services.base_service.BaseService object at 0x7f2e1e5731f0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 26, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f2e1f571ab0>
             └ <sqlalchemy.orm.query.Query object at 0x7f2e1c6460b0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f2e1f572200>
           └ <sqlalchemy.orm.query.Query object at 0x7f2e1c6460b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f2e1f5eb760>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f2e1d012d40>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f2e1c6460b0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f2e1f5eb6d0>
           └ <sqlalchemy.orm.session.Session object at 0x7f2e1d012d40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f2e1f69b880>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f2e1f8c3f40>
             └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f2e1cf4f7c0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f2e1f8c8280>
           └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f2e1f8c8430>
          └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f2e1f8c84c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f2e1f8c8700>
    └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "cda764ee-1a2a-53e4-98d6-85d72986a01d\t"\nLINE 3: WHERE produc...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "cda764e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "cda764ee-1a2a-53e4-98d6-85d72986a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f2e1f756c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f2e1d36dab0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c6443d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'cda764ee-1a2a-53e4-98d6-85d72986a01d\t'}
    │      │       └ 'SELECT product_types.id AS product_types_id, product_types.name AS product_types_name, product_types.created_at AS product_t...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f2e1d004b80; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "cda764ee-1a2a-53e4-98d6-85d72986a01d	"
LINE 3: WHERE product_types.id = 'cda764ee-1a2a-53e4-98d6-85d72986a0...
                                 ^

[SQL: SELECT product_types.id AS product_types_id, product_types.name AS product_types_name, product_types.created_at AS product_types_created_at, product_types.updated_at AS product_types_updated_at, product_types.is_deleted AS product_types_is_deleted 
FROM product_types 
WHERE product_types.id = %(id_1)s::UUID]
[parameters: {'id_1': 'cda764ee-1a2a-53e4-98d6-85d72986a01d\t'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-01-26 13:52:00.183 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41656 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-26 13:53:28.093 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f2e1f756c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f2e1d36dab0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '1'}
    │      │       └ 'SELECT package_repos.id AS package_repos_id, package_repos.name AS package_repos_name, package_repos.created_at AS package_r...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f2e1d005120; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "1"
LINE 3: WHERE package_repos.id = '1'::UUID
                                 ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2e26c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2e26d62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2e26d61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2e26c581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
    │    └ <function subprocess_started at 0x7f2e26096440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2e26c58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2e26095900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2e26c58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2e269b6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2e269b63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2e269b7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2e26bfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71dd50>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71dd50>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71dd50>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71dd50>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2e25f90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2e25f905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e26c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2e25386b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e26c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
          └ <fastapi.applications.FastAPI object at 0x7f2e25386b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2e1c646b00>
                     │    └ <function error_handle_business at 0x7f2e252175b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "1"\nLINE 3: WHERE package_repos.i...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e1c68a560>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169591', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e1c68a560>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2e25243e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2e1c528040>
                     │    │             └ <starlette.requests.Request object at 0x7f2e1c644d60>
                     │    └ <function process_middleware_common at 0x7f2e252179a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2e1c644d60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2e1c528040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "1"\nLINE 3: WHERE package_repos.i...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2e257a8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2e253187c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f2e1c644d60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e1d0862c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2e1d086260>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e1d0862c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2e2520a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2e1d086260>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528280>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2e2535a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f2e1d0ba140>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c6478b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2e1d066950>
          └ <fastapi.routing.APIRoute object at 0x7f2e1d0ba140>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2e1c71df90>
                     └ <function get_request_handler.<locals>.app at 0x7f2e1d0668c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2e2535b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f2e1d065bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2e1d0ba200>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f2e1c71c100>
                 │                └ <function ResourceService.upload_resource at 0x7f2e1d7d6170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f2e1d7d63b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '1'
               │    │            │                 │                        │       └ 'PackageRepository'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f2e1e5aeb00>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f2e1e573370>
               │    └ <app.src.services.base_service.BaseService object at 0x7f2e1e5731f0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 26, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f2e1f571ab0>
             └ <sqlalchemy.orm.query.Query object at 0x7f2e1c71c730>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f2e1f572200>
           └ <sqlalchemy.orm.query.Query object at 0x7f2e1c71c730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f2e1f5eb760>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f2e1c647400>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f2e1c71c730>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f2e1f5eb6d0>
           └ <sqlalchemy.orm.session.Session object at 0x7f2e1c647400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f2e1f69b880>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f2e1f8c3f40>
             └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f2e1c71ce80>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f2e1f8c8280>
           └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f2e1f8c8430>
          └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f2e1f8c84c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f2e1f8c8700>
    └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "1"\nLINE 3: WHERE package_repos.id = \'1\'::UUID\n           ...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "1"\nLIN...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "1"\nLINE 3: WHERE package_repos.i...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f2e1f756c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f2e1d36dab0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f2e1c71c7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '1'}
    │      │       └ 'SELECT package_repos.id AS package_repos_id, package_repos.name AS package_repos_name, package_repos.created_at AS package_r...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f2e1d005120; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "1"
LINE 3: WHERE package_repos.id = '1'::UUID
                                 ^

[SQL: SELECT package_repos.id AS package_repos_id, package_repos.name AS package_repos_name, package_repos.created_at AS package_repos_created_at, package_repos.updated_at AS package_repos_updated_at, package_repos.is_deleted AS package_repos_is_deleted 
FROM package_repos 
WHERE package_repos.id = %(id_1)s::UUID]
[parameters: {'id_1': '1'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-01-26 13:53:28.111 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46184 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-26 13:53:48.261 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2e257a8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f2e257a83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2e26c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2e26d62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2e26d61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2e26c581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
    │    └ <function subprocess_started at 0x7f2e26096440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2870789 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2e26c58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2e26095900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2e26c58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2e269b6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2e269b63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2e269b7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2e26bfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71e1d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71e1d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71e1d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2e1c71e1d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2e25f90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2e25f905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e26c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2e25386b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2e26c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
          └ <fastapi.applications.FastAPI object at 0x7f2e25386b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2e1c71d6c0>
                     │    └ <function error_handle_business at 0x7f2e252175b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'create'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e1c5281f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2e1d0863b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2e1c5281f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2e25243e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2e1d086380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2e1c5284c0>
                     │    │             └ <starlette.requests.Request object at 0x7f2e1c71d5d0>
                     │    └ <function process_middleware_common at 0x7f2e252179a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2e1c71d5d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2e1c5284c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'create'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2e257a8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2e253187c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f2e1c71d5d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e1d0862c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2e1d0862f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2e1d086260>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2e1d0862c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2e2520a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2e1d086260>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528700>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2e2535a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f2e1d0ba140>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2e1c528700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2e1c71dbd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2e1d066950>
          └ <fastapi.routing.APIRoute object at 0x7f2e1d0ba140>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2e1c71de10>
                     └ <function get_request_handler.<locals>.app at 0x7f2e1d0668c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2e2535b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f2e1d065bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2e1d0ba200>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f2e1c71e0b0>
                 │                └ <function ResourceService.upload_resource at 0x7f2e1d7d6170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f2e1d7d63b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                                │       └ 'PackageRepository'
        │    │            │                                └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f2e1e573370>
        │    └ <app.src.services.base_service.BaseService object at 0x7f2e1e5731f0>
        └ <app.src.services.resource_service.ResourceService object at 0x7f2e1e5731c0>

AttributeError: 'PostgreSQLDB' object has no attribute 'create'
INFO     2024-01-26 13:53:48.280 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55154 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:55:29.054 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:55:29.155 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:55:29.156 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:55:29.157 request id: app - uvicorn.server:serve - Finished server process [2870791]
INFO     2024-01-26 13:56:09.804 request id: app - uvicorn.server:serve - Started server process [2872701]
INFO     2024-01-26 13:56:09.805 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:56:09.806 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:56:14.512 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f98844e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f98844e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f988590bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9885a5e950>
           └ <SpawnProcess name='SpawnProcess-5' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9885a5dfc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f98859541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2870789 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2870789 started>
    │    └ <function subprocess_started at 0x7f9884e66440>
    └ <SpawnProcess name='SpawnProcess-5' parent=2870789 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9885954310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9884e65900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9885954310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9885706440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f98857063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9885707eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f98858f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f987bd176d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f987bd176d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f987bd176d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f987bd176d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9884d24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9884d245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9885955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f98840c6b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9885955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f987be52560>
          └ <fastapi.applications.FastAPI object at 0x7f98840c6b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f987bd15870>
                     │    └ <function error_handle_business at 0x7f9883f575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f987be52560>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f987bee5090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f987be52530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f987be52560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f987bee5090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f9883f87e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f987be52530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f987be52530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f987be524a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f987be52530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f987bee5120>
                     │    │             └ <starlette.requests.Request object at 0x7f987bd14b50>
                     │    └ <function process_middleware_common at 0x7f9883f579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f987be524a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f987bd14b50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f987bee5120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f98844e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f9884058950>
          │    │   │      └ <starlette.requests.Request object at 0x7f987bd14b50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f987be52470>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f987be524a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f987bee5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f987be52410>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f987be52470>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f987bee5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f9883f4a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f987be52410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f987bee5f30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f988409a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f987be822f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f987bee5f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f987bd151b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f987be32950>
          └ <fastapi.routing.APIRoute object at 0x7f987be822f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f987bd17550>
                     └ <function get_request_handler.<locals>.app at 0x7f987be328c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f988409b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f987be31bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f987be823b0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f987bd17a60>
                 │                └ <function ResourceService.upload_resource at 0x7f98804de170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f98812cf1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f98804de3b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f98812cf1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                 │              │       └ 'PackageRepository'
        │    │            │                 │              └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            │                 └ <function PostgreSQLDB.create at 0x7f988130ab00>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f98812cf370>
        │    └ <app.src.services.base_service.BaseService object at 0x7f98812cf1f0>
        └ <app.src.services.resource_service.ResourceService object at 0x7f98812cf1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 36, in create
    self.session.add(db_obj)
    │                └ <app.src.models.package_repo.PackageRepository object at 0x7f987bd17730>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f98812cf370>

AttributeError: 'PostgreSQLDB' object has no attribute 'session'
INFO     2024-01-26 13:56:14.530 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54062 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:56:44.655 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:56:44.756 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:56:44.757 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:56:44.758 request id: app - uvicorn.server:serve - Finished server process [2872701]
INFO     2024-01-26 13:56:45.645 request id: app - uvicorn.server:serve - Started server process [2872930]
INFO     2024-01-26 13:56:45.647 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:56:45.647 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:56:49.920 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f43d4cbc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f43d4cbc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f43d610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f43d625e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f43d625dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f43d61541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=2870789 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=2870789 started>
    │    └ <function subprocess_started at 0x7f43d561e440>
    └ <SpawnProcess name='SpawnProcess-6' parent=2870789 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f43d6154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f43d561d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f43d6154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f43d59a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f43d59a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f43d59a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f43d60f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f43d04576d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f43d04576d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f43d04576d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f43d04576d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f43d54e4550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f43d54e45e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f43d6155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f43d489ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f43d6155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f43d058e560>
          └ <fastapi.applications.FastAPI object at 0x7f43d489ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f43d0455870>
                     │    └ <function error_handle_business at 0x7f43d472b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f43d058e560>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f43d0621090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f43d058e530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f43d058e560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f43d0621090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f43d475be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f43d058e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f43d058e530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f43d058e4a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f43d058e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f43d0621120>
                     │    │             └ <starlette.requests.Request object at 0x7f43d0454b50>
                     │    └ <function process_middleware_common at 0x7f43d472b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f43d058e4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f43d0454b50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f43d0621120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f43d4cbca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f43d482c8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f43d0454b50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f43d058e470>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f43d058e4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f43d0621f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f43d058e410>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f43d058e470>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f43d0621f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f43d471e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f43d058e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f43d0621f30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f43d486e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f43d05c22f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f43d0621f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f43d04551b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f43d056e950>
          └ <fastapi.routing.APIRoute object at 0x7f43d05c22f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f43d0457550>
                     └ <function get_request_handler.<locals>.app at 0x7f43d056e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f43d486f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f43d056dbd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f43d05c23b0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f43d0457a60>
                 │                └ <function ResourceService.upload_resource at 0x7f43d0cda170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f43d1acb1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f43d0cda3b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f43d1acb1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f43d1b06a70>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f43d1acb370>
               │    └ <app.src.services.base_service.BaseService object at 0x7f43d1acb1f0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f43d1acb1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 43, in get_by_attribute
    return self.session.query(model).filter(getattr(model, attribute) == value).first()
           │                  │                     │      │             └ 'id'
           │                  │                     │      └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │                  │                     └ <class 'app.src.models.resource_stage.ResourceStage'>
           │                  └ <class 'app.src.models.resource_stage.ResourceStage'>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f43d1acb370>

AttributeError: 'PostgreSQLDB' object has no attribute 'session'
INFO     2024-01-26 13:56:49.943 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49684 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:57:17.876 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:57:17.978 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:57:17.978 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:57:17.979 request id: app - uvicorn.server:serve - Finished server process [2872930]
INFO     2024-01-26 13:57:18.840 request id: app - uvicorn.server:serve - Started server process [2873136]
INFO     2024-01-26 13:57:18.841 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:57:18.842 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:57:21.803 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2c8726c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f2c8726c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2c886c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2c8885e950>
           └ <SpawnProcess name='SpawnProcess-7' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2c8885dfc0>
    └ <SpawnProcess name='SpawnProcess-7' parent=2870789 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2c8870c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=2870789 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=2870789 started>
    │    └ <function subprocess_started at 0x7f2c87b96440>
    └ <SpawnProcess name='SpawnProcess-7' parent=2870789 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2c8870c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2c87b95900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2c8870c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2c87fae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2c87fae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2c87fafeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2c886b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2c7ea5bfd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2c7ea5bfd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2c7ea5bfd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2c7ea5bfd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2c87a90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2c87a905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2c8870de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2c86e4eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2c8870de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2c7eb965f0>
          └ <fastapi.applications.FastAPI object at 0x7f2c86e4eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2c7ea59900>
                     │    └ <function error_handle_business at 0x7f2c86cdb5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2c7eb965f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2c7ec2d090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2c7eb965c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2c7eb965f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2c7ec2d090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2c86d0be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2c7eb965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2c7eb965c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2c7eb96530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2c7eb965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2c7ec2d120>
                     │    │             └ <starlette.requests.Request object at 0x7f2c7ea58be0>
                     │    └ <function process_middleware_common at 0x7f2c86cdb9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2c7eb96530>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2c7ea58be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2c7ec2d120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2c8726ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2c86de44f0>
          │    │   │      └ <starlette.requests.Request object at 0x7f2c7ea58be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2c7eb96500>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2c7eb96530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2c7ec2df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2c7eb964a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2c7eb96500>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2c7ec2df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2c86cd2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2c7eb964a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2c7ec2df30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2c86e224d0>
          └ <fastapi.routing.APIRoute object at 0x7f2c7ebca380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2c7ec2df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2c7ea59240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2c7eb76950>
          └ <fastapi.routing.APIRoute object at 0x7f2c7ebca380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2c7ea5b460>
                     └ <function get_request_handler.<locals>.app at 0x7f2c7eb768c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2c86e23130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f2c7eb75bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2c7ebca440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f2c7ea5ba60>
                 │                └ <function ResourceService.upload_resource at 0x7f2c7f2e2170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2c7ff831c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f2c7f2e23b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f2c7ff831c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f2c7ffbea70>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f2c7ff83370>
               │    └ <app.src.services.base_service.BaseService object at 0x7f2c7ff831f0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f2c7ff831c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in get_by_attribute
    return self.session.query(model).filter(getattr(model, attribute) == value).first()
           │    │       │     │                     │      │             └ 'id'
           │    │       │     │                     │      └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │    │       │     │                     └ <class 'app.src.models.resource_stage.ResourceStage'>
           │    │       │     └ <class 'app.src.models.resource_stage.ResourceStage'>
           │    │       └ <function Session.query at 0x7f2c850f3d90>
           │    └ <sqlalchemy.orm.session.Session object at 0x7f2c7ee79f90>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f2c7ff83370>

AttributeError: type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'
INFO     2024-01-26 13:57:21.822 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55312 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:57:47.867 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:57:47.969 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:57:47.971 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:57:47.974 request id: app - uvicorn.server:serve - Finished server process [2873136]
INFO     2024-01-26 13:57:51.041 request id: app - uvicorn.server:serve - Started server process [2873327]
INFO     2024-01-26 13:57:51.043 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:57:51.044 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:58:09.129 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f22cd487760>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f22cd4877f0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f22cffd4f70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f22cff97c70>
           └ <SpawnProcess name='SpawnProcess-1' parent=2873303 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f22cff972e0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2873303 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f22cffea800>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2873303 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2873303 started>
    │    └ <function subprocess_started at 0x7f22cdf0da20>
    └ <SpawnProcess name='SpawnProcess-1' parent=2873303 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f22cffe9ff0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f22cdf0cd30>
    │    │                  └ <uvicorn.server.Server object at 0x7f22cffe9ff0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f22d01dda20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f22d01dd990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f22d01df490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f22d019e830>
    └ <Handle <TaskStepMethWrapper object at 0x7f22b4cfb520>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f22b4cfb520>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f22b4cfb520>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f22b4cfb520>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f22cdd9b0a0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f22cdd9b130>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f22d0283b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f22cd0a8a90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f22d0283b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f22b5071ae0>
          └ <fastapi.applications.FastAPI object at 0x7f22cd0a8a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f22b4cfb5e0>
                     │    └ <function error_handle_business at 0x7f22cd0cf1c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f22b5071ae0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f22b4cf03a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f22b5071ab0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f22b5071ae0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f22b4cf03a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f22ccf0beb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f22b5071ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f22b5071ab0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f22b5071a20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f22b5071ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f22b4cf0430>
                     │    │             └ <starlette.requests.Request object at 0x7f22b4cf80d0>
                     │    └ <function process_middleware_common at 0x7f22cd0cf760>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f22b5071a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f22b4cf80d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f22b4cf0430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f22cd487eb0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f22cd0358a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f22b4cf80d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f22b50719f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f22b5071a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22b4cf1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f22b5071990>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f22b50719f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22b4cf1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f22cceed810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f22b5071990>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22b4cf1240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f22cd071480>
          └ <fastapi.routing.APIRoute object at 0x7f22b4c3d870>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22b4cf1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22b4cf8730>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f22b5079240>
          └ <fastapi.routing.APIRoute object at 0x7f22b4c3d870>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f22b4cfbe20>
                     └ <function get_request_handler.<locals>.app at 0x7f22b50791b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f22cd0720e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f22b50784c0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f22b4c3d930>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f22b4cfbac0>
                 │                └ <function ResourceService.upload_resource at 0x7f22cd8448b0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f22b641bf10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f22cd844af0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f22b641bf10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '367814e6-063c-560c-b428-20ed1ed85f4f'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f22b5b3e200>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f22b55f2bf0>
               │    └ <app.src.services.base_service.BaseService object at 0x7f22b641bfd0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f22b641bf10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in get_by_attribute
    return self.session.query(model).filter(getattr(model, attribute) == value).first()
           │    │       │     │                     │      │             └ 'id'
           │    │       │     │                     │      └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │    │       │     │                     └ <class 'app.src.models.resource_stage.ResourceStage'>
           │    │       │     └ <class 'app.src.models.resource_stage.ResourceStage'>
           │    │       └ <function Session.query at 0x7f22b74fa710>
           │    └ <sqlalchemy.orm.session.Session object at 0x7f22b4f89510>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f22b55f2bf0>

AttributeError: type object 'ResourceStage' has no attribute '367814e6-063c-560c-b428-20ed1ed85f4f'
INFO     2024-01-26 13:58:09.239 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58540 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:59:15.567 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:59:15.672 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:59:15.677 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:59:15.682 request id: app - uvicorn.server:serve - Finished server process [2873327]
INFO     2024-01-26 13:59:18.756 request id: app - uvicorn.server:serve - Started server process [2874096]
INFO     2024-01-26 13:59:18.758 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:59:18.758 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:59:23.692 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc00e704310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc00e7043a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc00fb0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc00fc5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2874094 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc00fc5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2874094 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc00fb541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2874094 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2874094 started>
    │    └ <function subprocess_started at 0x7fc00f076440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2874094 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc00fb54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc00f075900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc00fb54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc00f906440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc00f9063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc00f907eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc00faf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc005f413f0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc005f413f0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc005f413f0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc005f413f0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc00ef3c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc00ef3c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc00fb55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc00e2deb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc00fb55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc005f86560>
          └ <fastapi.applications.FastAPI object at 0x7fc00e2deb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc005f41ba0>
                     │    └ <function error_handle_business at 0x7fc00e1675b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc005f86560>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc006019090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc005f86530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc005f86560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc006019090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc00e197e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc005f86530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc005f86530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc005f864a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc005f86530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc006019120>
                     │    │             └ <starlette.requests.Request object at 0x7fc005e4cb50>
                     │    └ <function process_middleware_common at 0x7fc00e1679a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc005f864a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc005e4cb50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc006019120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc00e704a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc00e274310>
          │    │   │      └ <starlette.requests.Request object at 0x7fc005e4cb50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc005f86470>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc005f864a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc006019f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc005f86410>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc005f86470>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc006019f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc00e15e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc005f86410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc006019f30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc00e2b24d0>
          └ <fastapi.routing.APIRoute object at 0x7fc005fba2f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc006019f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc005e4d1b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc005f66950>
          └ <fastapi.routing.APIRoute object at 0x7fc005fba2f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc005e4f550>
                     └ <function get_request_handler.<locals>.app at 0x7fc005f668c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc00e2b3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7fc005f65bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc005fba3b0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fc005e4fa60>
                 │                └ <function ResourceService.upload_resource at 0x7fc0066d2170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc006e3f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7fc0066d23b0>
    └ <app.src.services.resource_service.ResourceService object at 0x7fc006e3f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                 │              │       └ 'PackageRepository'
        │    │            │                 │              └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            │                 └ <function PostgreSQLDB.create at 0x7fc006e7ab00>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc006e3f370>
        │    └ <app.src.services.base_service.BaseService object at 0x7fc006e3f1f0>
        └ <app.src.services.resource_service.ResourceService object at 0x7fc006e3f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 36, in create
    self.session.add(db_obj)
    │                └ <app.src.models.package_repo.PackageRepository object at 0x7fc005f41630>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc006e3f370>

AttributeError: 'PostgreSQLDB' object has no attribute 'session'
INFO     2024-01-26 13:59:23.707 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33526 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 13:59:33.545 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 13:59:33.647 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 13:59:33.648 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 13:59:33.648 request id: app - uvicorn.server:serve - Finished server process [2874096]
INFO     2024-01-26 13:59:34.653 request id: app - uvicorn.server:serve - Started server process [2874203]
INFO     2024-01-26 13:59:34.655 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 13:59:34.655 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 13:59:37.518 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fd4975c4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fd4975c43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fd498a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fd498b62950>
           └ <SpawnProcess name='SpawnProcess-2' parent=2874094 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fd498b61fc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=2874094 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fd498a581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2874094 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2874094 started>
    │    └ <function subprocess_started at 0x7fd497f42440>
    └ <SpawnProcess name='SpawnProcess-2' parent=2874094 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fd498a58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fd497f41900>
    │    │                  └ <uvicorn.server.Server object at 0x7fd498a58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fd49838e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd49838e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd49838feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd4989fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fd48ed57eb0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fd48ed57eb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fd48ed57eb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fd48ed57eb0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fd497dfc550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fd497dfc5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd498a59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fd49719eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd498a59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd48ee965f0>
          └ <fastapi.applications.FastAPI object at 0x7fd49719eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fd48ed572e0>
                     │    └ <function error_handle_business at 0x7fd49702b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd48ee965f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'BaseService' object has no attribute 'db_session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd48ef2d090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd48ee965c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd48ee965f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd48ef2d090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fd497057e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd48ee965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fd48ee965c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd48ee96530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd48ee965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd48ef2d120>
                     │    │             └ <starlette.requests.Request object at 0x7fd48ed54be0>
                     │    └ <function process_middleware_common at 0x7fd49702b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd48ee96530>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fd48ed54be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd48ef2d120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'BaseService' object has no attribute 'db_session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fd4975c4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fd4971305e0>
          │    │   │      └ <starlette.requests.Request object at 0x7fd48ed54be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd48ee96500>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd48ee96530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd48ef2df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd48ee964a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd48ee96500>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd48ef2df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fd49701e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd48ee964a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd48ef2df30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fd4971724d0>
          └ <fastapi.routing.APIRoute object at 0x7fd48eeca380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd48ef2df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd48ed55240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fd48ee76950>
          └ <fastapi.routing.APIRoute object at 0x7fd48eeca380>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fd48ed57df0>
                     └ <function get_request_handler.<locals>.app at 0x7fd48ee768c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fd497173130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7fd48ee75bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fd48eeca440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fd48ed578b0>
                 │                └ <function ResourceService.upload_resource at 0x7fd48f5e2170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fd4943d71c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.db_session, resource_create.dict()
    │    │                        │               └ <cyfunction BaseModel.dict at 0x7fd497b32b50>
    │    │                        └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <app.src.services.base_service.BaseService object at 0x7fd4943d71f0>
    └ <app.src.services.resource_service.ResourceService object at 0x7fd4943d71c0>

AttributeError: 'BaseService' object has no attribute 'db_session'
INFO     2024-01-26 13:59:37.535 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56350 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:02:36.358 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:02:36.462 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:02:36.464 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:02:36.467 request id: app - uvicorn.server:serve - Finished server process [2874203]
INFO     2024-01-26 14:02:37.357 request id: app - uvicorn.server:serve - Started server process [2875291]
INFO     2024-01-26 14:02:37.359 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:02:37.359 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:02:40.549 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f94a756ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f94a5095cf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('23407fef-2500-56d4-a1e4-6cb904c0e213'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f94a4eecb80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f94ae9c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f94aeb62950>
           └ <SpawnProcess name='SpawnProcess-3' parent=2874094 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f94aeb61fc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=2874094 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f94aea101f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2874094 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2874094 started>
    │    └ <function subprocess_started at 0x7f94ade9e440>
    └ <SpawnProcess name='SpawnProcess-3' parent=2874094 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f94aea10310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f94ade9d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f94aea10310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f94ae776440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f94ae7763b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f94ae777eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f94ae6c7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f94a4e37940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f94a4e37940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f94a4e37940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f94a4e37940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f94add98550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f94add985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f94aea11e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f94ad156b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f94aea11e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94a4f72680>
          └ <fastapi.applications.FastAPI object at 0x7f94ad156b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f94a4e35990>
                     │    └ <function error_handle_business at 0x7f94acfe75b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94a4f72680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f94a4e05120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94a4f72650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f94a4f72680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f94a4e05120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f94ad017e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94a4f72650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f94a4f72650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94a4f725c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f94a4f72650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f94a4e051b0>
                     │    │             └ <starlette.requests.Request object at 0x7f94a4e34c70>
                     │    └ <function process_middleware_common at 0x7f94acfe79a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94a4f725c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f94a4e34c70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f94a4e051b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f94ad574a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f94ad0e89a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f94a4e34c70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f94a4f72590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f94a4f725c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94a4e05fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f94a4f72530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f94a4f72590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94a4e05fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f94acfda260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f94a4f72530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94a4e05fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f94ad12a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f94a4f9e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f94a4e05fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f94a4e352d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f94a4f4e9e0>
          └ <fastapi.routing.APIRoute object at 0x7f94a4f9e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f94a4e37760>
                     └ <function get_request_handler.<locals>.app at 0x7f94a4f4e950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f94ad12b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f94a4f4dc60>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f94a4f9e4d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f94a4e37460>
                 │                └ <function ResourceService.upload_resource at 0x7f94a55fe200>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f94a639f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f94a55fe440>
    └ <app.src.services.resource_service.ResourceService object at 0x7f94a639f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                 │              │       └ 'PackageRepository'
        │    │            │                 │              └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            │                 └ <function PostgreSQLDB.create at 0x7f94a63daa70>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f94a639f370>
        │    └ <app.src.services.base_service.BaseService object at 0x7f94a639f1f0>
        └ <app.src.services.resource_service.ResourceService object at 0x7f94a639f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 38, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f94a720f490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f94a5096020>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f94a639f370>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f94a720e710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f94a50f6800>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f94a50f6800>
                └ <function SessionTransaction.commit at 0x7f94a720e680>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7f94a720e5f0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f94a50f6800>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f94a50f6800>
                └ <function SessionTransaction._prepare_impl at 0x7f94a720e4d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7f94a7221120>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f94a5096020>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f94a50f6800>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f94a72212d0>
    └ <sqlalchemy.orm.session.Session object at 0x7f94a5096020>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f94a45a0a00>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f94a73f75b0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f94a452b610>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f94a452b610>
    │   └ <function SaveUpdateAll.execute at 0x7f94a73f7eb0>
    └ SaveUpdateAll(Mapper[PackageRepository(package_repos)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f94a73c64d0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f94a73c6ef0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f94a76d7f40>
             └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f94a452a7d0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f94a76dc280>
           └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f94a76dc430>
          └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f94a76dc4c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f94a76dc700>
    └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "package_repos_name_key"\nDETAIL:  Key (name)=(cda764ee-1a2a-...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "package_repos_na...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f94a756ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f94a5095cf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f94a452a4a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('23407fef-2500-56d4-a1e4-6cb904c0e213'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f94a4eecb80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.

[SQL: INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.created_at, package_repos.updated_at]
[parameters: {'id': UUID('23407fef-2500-56d4-a1e4-6cb904c0e213'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-01-26 14:02:40.572 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35424 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:03:37.211 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:03:37.313 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:03:37.316 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:03:37.317 request id: app - uvicorn.server:serve - Finished server process [2875291]
INFO     2024-01-26 14:03:41.209 request id: app - uvicorn.server:serve - Started server process [2875674]
INFO     2024-01-26 14:03:41.211 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:03:41.212 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:04:51.177 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f5b0355ce50>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f5b00d11270>
    └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('02d459d6-f153-5056-b5a0-6814795c850b'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f5b00024040; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f5b1bf70f70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f5b1bf37c70>
           └ <SpawnProcess name='SpawnProcess-1' parent=2875653 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5b1bf372e0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2875653 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5b1bf8a800>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2875653 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2875653 started>
    │    └ <function subprocess_started at 0x7f5b19c95a20>
    └ <SpawnProcess name='SpawnProcess-1' parent=2875653 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5b1bf89ff0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5b19c94d30>
    │    │                  └ <uvicorn.server.Server object at 0x7f5b1bf89ff0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5b1beb5a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5b1beb5990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5b1beb7490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5b1c142830>
    └ <Handle <TaskStepMethWrapper object at 0x7f5b00b11450>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5b00b11450>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5b00b11450>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5b00b11450>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5b19d1f0a0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5b19d1f130>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5b1c235ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5b1902ca90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5b1c235ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5b00f55b70>
          └ <fastapi.applications.FastAPI object at 0x7f5b1902ca90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f5b00be4e80>
                     │    └ <function error_handle_business at 0x7f5b190531c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5b00f55b70>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5b00f73d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5b00f55b40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5b00f55b70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5b00f73d00>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f5b18e8fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5b00f55b40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f5b00f55b40>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5b00f55ab0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5b00f55b40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5b00f73d90>
                     │    │             └ <starlette.requests.Request object at 0x7f5b00be4160>
                     │    └ <function process_middleware_common at 0x7f5b19053760>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5b00f55ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5b00be4160>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5b00f73d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5b19413eb0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5b18fb94e0>
          │    │   │      └ <starlette.requests.Request object at 0x7f5b00be4160>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5b00f55a80>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5b00f55ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5b00becc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5b00f55a20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5b00f55a80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5b00becc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5b18e69810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5b00f55a20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5b00becc10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f5b18ff9480>
          └ <fastapi.routing.APIRoute object at 0x7f5b00f79900>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5b00becc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5b00be47c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5b00f70c10>
          └ <fastapi.routing.APIRoute object at 0x7f5b00f79900>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5b00be7e20>
                     └ <function get_request_handler.<locals>.app at 0x7f5b00f70b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5b18ffa0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f5b00ebbe20>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f5b00f799c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f5b00be7ac0>
                 │                └ <function ResourceService.upload_resource at 0x7f5b011c0280>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f5b023aff10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f5b011c04c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f5b023aff10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                 │              │       └ 'PackageRepository'
        │    │            │                 │              └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            │                 └ <function PostgreSQLDB.create at 0x7f5b01ac1ab0>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f5b1984ec80>
        │    └ <app.src.services.base_service.BaseService object at 0x7f5b023affd0>
        └ <app.src.services.resource_service.ResourceService object at 0x7f5b023aff10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 38, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f5b033f96c0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f5b00d115a0>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f5b1984ec80>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f5b033f8940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f5b00ae4a00>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f5b00ae4a00>
                └ <function SessionTransaction.commit at 0x7f5b033f88b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7f5b033f8820>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f5b00ae4a00>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f5b00ae4a00>
                └ <function SessionTransaction._prepare_impl at 0x7f5b033f8700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7f5b033fb2e0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f5b00d115a0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f5b00ae4a00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f5b033fb490>
    └ <sqlalchemy.orm.session.Session object at 0x7f5b00d115a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f5b00208400>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f5b033e17e0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f5b1c263160>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f5b1c263160>
    │   └ <function SaveUpdateAll.execute at 0x7f5b033e20e0>
    └ SaveUpdateAll(Mapper[PackageRepository(package_repos)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f5b033c4700>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f5b033c5120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f5b036ba170>
             └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f5b00be7250>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f5b036ba440>
           └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f5b036ba5f0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f5b036ba680>
           └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f5b036ba8c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "package_repos_name_key"\nDETAIL:  Key (name)=(cda764ee-1a2a-...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "package_repos_na...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f5b0355ce50>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f5b00d11270>
    └ <sqlalchemy.engine.base.Connection object at 0x7f5b00acb4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('02d459d6-f153-5056-b5a0-6814795c850b'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f5b00024040; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.

[SQL: INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.created_at, package_repos.updated_at]
[parameters: {'id': UUID('02d459d6-f153-5056-b5a0-6814795c850b'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-01-26 14:04:51.279 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43394 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:04:54.803 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:04:54.905 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:04:54.906 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:04:54.906 request id: app - uvicorn.server:serve - Finished server process [2875674]
INFO     2024-01-26 14:05:01.838 request id: app - uvicorn.server:serve - Started server process [2876293]
INFO     2024-01-26 14:05:01.839 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:05:01.840 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:05:05.494 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f774e056c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f7747c7dcf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('012004ad-34cd-568c-afb8-e99f8e306c8f'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f7747918b80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f77514c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f775165e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2876291 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f775165dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2876291 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f775150c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2876291 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2876291 started>
    │    └ <function subprocess_started at 0x7f7750996440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2876291 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f775150c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7750995900>
    │    │                  └ <uvicorn.server.Server object at 0x7f775150c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7750dae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7750dae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7750dafeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f77514b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f774785f940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f774785f940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f774785f940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f774785f940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7750890550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f77508905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f775150de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f774fc52b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f775150de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7747996680>
          └ <fastapi.applications.FastAPI object at 0x7f774fc52b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f774785feb0>
                     │    └ <function error_handle_business at 0x7f774fadf5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7747996680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7747a25240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7747996650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7747996680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7747a25240>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f774fb0be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7747996650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f7747996650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f77479965c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7747996650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7747a252d0>
                     │    │             └ <starlette.requests.Request object at 0x7f774785cc70>
                     │    └ <function process_middleware_common at 0x7f774fadf9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f77479965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f774785cc70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7747a252d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7750078a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f774fbe45e0>
          │    │   │      └ <starlette.requests.Request object at 0x7f774785cc70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7747996590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f77479965c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7747a260e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7747996530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7747996590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7747a260e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f774fad2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7747996530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7747a260e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f774fc264d0>
          └ <fastapi.routing.APIRoute object at 0x7f77479c6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7747a260e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f774785d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f774796eb00>
          └ <fastapi.routing.APIRoute object at 0x7f77479c6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f774785f760>
                     └ <function get_request_handler.<locals>.app at 0x7f774796ea70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f774fc27130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f774796dd80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f77479c64d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f774785f460>
                 │                └ <function ResourceService.upload_resource at 0x7f774c0e6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f774cdd71c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7f774c0e6560>
    └ <app.src.services.resource_service.ResourceService object at 0x7f774cdd71c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                 │              │       └ 'PackageRepository'
        │    │            │                 │              └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            │                 └ <function PostgreSQLDB.create at 0x7f774ce12b90>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f774cdd7370>
        │    └ <app.src.services.base_service.BaseService object at 0x7f774cdd71f0>
        └ <app.src.services.resource_service.ResourceService object at 0x7f774cdd71c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 38, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f774deeb490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f7747c7e020>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f774cdd7370>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f774deea710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f774cdf84c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f774cdf84c0>
                └ <function SessionTransaction.commit at 0x7f774deea680>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7f774deea5f0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f774cdf84c0>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f774cdf84c0>
                └ <function SessionTransaction._prepare_impl at 0x7f774deea4d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7f774defd120>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f7747c7e020>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f774cdf84c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f774defd2d0>
    └ <sqlalchemy.orm.session.Session object at 0x7f7747c7e020>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f7746fc4480>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f774ded75b0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f7746f575b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f7746f575b0>
    │   └ <function SaveUpdateAll.execute at 0x7f774ded7eb0>
    └ SaveUpdateAll(Mapper[PackageRepository(package_repos)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f774dea64d0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f774dea6ef0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f774e1c3f40>
             └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f7746f567d0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f774e1c8280>
           └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f774e1c8430>
          └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f774e1c84c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f774e1c8700>
    └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "package_repos_name_key"\nDETAIL:  Key (name)=(cda764ee-1a2a-...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "package_repos_na...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f774e056c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f7747c7dcf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f7746f564a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('012004ad-34cd-568c-afb8-e99f8e306c8f'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f7747918b80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.

[SQL: INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.created_at, package_repos.updated_at]
[parameters: {'id': UUID('012004ad-34cd-568c-afb8-e99f8e306c8f'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-01-26 14:05:05.521 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36276 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:05:44.879 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:05:44.982 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:05:44.985 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:05:44.987 request id: app - uvicorn.server:serve - Finished server process [2876293]
INFO     2024-01-26 14:09:50.269 request id: app - uvicorn.server:serve - Started server process [2878050]
INFO     2024-01-26 14:09:50.271 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:09:50.271 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:09:54.293 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7ff5d9952c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7ff5d346dcf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('974cb012-70d5-53f1-9d7e-edd3bdc4d94b'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7ff5d3108b80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7ff5dcd0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7ff5dce5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7ff5dce5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7ff5dcd541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
    │    └ <function subprocess_started at 0x7ff5dc18e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7ff5dcd54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7ff5dc18d900>
    │    │                  └ <uvicorn.server.Server object at 0x7ff5dcd54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7ff5dc5a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7ff5dc5a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7ff5dc5a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7ff5dccf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7ff5d304f940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7ff5d304f940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7ff5d304f940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7ff5d304f940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7ff5dc088550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7ff5dc0885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff5dcd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7ff5db46ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff5dcd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff5d318a680>
          └ <fastapi.applications.FastAPI object at 0x7ff5db46ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7ff5d304feb0>
                     │    └ <function error_handle_business at 0x7ff5db2fb5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff5d318a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff5d3215240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff5d318a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff5d3215240>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7ff5db327e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff5d318a5c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff5d32152d0>
                     │    │             └ <starlette.requests.Request object at 0x7ff5d304cc70>
                     │    └ <function process_middleware_common at 0x7ff5db2fb9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff5d318a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7ff5d304cc70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff5d32152d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7ff5db888a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7ff5db3fc8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7ff5d304cc70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff5d318a590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff5d318a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d32160e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff5d318a530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff5d318a590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d32160e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7ff5db2ee260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff5d318a530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d32160e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7ff5db43e4d0>
          └ <fastapi.routing.APIRoute object at 0x7ff5d31ba410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d32160e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d304d2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7ff5d315eb00>
          └ <fastapi.routing.APIRoute object at 0x7ff5d31ba410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7ff5d304f760>
                     └ <function get_request_handler.<locals>.app at 0x7ff5d315ea70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7ff5db43f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7ff5d315dd80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7ff5d31ba4d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7ff5d304f460>
                 │                └ <function ResourceService.upload_resource at 0x7ff5d38d6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7ff5d876f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
    │    └ <function ResourceService.check_info at 0x7ff5d38d6560>
    └ <app.src.services.resource_service.ResourceService object at 0x7ff5d876f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 52, in check_info
    _ = self.base_service.engine_postgresql.create(getattr(models, k),
        │    │            │                 │              │       └ 'PackageRepository'
        │    │            │                 │              └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
        │    │            │                 └ <function PostgreSQLDB.create at 0x7ff5d87aab90>
        │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7ff5d876f370>
        │    └ <app.src.services.base_service.BaseService object at 0x7ff5d876f1f0>
        └ <app.src.services.resource_service.ResourceService object at 0x7ff5d876f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 38, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7ff5d97e7490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7ff5d346e020>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7ff5d876f370>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7ff5d97e6710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7ff5d3231b00>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7ff5d3231b00>
                └ <function SessionTransaction.commit at 0x7ff5d97e6680>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7ff5d97e65f0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7ff5d3231b00>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7ff5d3231b00>
                └ <function SessionTransaction._prepare_impl at 0x7ff5d97e64d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7ff5d97f9120>
    │    └ <sqlalchemy.orm.session.Session object at 0x7ff5d346e020>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7ff5d3231b00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7ff5d97f92d0>
    └ <sqlalchemy.orm.session.Session object at 0x7ff5d346e020>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7ff5d27b4940>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7ff5d97d35b0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7ff5d27475e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7ff5d27475e0>
    │   └ <function SaveUpdateAll.execute at 0x7ff5d97d3eb0>
    └ SaveUpdateAll(Mapper[PackageRepository(package_repos)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7ff5d97a24d0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7ff5d97a2ef0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7ff5d9abff40>
             └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7ff5d27467a0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7ff5d9ac4280>
           └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7ff5d9ac4430>
          └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7ff5d9ac44c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7ff5d9ac4700>
    └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "package_repos_name_key"\nDETAIL:  Key (name)=(cda764ee-1a2a-...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "package_repos_na...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"\nDE...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7ff5d9952c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7ff5d346dcf0>
    └ <sqlalchemy.engine.base.Connection object at 0x7ff5d27464a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('974cb012-70d5-53f1-9d7e-edd3bdc4d94b'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}
    │      │       └ 'INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7ff5d3108b80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "package_repos_name_key"
DETAIL:  Key (name)=(cda764ee-1a2a-53e4-98d6-85d72986a01d) already exists.

[SQL: INSERT INTO package_repos (id, name, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(is_deleted)s) RETURNING package_repos.created_at, package_repos.updated_at]
[parameters: {'id': UUID('974cb012-70d5-53f1-9d7e-edd3bdc4d94b'), 'name': 'cda764ee-1a2a-53e4-98d6-85d72986a01d', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-01-26 14:09:54.313 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52192 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-26 14:10:24.117 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7ff5db888310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7ff5db8883a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7ff5dcd0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7ff5dce5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7ff5dce5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7ff5dcd541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
    │    └ <function subprocess_started at 0x7ff5dc18e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2878048 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7ff5dcd54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7ff5dc18d900>
    │    │                  └ <uvicorn.server.Server object at 0x7ff5dcd54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7ff5dc5a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7ff5dc5a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7ff5dc5a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7ff5dccf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7ff5d2796140>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7ff5d2796140>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7ff5d2796140>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7ff5d2796140>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7ff5dc088550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7ff5dc0885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff5dcd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7ff5db46ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff5dcd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff5d318a680>
          └ <fastapi.applications.FastAPI object at 0x7ff5db46ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7ff5d27952a0>
                     │    └ <function error_handle_business at 0x7ff5db2fb5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff5d318a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("FileRepository.create_resource_with_file() missing 1 required positional argument: 'file_data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff5d25e08b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff5d318a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff5d25e08b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7ff5db327e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff5d318a5c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff5d318a650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff5d25e0790>
                     │    │             └ <starlette.requests.Request object at 0x7ff5d27950c0>
                     │    └ <function process_middleware_common at 0x7ff5db2fb9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff5d318a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7ff5d27950c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff5d25e0790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("FileRepository.create_resource_with_file() missing 1 required positional argument: 'file_data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7ff5db888a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7ff5db3fc8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7ff5d27950c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff5d318a590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff5d318a5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d25e0a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff5d318a530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff5d318a590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d25e0a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7ff5db2ee260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff5d318a530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d25e0a60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7ff5db43e4d0>
          └ <fastapi.routing.APIRoute object at 0x7ff5d31ba410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff5d25e0a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff5d2795d80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7ff5d315eb00>
          └ <fastapi.routing.APIRoute object at 0x7ff5d31ba410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7ff5d2795cf0>
                     └ <function get_request_handler.<locals>.app at 0x7ff5d315ea70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7ff5db43f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7ff5d315dd80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7ff5d31ba4d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7ff5d2796110>
                 │                └ <function ResourceService.upload_resource at 0x7ff5d38d6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7ff5d876f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7ff5d38d6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7ff5d346e230>
                             └ <app.src.services.resource_service.ResourceService object at 0x7ff5d876f1c0>

TypeError: FileRepository.create_resource_with_file() missing 1 required positional argument: 'file_data'
INFO     2024-01-26 14:10:24.129 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41082 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:13:39.300 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:13:39.402 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:13:39.403 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:13:39.403 request id: app - uvicorn.server:serve - Finished server process [2878050]
INFO     2024-01-26 14:13:40.330 request id: app - uvicorn.server:serve - Started server process [2879389]
INFO     2024-01-26 14:13:40.331 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:13:40.331 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:13:58.597 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fd57377c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fd57377c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fd574bc3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fd574d5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fd574d5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fd574c0c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2878048 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2878048 started>
    │    └ <function subprocess_started at 0x7fd57409a440>
    └ <SpawnProcess name='SpawnProcess-2' parent=2878048 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fd574c0c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fd574099900>
    │    │                  └ <uvicorn.server.Server object at 0x7fd574c0c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fd57498e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd57498e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd57498feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd574bb3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fd56aefffa0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fd56aefffa0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fd56aefffa0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fd56aefffa0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fd573f94550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fd573f945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd574c0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fd573356b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd574c0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd56b2426e0>
          └ <fastapi.applications.FastAPI object at 0x7fd573356b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fd56aefd9f0>
                     │    └ <function error_handle_business at 0x7fd5731e35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd56b2426e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'function' object has no attribute 'rollback'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd56b2d9120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd56b2426b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd56b2426e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd56b2d9120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fd57320fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd56b2426b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fd56b2426b0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd56b242620>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd56b2426b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd56b2d91b0>
                     │    │             └ <starlette.requests.Request object at 0x7fd56aefccd0>
                     │    └ <function process_middleware_common at 0x7fd5731e39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd56b242620>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fd56aefccd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd56b2d91b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'function' object has no attribute 'rollback'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fd57377ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fd5732e88b0>
          │    │   │      └ <starlette.requests.Request object at 0x7fd56aefccd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd56b2425f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd56b242620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd56b2d9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd56b242590>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd56b2425f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd56b2d9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fd5731d6260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd56b242590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd56b2d9fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fd57332a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fd56b276470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd56b2d9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd56aefd330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fd56b2269e0>
          └ <fastapi.routing.APIRoute object at 0x7fd56b276470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fd56aeffee0>
                     └ <function get_request_handler.<locals>.app at 0x7fd56b226950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fd57332b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7fd56b225c60>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fd56b276530>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fd56aeffb80>
                 │                └ <function ResourceService.upload_resource at 0x7fd56b6ce200>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fd57056f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fd56b6ce320>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fd56b372290>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fd57056f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    session.rollback()
    └ <bound method BaseService.db_session of <app.src.services.base_service.BaseService object at 0x7fd57056f1f0>>

AttributeError: 'function' object has no attribute 'rollback'
INFO     2024-01-26 14:13:58.618 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50668 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:14:23.525 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:14:23.627 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:14:23.628 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:14:23.629 request id: app - uvicorn.server:serve - Finished server process [2879389]
INFO     2024-01-26 14:14:24.545 request id: app - uvicorn.server:serve - Started server process [2879662]
INFO     2024-01-26 14:14:24.546 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:14:24.547 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:14:26.927 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f262ea04310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f262ea043a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f262fe0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f262ff62950>
           └ <SpawnProcess name='SpawnProcess-3' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f262ff61fc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f262fe581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2878048 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2878048 started>
    │    └ <function subprocess_started at 0x7f262f376440>
    └ <SpawnProcess name='SpawnProcess-3' parent=2878048 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f262fe58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f262f375900>
    │    │                  └ <uvicorn.server.Server object at 0x7f262fe58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f262f7aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f262f7aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f262f7abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f262fdfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f262621b940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f262621b940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f262621b940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f262621b940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f262f23c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f262f23c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f262fe59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f262e5deb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f262fe59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f262634e680>
          └ <fastapi.applications.FastAPI object at 0x7f262e5deb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2626219990>
                     │    └ <function error_handle_business at 0x7f262e46b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f262634e680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f26263e5120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f262634e650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f262634e680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f26263e5120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f262e497e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f262634e650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f262634e650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f262634e5c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f262634e650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f26263e51b0>
                     │    │             └ <starlette.requests.Request object at 0x7f2626218c70>
                     │    └ <function process_middleware_common at 0x7f262e46b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f262634e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2626218c70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f26263e51b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f262ea04a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f262e570590>
          │    │   │      └ <starlette.requests.Request object at 0x7f2626218c70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f262634e590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f262634e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f26263e5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f262634e530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f262634e590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f26263e5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f262e45e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f262634e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f26263e5fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f262e5b24d0>
          └ <fastapi.routing.APIRoute object at 0x7f262637e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f26263e5fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f26262192d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f262632e9e0>
          └ <fastapi.routing.APIRoute object at 0x7f262637e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f262621b760>
                     └ <function get_request_handler.<locals>.app at 0x7f262632e950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f262e5b3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f262632dc60>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f262637e4d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f262621b460>
                 │                └ <function ResourceService.upload_resource at 0x7f2626a86440>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f262714f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f2626a86560>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f2626632230>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f262714f1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 60, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f262ff4cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:14:26.947 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36358 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:14:41.323 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:14:41.425 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:14:41.427 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:14:41.429 request id: app - uvicorn.server:serve - Finished server process [2879662]
INFO     2024-01-26 14:14:42.376 request id: app - uvicorn.server:serve - Started server process [2879769]
INFO     2024-01-26 14:14:42.377 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:14:42.377 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:14:43.880 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc58cde4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc58cde43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc58e20fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc58e362950>
           └ <SpawnProcess name='SpawnProcess-4' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc58e361fc0>
    └ <SpawnProcess name='SpawnProcess-4' parent=2878048 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc58e2581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2878048 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2878048 started>
    │    └ <function subprocess_started at 0x7fc58d75a440>
    └ <SpawnProcess name='SpawnProcess-4' parent=2878048 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc58e258310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc58d759900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc58e258310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc58dbaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc58dbaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc58dbabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc58e1fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc584563940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc584563940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc584563940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc584563940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc58d61c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc58d61c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc58e259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc58c9c6b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc58e259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc58469e680>
          └ <fastapi.applications.FastAPI object at 0x7fc58c9c6b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc584561990>
                     │    └ <function error_handle_business at 0x7fc58c8575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc58469e680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'function' object has no attribute 'rollback'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc58472d1b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc58469e650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc58469e680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc58472d1b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc58c887e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc58469e650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc58469e650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc58469e5c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc58469e650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc58472d240>
                     │    │             └ <starlette.requests.Request object at 0x7fc584560c70>
                     │    └ <function process_middleware_common at 0x7fc58c8579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc58469e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc584560c70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc58472d240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'function' object has no attribute 'rollback'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc58cde4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc58c958810>
          │    │   │      └ <starlette.requests.Request object at 0x7fc584560c70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc58469e590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc58469e5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc58472e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc58469e530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc58469e590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc58472e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc58c84a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc58469e530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc58472e050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc58c99a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fc5846ce410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc58472e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5845612d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc584676a70>
          └ <fastapi.routing.APIRoute object at 0x7fc5846ce410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc584563760>
                     └ <function get_request_handler.<locals>.app at 0x7fc5846769e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc58c99b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7fc584675cf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc5846ce4d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fc584563460>
                 │                └ <function ResourceService.upload_resource at 0x7fc584dee560>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc585be31c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fc584dee680>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fc584986230>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fc585be31c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    session.rollback()
    └ <bound method BaseService.db_session of <app.src.services.base_service.BaseService object at 0x7fc585be31f0>>

AttributeError: 'function' object has no attribute 'rollback'
INFO     2024-01-26 14:14:43.899 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39188 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:24:35.580 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:24:35.682 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:24:35.683 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:24:35.683 request id: app - uvicorn.server:serve - Finished server process [2879769]
INFO     2024-01-26 14:24:36.792 request id: app - uvicorn.server:serve - Started server process [2883156]
INFO     2024-01-26 14:24:36.794 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:24:36.794 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:24:43.720 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6071db4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6071db43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f607320bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f607335e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2883154 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f607335dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2883154 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f60732541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2883154 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2883154 started>
    │    └ <function subprocess_started at 0x7f607271e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2883154 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6073254310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f607271d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6073254310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6072fce440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6072fce3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6072fcfeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f60731f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f606954b940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f606954b940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f606954b940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f606954b940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f60725e4550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f60725e45e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6073255e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6071996b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6073255e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6069686680>
          └ <fastapi.applications.FastAPI object at 0x7f6071996b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6069549990>
                     │    └ <function error_handle_business at 0x7f60718275b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6069686680>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f606971d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6069686650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6069686680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169626', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f606971d120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6071857e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6069686650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f6069686650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60696865c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6069686650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f606971d1b0>
                     │    │             └ <starlette.requests.Request object at 0x7f6069548c70>
                     │    └ <function process_middleware_common at 0x7f60718279a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60696865c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6069548c70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f606971d1b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6071db4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6071928860>
          │    │   │      └ <starlette.requests.Request object at 0x7f6069548c70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6069686590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60696865c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606971dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6069686530>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6069686590>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606971dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f607181a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6069686530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606971dfc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f607196a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f60696b6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f606971dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60695492d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f60696669e0>
          └ <fastapi.routing.APIRoute object at 0x7f60696b6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f606954b760>
                     └ <function get_request_handler.<locals>.app at 0x7f6069666950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f607196b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519...
                 │         └ <function create_one at 0x7f6069665c60>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f60696b64d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage='367814e6-063c-560c-b428-20ed1ed85f4f', status='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film_Projec...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f606954b460>
                 │                └ <function ResourceService.upload_resource at 0x7f6069dd6440>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f606abcb1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f6069dd6560>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f606996e230>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f606abcb1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f6073348be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:24:43.741 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42168 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:25:55.553 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:25:55.654 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:25:55.655 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:25:55.655 request id: app - uvicorn.server:serve - Finished server process [2883156]
INFO     2024-01-26 14:25:58.779 request id: app - uvicorn.server:serve - Started server process [2884064]
INFO     2024-01-26 14:25:58.782 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:25:58.784 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:26:42.472 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:26:42.580 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:26:42.583 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:26:42.586 request id: app - uvicorn.server:serve - Finished server process [2884064]
INFO     2024-01-26 14:26:46.730 request id: app - uvicorn.server:serve - Started server process [2884373]
INFO     2024-01-26 14:26:46.731 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:26:46.732 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:31:27.468 request id: app - uvicorn.server:serve - Started server process [2886497]
INFO     2024-01-26 14:31:27.470 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:31:27.470 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:31:30.279 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60768 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 14:31:30.380 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60768 - "GET /static/swagger-ui.css HTTP/1.1" 304
INFO     2024-01-26 14:31:30.381 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60784 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 304
INFO     2024-01-26 14:31:30.535 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60784 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 14:31:50.699 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 14:31:51.000 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1NjExMH0.6JVEkeOIP4BiQ-O2vLi77MNe6_7WG_EIFKAyAW0Zvrk","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI3MjMxMX0.Dz0_E419hdKQ9dTXlUVhgWdCXcxoeRpxmxT0s72afkY"},"links":null,"relationships":null,"timestamp":"2024-01-26 14:31:27"}'}
INFO     2024-01-26 14:31:51.001 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35020 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 14:34:24.405 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa41b1e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa41b1e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa41c60fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa41c762950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2886495 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa41c761fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2886495 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa41c6581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2886495 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2886495 started>
    │    └ <function subprocess_started at 0x7fa41bb66440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2886495 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa41c658310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa41bb65900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa41c658310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa41bfaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa41bfaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa41bfabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa41c5fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa4129b3580>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa4129b3580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa4129b3580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa4129b3580>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa41ba24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa41ba245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa41c659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa41adc6b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa41c659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa412a9a860>
          └ <fastapi.applications.FastAPI object at 0x7fa41adc6b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa4118f0fa0>
                     │    └ <function error_handle_business at 0x7fa41ac575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa412a9a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceCreate' object has no attribute 'stage'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa4129a0670>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa412a9a830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa412a9a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169767', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa4129a0670>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa41ac83e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa412a9a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa412a9a830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa412a9a7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa412a9a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa4129a09d0>
                     │    │             └ <starlette.requests.Request object at 0x7fa4129b3130>
                     │    └ <function process_middleware_common at 0x7fa41ac579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa412a9a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa4129b3130>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa4129a09d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceCreate' object has no attribute 'stage'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa41b1e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa41ad58680>
          │    │   │      └ <starlette.requests.Request object at 0x7fa4129b3130>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa412a9a770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa412a9a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4118e6dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa412a9a710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa412a9a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4118e6dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa41ac4a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa412a9a710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4118e6dd0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa41ad9a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fa412ac6740>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4118e6dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4118f16f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa412a6ea70>
          └ <fastapi.routing.APIRoute object at 0x7fa412ac6740>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa4118f18d0>
                     └ <function get_request_handler.<locals>.app at 0x7fa412a6e9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa41ad9b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fa412a6dcf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa412ac6800>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fa4118f1e40>
                 │                └ <function ResourceService.upload_resource at 0x7fa4131de320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa413f7b250>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
    │    └ <function ResourceService.check_info at 0x7fa4131de560>
    └ <app.src.services.resource_service.ResourceService object at 0x7fa413f7b250>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in check_info
    if info_value := getattr(schema, v):
                             │       └ 'stage'
                             └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...

AttributeError: 'ResourceCreate' object has no attribute 'stage'
INFO     2024-01-26 14:34:24.426 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57044 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:35:51.749 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:35:51.851 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:35:51.854 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:35:51.856 request id: app - uvicorn.server:serve - Finished server process [2886497]
INFO     2024-01-26 14:35:54.270 request id: app - uvicorn.server:serve - Started server process [2888057]
INFO     2024-01-26 14:35:54.272 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:35:54.272 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:35:58.592 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:35:58.696 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:35:58.698 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:35:58.700 request id: app - uvicorn.server:serve - Finished server process [2888057]
INFO     2024-01-26 14:36:01.876 request id: app - uvicorn.server:serve - Started server process [2888108]
INFO     2024-01-26 14:36:01.878 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:36:01.879 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:37:59.449 request id: app - uvicorn.server:serve - Started server process [2888857]
INFO     2024-01-26 14:37:59.451 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:37:59.452 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:38:50.370 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f968c80f910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f968c80f9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f968f369120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f968f32fe20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2888851 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f968f32f490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2888851 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f968f382830>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2888851 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2888851 started>
    │    └ <function subprocess_started at 0x7f968d08dbd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2888851 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f968f381e40>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f968d08cee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f968f381e40>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f968f2ada20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f968f2ad990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f968f2af490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f968f522830>
    └ <Handle <TaskStepMethWrapper object at 0x7f9673fbf160>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9673fbf160>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9673fbf160>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9673fbf160>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f968d117250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f968d1172e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f968f614e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f968c430ac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f968f614e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f967c35dd50>
          └ <fastapi.applications.FastAPI object at 0x7f968c430ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9673fbf070>
                     │    └ <function error_handle_business at 0x7f968c457370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f967c35dd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceCreate' object has no attribute 'stage'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9673f98ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f967c35dd20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f967c35dd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169767', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9673f98ca0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f968c2cc160>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f967c35dd20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f967c35dd20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f967c35dc90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f967c35dd20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9673f98d30>
                     │    │             └ <starlette.requests.Request object at 0x7f9673fbc4c0>
                     │    └ <function process_middleware_common at 0x7f968c457910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f967c35dc90>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9673fbc4c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9673f98d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceCreate' object has no attribute 'stage'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f968c8280d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f968c3bd710>
          │    │   │      └ <starlette.requests.Request object at 0x7f9673fbc4c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f967c35dc60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f967c35dc90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9673f99b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f967c35dc00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f967c35dc60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9673f99b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f968c271840>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f967c35dc00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9673f99b40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f968c3fd630>
          └ <fastapi.routing.APIRoute object at 0x7f9673f05c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9673f99b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9673fbcb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f967c349b40>
          └ <fastapi.routing.APIRoute object at 0x7f9673f05c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9673fbfe20>
                     └ <function get_request_handler.<locals>.app at 0x7f967c349ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f968c3fe290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f967c348dc0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f9673f05cf0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f9673fbf7f0>
                 │                └ <function ResourceService.upload_resource at 0x7f968cbb5240>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f967d60ffa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
    │    └ <function ResourceService.check_info at 0x7f968cbb5480>
    └ <app.src.services.resource_service.ResourceService object at 0x7f967d60ffa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in check_info
    if info_value := getattr(schema, v):
                             │       └ 'stage'
                             └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...

AttributeError: 'ResourceCreate' object has no attribute 'stage'
INFO     2024-01-26 14:38:50.496 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41712 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:38:50.498 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:38:50.600 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:38:50.601 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:38:50.602 request id: app - uvicorn.server:serve - Finished server process [2888857]
INFO     2024-01-26 14:38:53.806 request id: app - uvicorn.server:serve - Started server process [2889239]
INFO     2024-01-26 14:38:53.808 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:38:53.809 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:41:28.767 request id: app - uvicorn.server:serve - Started server process [2890242]
INFO     2024-01-26 14:41:28.768 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:41:28.769 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:41:32.254 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7efd9113ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7efd8ac65db0>
    └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}
    │      │       └ 'SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7efd8a8e93f0; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b	"
LINE 3: WHERE resource_tags.id = 'fd02b16b-886c-5b4e-a253-d1dd6c91d4...
                                 ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7efd9450bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7efd9465e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7efd9465dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7efd945541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
    │    └ <function subprocess_started at 0x7efd93a1e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7efd94554310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7efd93a1d900>
    │    │                  └ <uvicorn.server.Server object at 0x7efd94554310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7efd93da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7efd93da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7efd93da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7efd944f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7efd8a8478e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7efd8a8478e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7efd8a8478e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7efd8a8478e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7efd938e4550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7efd938e45e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efd94555e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7efd92c86b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efd94555e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efd8a97e890>
          └ <fastapi.applications.FastAPI object at 0x7efd92c86b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7efd8a845d20>
                     │    └ <function error_handle_business at 0x7efd92b135b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efd8a97e890>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efd8aa11090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efd8a97e890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169767', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efd8aa11090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7efd92b43e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efd8a97e7d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efd8aa11120>
                     │    │             └ <starlette.requests.Request object at 0x7efd8a845000>
                     │    └ <function process_middleware_common at 0x7efd92b139a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efd8a97e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7efd8a845000>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efd8aa11120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7efd930aca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7efd92c188b0>
          │    │   │      └ <starlette.requests.Request object at 0x7efd8a845000>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7efd8a97e7a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efd8a97e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd8aa11f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efd8a97e740>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7efd8a97e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd8aa11f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7efd92d06260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efd8a97e740>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd8aa11f30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7efd92c5a4d0>
          └ <fastapi.routing.APIRoute object at 0x7efd8a9ae770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd8aa11f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd8a845660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7efd8a95e950>
          └ <fastapi.routing.APIRoute object at 0x7efd8a9ae770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7efd8a847850>
                     └ <function get_request_handler.<locals>.app at 0x7efd8a95e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7efd92c5b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7efd8a95dbd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7efd8a9ae830>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7efd8a847be0>
                 │                └ <function ResourceService.upload_resource at 0x7efd8b0ca200>
                 └ <app.src.services.resource_service.ResourceService object at 0x7efd8b7fb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 28, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
    │    └ <function ResourceService.check_info at 0x7efd8b0ca440>
    └ <app.src.services.resource_service.ResourceService object at 0x7efd8b7fb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'
               │    │            │                 │                        │       └ 'ResourceTag'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7efd8b836b90>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7efd8b84ff40>
               │    └ <app.src.services.base_service.BaseService object at 0x7efd8b7fb250>
               └ <app.src.services.resource_service.ResourceService object at 0x7efd8b7fb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 47, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7efd90f5dab0>
             └ <sqlalchemy.orm.query.Query object at 0x7efd8a939750>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7efd90f5e200>
           └ <sqlalchemy.orm.query.Query object at 0x7efd8a939750>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7efd90fd3760>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7efd8a8470d0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7efd8a939750>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7efd90fd36d0>
           └ <sqlalchemy.orm.session.Session object at 0x7efd8a8470d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7efd91087880>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7efd912abf40>
             └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7efd8a939300>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7efd912b0280>
           └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7efd912b0430>
          └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7efd912b04c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7efd912b0700>
    └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t"\nLINE 3: WHERE resour...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "fd02b16...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7efd9113ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7efd8ac65db0>
    └ <sqlalchemy.engine.base.Connection object at 0x7efd8a93a590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}
    │      │       └ 'SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7efd8a8e93f0; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b	"
LINE 3: WHERE resource_tags.id = 'fd02b16b-886c-5b4e-a253-d1dd6c91d4...
                                 ^

[SQL: SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_tags_created_at, resource_tags.updated_at AS resource_tags_updated_at, resource_tags.is_deleted AS resource_tags_is_deleted 
FROM resource_tags 
WHERE resource_tags.id = %(id_1)s::UUID]
[parameters: {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-01-26 14:41:32.277 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41314 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-26 14:41:53.497 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7efd930ac310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7efd930ac3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7efd9450bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7efd9465e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7efd9465dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7efd945541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
    │    └ <function subprocess_started at 0x7efd93a1e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2890240 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7efd94554310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7efd93a1d900>
    │    │                  └ <uvicorn.server.Server object at 0x7efd94554310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7efd93da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7efd93da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7efd93da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7efd944f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7efd89f8eda0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7efd89f8eda0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7efd89f8eda0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7efd89f8eda0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7efd938e4550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7efd938e45e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efd94555e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7efd92c86b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efd94555e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efd8a97e890>
          └ <fastapi.applications.FastAPI object at 0x7efd92c86b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7efd89f8fd90>
                     │    └ <function error_handle_business at 0x7efd92b135b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efd8a97e890>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efd89db8ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efd8a97e890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efd89db8ca0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7efd92b43e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efd8a97e7d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efd8a97e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efd89db8d30>
                     │    │             └ <starlette.requests.Request object at 0x7efd89f8ff70>
                     │    └ <function process_middleware_common at 0x7efd92b139a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efd8a97e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7efd89f8ff70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efd89db8d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7efd930aca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7efd92c188b0>
          │    │   │      └ <starlette.requests.Request object at 0x7efd89f8ff70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7efd8a97e7a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efd8a97e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd89db8f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efd8a97e740>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7efd8a97e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd89db8f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7efd92d06260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efd8a97e740>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd89db8f70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7efd92c5a4d0>
          └ <fastapi.routing.APIRoute object at 0x7efd8a9ae770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efd89db8f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efd89f8f460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7efd8a95e950>
          └ <fastapi.routing.APIRoute object at 0x7efd8a9ae770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7efd89f8f3d0>
                     └ <function get_request_handler.<locals>.app at 0x7efd8a95e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7efd92c5b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7efd8a95dbd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7efd8a9ae830>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7efd89f8f340>
                 │                └ <function ResourceService.upload_resource at 0x7efd8b0ca200>
                 └ <app.src.services.resource_service.ResourceService object at 0x7efd8b7fb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7efd8b0ca320>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7efd8ac662f0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7efd8b7fb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7efd94648be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:41:53.514 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38266 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:42:16.667 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:42:16.769 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:42:16.771 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:42:16.773 request id: app - uvicorn.server:serve - Finished server process [2890242]
INFO     2024-01-26 14:42:19.229 request id: app - uvicorn.server:serve - Started server process [2890545]
INFO     2024-01-26 14:42:19.231 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:42:19.232 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:43:08.805 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb7e07d3910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb7e07d39a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fb7e332d120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fb7e32f3e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2890540 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb7e32f3490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2890540 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb7e3346860>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2890540 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2890540 started>
    │    └ <function subprocess_started at 0x7fb7e1051bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2890540 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb7e3345e40>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb7e1050ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7fb7e3345e40>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb7e3271a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb7e3271990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb7e3273490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb7e3502830>
    └ <Handle <TaskStepMethWrapper object at 0x7fb7c7ed1600>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb7c7ed1600>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb7c7ed1600>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb7c7ed1600>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb7e10db250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb7e10db2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb7e35f8e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb7e03e8ac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb7e35f8e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb7d00f1d50>
          └ <fastapi.applications.FastAPI object at 0x7fb7e03e8ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb7c7fadcc0>
                     │    └ <function error_handle_business at 0x7fb7e040f370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb7d00f1d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb7c7f988b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb7d00f1d20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb7d00f1d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb7c7f988b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb7e02840d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb7d00f1d20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb7d00f1d20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb7d00f1c90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb7d00f1d20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb7c7f98940>
                     │    │             └ <starlette.requests.Request object at 0x7fb7c7fac4c0>
                     │    └ <function process_middleware_common at 0x7fb7e040f910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb7d00f1c90>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb7c7fac4c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb7c7f98940>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb7e07e80d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb7e036dee0>
          │    │   │      └ <starlette.requests.Request object at 0x7fb7c7fac4c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb7d00f1c60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb7d00f1c90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7c7f99750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb7d00f1c00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb7d00f1c60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7c7f99750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb7e0229840>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb7d00f1c00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7c7f99750>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb7e03b5630>
          └ <fastapi.routing.APIRoute object at 0x7fb7d0115c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb7c7f99750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb7c7facb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb7d00e5750>
          └ <fastapi.routing.APIRoute object at 0x7fb7d0115c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb7c7fafe20>
                     └ <function get_request_handler.<locals>.app at 0x7fb7d00e56c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb7e03b6290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fb7d00e49d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fb7d0115cf0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fb7c7faf7f0>
                 │                └ <function ResourceService.upload_resource at 0x7fb7d05ace50>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fb7d15f7fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fb7d05acf70>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fb7d035d840>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fb7d15f7fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fb7e4392e60>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:43:08.878 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34134 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:43:22.775 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:43:22.881 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:43:22.884 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:43:22.888 request id: app - uvicorn.server:serve - Finished server process [2890545]
INFO     2024-01-26 14:43:26.291 request id: app - uvicorn.server:serve - Started server process [2891150]
INFO     2024-01-26 14:43:26.293 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:43:26.294 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:44:17.642 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc3cac67910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc3cac679a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fc3d17c9120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fc3d178fe20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2891122 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc3d178f490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2891122 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc3d17e2830>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2891122 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2891122 started>
    │    └ <function subprocess_started at 0x7fc3d04f5bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2891122 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc3d17e1e40>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc3d04f4ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7fc3d17e1e40>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc3d170da20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc3d170d990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc3d170f490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc3d199e830>
    └ <Handle <TaskStepMethWrapper object at 0x7fc3b5262d40>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc3b5262d40>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc3b5262d40>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc3b5262d40>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc3d057f250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc3d057f2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc3d1a94e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc3ca884ac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc3d1a94e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3b65edd50>
          └ <fastapi.applications.FastAPI object at 0x7fc3ca884ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc3b63bff10>
                     │    └ <function error_handle_business at 0x7fc3ca8ab370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3b65edd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc3b64c84c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3b65edd20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3b65edd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc3b64c84c0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc3ca720280>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3b65edd20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc3b65edd20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3b65edc90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3b65edd20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc3b64c8550>
                     │    │             └ <starlette.requests.Request object at 0x7fc3b64cc4c0>
                     │    └ <function process_middleware_common at 0x7fc3ca8ab910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3b65edc90>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc3b64cc4c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc3b64c8550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc3cac840d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc3ca8119e0>
          │    │   │      └ <starlette.requests.Request object at 0x7fc3b64cc4c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc3b65edc60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3b65edc90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3b64c9360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc3b65edc00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc3b65edc60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3b64c9360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc3ca6c9840>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc3b65edc00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3b64c9360>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc3ca851630>
          └ <fastapi.routing.APIRoute object at 0x7fc3b6615c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3b64c9360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3b64ccb20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc3b65f5360>
          └ <fastapi.routing.APIRoute object at 0x7fc3b6615c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc3b64cfe20>
                     └ <function get_request_handler.<locals>.app at 0x7fc3b65f52d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc3ca852290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fc3b65f45e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc3b6615cf0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fc3b64cf7f0>
                 │                └ <function ResourceService.upload_resource at 0x7fc3b6aa8a60>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc3c80fbfa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fc3b6aa8b80>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fc3b6859840>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fc3c80fbfa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fc3d2796e60>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:44:17.772 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53602 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:45:08.296 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:45:10.352 request id: app - uvicorn.server:serve - Started server process [2892058]
INFO     2024-01-26 14:45:10.354 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:45:10.354 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:45:15.562 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb0b4fa8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb0b4fa83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb0b640fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb0b6562950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2892056 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb0b6561fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2892056 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb0b64581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2892056 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2892056 started>
    │    └ <function subprocess_started at 0x7fb0b5926440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2892056 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb0b6458310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb0b5925900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb0b6458310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb0b61b6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb0b61b63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb0b61b7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb0b63fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb0ac74b640>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb0ac74b640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb0ac74b640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb0ac74b640>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb0b57e0550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb0b57e05e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb0b6459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb0b4b82b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb0b6459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0ac88a830>
          └ <fastapi.applications.FastAPI object at 0x7fb0b4b82b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb0ac749cc0>
                     │    └ <function error_handle_business at 0x7fb0b4a0f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0ac88a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb0ac9111b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0ac88a800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0ac88a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb0ac9111b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb0b4a3be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0ac88a800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb0ac88a800>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0ac88a770>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0ac88a800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb0ac911240>
                     │    │             └ <starlette.requests.Request object at 0x7fb0ac748fa0>
                     │    └ <function process_middleware_common at 0x7fb0b4a0f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0ac88a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb0ac748fa0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb0ac911240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb0b4fa8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb0b4b14770>
          │    │   │      └ <starlette.requests.Request object at 0x7fb0ac748fa0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb0ac88a740>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0ac88a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0ac912050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb0ac88a6e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb0ac88a740>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0ac912050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb0b4a02260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb0ac88a6e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0ac912050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb0b4b564d0>
          └ <fastapi.routing.APIRoute object at 0x7fb0ac8b6710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0ac912050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0ac749600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb0ac862a70>
          └ <fastapi.routing.APIRoute object at 0x7fb0ac8b6710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb0ac74b7f0>
                     └ <function get_request_handler.<locals>.app at 0x7fb0ac8629e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb0b4b57130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fb0ac861cf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fb0ac8b67d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fb0ac74bb50>
                 │                └ <function ResourceService.upload_resource at 0x7fb0acfd6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fb0adccb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fb0acfd6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fb0acb6e290>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fb0adccb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fb0b654cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:45:15.577 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44488 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:45:25.821 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:45:25.924 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:45:25.925 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:45:25.925 request id: app - uvicorn.server:serve - Finished server process [2892058]
INFO     2024-01-26 14:45:29.455 request id: app - uvicorn.server:serve - Started server process [2892171]
INFO     2024-01-26 14:45:29.456 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:45:29.457 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:48:18.919 request id: app - uvicorn.server:serve - Started server process [2893356]
INFO     2024-01-26 14:48:18.921 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:48:18.922 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:48:22.374 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f8b8c920310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f8b8c9203a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f8b8dd0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f8b8de5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2893354 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f8b8de5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2893354 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f8b8dd541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2893354 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2893354 started>
    │    └ <function subprocess_started at 0x7f8b8d292440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2893354 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f8b8dd54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f8b8d291900>
    │    │                  └ <uvicorn.server.Server object at 0x7f8b8dd54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8b8db06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8b8db063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8b8db07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8b8dcf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f8b8812f640>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8b8812f640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8b8812f640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8b8812f640>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f8b8d15c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8b8d15c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8b8dd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8b8c4feb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8b8dd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b8826a830>
          └ <fastapi.applications.FastAPI object at 0x7f8b8c4feb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f8b8812f610>
                     │    └ <function error_handle_business at 0x7f8b8c38f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b8826a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8b882f11b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b8826a800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b8826a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8b882f11b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f8b8c3bbe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b8826a800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f8b8826a800>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b8826a770>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b8826a800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8b882f1240>
                     │    │             └ <starlette.requests.Request object at 0x7f8b8812cfa0>
                     │    └ <function process_middleware_common at 0x7f8b8c38f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b8826a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f8b8812cfa0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8b882f1240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f8b8c920a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f8b8c490680>
          │    │   │      └ <starlette.requests.Request object at 0x7f8b8812cfa0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8b8826a740>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b8826a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b882f2050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8b8826a6e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8b8826a740>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b882f2050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8b8c382260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8b8826a6e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b882f2050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f8b8c4d24d0>
          └ <fastapi.routing.APIRoute object at 0x7f8b88292710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b882f2050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b8812d600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8b8823ea70>
          └ <fastapi.routing.APIRoute object at 0x7f8b88292710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f8b8812f7f0>
                     └ <function get_request_handler.<locals>.app at 0x7f8b8823e9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f8b8c4d3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f8b8823dcf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f8b882927d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f8b8812fb50>
                 │                └ <function ResourceService.upload_resource at 0x7f8b88996320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f8b8976f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f8b88996440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f8b88542290>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f8b8976f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f8b8de48be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:48:22.388 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51156 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:48:27.911 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:48:28.013 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:48:28.015 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:48:28.018 request id: app - uvicorn.server:serve - Finished server process [2893356]
INFO     2024-01-26 14:48:33.042 request id: app - uvicorn.server:serve - Started server process [2893463]
INFO     2024-01-26 14:48:33.043 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:48:33.044 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:48:35.434 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7ff7c64e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7ff7c64e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7ff7c790bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7ff7c7a5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2893461 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7ff7c7a5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2893461 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7ff7c79541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2893461 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2893461 started>
    │    └ <function subprocess_started at 0x7ff7c6e66440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2893461 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7ff7c7954310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7ff7c6e65900>
    │    │                  └ <uvicorn.server.Server object at 0x7ff7c7954310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7ff7c7706440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7ff7c77063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7ff7c7707eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7ff7c78f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7ff7bdc4b640>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7ff7bdc4b640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7ff7bdc4b640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7ff7bdc4b640>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7ff7c6d24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7ff7c6d245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff7c7955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7ff7c60c6b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff7c7955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff7bdd8e830>
          └ <fastapi.applications.FastAPI object at 0x7ff7c60c6b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7ff7bdc49cc0>
                     │    └ <function error_handle_business at 0x7ff7c5f575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff7bdd8e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff7bde111b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff7bdd8e800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff7bdd8e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff7bde111b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7ff7c5f83e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff7bdd8e800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7ff7bdd8e800>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff7bdd8e770>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff7bdd8e800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff7bde11240>
                     │    │             └ <starlette.requests.Request object at 0x7ff7bdc48fa0>
                     │    └ <function process_middleware_common at 0x7ff7c5f579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff7bdd8e770>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7ff7bdc48fa0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff7bde11240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7ff7c64e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7ff7c60585e0>
          │    │   │      └ <starlette.requests.Request object at 0x7ff7bdc48fa0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff7bdd8e740>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff7bdd8e770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff7bde12050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff7bdd8e6e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff7bdd8e740>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff7bde12050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7ff7c5f4a260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff7bdd8e6e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff7bde12050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7ff7c609a4d0>
          └ <fastapi.routing.APIRoute object at 0x7ff7bddba710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff7bde12050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff7bdc49600>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7ff7bdd62a70>
          └ <fastapi.routing.APIRoute object at 0x7ff7bddba710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7ff7bdc4b7f0>
                     └ <function get_request_handler.<locals>.app at 0x7ff7bdd629e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7ff7c609b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7ff7bdd61cf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7ff7bddba7d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7ff7bdc4bb50>
                 │                └ <function ResourceService.upload_resource at 0x7ff7be4d6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7ff7bf36f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7ff7be4d6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7ff7be06e290>
                             └ <app.src.services.resource_service.ResourceService object at 0x7ff7bf36f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7ff7c7a48be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:48:35.448 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43950 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:48:40.473 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:48:40.575 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:48:40.578 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:48:40.580 request id: app - uvicorn.server:serve - Finished server process [2893463]
INFO     2024-01-26 14:48:44.093 request id: app - uvicorn.server:serve - Started server process [2893553]
INFO     2024-01-26 14:48:44.096 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:48:44.096 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:49:45.357 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4fdef47910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f4fdef479a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f4fedaa5120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f4feda6be20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2893547 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4feda6b490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2893547 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4fedabe830>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2893547 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2893547 started>
    │    └ <function subprocess_started at 0x7f4fdf70dbd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2893547 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4fedabde40>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4fdf70cee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f4fedabde40>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f4fed9e9a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f4fed9e9990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f4fed9eb490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f4fedc76830>
    └ <Handle <TaskStepMethWrapper object at 0x7f4fce53c370>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4fce53c370>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4fce53c370>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4fce53c370>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4fdf797250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4fdf7972e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4fedd68e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4fdeb64ac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4fedd68e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4fce7e5d50>
          └ <fastapi.applications.FastAPI object at 0x7f4fdeb64ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4fce6c51e0>
                     │    └ <function error_handle_business at 0x7f4fdeb8b370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4fce7e5d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4fce803d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4fce7e5d20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4fce7e5d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4fce803d90>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f4fdea000d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4fce7e5d20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f4fce7e5d20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4fce7e5c90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4fce7e5d20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4fce803e20>
                     │    │             └ <starlette.requests.Request object at 0x7f4fce6c44c0>
                     │    └ <function process_middleware_common at 0x7f4fdeb8b910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4fce7e5c90>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4fce6c44c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4fce803e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4fdef640d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4fdeae9850>
          │    │   │      └ <starlette.requests.Request object at 0x7f4fce6c44c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4fce7e5c60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4fce7e5c90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4fce6d4ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4fce7e5c00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4fce7e5c60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4fce6d4ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4fde9a9840>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4fce7e5c00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4fce6d4ca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f4fdeb31630>
          └ <fastapi.routing.APIRoute object at 0x7f4fce80dc30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4fce6d4ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4fce6c4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4fce800ca0>
          └ <fastapi.routing.APIRoute object at 0x7f4fce80dc30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4fce6c7e20>
                     └ <function get_request_handler.<locals>.app at 0x7f4fce800c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4fdeb32290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f4fce747eb0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f4fce80dcf0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f4fce6c77f0>
                 │                └ <function ResourceService.upload_resource at 0x7f4fceca43a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f4fcfda3fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f4fceca44c0>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f4fcea55840>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f4fcfda3fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f4feea92e60>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 14:49:45.460 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58116 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:49:48.079 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:49:48.182 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:49:48.186 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:49:48.189 request id: app - uvicorn.server:serve - Finished server process [2893553]
INFO     2024-01-26 14:49:52.392 request id: app - uvicorn.server:serve - Started server process [2894230]
INFO     2024-01-26 14:49:52.394 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:49:52.395 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:56:54.063 request id: app - uvicorn.server:serve - Started server process [2897405]
INFO     2024-01-26 14:56:54.065 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:56:54.065 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 14:56:56.029 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fed0bf14310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fed0bf143a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fed0d30bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fed0d45e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2897403 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fed0d45dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2897403 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fed0d3541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2897403 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2897403 started>
    │    └ <function subprocess_started at 0x7fed0c892440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2897403 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fed0d354310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fed0c891900>
    │    │                  └ <uvicorn.server.Server object at 0x7fed0d354310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fed0d106440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fed0d1063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fed0d107eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fed0d2f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fed037038e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fed037038e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fed037038e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fed037038e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fed0c750550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fed0c7505e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fed0d355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fed0baf2b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fed0d355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fed03a52890>
          └ <fastapi.applications.FastAPI object at 0x7fed0baf2b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fed03701d20>
                     │    └ <function error_handle_business at 0x7fed0b9835b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fed03a52890>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'function' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fed03adcee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fed03a52860>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fed03a52890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fed03adcee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fed0b9afe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fed03a52860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fed03a52860>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fed03a527d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fed03a52860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fed03adcf70>
                     │    │             └ <starlette.requests.Request object at 0x7fed03701000>
                     │    └ <function process_middleware_common at 0x7fed0b9839a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fed03a527d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fed03701000>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fed03adcf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'function' object has no attribute 'session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fed0bf14a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fed0ba84810>
          │    │   │      └ <starlette.requests.Request object at 0x7fed03701000>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fed03a527a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fed03a527d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fed03addd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fed03a52740>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fed03a527a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fed03addd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fed0b976260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fed03a52740>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fed03addd80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fed0bac64d0>
          └ <fastapi.routing.APIRoute object at 0x7fed03a7a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fed03addd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fed03701660>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fed03a327a0>
          └ <fastapi.routing.APIRoute object at 0x7fed03a7a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fed03703850>
                     └ <function get_request_handler.<locals>.app at 0x7fed03a32710>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fed0bac7130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fed03a31a20>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fed03a7a830>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fed03703be0>
                 │                └ <function ResourceService.upload_resource at 0x7fed03ed2050>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fed08d6f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    get_db_session.session, resource_create.dict(), file_upload
    │                       │               │       └ <starlette.datastructures.UploadFile object at 0x7fed03703be0>
    │                       │               └ <cyfunction BaseModel.dict at 0x7fed0c486b50>
    │                       └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
    └ <function get_db_session at 0x7fed08d7e320>

AttributeError: 'function' object has no attribute 'session'
INFO     2024-01-26 14:56:56.042 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55510 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 14:57:47.892 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:57:47.994 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:57:47.995 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:57:47.995 request id: app - uvicorn.server:serve - Finished server process [2897405]
INFO     2024-01-26 14:57:48.860 request id: app - uvicorn.server:serve - Started server process [2897712]
INFO     2024-01-26 14:57:48.862 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 14:57:48.862 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 14:59:21.023 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 14:59:21.125 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 14:59:21.126 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 14:59:21.127 request id: app - uvicorn.server:serve - Finished server process [2897712]
INFO     2024-01-26 15:00:29.476 request id: app - uvicorn.server:serve - Started server process [2899091]
INFO     2024-01-26 15:00:29.478 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:00:29.479 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:00:40.522 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:00:40.626 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:00:40.628 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:00:40.630 request id: app - uvicorn.server:serve - Finished server process [2899091]
INFO     2024-01-26 15:00:43.594 request id: app - uvicorn.server:serve - Started server process [2899218]
INFO     2024-01-26 15:00:43.596 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:00:43.596 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:00:48.499 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7ab3980310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7ab39803a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7ab4e0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7ab4f62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2899216 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7ab4f61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2899216 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7ab4e581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2899216 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2899216 started>
    │    └ <function subprocess_started at 0x7f7ab4296440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2899216 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7ab4e58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7ab4295900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7ab4e58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7ab4b96440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7ab4b963b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7ab4b97eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7ab4de7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7aab14bbb0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7aab14bbb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7aab14bbb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7aab14bbb0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7ab4190550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7ab41905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7ab4e59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7ab355eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7ab4e59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7aab28a860>
          └ <fastapi.applications.FastAPI object at 0x7f7ab355eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7aab149db0>
                     │    └ <function error_handle_business at 0x7f7ab33ef5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7aab28a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('ResourceService.upload_resource() takes 3 positional arguments but 4 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7aab3111b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7aab28a830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7aab28a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7aab3111b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f7ab341fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7aab28a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f7aab28a830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7aab28a7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7aab28a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7aab311240>
                     │    │             └ <starlette.requests.Request object at 0x7f7aab149090>
                     │    └ <function process_middleware_common at 0x7f7ab33ef9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7aab28a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7aab149090>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7aab311240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('ResourceService.upload_resource() takes 3 positional arguments but 4 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7ab3980a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7ab34f0a90>
          │    │   │      └ <starlette.requests.Request object at 0x7f7aab149090>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7aab28a770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7aab28a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7aab312050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7aab28a710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7aab28a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7aab312050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7ab33e2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7aab28a710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7aab312050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7ab35324d0>
          └ <fastapi.routing.APIRoute object at 0x7f7aab2b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7aab312050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7aab1496f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7aab262a70>
          └ <fastapi.routing.APIRoute object at 0x7f7aab2b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7aab14b6d0>
                     └ <function get_request_handler.<locals>.app at 0x7f7aab2629e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7ab3533130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f7aab14ba60>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f7aab261cf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f7aab2b6890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f7aab14bc70>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f7aab14ba60>
                 │                └ <function ResourceService.upload_resource at 0x7f7aab9d2320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f7ab0773220>

TypeError: ResourceService.upload_resource() takes 3 positional arguments but 4 were given
INFO     2024-01-26 15:00:48.518 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50260 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:01:36.427 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:01:36.529 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:01:36.530 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:01:36.531 request id: app - uvicorn.server:serve - Finished server process [2899218]
INFO     2024-01-26 15:01:52.984 request id: app - uvicorn.server:serve - Started server process [2899636]
INFO     2024-01-26 15:01:52.985 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:01:52.985 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:01:54.795 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:01:54.898 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:01:54.901 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:01:54.903 request id: app - uvicorn.server:serve - Finished server process [2899636]
INFO     2024-01-26 15:01:57.655 request id: app - uvicorn.server:serve - Started server process [2899698]
INFO     2024-01-26 15:01:57.656 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:01:57.657 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:02:02.519 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa2f6b74310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa2f6b743a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa2f7fc7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa2f8162950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2899696 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa2f8161fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2899696 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa2f80101f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2899696 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2899696 started>
    │    └ <function subprocess_started at 0x7fa2f749e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2899696 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa2f8010310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa2f749d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa2f8010310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa2f7d76440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa2f7d763b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa2f7d77eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa2f7cc7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa2ee35f520>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa2ee35f520>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa2ee35f520>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa2ee35f520>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa2f7398550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa2f73985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa2f8011e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa2f6756b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa2f8011e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa2ee49e860>
          └ <fastapi.applications.FastAPI object at 0x7fa2f6756b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa2ee35ddb0>
                     │    └ <function error_handle_business at 0x7fa2f65e75b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa2ee49e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa2ee5251b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa2ee49e830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa2ee49e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa2ee5251b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa2f6617e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa2ee49e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa2ee49e830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa2ee49e7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa2ee49e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa2ee525240>
                     │    │             └ <starlette.requests.Request object at 0x7fa2ee35d090>
                     │    └ <function process_middleware_common at 0x7fa2f65e79a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa2ee49e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa2ee35d090>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa2ee525240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa2f6b74a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa2f66e89a0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa2ee35d090>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa2ee49e770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa2ee49e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa2ee526050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa2ee49e710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa2ee49e770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa2ee526050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa2f65da260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa2ee49e710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa2ee526050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa2f672a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fa2ee4ca7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa2ee526050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa2ee35d6f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa2ee472a70>
          └ <fastapi.routing.APIRoute object at 0x7fa2ee4ca7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa2ee35fd00>
                     └ <function get_request_handler.<locals>.app at 0x7fa2ee4729e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa2f672b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa2ee35fd60>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fa2ee471cf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa2ee4ca890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fa2ee35fc40>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fa2ee35fd60>
                 │                └ <function ResourceService.upload_resource at 0x7fa2eebe6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa2ef887220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fa2eebe6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fa2ee77e2c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fa2ef887220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fa2f814cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:02:02.538 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53034 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:02:12.155 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:02:12.259 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:02:12.262 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:02:12.264 request id: app - uvicorn.server:serve - Finished server process [2899698]
INFO     2024-01-26 15:02:14.883 request id: app - uvicorn.server:serve - Started server process [2899814]
INFO     2024-01-26 15:02:14.885 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:02:14.885 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:08:57.847 request id: app - uvicorn.server:serve - Started server process [2902320]
INFO     2024-01-26 15:08:57.848 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:08:57.849 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:09:12.080 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7efdeb630310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7efdeb6303a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7efdeca0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7efdecb62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2902318 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7efdecb61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2902318 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7efdeca581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2902318 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2902318 started>
    │    └ <function subprocess_started at 0x7efdebf8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2902318 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7efdeca58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7efdebf8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7efdeca58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7efdec3aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7efdec3aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7efdec3abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7efdec9fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7efde25325f0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7efde25325f0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7efde25325f0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7efde25325f0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7efdebe5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7efdebe5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efdeca59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7efdeb20eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efdeca59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efde2f728c0>
          └ <fastapi.applications.FastAPI object at 0x7efdeb20eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7efde2e35e10>
                     │    └ <function error_handle_business at 0x7efdeb09f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efde2f728c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efde2e09090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7efde2f72890>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efde2f728c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169766', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efde2e09090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7efdeb0cfe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efde2f72890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7efde2f72890>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efde2f72800>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efde2f72890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efde2e09120>
                     │    │             └ <starlette.requests.Request object at 0x7efde2e350f0>
                     │    └ <function process_middleware_common at 0x7efdeb09f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efde2f72800>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7efde2e350f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efde2e09120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7efdeb630a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7efdeb1a08b0>
          │    │   │      └ <starlette.requests.Request object at 0x7efde2e350f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7efde2f727d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efde2f72800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efde2e09f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efde2f72770>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7efde2f727d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efde2e09f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7efdeb092260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efde2f72770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efde2e09f30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7efdeb1e24d0>
          └ <fastapi.routing.APIRoute object at 0x7efde2fa6830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efde2e09f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efde2e35750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7efde2f52950>
          └ <fastapi.routing.APIRoute object at 0x7efde2fa6830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7efde2e37190>
                     └ <function get_request_handler.<locals>.app at 0x7efde2f528c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7efdeb1e3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7efde2e37d90>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7efde2f51bd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7efde2fa68f0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Fim_P...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7efde2e37ca0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7efde2e37d90>
                 │                └ <function ResourceService.upload_resource at 0x7efde36a6200>
                 └ <app.src.services.resource_service.ResourceService object at 0x7efde83db220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7efde36a6320>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7efde3256320>
                             └ <app.src.services.resource_service.ResourceService object at 0x7efde83db220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7efdecb4cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:09:12.098 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43386 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:09:17.502 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:09:17.604 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:09:17.607 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:09:17.609 request id: app - uvicorn.server:serve - Finished server process [2902320]
INFO     2024-01-26 15:09:22.566 request id: app - uvicorn.server:serve - Started server process [2902468]
INFO     2024-01-26 15:09:22.568 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:09:22.570 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:09:57.431 request id: app - uvicorn.server:serve - Started server process [2902897]
INFO     2024-01-26 15:09:57.433 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:09:57.434 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:11:34.562 request id: app - uvicorn.server:serve - Started server process [2903725]
INFO     2024-01-26 15:11:34.563 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:11:34.564 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:11:34.971 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46746 - "GET /docs/ HTTP/1.1" 307
INFO     2024-01-26 15:11:34.975 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46746 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 15:11:35.224 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46746 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 15:12:05.280 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 15:12:05.561 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1ODUyNX0.35N8QIv-V2K7aWY7xSxeH9juuIYmc3gaCYW0T77qGv0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI3NDcyNX0.ETjPkgbbMbn8ruQqTxo2hvRv8eTb4DWUHUTwCJe39rs"},"links":null,"relationships":null,"timestamp":"2024-01-26 15:11:34"}'}
INFO     2024-01-26 15:12:05.562 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46758 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 15:15:17.479 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fdf3c598310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fdf3c5983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fdf3da0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fdf3db62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2903723 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdf3db61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2903723 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdf3da581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2903723 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2903723 started>
    │    └ <function subprocess_started at 0x7fdf3ce96440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2903723 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdf3da58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fdf3ce95900>
    │    │                  └ <uvicorn.server.Server object at 0x7fdf3da58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fdf3d7aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fdf3d7aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fdf3d7abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fdf3d9fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fdf33e733a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fdf33e733a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fdf33e733a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fdf33e733a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fdf3cd90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fdf3cd905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdf3da59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdf3c176b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdf3da59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdf38056860>
          └ <fastapi.applications.FastAPI object at 0x7fdf3c176b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fdf33e73610>
                     │    └ <function error_handle_business at 0x7fdf3c0075b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdf38056860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdf33e68790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdf38056830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdf38056860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169758', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdf33e68790>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fdf3c033e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdf38056830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fdf38056830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdf380567a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdf38056830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdf33e689d0>
                     │    │             └ <starlette.requests.Request object at 0x7fdf33e73520>
                     │    └ <function process_middleware_common at 0x7fdf3c0079a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdf380567a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fdf33e73520>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdf33e689d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fdf3c598a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fdf3c108630>
          │    │   │      └ <starlette.requests.Request object at 0x7fdf33e73520>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdf38056770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdf380567a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdf33d4edd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdf38056710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdf38056770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdf33d4edd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fdf3bffa260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdf38056710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdf33d4edd0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fdf3c14a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fdf380827d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdf33d4edd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdf33d615a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fdf3802ea70>
          └ <fastapi.routing.APIRoute object at 0x7fdf380827d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fdf33d618a0>
                     └ <function get_request_handler.<locals>.app at 0x7fdf3802e9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fdf3c14b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fdf33e703d0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fdf3802dcf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fdf38082890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Film'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fdf33d61e10>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fdf33e703d0>
                 │                └ <function ResourceService.upload_resource at 0x7fdf385e6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fdf393df220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fdf385e6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fdf3817e2c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fdf393df220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fdf3db4cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:15:17.494 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54694 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:15:22.939 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:15:23.043 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:15:23.046 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:15:23.048 request id: app - uvicorn.server:serve - Finished server process [2903725]
INFO     2024-01-26 15:15:25.898 request id: app - uvicorn.server:serve - Started server process [2905084]
INFO     2024-01-26 15:15:25.900 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:15:25.901 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:17:22.683 request id: app - uvicorn.server:serve - Started server process [2905994]
INFO     2024-01-26 15:17:22.685 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:17:22.685 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:17:24.776 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41354 - "GET /docs/ HTTP/1.1" 307
INFO     2024-01-26 15:17:24.781 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41354 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 15:17:24.996 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41354 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 15:17:52.254 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 15:17:52.531 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI1ODg3Mn0.fib-p0Jl6K8rWKJgv17684X94el5uNaJiDpf-BVydgA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI3NTA3Mn0.jx1tyrHsbghHM-CWqfeH7u2AqnzVc2Q1zwXb9EIwTCg"},"links":null,"relationships":null,"timestamp":"2024-01-26 15:17:22"}'}
INFO     2024-01-26 15:17:52.532 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41362 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 15:19:47.548 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2a20db4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f2a20db43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2a2220fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2a22362950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2905992 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2a22361fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2905992 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2a222581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2905992 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2905992 started>
    │    └ <function subprocess_started at 0x7f2a21726440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2905992 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2a22258310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2a21725900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2a22258310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2a21fb6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2a21fb63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2a21fb7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2a221fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2a1849bc70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2a1849bc70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2a1849bc70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2a1849bc70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2a215ec550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2a215ec5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2a22259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2a2098eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2a22259e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2a1868e860>
          └ <fastapi.applications.FastAPI object at 0x7f2a2098eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2a185ab400>
                     │    └ <function error_handle_business at 0x7f2a2081b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2a1868e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2a185a0700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2a1868e830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2a1868e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169757', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2a185a0700>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2a20847e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2a1868e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2a1868e830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2a1868e7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2a1868e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2a187151b0>
                     │    │             └ <starlette.requests.Request object at 0x7f2a185ab520>
                     │    └ <function process_middleware_common at 0x7f2a2081b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2a1868e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2a185ab520>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2a187151b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2a20db4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2a20920680>
          │    │   │      └ <starlette.requests.Request object at 0x7f2a185ab520>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2a1868e770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2a1868e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a18486dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2a1868e710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2a1868e770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a18486dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2a2080e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2a1868e710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a18486dd0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2a209624d0>
          └ <fastapi.routing.APIRoute object at 0x7f2a186ba7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a18486dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a1849aa40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2a18666a70>
          └ <fastapi.routing.APIRoute object at 0x7f2a186ba7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2a18499cc0>
                     └ <function get_request_handler.<locals>.app at 0x7f2a186669e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2a20963130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f2a185abaf0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f2a18665cf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2a186ba890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA',...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f2a18499e10>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f2a185abaf0>
                 │                └ <function ResourceService.upload_resource at 0x7f2a18dda320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2a19bcf220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f2a18dda440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f2a189722c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f2a19bcf220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 59, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f2a2234cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:19:47.563 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46482 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:19:54.392 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:19:54.494 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:19:54.496 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:19:54.498 request id: app - uvicorn.server:serve - Finished server process [2905994]
INFO     2024-01-26 15:19:58.124 request id: app - uvicorn.server:serve - Started server process [2906934]
INFO     2024-01-26 15:19:58.125 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:19:58.126 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:21:18.059 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:21:18.162 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:21:18.165 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:21:18.170 request id: app - uvicorn.server:serve - Finished server process [2906934]
INFO     2024-01-26 15:21:37.912 request id: app - uvicorn.server:serve - Started server process [2907545]
INFO     2024-01-26 15:21:37.914 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:21:37.915 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:21:41.390 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc6d7438310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc6d74383a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc6d880fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc6d8962950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2907543 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc6d8961fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2907543 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc6d88581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2907543 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2907543 started>
    │    └ <function subprocess_started at 0x7fc6d7d8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2907543 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc6d8858310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc6d7d8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc6d8858310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc6d81aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc6d81aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc6d81abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc6d87fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc6ced03ac0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc6ced03ac0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc6ced03ac0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc6ced03ac0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc6d7c5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc6d7c5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc6d8859e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc6d701ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc6d8859e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc6cee3e860>
          └ <fastapi.applications.FastAPI object at 0x7fc6d701ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc6ced01db0>
                     │    └ <function error_handle_business at 0x7fc6d6eab5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc6cee3e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc6cecc91b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc6cee3e830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc6cee3e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169758', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc6cecc91b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc6d6edbe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc6cee3e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc6cee3e830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc6cee3e7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc6cee3e830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc6cecc9240>
                     │    │             └ <starlette.requests.Request object at 0x7fc6ced01090>
                     │    └ <function process_middleware_common at 0x7fc6d6eab9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc6cee3e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc6ced01090>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc6cecc9240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc6d7438a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc6d6fac860>
          │    │   │      └ <starlette.requests.Request object at 0x7fc6ced01090>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc6cee3e770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc6cee3e7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc6cecca050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc6cee3e710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc6cee3e770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc6cecca050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc6d6e9e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc6cee3e710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc6cecca050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc6d6fee4d0>
          └ <fastapi.routing.APIRoute object at 0x7fc6cee667d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc6cecca050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc6ced016f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc6cee0ea70>
          └ <fastapi.routing.APIRoute object at 0x7fc6cee667d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc6ced03d00>
                     └ <function get_request_handler.<locals>.app at 0x7fc6cee0e9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc6d6fef130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fc6ced03d60>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fc6cee0dcf0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc6cee66890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA1'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fc6ced03c70>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fc6ced03d60>
                 │                └ <function ResourceService.upload_resource at 0x7fc6cf4ae560>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc6d41db220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7fc6cf4ae680>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7fc6cef5a2c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fc6d41db220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 60, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7fc6d894cbe0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:21:41.410 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51358 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:22:00.462 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:22:00.566 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:22:00.569 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:22:00.571 request id: app - uvicorn.server:serve - Finished server process [2907545]
INFO     2024-01-26 15:22:05.201 request id: app - uvicorn.server:serve - Started server process [2907749]
INFO     2024-01-26 15:22:05.203 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:22:05.205 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:28:06.705 request id: app - uvicorn.server:serve - Started server process [2910625]
INFO     2024-01-26 15:28:06.706 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:28:06.707 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:28:12.867 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fdce3704310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fdce37043a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fdce4b0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fdce4c5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2910623 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdce4c5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2910623 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdce4b541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2910623 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2910623 started>
    │    └ <function subprocess_started at 0x7fdce4076440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2910623 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdce4b54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fdce4075900>
    │    │                  └ <uvicorn.server.Server object at 0x7fdce4b54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fdce4906440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fdce49063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fdce4907eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fdce4af7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fdcdaf73670>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fdcdaf73670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fdcdaf73670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fdcdaf73670>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fdce3f3c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fdce3f3c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdce4b55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdce32deb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdce4b55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdcdb24e8c0>
          └ <fastapi.applications.FastAPI object at 0x7fdce32deb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fdcdaf05e10>
                     │    └ <function error_handle_business at 0x7fdce316b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdcdb24e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UploadFile' object has no attribute 'dict'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdcdb2dd120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdcdb24e890>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdcdb24e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169758', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdcdb2dd120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fdce3197e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdcdb24e890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fdcdb24e890>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdcdb24e800>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdcdb24e890>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdcdb2dd1b0>
                     │    │             └ <starlette.requests.Request object at 0x7fdcdaf050f0>
                     │    └ <function process_middleware_common at 0x7fdce316b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdcdb24e800>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fdcdaf050f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdcdb2dd1b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UploadFile' object has no attribute 'dict'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fdce3704a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fdce3270860>
          │    │   │      └ <starlette.requests.Request object at 0x7fdcdaf050f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdcdb24e7d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdcdb24e800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdcdb2ddfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdcdb24e770>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdcdb24e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdcdb2ddfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fdce315e260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdcdb24e770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdcdb2ddfc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fdce32b24d0>
          └ <fastapi.routing.APIRoute object at 0x7fdcdb27a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdcdb2ddfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdcdaf05750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fdcdb22e9e0>
          └ <fastapi.routing.APIRoute object at 0x7fdcdb27a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fdcdaf07190>
                     └ <function get_request_handler.<locals>.app at 0x7fdcdb22e950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fdce32b3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fdcdaf07d90>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fdcdb22dc60>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fdcdb27a8f0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA2'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fdcdaf07c70>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fdcdaf07d90>
                 │                └ <function ResourceService.upload_resource at 0x7fdcdb6d2200>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fdce04cb220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    db_session, resource_create.dict(), file_upload.dict()
    │           │               │       └ <starlette.datastructures.UploadFile object at 0x7fdcdaf07c70>
    │           │               └ <cyfunction BaseModel.dict at 0x7fdce3c72b50>
    │           └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA2'...
    └ <sqlalchemy.orm.session.Session object at 0x7fdcdaf07d90>

AttributeError: 'UploadFile' object has no attribute 'dict'
INFO     2024-01-26 15:28:12.886 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46162 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:31:25.355 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:31:25.459 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:31:25.461 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:31:25.462 request id: app - uvicorn.server:serve - Finished server process [2910625]
INFO     2024-01-26 15:31:26.491 request id: app - uvicorn.server:serve - Started server process [2912514]
INFO     2024-01-26 15:31:26.493 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:31:26.494 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:31:52.866 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:31:52.967 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:31:52.968 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:31:52.969 request id: app - uvicorn.server:serve - Finished server process [2912514]
INFO     2024-01-26 15:31:53.961 request id: app - uvicorn.server:serve - Started server process [2912820]
INFO     2024-01-26 15:31:53.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:31:53.963 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:33:41.431 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:33:41.533 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:33:41.533 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:33:41.534 request id: app - uvicorn.server:serve - Finished server process [2912820]
INFO     2024-01-26 15:33:42.516 request id: app - uvicorn.server:serve - Started server process [2913558]
INFO     2024-01-26 15:33:42.517 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:33:42.518 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:34:23.330 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:34:23.432 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:34:23.432 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:34:23.433 request id: app - uvicorn.server:serve - Finished server process [2913558]
INFO     2024-01-26 15:34:25.963 request id: app - uvicorn.server:serve - Started server process [2913849]
INFO     2024-01-26 15:34:25.964 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:34:25.965 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:34:34.108 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f52a0a90310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f52a0a903a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f52a1f0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f52a205e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f52a205dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f52a1f541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
    │    └ <function subprocess_started at 0x7f52a138e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f52a1f54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f52a138d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f52a1f54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f52a17a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f52a17a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f52a17a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f52a1ef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f529c247ac0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f529c247ac0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f529c247ac0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f529c247ac0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f52a1288550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f52a12885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f52a1f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f52a066eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f52a1f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
          └ <fastapi.applications.FastAPI object at 0x7f52a066eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f529c245db0>
                     │    └ <function error_handle_business at 0x7f52a04ff5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f529c411240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169758', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f529c411240>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f52a052fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f529c4112d0>
                     │    │             └ <starlette.requests.Request object at 0x7f529c245090>
                     │    └ <function process_middleware_common at 0x7f52a04ff9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f529c245090>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f529c4112d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f52a0a90a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f52a0600810>
          │    │   │      └ <starlette.requests.Request object at 0x7f529c245090>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f529c38a770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f529c38a710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f529c38a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f52a04f2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f529c38a710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f52a06424d0>
          └ <fastapi.routing.APIRoute object at 0x7f529c3b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f529c362b00>
          └ <fastapi.routing.APIRoute object at 0x7f529c3b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f529c247d00>
                     └ <function get_request_handler.<locals>.app at 0x7f529c362a70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f52a0643130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f529c247d60>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f529c361d80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f529c3b6890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA2'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f529c247c40>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f529c247d60>
                 │                └ <function ResourceService.upload_resource at 0x7f529cad6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f529d96f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f529cad6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f529c66e2c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f529d96f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 60, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f52a2048be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:34:34.127 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39864 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-26 15:34:41.341 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f52a0a90310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f52a0a903a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f52a1f0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f52a205e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f52a205dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f52a1f541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
    │    └ <function subprocess_started at 0x7f52a138e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2913847 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f52a1f54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f52a138d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f52a1f54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f52a17a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f52a17a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f52a17a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f52a1ef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f529c247010>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f529c247010>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f529c247010>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f529c247010>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f52a1288550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f52a12885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f52a1f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f52a066eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f52a1f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
          └ <fastapi.applications.FastAPI object at 0x7f52a066eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f529c247a60>
                     │    └ <function error_handle_business at 0x7f52a04ff5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f529c411c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169758', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f529c411c60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f52a052fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f52977cd480>
                     │    │             └ <starlette.requests.Request object at 0x7f529c1977f0>
                     │    └ <function process_middleware_common at 0x7f52a04ff9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f529c1977f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f52977cd480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f52a0a90a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f52a0600810>
          │    │   │      └ <starlette.requests.Request object at 0x7f529c1977f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f529c38a770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f52977cda20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f529c38a710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f529c38a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f52977cda20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f52a04f2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f529c38a710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f52977cda20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f52a06424d0>
          └ <fastapi.routing.APIRoute object at 0x7f529c3b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f52977cda20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c1971f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f529c362b00>
          └ <fastapi.routing.APIRoute object at 0x7f529c3b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f529c1970d0>
                     └ <function get_request_handler.<locals>.app at 0x7f529c362a70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f52a0643130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f529c2470a0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f529c361d80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f529c3b6890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f529c196dd0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f529c2470a0>
                 │                └ <function ResourceService.upload_resource at 0x7f529cad6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f529d96f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f529cad6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f529c66e2c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f529d96f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 60, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f52a2048be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f52a1288550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f52a12885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f52a1f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f52a066eb00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f52a1f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
          └ <fastapi.applications.FastAPI object at 0x7f52a066eb00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f529c245db0>
                     │    └ <function error_handle_business at 0x7f52a04ff5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f529c411240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f529c38a860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169758', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f529c411240>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f52a052fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f529c38a830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f529c4112d0>
                     │    │             └ <starlette.requests.Request object at 0x7f529c245090>
                     │    └ <function process_middleware_common at 0x7f52a04ff9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f529c245090>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f529c4112d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f52a0a90a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f52a0600810>
          │    │   │      └ <starlette.requests.Request object at 0x7f529c245090>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f529c38a770>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f529c38a7a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f529c38a710>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f529c38a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f52a04f2260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f529c38a710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f52a06424d0>
          └ <fastapi.routing.APIRoute object at 0x7f529c3b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f529c4120e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f529c2456f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f529c362b00>
          └ <fastapi.routing.APIRoute object at 0x7f529c3b67d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f529c247d00>
                     └ <function get_request_handler.<locals>.app at 0x7f529c362a70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f52a0643130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f529c247d60>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f529c361d80>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f529c3b6890>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA2'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f529c247c40>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f529c247d60>
                 │                └ <function ResourceService.upload_resource at 0x7f529cad6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f529d96f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f529cad6440>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f529c66e2c0>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f529d96f220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 60, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f52a2048be0>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:34:41.356 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39880 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:35:55.214 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:35:55.315 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:35:55.316 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:35:55.317 request id: app - uvicorn.server:serve - Finished server process [2913849]
INFO     2024-01-26 15:35:58.478 request id: app - uvicorn.server:serve - Started server process [2914389]
INFO     2024-01-26 15:35:58.480 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:35:58.481 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:37:21.836 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f02729af910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f02729af9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f0279525120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f02794ebe20>
           └ <SpawnProcess name='SpawnProcess-1' parent=2914375 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f02794eb490>
    └ <SpawnProcess name='SpawnProcess-1' parent=2914375 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f027953e830>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2914375 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2914375 started>
    │    └ <function subprocess_started at 0x7f0278241bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2914375 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f027953de40>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0278240ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f027953de40>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f0279469a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f0279469990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f027946b490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f02796fa830>
    └ <Handle <TaskStepMethWrapper object at 0x7f025e1c38b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f025e1c38b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f025e1c38b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f025e1c38b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f02782cb250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f02782cb2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f02797ece50>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f02725c8ac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f02797ece50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f025e2e5d80>
          └ <fastapi.applications.FastAPI object at 0x7f02725c8ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f025e1c1db0>
                     │    └ <function error_handle_business at 0x7f02725ef370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f025e2e5d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f025e1b88b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f025e2e5d50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f025e2e5d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169756', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f025e1b88b0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f02724600d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f025e2e5d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f025e2e5d50>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f025e2e5cc0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f025e2e5d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f025e1b8940>
                     │    │             └ <starlette.requests.Request object at 0x7f025e1c05b0>
                     │    └ <function process_middleware_common at 0x7f02725ef910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f025e2e5cc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f025e1c05b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f025e1b8940>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f02729cc0d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f02725553a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f025e1c05b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f025e2e5c90>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f025e2e5cc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f025e1b9750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f025e2e5c30>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f025e2e5c90>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f025e1b9750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0272409840>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f025e2e5c30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f025e1b9750>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f0272595630>
          └ <fastapi.routing.APIRoute object at 0x7f025e30dcf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f025e1b9750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f025e1c0c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f025e2dd750>
          └ <fastapi.routing.APIRoute object at 0x7f025e30dcf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f025e1c3e20>
                     └ <function get_request_handler.<locals>.app at 0x7f025e2dd6c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f0272596290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f02724491b0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f025e2dc9d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f025e30ddb0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='A3', ...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f025e1c38e0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f02724491b0>
                 │                └ <function ResourceService.upload_resource at 0x7f025e7a4dc0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f025f897fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 29, in upload_resource
    uploaded_file_metadata = self.file_repository.create_resource_with_file(
                             │    │               └ <function FileRepository.create_resource_with_file at 0x7f025e7a4ee0>
                             │    └ <app.src.repositories.resource.FileRepository object at 0x7f025e559870>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f025f897fa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 60, in create_resource_with_file
    raise ServerErrorCode.DATABASE_ERROR.value(ex)
          │               │              └ <types.DynamicClassAttribute object at 0x7f027a596e60>
          │               └ <ServerErrorCode.DATABASE_ERROR: BusinessException(ExceptionDetail(code='SERVER0101', message='Database Error', data=None))>
          └ <enum 'ServerErrorCode'>

app.src.exceptions.exception.BusinessException: code='SERVER0101' message='Database Error' data=None
INFO     2024-01-26 15:37:21.877 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44464 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:40:28.294 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:40:28.396 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:40:28.397 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:40:28.398 request id: app - uvicorn.server:serve - Finished server process [2914389]
INFO     2024-01-26 15:40:31.772 request id: app - uvicorn.server:serve - Started server process [2916254]
INFO     2024-01-26 15:40:31.774 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:40:31.775 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:50:55.296 request id: app - uvicorn.server:serve - Started server process [2920439]
INFO     2024-01-26 15:50:55.298 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:50:55.298 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:51:01.597 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55758 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-26 15:52:11.797 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:52:11.899 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:52:11.899 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:52:11.900 request id: app - uvicorn.server:serve - Finished server process [2920439]
INFO     2024-01-26 15:52:13.041 request id: app - uvicorn.server:serve - Started server process [2920913]
INFO     2024-01-26 15:52:13.042 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:52:13.043 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 15:52:18.170 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f422c498310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f422c4983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f422d90bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f422da5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2920911 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f422da5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2920911 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f422d9541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2920911 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2920911 started>
    │    └ <function subprocess_started at 0x7f422cd8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2920911 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f422d954310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f422cd8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f422d954310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f422d1a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f422d1a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f422d1a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f422d8f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f4223d7f6a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4223d7f6a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4223d7f6a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4223d7f6a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f422cc88550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f422cc885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f422d955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f422c07ab00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f422d955e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4223e528f0>
          └ <fastapi.applications.FastAPI object at 0x7f422c07ab00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4223d11e40>
                     │    └ <function error_handle_business at 0x7f422bf0b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4223e528f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ FileNotFoundError(2, 'No such file or directory')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4223edd090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4223e528c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4223e528f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '169756', 'accept': 'application/json', 'auth...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4223edd090>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f422bf37e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4223e528c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f4223e528c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4223e52830>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4223e528c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4223edd120>
                     │    │             └ <starlette.requests.Request object at 0x7f4223d11120>
                     │    └ <function process_middleware_common at 0x7f422bf0b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4223e52830>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4223d11120>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4223edd120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ FileNotFoundError(2, 'No such file or directory')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f422c498a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f422c00c8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f4223d11120>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4223e52800>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4223e52830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4223eddf30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4223e527a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4223e52800>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4223eddf30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f422befe260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4223e527a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4223eddf30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f422c04e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f4223e7e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4223eddf30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4223d11780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4223e2e950>
          └ <fastapi.routing.APIRoute object at 0x7f4223e7e860>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4223d13eb0>
                     └ <function get_request_handler.<locals>.app at 0x7f4223e2e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f422c04f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f4223d13d90>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f4223e2dbd0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f4223e7e920>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 113, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='A4', ...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f4223d13c70>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f4223d13d90>
                 │                └ <function ResourceService.upload_resource at 0x7f42284da170>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f4229373220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    with open(key, 'wb') as f:
              └ 'static/images/2_Screenshot from 2024-01-26 11-32-17.png'

FileNotFoundError: [Errno 2] No such file or directory: 'static/images/2_Screenshot from 2024-01-26 11-32-17.png'
INFO     2024-01-26 15:52:18.185 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40836 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-26 15:53:15.812 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:53:15.913 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:53:15.914 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:53:15.915 request id: app - uvicorn.server:serve - Finished server process [2920913]
INFO     2024-01-26 15:53:17.025 request id: app - uvicorn.server:serve - Started server process [2921602]
INFO     2024-01-26 15:53:17.026 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:53:17.027 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:53:24.447 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:53:24.548 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:53:24.549 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:53:24.549 request id: app - uvicorn.server:serve - Finished server process [2921602]
INFO     2024-01-26 15:53:43.005 request id: app - uvicorn.server:serve - Started server process [2921803]
INFO     2024-01-26 15:53:43.007 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:53:43.007 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:54:05.664 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:54:05.765 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:54:05.766 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:54:05.767 request id: app - uvicorn.server:serve - Finished server process [2921803]
INFO     2024-01-26 15:54:06.682 request id: app - uvicorn.server:serve - Started server process [2921978]
INFO     2024-01-26 15:54:06.683 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:54:06.684 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:54:20.465 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40796 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-26 15:55:03.819 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59246 - "GET /static/images/2_Screenshot%20from%202024-01-26%2011-32-17.png HTTP/1.1" 200
INFO     2024-01-26 15:55:39.369 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:55:39.471 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:55:39.472 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:55:39.472 request id: app - uvicorn.server:serve - Finished server process [2921978]
INFO     2024-01-26 15:55:40.569 request id: app - uvicorn.server:serve - Started server process [2923058]
INFO     2024-01-26 15:55:40.570 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:55:40.571 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:57:40.267 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:57:40.369 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:57:40.370 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:57:40.370 request id: app - uvicorn.server:serve - Finished server process [2923058]
INFO     2024-01-26 15:57:41.314 request id: app - uvicorn.server:serve - Started server process [2923802]
INFO     2024-01-26 15:57:41.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:57:41.316 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:58:37.860 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:58:37.962 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:58:37.963 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:58:37.964 request id: app - uvicorn.server:serve - Finished server process [2923802]
INFO     2024-01-26 15:58:40.808 request id: app - uvicorn.server:serve - Started server process [2924357]
INFO     2024-01-26 15:58:40.810 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:58:40.811 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:58:52.642 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:58:52.743 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:58:52.744 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:58:52.745 request id: app - uvicorn.server:serve - Finished server process [2924357]
INFO     2024-01-26 15:58:56.199 request id: app - uvicorn.server:serve - Started server process [2924471]
INFO     2024-01-26 15:58:56.201 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:58:56.201 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:59:08.635 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 15:59:08.736 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 15:59:08.737 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 15:59:08.737 request id: app - uvicorn.server:serve - Finished server process [2924471]
INFO     2024-01-26 15:59:09.681 request id: app - uvicorn.server:serve - Started server process [2924554]
INFO     2024-01-26 15:59:09.682 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 15:59:09.683 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 15:59:48.610 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40040 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-26 16:25:31.437 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:25:31.539 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:25:31.540 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:25:31.541 request id: app - uvicorn.server:serve - Finished server process [2924554]
INFO     2024-01-26 16:25:55.835 request id: app - uvicorn.server:serve - Started server process [2935530]
INFO     2024-01-26 16:25:55.836 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:25:55.837 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:26:34.036 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:26:34.138 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:26:34.139 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:26:34.140 request id: app - uvicorn.server:serve - Finished server process [2935530]
INFO     2024-01-26 16:26:35.069 request id: app - uvicorn.server:serve - Started server process [2935795]
INFO     2024-01-26 16:26:35.071 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:26:35.071 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:27:33.419 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:27:35.592 request id: app - uvicorn.server:serve - Started server process [2936207]
INFO     2024-01-26 16:27:35.593 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:27:35.593 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:27:41.056 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56988 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 16:27:41.262 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56988 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 16:29:59.519 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56178 - "POST /rms/v1.0/resources/ HTTP/1.1" 403
INFO     2024-01-26 16:30:22.076 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 16:30:22.356 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2MzIyMn0.kUhRq4hCU78xrnwu3BS9HV-0x3jHztRmsgr0J-QoZH0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI3OTQyMn0.Fa6m0pBYyCvvVwQ-nht312iZgpImKoNlvoN-bJawvcA"},"links":null,"relationships":null,"timestamp":"2024-01-26 16:27:35"}'}
INFO     2024-01-26 16:30:22.357 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56874 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 16:30:35.661 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48466 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-26 16:31:25.891 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:31:25.992 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:31:25.993 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:31:25.994 request id: app - uvicorn.server:serve - Finished server process [2936207]
INFO     2024-01-26 16:31:26.931 request id: app - uvicorn.server:serve - Started server process [2937763]
INFO     2024-01-26 16:31:26.933 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:31:26.934 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:31:38.644 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39336 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-26 16:34:40.519 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:34:40.620 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:34:40.621 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:34:40.622 request id: app - uvicorn.server:serve - Finished server process [2937763]
INFO     2024-01-26 16:34:41.607 request id: app - uvicorn.server:serve - Started server process [2939183]
INFO     2024-01-26 16:34:41.608 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:34:41.609 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:34:54.442 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:34:54.544 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:34:54.544 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:34:54.545 request id: app - uvicorn.server:serve - Finished server process [2939183]
INFO     2024-01-26 16:34:55.582 request id: app - uvicorn.server:serve - Started server process [2939290]
INFO     2024-01-26 16:34:55.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:34:55.584 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-26 16:35:37.137 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fa04433ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fa03f312680>
    └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'pk_1': '367814e6-063c-560c-b428-20ed1ed85f4f\t'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fa03dae6020; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f	"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa04770bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa04785e950>
           └ <SpawnProcess name='SpawnProcess-4' parent=2936205 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa04785dfc0>
    └ <SpawnProcess name='SpawnProcess-4' parent=2936205 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa0477541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2936205 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2936205 started>
    │    └ <function subprocess_started at 0x7fa046c1e440>
    └ <SpawnProcess name='SpawnProcess-4' parent=2936205 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa047754310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa046c1d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa047754310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa046fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa046fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa046fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa0476f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa03da6feb0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa03da6feb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa03da6feb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa03da6feb0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa046ae4550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa046ae45e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa047755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa045e86b00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa047755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa03db86b60>
          └ <fastapi.applications.FastAPI object at 0x7fa045e86b00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa03da6e2c0>
                     │    └ <function error_handle_business at 0x7fa045d135b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa03db86b60>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa03dc15120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa03db86b30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa03db86b60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '20', 'accept': 'application/json', 'authoriz...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa03dc15120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa045d3fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa03db86b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa03db86b30>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa03db86aa0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa03db86b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa03dc151b0>
                     │    │             └ <starlette.requests.Request object at 0x7fa03da45510>
                     │    └ <function process_middleware_common at 0x7fa045d139a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa03db86aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa03da45510>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa03dc151b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa0462aca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa045e186d0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa03da45510>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa03db86a70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa03db86aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa03dc15fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa03db86a10>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa03db86a70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa03dc15fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa045f06260>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa03db86a10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa03dc15fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa045e5a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fa03dbcd3c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa03dc15fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa03da45bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa03db670a0>
          └ <fastapi.routing.APIRoute object at 0x7fa03dbcd3c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa03da6f6a0>
                     └ <function get_request_handler.<locals>.app at 0x7fa03db67010>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa045e5b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db': <sqlalchemy.orm.session.Session object at 0x7fa03da6fd30>, 'item_id': '367814e6-063c-560c-b428-20ed1ed85f4f\t', 'model...
                 │                 │         └ <function SQLAlchemyCRUDRouter._update.<locals>.route at 0x7fa03de76950>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fa03dbcd3f0>
                 └ <function run_in_threadpool at 0x7fa0467aedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function SQLAlchemyCRUDRouter._update.<locals>.route at 0x7fa03de76950>, db=<sqlalchemy.orm.session.Sessi...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fa03daac2c0>
                 │     │         └ <function run_sync at 0x7fa046875090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fa046874820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fa03d...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fa03ded83c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fa03daac140>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/fastapi_crudrouter/core/sqlalchemy.py", line 124, in route
    db_model: Model = self._get_one()(item_id, db)
                      │    │          │        └ <sqlalchemy.orm.session.Session object at 0x7fa03da6fd30>
                      │    │          └ '367814e6-063c-560c-b428-20ed1ed85f4f\t'
                      │    └ <function SQLAlchemyCRUDRouter._get_one at 0x7fa03ea3dbd0>
                      └ <fastapi_crudrouter.core.sqlalchemy.SQLAlchemyCRUDRouter object at 0x7fa03ded0580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/fastapi_crudrouter/core/sqlalchemy.py", line 91, in route
    model: Model = db.query(self.db_model).get(item_id)
                   │  │     │    │             └ '367814e6-063c-560c-b428-20ed1ed85f4f\t'
                   │  │     │    └ <class 'app.src.models.resource_stage.ResourceStage'>
                   │  │     └ <fastapi_crudrouter.core.sqlalchemy.SQLAlchemyCRUDRouter object at 0x7fa03ded0580>
                   │  └ <function Session.query at 0x7fa0441d3d90>
                   └ <sqlalchemy.orm.session.Session object at 0x7fa03da6fd30>
  File "<string>", line 2, in get
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/deprecations.py", line 383, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           │   │       └ {}
           │   └ (<sqlalchemy.orm.query.Query object at 0x7fa03daa41c0>, '367814e6-063c-560c-b428-20ed1ed85f4f\t')
           └ <function Query.get at 0x7fa044140e50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 1130, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
           │    │         │      │       └ <function load_on_pk_identity at 0x7fa0442a31c0>
           │    │         │      └ <module 'sqlalchemy.orm.loading' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalc...
           │    │         └ '367814e6-063c-560c-b428-20ed1ed85f4f\t'
           │    └ <function Query._get_impl at 0x7fa044140ee0>
           └ <sqlalchemy.orm.query.Query object at 0x7fa03daa41c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 1139, in _get_impl
    return self.session._get_impl(
           │    │       └ <function Session._get_impl at 0x7fa0441e49d0>
           │    └ <sqlalchemy.orm.session.Session object at 0x7fa03da6fd30>
           └ <sqlalchemy.orm.query.Query object at 0x7fa03daa41c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3672, in _get_impl
    return db_load_fn(
           └ <function load_on_pk_identity at 0x7fa0442a31c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 668, in load_on_pk_identity
    session.execute(
    │       └ <function Session.execute at 0x7fa0441d3760>
    └ <sqlalchemy.orm.session.Session object at 0x7fa03da6fd30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7fa0441d36d0>
           └ <sqlalchemy.orm.session.Session object at 0x7fa03da6fd30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7fa044283880>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7fa0444abf40>
             └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7fa03daa69b0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fa0444b0280>
           └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fa0444b0430>
          └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fa0444b04c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fa0444b0700>
    └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f\t"\nLINE 3: WHERE resour...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "367814e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fa04433ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fa03f312680>
    └ <sqlalchemy.engine.base.Connection object at 0x7fa03d144a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'pk_1': '367814e6-063c-560c-b428-20ed1ed85f4f\t'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fa03dae6020; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f	"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^

[SQL: SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS resource_stages_created_at, resource_stages.updated_at AS resource_stages_updated_at, resource_stages.is_deleted AS resource_stages_is_deleted 
FROM resource_stages 
WHERE resource_stages.id = %(pk_1)s::UUID]
[parameters: {'pk_1': '367814e6-063c-560c-b428-20ed1ed85f4f\t'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-01-26 16:35:37.158 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57198 - "PUT /rms/v1.0/resource_stages/367814e6-063c-560c-b428-20ed1ed85f4f%09 HTTP/1.1" 500
INFO     2024-01-26 16:37:08.117 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:37:08.218 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:37:08.219 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:37:08.219 request id: app - uvicorn.server:serve - Finished server process [2939290]
INFO     2024-01-26 16:37:09.119 request id: app - uvicorn.server:serve - Started server process [2940089]
INFO     2024-01-26 16:37:09.120 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:37:09.121 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:37:43.108 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:37:43.209 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:37:43.210 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:37:43.211 request id: app - uvicorn.server:serve - Finished server process [2940089]
INFO     2024-01-26 16:37:44.064 request id: app - uvicorn.server:serve - Started server process [2940317]
INFO     2024-01-26 16:37:44.065 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:37:44.066 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:37:53.190 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:37:53.291 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:37:53.292 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:37:53.293 request id: app - uvicorn.server:serve - Finished server process [2940317]
INFO     2024-01-26 16:37:54.148 request id: app - uvicorn.server:serve - Started server process [2940397]
INFO     2024-01-26 16:37:54.150 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:37:54.151 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:40:15.109 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:40:15.215 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:40:15.216 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:40:15.222 request id: app - uvicorn.server:serve - Finished server process [2940397]
INFO     2024-01-26 16:40:16.129 request id: app - uvicorn.server:serve - Started server process [2941261]
INFO     2024-01-26 16:40:16.130 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:40:16.131 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:40:22.048 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:40:22.152 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:40:22.153 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:40:22.154 request id: app - uvicorn.server:serve - Finished server process [2941261]
INFO     2024-01-26 16:40:23.110 request id: app - uvicorn.server:serve - Started server process [2941312]
INFO     2024-01-26 16:40:23.112 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:40:23.112 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:41:09.127 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:41:09.229 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:41:09.229 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:41:09.230 request id: app - uvicorn.server:serve - Finished server process [2941312]
INFO     2024-01-26 16:41:10.139 request id: app - uvicorn.server:serve - Started server process [2941598]
INFO     2024-01-26 16:41:10.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:41:10.141 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:41:11.044 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:41:11.145 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:41:11.163 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:41:11.164 request id: app - uvicorn.server:serve - Finished server process [2941598]
INFO     2024-01-26 16:41:12.042 request id: app - uvicorn.server:serve - Started server process [2941629]
INFO     2024-01-26 16:41:12.043 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:41:12.044 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:42:34.457 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:42:34.558 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:42:34.559 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:42:34.559 request id: app - uvicorn.server:serve - Finished server process [2941629]
INFO     2024-01-26 16:42:35.497 request id: app - uvicorn.server:serve - Started server process [2942206]
INFO     2024-01-26 16:42:35.498 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:42:35.499 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:42:52.342 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:42:52.443 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:42:52.444 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:42:52.444 request id: app - uvicorn.server:serve - Finished server process [2942206]
INFO     2024-01-26 16:42:53.313 request id: app - uvicorn.server:serve - Started server process [2942333]
INFO     2024-01-26 16:42:53.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:42:53.315 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:43:07.751 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:43:07.853 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:43:07.854 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:43:07.854 request id: app - uvicorn.server:serve - Finished server process [2942333]
INFO     2024-01-26 16:43:08.716 request id: app - uvicorn.server:serve - Started server process [2942434]
INFO     2024-01-26 16:43:08.718 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:43:08.718 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:43:30.675 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:43:30.777 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:43:30.778 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:43:30.778 request id: app - uvicorn.server:serve - Finished server process [2942434]
INFO     2024-01-26 16:43:31.706 request id: app - uvicorn.server:serve - Started server process [2942602]
INFO     2024-01-26 16:43:31.707 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:43:31.708 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:43:34.015 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:43:34.116 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:43:34.117 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:43:34.117 request id: app - uvicorn.server:serve - Finished server process [2942602]
INFO     2024-01-26 16:43:35.001 request id: app - uvicorn.server:serve - Started server process [2942637]
INFO     2024-01-26 16:43:35.002 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:43:35.003 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:44:05.179 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:44:05.281 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:44:05.282 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:44:05.283 request id: app - uvicorn.server:serve - Finished server process [2942637]
INFO     2024-01-26 16:44:06.229 request id: app - uvicorn.server:serve - Started server process [2942834]
INFO     2024-01-26 16:44:06.231 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:44:06.231 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:44:31.194 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:44:31.295 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:44:31.296 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:44:31.297 request id: app - uvicorn.server:serve - Finished server process [2942834]
INFO     2024-01-26 16:44:32.149 request id: app - uvicorn.server:serve - Started server process [2943023]
INFO     2024-01-26 16:44:32.150 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:44:32.151 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:45:09.447 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:45:09.548 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:45:09.549 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:45:09.550 request id: app - uvicorn.server:serve - Finished server process [2943023]
INFO     2024-01-26 16:45:10.449 request id: app - uvicorn.server:serve - Started server process [2943271]
INFO     2024-01-26 16:45:10.450 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:45:10.451 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:45:40.931 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:45:41.032 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:45:41.033 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:45:41.034 request id: app - uvicorn.server:serve - Finished server process [2943271]
INFO     2024-01-26 16:45:41.985 request id: app - uvicorn.server:serve - Started server process [2943490]
INFO     2024-01-26 16:45:41.987 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:45:41.987 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:46:13.671 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:46:13.772 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:46:13.773 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:46:13.774 request id: app - uvicorn.server:serve - Finished server process [2943490]
INFO     2024-01-26 16:47:01.341 request id: app - uvicorn.server:serve - Started server process [2944073]
INFO     2024-01-26 16:47:01.342 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:47:01.343 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:47:04.307 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60668 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 16:47:04.520 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60668 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 16:48:35.383 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:48:35.484 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:48:35.485 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:48:35.485 request id: app - uvicorn.server:serve - Finished server process [2944073]
INFO     2024-01-26 16:48:36.340 request id: app - uvicorn.server:serve - Started server process [2944685]
INFO     2024-01-26 16:48:36.341 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:48:36.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:48:42.960 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:48:43.062 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:48:43.062 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:48:43.063 request id: app - uvicorn.server:serve - Finished server process [2944685]
INFO     2024-01-26 16:52:36.618 request id: app - uvicorn.server:serve - Started server process [2946279]
INFO     2024-01-26 16:52:36.619 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:52:36.620 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:52:38.626 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:52:38.728 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:52:38.728 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:54:38.025 request id: app - uvicorn.server:serve - Started server process [2947015]
INFO     2024-01-26 16:54:38.027 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:54:38.027 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:54:44.846 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41980 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 16:54:44.962 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41980 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 16:57:54.044 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:57:54.146 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:57:54.147 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:57:54.148 request id: app - uvicorn.server:serve - Finished server process [2947015]
INFO     2024-01-26 16:57:55.198 request id: app - uvicorn.server:serve - Started server process [2948659]
INFO     2024-01-26 16:57:55.199 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:57:55.200 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:58:17.856 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 16:58:17.958 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 16:58:17.958 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 16:58:17.959 request id: app - uvicorn.server:serve - Finished server process [2948659]
INFO     2024-01-26 16:58:38.197 request id: app - uvicorn.server:serve - Started server process [2949103]
INFO     2024-01-26 16:58:38.198 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 16:58:38.199 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 16:58:43.636 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45856 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 16:58:43.749 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45856 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 16:59:39.069 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45858 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 403
INFO     2024-01-26 17:00:11.761 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 17:00:12.031 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NTAxMn0.RFOFGMUBtBAenFJ7H31EdCTnU_5jycia8KC3IegPMeY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI4MTIxMn0.sCG-zpPaCa2uDwlczhFRElDeW-UPc341oP5kCyEoN9Q"},"links":null,"relationships":null,"timestamp":"2024-01-26 16:58:37"}'}
INFO     2024-01-26 17:00:12.032 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37634 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 17:00:51.852 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f8069f2c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f8069f2c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f806b30bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f806b45e950>
           └ <SpawnProcess name='SpawnProcess-5' parent=2947013 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f806b45dfc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=2947013 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f806b3541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2947013 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2947013 started>
    │    └ <function subprocess_started at 0x7f806a892440>
    └ <SpawnProcess name='SpawnProcess-5' parent=2947013 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f806b354310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f806a891900>
    │    │                  └ <uvicorn.server.Server object at 0x7f806b354310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f806b106440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f806b1063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f806b107eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f806b2f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f80616dabc0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f80616dabc0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f80616dabc0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f80616dabc0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f806a75c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f806a75c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f806b355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8069b06bf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f806b355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f80617559f0>
          └ <fastapi.applications.FastAPI object at 0x7f8069b06bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f80616dac20>
                     │    └ <function error_handle_business at 0x7f80699935b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f80617559f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ NameError("name 'TokenPayload' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f80616d7e20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8061757760>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f80617559f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '20', 'accept': 'application/json', 'authoriz...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f80616d7e20>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f80699bfe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8061757760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f8061757760>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8061754880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8061757760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8061619120>
                     │    │             └ <starlette.requests.Request object at 0x7f8061666aa0>
                     │    └ <function process_middleware_common at 0x7f80699939a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8061754880>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f8061666aa0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8061619120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ NameError("name 'TokenPayload' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f8069f2ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f8069a987c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f8061666aa0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f80618c0bb0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8061754880>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8061619ab0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f80618c0ca0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f80618c0bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8061619ab0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8069986350>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f80618c0ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8061619ab0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f8069ad64d0>
          └ <fastapi.routing.APIRoute object at 0x7f80617a5330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8061619ab0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f80617a6bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f806177de10>
          └ <fastapi.routing.APIRoute object at 0x7f80617a5330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f80617a6d70>
                     └ <function get_request_handler.<locals>.app at 0x7f806177dd80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 217, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x7f8069ad4d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/dependencies/utils.py", line 529, in solve_dependencies
    solved = await run_in_threadpool(call, **sub_values)
                   │                 │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f8061666a10>, 'credentials': HTTPAuthorizationCredentials(scheme=...
                   │                 └ <bound method UserService.get_current_user of <app.src.services.user_service.UserService object at 0x7f80699ce6b0>>
                   └ <function run_in_threadpool at 0x7f806a42add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<bound method UserService.get_current_user of <app.src.services.user_service.UserService object at 0x7f806...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f806161c480>
                 │     │         └ <function run_sync at 0x7f806a4ed090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f806a4ec820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=NameError("name 'TokenPayload' is not defined")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f8061...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f8061ba4d00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f8061633380>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 53, in get_current_user
    user = self.get_user_by_access_token(db_session, credentials.credentials)
           │    │                        │           │           └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NTAxMn0.RFOFGMUBtBAenFJ7H31EdCTnU_5...
           │    │                        │           └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
           │    │                        └ <sqlalchemy.orm.session.Session object at 0x7f8061666a10>
           │    └ <function UserService.get_user_by_access_token at 0x7f8062cda440>
           └ <app.src.services.user_service.UserService object at 0x7f80699ce6b0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 40, in get_user_by_access_token
    token_data = TokenPayload(**payload)
                                └ {'sub': 'admin@rabiloo.com', 'exp': 1706265012}

NameError: name 'TokenPayload' is not defined
INFO     2024-01-26 17:00:51.870 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50316 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 500
INFO     2024-01-26 17:02:47.532 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:02:47.634 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:02:47.635 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:02:47.635 request id: app - uvicorn.server:serve - Finished server process [2949103]
INFO     2024-01-26 17:02:49.401 request id: app - uvicorn.server:serve - Started server process [2950639]
INFO     2024-01-26 17:02:49.402 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:02:49.402 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:03:00.278 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44360 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 17:03:00.409 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44360 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 17:03:30.438 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 17:03:30.707 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NTIxMH0.ddCy__vxsfbym1y84JCNGeK2rr7T3xJJVSIfHQI1Hzs","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI4MTQxMH0.wWwfVbUS375wYEGQ-4veRp5rj0MRz8FTyKAEUZEX0pI"},"links":null,"relationships":null,"timestamp":"2024-01-26 17:02:49"}'}
INFO     2024-01-26 17:03:30.708 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44372 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 17:03:58.795 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb6ab194310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb6ab1943a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb6ac60fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb6ac762950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2950637 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb6ac761fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2950637 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb6ac6581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2950637 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2950637 started>
    │    └ <function subprocess_started at 0x7fb6aba96440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2950637 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb6ac658310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb6aba95900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb6ac658310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb6ac3a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb6ac3a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb6ac3a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb6ac5fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb6a293ca00>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb6a293ca00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb6a293ca00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb6a293ca00>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb6ab990550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb6ab9905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb6ac659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb6aad72b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb6ac659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb6a2991d80>
          └ <fastapi.applications.FastAPI object at 0x7fb6aad72b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb6a29e7160>
                     │    └ <function error_handle_business at 0x7fb6aac035b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb6a2991d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceService' object has no attribute 'update'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb6a28f7e20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb6a2993ac0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb6a2991d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '20', 'accept': 'application/json', 'authoriz...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb6a28f7e20>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb6aac2fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb6a2993ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb6a2993ac0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb6a2990be0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb6a2993ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb6a28f7d00>
                     │    │             └ <starlette.requests.Request object at 0x7fb6a2a33e50>
                     │    └ <function process_middleware_common at 0x7fb6aac039a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb6a2990be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb6a2a33e50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb6a28f7d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceService' object has no attribute 'update'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb6ab194a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb6aad045e0>
          │    │   │      └ <starlette.requests.Request object at 0x7fb6a2a33e50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb6a2b00f10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb6a2990be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb6a28515a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb6a2b01000>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb6a2b00f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb6a28515a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb6aabf62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb6a2b01000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb6a28515a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb6aad424d0>
          └ <fastapi.routing.APIRoute object at 0x7fb6a29e5690>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb6a28515a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb6a293c580>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb6a29b5d80>
          └ <fastapi.routing.APIRoute object at 0x7fb6a29e5690>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb6a1f58670>
                     └ <function get_request_handler.<locals>.app at 0x7fb6a29b5cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb6aad43130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fb6a2a33f10>, '_': <app.src.models.user.User object at 0x7fb6a1f5...
                 │                 │         └ <function update_resource_stage at 0x7fb6a2ad5510>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fb6a29e5750>
                 └ <function run_in_threadpool at 0x7fb6ab696dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function update_resource_stage at 0x7fb6a2ad5510>, db_session=<sqlalchemy.orm.session.Session object at 0...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fb6a2a00280>
                 │     │         └ <function run_sync at 0x7fb6ab759090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fb6ab758820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceService' object has no attribute 'update'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fb6a1...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fb6a2dfce00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fb6a29f72c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_stage_controller.py", line 25, in update_resource_stage
    data = resource_stage_service.update(db_session, resource_stage_id, resource_stage_update)
           │                             │           │                  └ ResourceStageUpdate(name='Meta')
           │                             │           └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │                             └ <sqlalchemy.orm.session.Session object at 0x7fb6a2a33f10>
           └ <app.src.services.resource_service.ResourceService object at 0x7fb6a2aa4940>

AttributeError: 'ResourceService' object has no attribute 'update'
INFO     2024-01-26 17:03:58.810 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57798 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 500
INFO     2024-01-26 17:06:21.135 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:06:21.237 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:06:21.238 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:06:21.238 request id: app - uvicorn.server:serve - Finished server process [2950639]
INFO     2024-01-26 17:06:22.172 request id: app - uvicorn.server:serve - Started server process [2952056]
INFO     2024-01-26 17:06:22.173 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:06:22.173 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:06:42.324 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:06:42.426 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:06:42.427 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:06:42.427 request id: app - uvicorn.server:serve - Finished server process [2952056]
INFO     2024-01-26 17:06:43.379 request id: app - uvicorn.server:serve - Started server process [2952201]
INFO     2024-01-26 17:06:43.380 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:06:43.381 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:06:49.498 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:06:49.599 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:06:49.600 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:06:49.601 request id: app - uvicorn.server:serve - Finished server process [2952201]
INFO     2024-01-26 17:06:50.479 request id: app - uvicorn.server:serve - Started server process [2952252]
INFO     2024-01-26 17:06:50.480 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:06:50.481 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:07:31.785 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:07:31.888 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:07:31.889 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:07:31.890 request id: app - uvicorn.server:serve - Finished server process [2952252]
INFO     2024-01-26 17:07:32.831 request id: app - uvicorn.server:serve - Started server process [2952505]
INFO     2024-01-26 17:07:32.832 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:07:32.833 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:07:39.952 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:07:40.057 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:07:40.057 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:07:40.058 request id: app - uvicorn.server:serve - Finished server process [2952505]
INFO     2024-01-26 17:07:40.958 request id: app - uvicorn.server:serve - Started server process [2952582]
INFO     2024-01-26 17:07:40.959 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:07:40.960 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:08:12.238 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:08:12.340 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:08:12.340 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:08:12.341 request id: app - uvicorn.server:serve - Finished server process [2952582]
INFO     2024-01-26 17:08:13.221 request id: app - uvicorn.server:serve - Started server process [2952794]
INFO     2024-01-26 17:08:13.222 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:08:13.223 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:08:16.231 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:08:16.332 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:08:16.333 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:08:16.334 request id: app - uvicorn.server:serve - Finished server process [2952794]
INFO     2024-01-26 17:08:18.273 request id: app - uvicorn.server:serve - Started server process [2952834]
INFO     2024-01-26 17:08:18.274 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:08:18.274 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:08:22.812 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37154 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 17:08:22.946 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37154 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 17:08:49.985 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 17:08:50.260 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NTUzMH0.QcgF_JAFazLw7xDB0cTwNBWUYkMGhZxTOXPHDNgvBYU","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI4MTczMH0.8yySB7m9_B2rLBCrd5jY3DAEv3Jb1gr4ZrH5F5tEljE"},"links":null,"relationships":null,"timestamp":"2024-01-26 17:08:18"}'}
INFO     2024-01-26 17:08:50.261 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37160 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 17:09:21.522 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fdc059ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fdc059ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fdc06e0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fdc06f5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2952832 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdc06f5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2952832 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdc06e541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2952832 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2952832 started>
    │    └ <function subprocess_started at 0x7fdc06362440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2952832 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdc06e54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fdc06361900>
    │    │                  └ <uvicorn.server.Server object at 0x7fdc06e54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fdc067a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fdc067a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fdc067a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fdc06df7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fdbfd0dbb50>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fdbfd0dbb50>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fdbfd0dbb50>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fdbfd0dbb50>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fdc06224550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fdc062245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdc06e55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdc055c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdc06e55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbfd171d50>
          └ <fastapi.applications.FastAPI object at 0x7fdc055c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fdbfd1c23e0>
                     │    └ <function error_handle_business at 0x7fdc054575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbfd171d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceService' object has no attribute 'update'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdbfd0d3eb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbfd173a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbfd171d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '20', 'accept': 'application/json', 'authoriz...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdbfd0d3eb0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fdc05483e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbfd173a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fdbfd173a90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdbfd170bb0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbfd173a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdbfd0d3d90>
                     │    │             └ <starlette.requests.Request object at 0x7fdbfd216260>
                     │    └ <function process_middleware_common at 0x7fdc054579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdbfd170bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fdbfd216260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdbfd0d3d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceService' object has no attribute 'update'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fdc059eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fdc05558720>
          │    │   │      └ <starlette.requests.Request object at 0x7fdbfd216260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbfd2e0ee0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdbfd170bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbfd235750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbfd2e0fd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbfd2e0ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbfd235750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fdc0544a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbfd2e0fd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbfd235750>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fdc055964d0>
          └ <fastapi.routing.APIRoute object at 0x7fdbfd1c1660>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbfd235750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbfd124520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fdbfd199e10>
          └ <fastapi.routing.APIRoute object at 0x7fdbfd1c1660>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fdbfd13c670>
                     └ <function get_request_handler.<locals>.app at 0x7fdbfd199d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fdc05597130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fdbfd217ee0>, '_': <app.src.models.user.User object at 0x7fdbfd13...
                 │                 │         └ <function update_resource_stage at 0x7fdbfd2b55a0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fdbfd1c1720>
                 └ <function run_in_threadpool at 0x7fdc05ef2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function update_resource_stage at 0x7fdbfd2b55a0>, db_session=<sqlalchemy.orm.session.Session object at 0...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fdbfd1deb40>
                 │     │         └ <function run_sync at 0x7fdc05fb5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fdc05fb4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceService' object has no attribute 'update'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fdbfd...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fdbfd1dea80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fdbfd1dfe00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_stage_controller.py", line 25, in update_resource_stage
    data = resource_stage_service.update(db_session, resource_stage_id, resource_stage_update)
           │                             │           │                  └ ResourceStageUpdate(name='Meta')
           │                             │           └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │                             └ <sqlalchemy.orm.session.Session object at 0x7fdbfd217ee0>
           └ <app.src.services.resource_service.ResourceService object at 0x7fdbfd284880>

AttributeError: 'ResourceService' object has no attribute 'update'
INFO     2024-01-26 17:09:21.536 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53510 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 500
INFO     2024-01-26 17:10:06.153 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:10:06.255 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:10:06.256 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:10:06.256 request id: app - uvicorn.server:serve - Finished server process [2952834]
INFO     2024-01-26 17:10:24.757 request id: app - uvicorn.server:serve - Started server process [2953587]
INFO     2024-01-26 17:10:24.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:10:24.759 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:10:28.369 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:10:28.471 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:10:28.472 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:10:28.472 request id: app - uvicorn.server:serve - Finished server process [2953587]
INFO     2024-01-26 17:10:30.872 request id: app - uvicorn.server:serve - Started server process [2953644]
INFO     2024-01-26 17:10:30.873 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:10:30.874 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:10:32.846 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40910 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 17:10:32.968 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40910 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 17:11:04.343 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 17:11:04.617 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NTY2NH0._wMmESvsLkxrmJMkZpyAqq9IF1as8ikbcaA5XRUO45U","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI4MTg2NH0.lMWRSGLxZy8ydcR6ibb9uEUsmNsS_ajz7oVeMXgadmw"},"links":null,"relationships":null,"timestamp":"2024-01-26 17:10:30"}'}
INFO     2024-01-26 17:11:04.618 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40922 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-26 17:11:37.385 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6125c9c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6125c9c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f612710bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f612725e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2953642 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f612725dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2953642 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f61271541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2953642 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2953642 started>
    │    └ <function subprocess_started at 0x7f612658e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2953642 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6127154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f612658d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6127154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f61269a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f61269a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f61269a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f61270f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f611d3c3c70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f611d3c3c70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f611d3c3c70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f611d3c3c70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6126488550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f61264885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6127155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f612587ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6127155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f611d460d30>
          └ <fastapi.applications.FastAPI object at 0x7f612587ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f611d3c1090>
                     │    └ <function error_handle_business at 0x7f612570b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f611d460d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceStageService' object has no attribute 'resource_stage'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f611d502050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f611d460df0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f611d460d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '20', 'accept': 'application/json', 'authoriz...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f611d502050>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6125737e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f611d460df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f611d460df0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f611d62df30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f611d460df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f611d46e8c0>
                     │    │             └ <starlette.requests.Request object at 0x7f611d3c1630>
                     │    └ <function process_middleware_common at 0x7f612570b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f611d62df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f611d3c1630>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f611d46e8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceStageService' object has no attribute 'resource_stage'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6125c9ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f612580c7c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f611d3c1630>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f611d58eaa0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f611d62df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f611d3c4820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f611d58eb90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f611d58eaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f611d3c4820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f61256fe2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f611d58eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f611d3c4820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f612584a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f611d48a9b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f611d3c4820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f611d3c22c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f611d46e5f0>
          └ <fastapi.routing.APIRoute object at 0x7f611d48a9b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f611d409ab0>
                     └ <function get_request_handler.<locals>.app at 0x7f611d46e560>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f612584b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f611d4c7a60>, '_': <app.src.models.user.User object at 0x7f611d40...
                 │                 │         └ <function update_resource_stage at 0x7f611d571a20>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f611d48aa70>
                 └ <function run_in_threadpool at 0x7f612619edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function update_resource_stage at 0x7f611d571a20>, db_session=<sqlalchemy.orm.session.Session object at 0...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f611d4a8800>
                 │     │         └ <function run_sync at 0x7f6126261090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f6126260820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceStageService' object has no attribute 'resource_stage'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f611d...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f6125751640>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f611d4a94c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_stage_controller.py", line 25, in update_resource_stage
    data = resource_stage_service.update(db_session, resource_stage_id, resource_stage_update)
           │                      │      │           │                  └ ResourceStageUpdate(name='Meta')
           │                      │      │           └ '367814e6-063c-560c-b428-20ed1ed85f4f'
           │                      │      └ <sqlalchemy.orm.session.Session object at 0x7f611d4c7a60>
           │                      └ <function ResourceStageService.update at 0x7f611d571d80>
           └ <app.src.services.resource_stage_service.ResourceStageService object at 0x7f611d58c880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_stage_service.py", line 57, in update
    resource_stage = self.resource_stage.get(db_session, resource_stage_id)
                     │                       │           └ '367814e6-063c-560c-b428-20ed1ed85f4f'
                     │                       └ <sqlalchemy.orm.session.Session object at 0x7f611d4c7a60>
                     └ <app.src.services.resource_stage_service.ResourceStageService object at 0x7f611d58c880>

AttributeError: 'ResourceStageService' object has no attribute 'resource_stage'
INFO     2024-01-26 17:11:37.401 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46920 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 500
INFO     2024-01-26 17:12:13.938 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:12:14.039 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:12:14.041 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:12:14.042 request id: app - uvicorn.server:serve - Finished server process [2953644]
INFO     2024-01-26 17:12:14.918 request id: app - uvicorn.server:serve - Started server process [2954290]
INFO     2024-01-26 17:12:14.919 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:12:14.920 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:12:15.322 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:12:15.423 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:12:15.424 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:12:15.425 request id: app - uvicorn.server:serve - Finished server process [2954290]
INFO     2024-01-26 17:12:17.380 request id: app - uvicorn.server:serve - Started server process [2954326]
INFO     2024-01-26 17:12:17.381 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:12:17.381 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:12:20.510 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43050 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 17:12:20.666 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43050 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 17:12:39.754 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 17:12:40.025 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NTc2MH0.5-xsqXNU2avYoLjTzQePR4Uh0Wkl1K9InjMSj8AZLoI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI4MTk2MH0.iX50T46e0jDIQFMMsPcvioaiwGwsJOcEl-6BjFDqFVI"},"links":null,"relationships":null,"timestamp":"2024-01-26 17:12:17"}'}
INFO     2024-01-26 17:12:40.027 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43060 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 17:13:02.060 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36390 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 200
INFO     2024-01-26 17:13:32.974 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:13:33.076 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:13:33.077 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:13:33.077 request id: app - uvicorn.server:serve - Finished server process [2954326]
INFO     2024-01-26 17:23:44.993 request id: app - uvicorn.server:serve - Started server process [2958760]
INFO     2024-01-26 17:23:44.995 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-26 17:23:44.995 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-26 17:23:47.839 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51252 - "GET /docs HTTP/1.1" 200
INFO     2024-01-26 17:23:48.034 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51252 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-26 17:24:09.843 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-26 17:24:10.112 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI2NjQ1MH0.hIH7tOHrn57v3_DHIDjdN3mw3To3Aw72wKt208YLuoQ","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjI4MjY1MH0.nBMoiFtcQfSLQ2ljjoZgexrEgPyTV0IXVD3BqdOE1R0"},"links":null,"relationships":null,"timestamp":"2024-01-26 17:23:44"}'}
INFO     2024-01-26 17:24:10.113 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51262 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-26 17:28:39.912 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36872 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-26 17:29:34.758 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51690 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 200
INFO     2024-01-26 17:44:49.465 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-26 17:44:49.566 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-26 17:44:49.567 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-26 17:44:49.567 request id: app - uvicorn.server:serve - Finished server process [2958760]
INFO     2024-01-30 08:36:20.990 request id: app - uvicorn.server:serve - Started server process [593140]
INFO     2024-01-30 08:36:20.991 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 08:36:20.992 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 08:38:12.151 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40854 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 08:38:12.217 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40854 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-01-30 08:38:12.218 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40870 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-01-30 08:38:12.438 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40870 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 09:03:39.502 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo123@'}}
ERROR    2024-01-30 09:03:39.772 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Incorrect Password
None
INFO     2024-01-30 09:03:39.773 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60146 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-01-30 09:03:51.645 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 09:03:51.885 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4MjAzMX0.aHtMhaT4TwMqW7QyOJudw-EvKPKhjM4hd_xQhRZY4dk","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5ODIzMX0.3lxAxTJ1CkpZ_uDVa2fuQzAosZdjtAUWlz12F5YkK8M"},"links":null,"relationships":null,"timestamp":"2024-01-30 08:36:20"}'}
INFO     2024-01-30 09:03:51.886 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45468 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 09:07:52.776 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:07:52.877 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:07:52.878 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:07:52.879 request id: app - uvicorn.server:serve - Finished server process [593140]
INFO     2024-01-30 09:08:53.977 request id: app - uvicorn.server:serve - Started server process [605198]
INFO     2024-01-30 09:08:53.979 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:08:53.980 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:09:16.370 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': 'refresh_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4MjAzMX0.aHtMhaT4TwMqW7QyOJudw-EvKPKhjM4hd_xQhRZY4dk', 'path_params': {}}
ERROR    2024-01-30 09:09:16.410 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f05e9750310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f05e97503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f05eab0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f05eac5e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=593138 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f05eac5dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=593138 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f05eab541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=593138 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=593138 started>
    │    └ <function subprocess_started at 0x7f05ea092440>
    └ <SpawnProcess name='SpawnProcess-3' parent=593138 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f05eab54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f05ea091900>
    │    │                  └ <uvicorn.server.Server object at 0x7f05eab54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f05ea906440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f05ea9063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f05ea907eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f05eaaf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f05e0f87580>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f05e0f87580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f05e0f87580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f05e0f87580>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f05e9f5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f05e9f5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f05eab55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f05e9336b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f05eab55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f05e0f5cd30>
          └ <fastapi.applications.FastAPI object at 0x7f05e9336b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f05e067bdf0>
                     │    └ <function error_handle_business at 0x7f05e91c75b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f05e0f5cd30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f05e0f6a950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f05e0f5cdf0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f05e0f5cd30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '0', 'accept': 'application/json', 'authoriza...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f05e0f6a950>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f05e91f3e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f05e0f5cdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f05e0f5cdf0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f05e1129f30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f05e0f5cdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f05e0f6a9e0>
                     │    │             └ <starlette.requests.Request object at 0x7f05e0f87d90>
                     │    └ <function process_middleware_common at 0x7f05e91c79a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f05e1129f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f05e0f87d90>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f05e0f6a9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f05e9750a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f05e92c8770>
          │    │   │      └ <starlette.requests.Request object at 0x7f05e0f87d90>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f05e1086aa0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f05e1129f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f05e0f6b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f05e1086b90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f05e1086aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f05e0f6b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f05e91ba2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f05e1086b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f05e0f6b880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f05e93064d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f05e0f5cf10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f05e0f6b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f05e0fbc1c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f05e0f69750>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f05e0f5cf10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f05e0fbfa60>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f05e0f696c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f05e0fbfa60>
                               └ <function get_request_handler.<locals>.app at 0x7f05e0f69630>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f05e9307130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7f05e06ae260>, 'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ...
                 │                 │         └ <function refresh_access_token at 0x7f05e2582f80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f05e0f5cfa0>
                 └ <function run_in_threadpool at 0x7f05e9c4add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7f05e2582f80>, user_data=<app.src.models.user.User object at 0x7f05e06...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f05e13cd700>
                 │     │         └ <function run_sync at 0x7f05e9d0d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f05e9d0c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f05e0...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f05e0f9b780>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f05e13e10c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7f05e06ae260>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:09:16.437 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42296 - "POST /rms/v1.0/refresh-token?refresh_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4MjAzMX0.aHtMhaT4TwMqW7QyOJudw-EvKPKhjM4hd_xQhRZY4dk HTTP/1.1" 500
INFO     2024-01-30 09:14:41.645 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:14:41.747 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:14:41.747 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:14:41.748 request id: app - uvicorn.server:serve - Finished server process [605198]
INFO     2024-01-30 09:14:42.750 request id: app - uvicorn.server:serve - Started server process [607536]
INFO     2024-01-30 09:14:42.751 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:14:42.752 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:16:22.506 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:16:22.608 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:16:22.608 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:16:22.609 request id: app - uvicorn.server:serve - Finished server process [607536]
INFO     2024-01-30 09:16:38.088 request id: app - uvicorn.server:serve - Started server process [608344]
INFO     2024-01-30 09:16:38.089 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:16:38.090 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:16:46.685 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': 'refresh_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4MjAzMX0.aHtMhaT4TwMqW7QyOJudw-EvKPKhjM4hd_xQhRZY4dk', 'path_params': {}}
INFO     2024-01-30 09:16:46.766 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56174 - "POST /rms/v1.0/refresh-token?refresh_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4MjAzMX0.aHtMhaT4TwMqW7QyOJudw-EvKPKhjM4hd_xQhRZY4dk HTTP/1.1" 422
INFO     2024-01-30 09:17:25.341 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50234 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 09:17:25.561 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50234 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 09:17:58.691 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 09:17:58.924 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5OTA3OH0.4xI-nD6r72z3NLYy8PBagY7NnoHxHvzn_DNTtPXmCmo"},"links":null,"relationships":null,"timestamp":"2024-01-30 09:16:37"}'}
INFO     2024-01-30 09:17:58.926 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50236 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 09:18:17.343 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:18:17.352 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f45d4f53ac0>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f45d4f53b50>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f45d7a912d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f45d7a9c040>
           └ <SpawnProcess name='SpawnProcess-1' parent=608337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f45d7a57640>
    └ <SpawnProcess name='SpawnProcess-1' parent=608337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f45d7aaa890>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=608337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=608337 started>
    │    └ <function subprocess_started at 0x7f45d57b5d80>
    └ <SpawnProcess name='SpawnProcess-1' parent=608337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f45d7aa9d20>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f45d57b5090>
    │    │                  └ <uvicorn.server.Server object at 0x7f45d7aa9d20>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f45d79d5a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f45d79d5990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f45d79d7490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f45d7c62830>
    └ <Handle <TaskStepMethWrapper object at 0x7f45bc42f520>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f45bc42f520>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f45bc42f520>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f45bc42f520>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f45d583f400>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f45d583f490>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f45d7d55ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f45d4b54bb0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f45d7d55ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f45bc6e45b0>
          └ <fastapi.applications.FastAPI object at 0x7f45d4b54bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f45bc554af0>
                     │    └ <function error_handle_business at 0x7f45d4b7b520>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f45bc6e45b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f45bc449990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f45bc6e44c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f45bc6e45b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f45bc449990>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f45d49f4280>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f45bc6e44c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f45bc6e44c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f45bc6a1750>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f45bc6e44c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f45bc449fc0>
                     │    │             └ <starlette.requests.Request object at 0x7f45bc475630>
                     │    └ <function process_middleware_common at 0x7f45d4b7bac0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f45bc6a1750>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f45bc475630>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f45bc449fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f45d4f68280>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f45d4ada160>
          │    │   │      └ <starlette.requests.Request object at 0x7f45bc475630>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f45bca42170>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f45bc6a1750>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f45bc44a290>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f45bca421d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f45bca42170>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f45bc44a290>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f45d4995930>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f45bca421d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f45bc44a290>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f45d4b1d7e0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f45bc6e4670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f45bc44a290>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f45bc477310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f45bc6f4f70>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f45bc6e4670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f45bc476e90>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f45bc6f4ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f45bc476e90>
                               └ <function get_request_handler.<locals>.app at 0x7f45bc6f4e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f45d4b1e440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7f45bc4f9390>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7f45bddc68c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f45bc6e4790>
                 └ <function run_in_threadpool at 0x7f45d5602680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7f45bddc68c0>, user_data=<app.src.models.user.User object at 0x7f45bc4...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f45bc4be7c0>
                 │     │         └ <function run_sync at 0x7f45d4ee0670>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f45d5603d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f45bc...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f45bc52a940>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f45bc4be480>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7f45bc4f9390>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:18:17.395 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46024 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:18:59.064 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:18:59.166 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:18:59.167 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:18:59.168 request id: app - uvicorn.server:serve - Finished server process [608344]
INFO     2024-01-30 09:19:02.316 request id: app - uvicorn.server:serve - Started server process [609245]
INFO     2024-01-30 09:19:02.318 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:19:02.319 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:19:07.472 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
INFO     2024-01-30 09:23:19.134 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:23:19.236 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-30 09:23:20.951 request id: app - uvicorn.server:serve - Started server process [610867]
INFO     2024-01-30 09:23:20.952 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:23:20.953 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:23:28.380 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:23:28.420 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6da900c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6da900c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f6daa40bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f6daa55e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=610865 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6daa55dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=610865 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6daa4541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=610865 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=610865 started>
    │    └ <function subprocess_started at 0x7f6da9972440>
    └ <SpawnProcess name='SpawnProcess-1' parent=610865 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6daa454310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6da9971900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6daa454310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6da9da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6da9da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6da9da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6daa3f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6da8ab1120>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6da8ab1120>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6da8ab1120>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6da8ab1120>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6da9838550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6da98385e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6daa455e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6da8beab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6daa455e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6da083cd30>
          └ <fastapi.applications.FastAPI object at 0x7f6da8beab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6da8ab1db0>
                     │    └ <function error_handle_business at 0x7f6da8a775b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6da083cd30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6da084a950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6da083cdf0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6da083cd30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6da084a950>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6da8aa7e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6da083cdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f6da083cdf0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6da0809f30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6da083cdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6da084a9e0>
                     │    │             └ <starlette.requests.Request object at 0x7f6da0867df0>
                     │    └ <function process_middleware_common at 0x7f6da8a779a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6da0809f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6da0867df0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6da084a9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6da900ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6da8b84310>
          │    │   │      └ <starlette.requests.Request object at 0x7f6da0867df0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6da096eaa0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6da0809f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6da084b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6da096eb90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6da096eaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6da084b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6da8a6e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6da096eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6da084b880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6da8bba4d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f6da083cf10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6da084b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6da089c280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f6da0849750>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f6da083cf10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6da089fac0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f6da08496c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f6da089fac0>
                               └ <function get_request_handler.<locals>.app at 0x7f6da0849630>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6da8bbb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7f6d9bf8a260>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7f6da1d7ef80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f6da083cfa0>
                 └ <function run_in_threadpool at 0x7f6da950edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7f6da1d7ef80>, user_data=<app.src.models.user.User object at 0x7f6d9bf...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f6da1d8e440>
                 │     │         └ <function run_sync at 0x7f6da95d1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f6da95d0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f6da0...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f6da0884bc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f6da0884400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7f6d9bf8a260>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:23:28.435 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49768 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:23:48.323 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:23:48.425 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:23:48.426 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:23:48.426 request id: app - uvicorn.server:serve - Finished server process [610867]
INFO     2024-01-30 09:23:51.151 request id: app - uvicorn.server:serve - Started server process [611060]
INFO     2024-01-30 09:23:51.153 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:23:51.154 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:23:55.282 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:23:55.356 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc1d195b910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc1d195b9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fc1d4499120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fc1d445fe20>
           └ <SpawnProcess name='SpawnProcess-1' parent=611049 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc1d445f490>
    └ <SpawnProcess name='SpawnProcess-1' parent=611049 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc1d44b2890>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=611049 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=611049 started>
    │    └ <function subprocess_started at 0x7fc1d21bdbd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=611049 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc1d44b1e10>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc1d21bcee0>
    │    │                  └ <uvicorn.server.Server object at 0x7fc1d44b1e10>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc1d43dda20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc1d43dd990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc1d43df490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc1d466a830>
    └ <Handle <TaskStepMethWrapper object at 0x7fc1b910aa70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc1b910aa70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc1b910aa70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc1b910aa70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc1d2247250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc1d22472e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc1d4453640>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc1d155cb80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc1d4453640>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc1b90e4580>
          └ <fastapi.applications.FastAPI object at 0x7fc1d155cb80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc1b8627520>
                     │    └ <function error_handle_business at 0x7fc1d1583370>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc1b90e4580>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc1b90f2320>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc1b90e4490>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc1b90e4580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc1b90f2320>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc1d13f8550>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc1b90e4490>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc1b90e4490>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc1b90a1720>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc1b90e4490>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc1b90f23b0>
                     │    │             └ <starlette.requests.Request object at 0x7fc1b910b310>
                     │    └ <function process_middleware_common at 0x7fc1d1583910>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc1b90a1720>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc1b910b310>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc1b90f23b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc1d196c0d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc1d14e1490>
          │    │   │      └ <starlette.requests.Request object at 0x7fc1b910b310>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc1b943e140>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc1b90a1720>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc1b90f3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc1b943e1a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc1b943e140>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc1b90f3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc1d139d180>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc1b943e1a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc1b90f3250>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc1d1525630>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fc1b90e4640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc1b90f3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc1b910b9a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc1b90f0700>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fc1b90e4640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc1b8f57280>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fc1b90f0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fc1b8f57280>
                               └ <function get_request_handler.<locals>.app at 0x7fc1b90f05e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc1d1526290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7fc1b866db10>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7fc1ba7ce050>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc1b90e4760>
                 └ <function run_in_threadpool at 0x7fc1d200a4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7fc1ba7ce050>, user_data=<app.src.models.user.User object at 0x7fc1b86...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc1bb500e00>
                 │     │         └ <function run_sync at 0x7fc1d18e84c0>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc1d200bbe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fc1b8...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc1b8f80280>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc1b911b7c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7fc1b866db10>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:23:55.403 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34432 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:24:00.622 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:24:00.724 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:24:00.725 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:24:00.726 request id: app - uvicorn.server:serve - Finished server process [611060]
INFO     2024-01-30 09:24:03.858 request id: app - uvicorn.server:serve - Started server process [611180]
INFO     2024-01-30 09:24:03.861 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:24:03.862 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:24:04.119 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:24:56.672 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe32abfbac0>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe32abfbb50>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fe3317652d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fe331774040>
           └ <SpawnProcess name='SpawnProcess-1' parent=611175 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe33172f640>
    └ <SpawnProcess name='SpawnProcess-1' parent=611175 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe331782890>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=611175 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=611175 started>
    │    └ <function subprocess_started at 0x7fe330489d80>
    └ <SpawnProcess name='SpawnProcess-1' parent=611175 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe331781d20>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe330489090>
    │    │                  └ <uvicorn.server.Server object at 0x7fe331781d20>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe3316ada20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe3316ad990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe3316af490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe331922830>
    └ <Handle <TaskStepMethWrapper object at 0x7fe3159375e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe3159375e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe3159375e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe3159375e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe330513400>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe330513490>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe331a15ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe32a820bb0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe331a15ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe3163f05b0>
          └ <fastapi.applications.FastAPI object at 0x7fe32a820bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe315937cd0>
                     │    └ <function error_handle_business at 0x7fe32a847520>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe3163f05b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe3164024d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe3163f04c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe3163f05b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe3164024d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe32a6c0280>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe3163f04c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe3163f04c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe3163b1750>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe3163f04c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe316402560>
                     │    │             └ <starlette.requests.Request object at 0x7fe316417340>
                     │    └ <function process_middleware_common at 0x7fe32a847ac0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe3163b1750>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe316417340>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe316402560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe32ac10280>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe32a7b2480>
          │    │   │      └ <starlette.requests.Request object at 0x7fe316417340>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe31674a170>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe3163b1750>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe316403400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe31674a1d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe31674a170>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe316403400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe32a661930>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe31674a1d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe316403400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe32a7e97e0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe3163f0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe316403400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe3164179d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe3164008b0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fe3163f0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe3162672b0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fe316400820>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fe3162672b0>
                               └ <function get_request_handler.<locals>.app at 0x7fe316400790>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe32a7ea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7fe31597db40>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7fe32812e200>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe3163f0790>
                 └ <function run_in_threadpool at 0x7fe33026a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7fe32812e200>, user_data=<app.src.models.user.User object at 0x7fe3159...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe31641ebc0>
                 │     │         └ <function run_sync at 0x7fe32ab88670>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe33026bd90>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe316...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe31626f2c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe3166bb800>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7fe31597db40>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:24:56.716 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37434 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:25:06.643 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
INFO     2024-01-30 09:25:34.763 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:25:34.865 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-30 09:25:36.472 request id: app - uvicorn.server:serve - Finished server process [611180]
INFO     2024-01-30 09:25:38.833 request id: app - uvicorn.server:serve - Started server process [612337]
INFO     2024-01-30 09:25:38.835 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:25:38.835 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:25:39.838 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:25:39.891 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7ff24c194310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7ff24c1943a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7ff24d60fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7ff24d762950>
           └ <SpawnProcess name='SpawnProcess-1' parent=612335 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7ff24d761fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=612335 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7ff24d6581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=612335 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=612335 started>
    │    └ <function subprocess_started at 0x7ff24ca96440>
    └ <SpawnProcess name='SpawnProcess-1' parent=612335 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7ff24d658310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7ff24ca95900>
    │    │                  └ <uvicorn.server.Server object at 0x7ff24d658310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7ff24d3aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7ff24d3aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7ff24d3abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7ff24d5fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7ff24bc35db0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7ff24bc35db0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7ff24bc35db0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7ff24bc35db0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7ff24c990550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7ff24c9905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff24d659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7ff24bd72b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff24d659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff24396cdc0>
          └ <fastapi.applications.FastAPI object at 0x7ff24bd72b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7ff243087e50>
                     │    └ <function error_handle_business at 0x7ff24bc035b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff24396cdc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff24397a8c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff24396ce80>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff24396cdc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff24397a8c0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7ff24bc2fe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff24396ce80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7ff24396ce80>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff243b39fc0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff24396ce80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff24397a950>
                     │    │             └ <starlette.requests.Request object at 0x7ff243997c70>
                     │    └ <function process_middleware_common at 0x7ff24bc039a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff243b39fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7ff243997c70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff24397a950>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7ff24c194a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7ff24bd045e0>
          │    │   │      └ <starlette.requests.Request object at 0x7ff243997c70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff243aa6b30>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff243b39fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff24397b7f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff243aa6c20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff243aa6b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff24397b7f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7ff24bbf62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff243aa6c20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff24397b7f0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7ff24bd424d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7ff24396cfa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff24397b7f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff2439cc310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7ff2439796c0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7ff24396cfa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7ff2439cfb50>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7ff243979630>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7ff2439cfb50>
                               └ <function get_request_handler.<locals>.app at 0x7ff2439795a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7ff24bd43130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7ff2430b6260>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7ff248feaef0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7ff24396d030>
                 └ <function run_in_threadpool at 0x7ff24c696dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7ff248feaef0>, user_data=<app.src.models.user.User object at 0x7ff2430...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7ff243bdfb80>
                 │     │         └ <function run_sync at 0x7ff24c759090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7ff24c758820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7ff243...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7ff243dd5e80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7ff2439a7bc0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7ff2430b6260>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:25:39.911 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35116 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:26:15.542 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:26:15.644 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:26:15.644 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:26:15.645 request id: app - uvicorn.server:serve - Finished server process [612337]
INFO     2024-01-30 09:26:16.597 request id: app - uvicorn.server:serve - Started server process [612559]
INFO     2024-01-30 09:26:16.598 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:26:16.599 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:26:17.001 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:26:17.102 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:26:17.103 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:26:17.104 request id: app - uvicorn.server:serve - Finished server process [612559]
INFO     2024-01-30 09:26:19.267 request id: app - uvicorn.server:serve - Started server process [612599]
INFO     2024-01-30 09:26:19.268 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:26:19.269 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:26:21.953 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:26:21.993 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7febf6670310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7febf66703a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7febf7ac3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7febf7c5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=612597 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7febf7c5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=612597 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7febf7b0c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=612597 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=612597 started>
    │    └ <function subprocess_started at 0x7febf6f96440>
    └ <SpawnProcess name='SpawnProcess-1' parent=612597 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7febf7b0c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7febf6f95900>
    │    │                  └ <uvicorn.server.Server object at 0x7febf7b0c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7febf73ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7febf73ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7febf73afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7febf7ab3250>
    └ <Handle <TaskStepMethWrapper object at 0x7febede8b580>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7febede8b580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7febede8b580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7febede8b580>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7febf6e90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7febf6e905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7febf7b0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7febf624eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7febf7b0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febede60d30>
          └ <fastapi.applications.FastAPI object at 0x7febf624eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7febed57bdc0>
                     │    └ <function error_handle_business at 0x7febf60df5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febede60d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7febede6e950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7febede60df0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febede60d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7febede6e950>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7febf610be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7febede60df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7febede60df0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febee02df30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7febede60df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7febede6e9e0>
                     │    │             └ <starlette.requests.Request object at 0x7febede8bdf0>
                     │    └ <function process_middleware_common at 0x7febf60df9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febee02df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7febede8bdf0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7febede6e9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7febf6670a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7febf61e0770>
          │    │   │      └ <starlette.requests.Request object at 0x7febede8bdf0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7febedf96aa0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febee02df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febede6f880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7febedf96b90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7febedf96aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febede6f880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7febf60d22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7febedf96b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febede6f880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7febf621e4d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7febede60f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febede6f880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febedec0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7febede6d750>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7febede60f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7febedec3ac0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7febede6d6c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7febedec3ac0>
                               └ <function get_request_handler.<locals>.app at 0x7febede6d630>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7febf621f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7febed5ae260>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7febef48af80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7febede60fa0>
                 └ <function run_in_threadpool at 0x7febf6b6add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7febef48af80>, user_data=<app.src.models.user.User object at 0x7febed5...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7febee2e1980>
                 │     │         └ <function run_sync at 0x7febf6c2d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7febf6c2c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7febed...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7febedea8b00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7febf43da900>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    print(user_data[0])
          └ <app.src.models.user.User object at 0x7febed5ae260>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:26:22.008 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42752 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:26:59.480 request id: app - uvicorn.server:serve - Started server process [612830]
INFO     2024-01-30 09:26:59.481 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:26:59.481 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:27:01.786 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53788 - "GET / HTTP/1.1" 404
INFO     2024-01-30 09:27:01.844 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53788 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-01-30 09:27:04.952 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53788 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 09:27:05.011 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53788 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-01-30 09:27:05.013 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53804 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-01-30 09:27:05.224 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53804 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 09:27:28.895 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': '123456'}}
ERROR    2024-01-30 09:27:28.930 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/.local/lib/python3.10/site-packages/psycopg2/__init__.py", line 127, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: FATAL:  database "phim_db" does not exist\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/user.py", line 20, in get_user_by_email\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/.local/lib/python3.10/site-packages/psycopg2/__init__.py", line 127, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: FATAL:  database "phim_db" does not exist\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-01-30 09:27:28.931 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38494 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-01-30 09:32:31.204 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:32:31.204 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:32:31.305 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:32:31.306 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:32:31.306 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:32:31.307 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:32:31.307 request id: app - uvicorn.server:serve - Finished server process [612599]
INFO     2024-01-30 09:32:31.307 request id: app - uvicorn.server:serve - Finished server process [612830]
INFO     2024-01-30 09:32:34.363 request id: app - uvicorn.server:serve - Started server process [615084]
INFO     2024-01-30 09:32:34.365 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:32:34.365 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:32:36.230 request id: app - uvicorn.server:serve - Started server process [615131]
INFO     2024-01-30 09:32:36.231 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:32:36.232 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:32:43.189 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:32:43.290 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:32:43.291 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:32:43.291 request id: app - uvicorn.server:serve - Finished server process [615084]
INFO     2024-01-30 09:33:19.799 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:33:19.839 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5090378310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f50903783a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f50917c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5091962950>
           └ <SpawnProcess name='SpawnProcess-1' parent=615129 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5091961fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=615129 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f50918101f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=615129 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=615129 started>
    │    └ <function subprocess_started at 0x7f5090c9e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=615129 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5091810310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5090c9d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5091810310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5091576440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f50915763b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5091577eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f50914c7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f5087c0f1c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5087c0f1c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5087c0f1c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5087c0f1c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5090b98550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5090b985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5091811e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f508ff56b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5091811e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5087be4d30>
          └ <fastapi.applications.FastAPI object at 0x7f508ff56b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f5087303dc0>
                     │    └ <function error_handle_business at 0x7f508fde75b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5087be4d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5087bf2950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5087be4df0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5087be4d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5087bf2950>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f508fe13e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5087be4df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f5087be4df0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5087ef5f30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5087be4df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5087bf29e0>
                     │    │             └ <starlette.requests.Request object at 0x7f5087c0fdf0>
                     │    └ <function process_middleware_common at 0x7f508fde79a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5087ef5f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5087c0fdf0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5087bf29e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5090378a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f508fee8720>
          │    │   │      └ <starlette.requests.Request object at 0x7f5087c0fdf0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5087e5eaa0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5087ef5f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5087bf3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5087e5eb90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5087e5eaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5087bf3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f508fdda2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5087e5eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5087bf3880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f508ff264d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f5087be4f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5087bf3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5087c44280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5087bf1750>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f5087be4f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5087c47ac0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f5087bf16c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f5087c47ac0>
                               └ <function get_request_handler.<locals>.app at 0x7f5087bf1630>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f508ff27130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7f508733a260>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7f508d192f80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f5087be4fa0>
                 └ <function run_in_threadpool at 0x7f5090872dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7f508d192f80>, user_data=<app.src.models.user.User object at 0x7f50873...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f508dbaaf80>
                 │     │         └ <function run_sync at 0x7f5090935090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f5090934820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f5087...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f5087c2c2c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f5087c1fcc0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 42, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7f508733a260>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:33:19.854 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50808 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:34:04.268 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:34:08.750 request id: app - uvicorn.server:serve - Started server process [615672]
INFO     2024-01-30 09:34:08.752 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:34:08.753 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:34:11.534 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
INFO     2024-01-30 09:37:08.548 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:37:08.650 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-30 09:37:16.538 request id: app - uvicorn.server:serve - Started server process [616886]
INFO     2024-01-30 09:37:16.539 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:37:16.540 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:37:19.885 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
ERROR    2024-01-30 09:37:19.924 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fee9b184310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fee9b1843a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fee9c5c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fee9c762950>
           └ <SpawnProcess name='SpawnProcess-1' parent=616884 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fee9c761fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=616884 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fee9c6101f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=616884 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=616884 started>
    │    └ <function subprocess_started at 0x7fee9ba9e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=616884 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fee9c610310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fee9ba9d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fee9c610310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fee9c39a440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fee9c39a3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fee9c39beb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fee9c2eb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fee9298b580>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fee9298b580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fee9298b580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fee9298b580>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fee9b998550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fee9b9985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fee9c611e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fee9ad5ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fee9c611e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fee92960d30>
          └ <fastapi.applications.FastAPI object at 0x7fee9ad5ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fee9298b550>
                     │    └ <function error_handle_business at 0x7fee9abe35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fee92960d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fee9296e950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fee92960df0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fee92960d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fee9296e950>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fee9ac13e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fee92960df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fee92960df0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fee92b2df30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fee92960df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fee9296e9e0>
                     │    │             └ <starlette.requests.Request object at 0x7fee9298bdf0>
                     │    └ <function process_middleware_common at 0x7fee9abe39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fee92b2df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fee9298bdf0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fee9296e9e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fee9b184a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fee9acf0400>
          │    │   │      └ <starlette.requests.Request object at 0x7fee9298bdf0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fee92a96aa0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fee92b2df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fee9296f880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fee92a96b90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fee92a96aa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fee9296f880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fee9abda2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fee92a96b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fee9296f880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fee9ad2a4d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fee92960f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fee9296f880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fee929c0280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fee9296d750>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fee92960f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fee929c3ac0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fee9296d6c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fee929c3ac0>
                               └ <function get_request_handler.<locals>.app at 0x7fee9296d630>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fee9ad2b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7fee920ae260>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7fee93f86f80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fee92960fa0>
                 └ <function run_in_threadpool at 0x7fee9b686dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7fee93f86f80>, user_data=<app.src.models.user.User object at 0x7fee920...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fee931fef80>
                 │     │         └ <function run_sync at 0x7fee9b749090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fee9b748820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fee92...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fee929a8500>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fee9299b2c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 42, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7fee920ae260>

TypeError: 'User' object is not subscriptable
INFO     2024-01-30 09:37:19.939 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60344 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-01-30 09:37:46.220 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:37:46.322 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:37:46.323 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:37:46.323 request id: app - uvicorn.server:serve - Finished server process [616886]
INFO     2024-01-30 09:37:52.165 request id: app - uvicorn.server:serve - Started server process [617114]
INFO     2024-01-30 09:37:52.167 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:37:52.168 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:38:02.651 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
INFO     2024-01-30 09:38:31.397 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:40:03.597 request id: app - uvicorn.server:serve - Started server process [617987]
INFO     2024-01-30 09:40:03.598 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:40:03.599 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:40:08.725 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
INFO     2024-01-30 09:40:08.766 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4NDIwOH0.90vZgb84B2mY6_HOFRQhVsOD-6nP-jEIVlWYMHYUtzk","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMDQwOH0.veM9-Vb7htAaaGgVbtf7BTZMXIqpF-GYruLdv6AmX9o"},"links":null,"relationships":null,"timestamp":"2024-01-30 09:40:03"}'}
INFO     2024-01-30 09:40:08.767 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41706 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
INFO     2024-01-30 09:40:20.293 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4Mjg3OH0.1s9K7l7ZdeSpryvc5C6QZJ8-tQA5XHd7zKXIO7iqZbA'}}
INFO     2024-01-30 09:40:20.315 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-01-30 09:40:03"}'}
INFO     2024-01-30 09:40:20.316 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37330 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-01-30 09:55:52.412 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:55:52.514 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:55:52.515 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:55:52.515 request id: app - uvicorn.server:serve - Finished server process [617987]
INFO     2024-01-30 09:55:53.501 request id: app - uvicorn.server:serve - Started server process [624040]
INFO     2024-01-30 09:55:53.502 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:55:53.503 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:56:32.503 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:56:32.605 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:56:32.605 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:56:32.606 request id: app - uvicorn.server:serve - Finished server process [624040]
INFO     2024-01-30 09:56:33.561 request id: app - uvicorn.server:serve - Started server process [624288]
INFO     2024-01-30 09:56:33.562 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:56:33.563 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:56:48.902 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:56:49.004 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:56:49.004 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:56:49.008 request id: app - uvicorn.server:serve - Finished server process [624288]
INFO     2024-01-30 09:56:50.007 request id: app - uvicorn.server:serve - Started server process [624398]
INFO     2024-01-30 09:56:50.008 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:56:50.008 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:58:43.694 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:58:43.796 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:58:43.796 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:58:43.797 request id: app - uvicorn.server:serve - Finished server process [624398]
INFO     2024-01-30 09:58:44.677 request id: app - uvicorn.server:serve - Started server process [625291]
INFO     2024-01-30 09:58:44.679 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:58:44.679 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:59:05.332 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:59:05.433 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:59:05.434 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:59:05.435 request id: app - uvicorn.server:serve - Finished server process [625291]
INFO     2024-01-30 09:59:06.319 request id: app - uvicorn.server:serve - Started server process [625440]
INFO     2024-01-30 09:59:06.320 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:59:06.320 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:59:28.776 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:59:28.878 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:59:28.879 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:59:28.879 request id: app - uvicorn.server:serve - Finished server process [625440]
INFO     2024-01-30 09:59:29.821 request id: app - uvicorn.server:serve - Started server process [625602]
INFO     2024-01-30 09:59:29.822 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:59:29.823 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:59:34.637 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 09:59:34.739 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 09:59:34.740 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 09:59:34.740 request id: app - uvicorn.server:serve - Finished server process [625602]
INFO     2024-01-30 09:59:35.632 request id: app - uvicorn.server:serve - Started server process [625642]
INFO     2024-01-30 09:59:35.633 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 09:59:35.633 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 09:59:55.089 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50644 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 09:59:55.279 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50644 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 10:00:00.773 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50652 - "GET /rms/v1.0/resource_stages HTTP/1.1" 403
INFO     2024-01-30 10:00:27.504 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 10:00:27.778 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4NTQyN30.o86g8AkMk8o6V7wSVB9tpK_LFH2AliAx-2JzfHNa_bs","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMTYyN30.AhZqadqVwFrlA4jwJVxXyd8k3sltkYYRNGuOkO7RZKE"},"links":null,"relationships":null,"timestamp":"2024-01-30 09:59:35"}'}
INFO     2024-01-30 10:00:27.779 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33790 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 10:00:46.322 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34938 - "GET /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-01-30 10:02:10.124 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 10:02:10.226 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 10:02:10.227 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 10:02:10.227 request id: app - uvicorn.server:serve - Finished server process [625642]
INFO     2024-01-30 10:09:18.081 request id: app - uvicorn.server:serve - Started server process [629360]
INFO     2024-01-30 10:09:18.083 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 10:09:18.084 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 10:09:27.065 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37746 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 10:09:27.260 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37746 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 10:09:45.948 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37752 - "GET /rms/v1.0/resource_stages HTTP/1.1" 403
INFO     2024-01-30 10:13:43.850 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 10:13:43.952 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 10:13:43.953 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 10:13:43.953 request id: app - uvicorn.server:serve - Finished server process [629360]
INFO     2024-01-30 10:19:41.957 request id: app - uvicorn.server:serve - Started server process [632996]
INFO     2024-01-30 10:19:41.958 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 10:19:41.959 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 10:19:52.168 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37812 - "GET /rms/v1.0/resource_stages HTTP/1.1" 403
INFO     2024-01-30 10:20:04.975 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42540 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 10:20:05.179 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42540 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 10:20:40.101 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 10:20:40.393 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4NjY0MH0.ecUR_xiuAqesg82DZc7J8LPapFjrZEYa3EDKTXIYoi8","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMjg0MH0.-8Xt92LfNx0oqMsGhaw5T4u6PflwT5YYPaNVrLvPqTg"},"links":null,"relationships":null,"timestamp":"2024-01-30 10:19:41"}'}
INFO     2024-01-30 10:20:40.394 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42554 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 10:21:10.061 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51474 - "POST /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-01-30 10:23:18.613 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 10:23:18.714 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 10:23:18.715 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 10:23:18.716 request id: app - uvicorn.server:serve - Finished server process [632996]
INFO     2024-01-30 10:28:15.885 request id: app - uvicorn.server:serve - Started server process [636785]
INFO     2024-01-30 10:28:15.888 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 10:28:15.889 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 10:28:56.994 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 10:28:57.096 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 10:28:57.097 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 10:28:57.097 request id: app - uvicorn.server:serve - Finished server process [636785]
INFO     2024-01-30 10:28:59.823 request id: app - uvicorn.server:serve - Started server process [637058]
INFO     2024-01-30 10:28:59.824 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 10:28:59.825 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 10:29:31.007 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54222 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 10:29:31.241 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54222 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 10:29:58.293 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 10:29:58.567 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4NzE5OH0.gyaJrUUwYEzN2f4w3rp6B9PrHuV8g45wI7oAYX50AUs","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMzM5OH0.cQhkuJmb3vL3LFKHOAaHC2lJmU08ZzpIMUS2wVh1Twc"},"links":null,"relationships":null,"timestamp":"2024-01-30 10:28:59"}'}
INFO     2024-01-30 10:29:58.568 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54236 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 10:30:15.593 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33572 - "GET /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-01-30 10:30:34.061 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41980 - "DELETE /rms/v1.0/resource_stages/138acd9e-a68f-52ee-8345-54397b0c29e6 HTTP/1.1" 200
INFO     2024-01-30 10:30:44.201 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 10:30:44.302 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 10:30:44.303 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 10:30:44.303 request id: app - uvicorn.server:serve - Finished server process [637058]
INFO     2024-01-30 10:52:14.449 request id: app - uvicorn.server:serve - Started server process [645167]
INFO     2024-01-30 10:52:14.451 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 10:52:14.452 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 10:52:19.265 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 10:57:15.344 request id: app - uvicorn.server:serve - Started server process [647343]
INFO     2024-01-30 10:57:15.345 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 10:57:15.346 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 10:58:16.024 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53584 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 10:58:16.231 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53584 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 10:58:41.036 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 10:58:41.310 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4ODkyMX0.8QHj9HXO-uv_FIZlTNktzZm-NqT8CQ6V5PUlp3T8eAc","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwNTEyMX0.CzCAt61c1tSI1WT0kAvgZiy-qJOOLm9xslalQqF_dBM"},"links":null,"relationships":null,"timestamp":"2024-01-30 10:57:15"}'}
INFO     2024-01-30 10:58:41.311 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53590 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 10:59:10.587 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4ODkyMX0.8QHj9HXO-uv_FIZlTNktzZm-NqT8CQ6V5PUlp3T8eAc', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwNTEyMX0.CzCAt61c1tSI1WT0kAvgZiy-qJOOLm9xslalQqF_dBM'}}
INFO     2024-01-30 10:59:10.593 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4ODk1MH0.QwkmF0tZ1Nh6Z-lu2KlxIsUtnokPNalvdYfW37plxRE","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwNTE1MH0.QysdAx2NtdwPnRLTdBYijkt8VRrMyA6r0WzgGaOlR74"},"links":null,"relationships":null,"timestamp":"2024-01-30 10:57:15"}'}
INFO     2024-01-30 10:59:10.594 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33234 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
ERROR    2024-01-30 10:59:59.352 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fe63374ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fe631366440>
    └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, ...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fe630f87010; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (95535b5b-9f6e-5b25-8ba8-47753ce3fe3f, Rabiloo, 1, null, null, null, null, null, null, null, 2024-01-30 03:59:59.349022, f, static/images/1_download.png).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe63ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe63ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe63ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe63ac581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    └ <function subprocess_started at 0x7fe63a142440>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe63ac58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe63a141900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe63ac58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe63a58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe63a58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe63a58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe63abfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe630fab520>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe630fab520>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe630fab520>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe630fab520>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe639ffc550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe639ffc5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
          └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe630efcd30>
                     │    └ <function error_handle_business at 0x7fe63922b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe630f6b6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3356', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe630f6b6d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe639257e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe630f6b520>
                     │    │             └ <starlette.requests.Request object at 0x7fe630efd8d0>
                     │    └ <function process_middleware_common at 0x7fe63922b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe630efd8d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe630f6b520>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe6397c8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe639330900>
          │    │   │      └ <starlette.requests.Request object at 0x7fe630efd8d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe630ed1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe630ed1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe63921e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe630ed1240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe63936e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe630ed1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efd3f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe630f6a440>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe630efd510>
                     └ <function get_request_handler.<locals>.app at 0x7fe630f6a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe63936f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe630efd6f0>, 'resource_create': ResourceCreate(stage_id=None, st...
                 │         └ <function create_one at 0x7fe631065360>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fe630f78d30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id=None, status_id=None, name='Rabiloo', version='1', platform_id=None, product_type_id=None, repo_id=No...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fe630efc9a0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fe630efd6f0>
                 │                └ <function ResourceService.upload_resource at 0x7fe6317ce5f0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 36, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create)
                             │    │            │                 │      │      │         └ ResourceCreate(stage_id=None, status_id=None, name='Rabiloo', version='1', platform_id=None, product_type_id=None, repo_id=No...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fe63259eb00>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fe63256b970>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 37, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fe6335e3490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fe6335e2710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
                └ <function SessionTransaction.commit at 0x7fe6335e2680>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7fe6335e25f0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
                └ <function SessionTransaction._prepare_impl at 0x7fe6335e24d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7fe6335f5120>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7fe6335f52d0>
    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7fe630f2a3c0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7fe6335cf5b0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fe630efc640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fe630efc640>
    │   └ <function SaveUpdateAll.execute at 0x7fe6335cfeb0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7fe63359e4d0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7fe63359eef0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7fe6338bbf40>
             └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7fe630efc550>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fe6338c0280>
           └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fe6338c0430>
          └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fe6338c04c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fe6338c0700>
    └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "stage_id" of relation "resources" violates not-null constraint\nDETAIL:  Failing row ...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "stage_id" of relation "resources" violat...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fe63374ec20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fe631366440>
    └ <sqlalchemy.engine.base.Connection object at 0x7fe630faaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, ...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fe630f87010; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (95535b5b-9f6e-5b25-8ba8-47753ce3fe3f, Rabiloo, 1, null, null, null, null, null, null, null, 2024-01-30 03:59:59.349022, f, static/images/1_download.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': None, 'key': 'static/images/1_download.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-01-30 10:59:59.374 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43920 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-30 11:01:48.658 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe6397c8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe6397c83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe63ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe63ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe63ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe63ac581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    └ <function subprocess_started at 0x7fe63a142440>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe63ac58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe63a141900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe63ac58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe63a58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe63a58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe63a58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe63abfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe6303c76d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe6303c76d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe6303c76d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe6303c76d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe639ffc550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe639ffc5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
          └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe6303c5e40>
                     │    └ <function error_handle_business at 0x7fe63922b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe630ed27a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3608', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe630ed27a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe639257e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe630ed1ab0>
                     │    │             └ <starlette.requests.Request object at 0x7fe630efffa0>
                     │    └ <function process_middleware_common at 0x7fe63922b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe630efffa0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe630ed1ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe6397c8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe639330900>
          │    │   │      └ <starlette.requests.Request object at 0x7fe630efffa0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6304be200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6304be200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe63921e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6304be200>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe63936e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6304be200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe630efef20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe630f6a440>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe630efee60>
                     └ <function get_request_handler.<locals>.app at 0x7fe630f6a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe63936f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe630efcc40>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fe631065360>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fe630f78d30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fe630efeb00>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fe630efcc40>
                 │                └ <function ResourceService.upload_resource at 0x7fe6317ce5f0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 36, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create)
                             │    │            │                 │      │      │         └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fe63259eb00>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fe63256b970>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 37, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fe6335e3490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fe6335e2710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fe6335e2680>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fe6335e1900>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (95535b5b-9f6e-5b25-8ba8-47753ce3fe3f, Rabiloo, 1, null, null, null, null, null, null, null, 2024-01-30 03:59:59.349022, f, static/images/1_download.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': None, 'key': 'static/images/1_download.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-01-30 11:01:48.670 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50110 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-30 11:01:54.682 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe6397c8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe6397c83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe63ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe63ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe63ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe63ac581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    └ <function subprocess_started at 0x7fe63a142440>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe63ac58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe63a141900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe63ac58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe63a58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe63a58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe63a58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe63abfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe6303e9990>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe6303e9990>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe6303e9990>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe6303e9990>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe639ffc550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe639ffc5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
          └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe6303e8b50>
                     │    └ <function error_handle_business at 0x7fe63922b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe630ed2710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3608', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe630ed2710>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe639257e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe6303e11b0>
                     │    │             └ <starlette.requests.Request object at 0x7fe6303e8c10>
                     │    └ <function process_middleware_common at 0x7fe63922b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe6303e8c10>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe6303e11b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe6397c8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe639330900>
          │    │   │      └ <starlette.requests.Request object at 0x7fe6303e8c10>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe63921e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe63936e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e89a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe630f6a440>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe6303e8a60>
                     └ <function get_request_handler.<locals>.app at 0x7fe630f6a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe63936f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe630efece0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fe631065360>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fe630f78d30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fe6303e8ee0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fe630efece0>
                 │                └ <function ResourceService.upload_resource at 0x7fe6317ce5f0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 36, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create)
                             │    │            │                 │      │      │         └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fe63259eb00>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fe63256b970>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 37, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fe6335e3490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fe6335e2710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fe6335e2680>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fe6335e1900>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (95535b5b-9f6e-5b25-8ba8-47753ce3fe3f, Rabiloo, 1, null, null, null, null, null, null, null, 2024-01-30 03:59:59.349022, f, static/images/1_download.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': None, 'key': 'static/images/1_download.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-01-30 11:01:54.692 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34120 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-30 11:01:55.190 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe6397c8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe6397c83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe63ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe63ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe63ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe63ac581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    └ <function subprocess_started at 0x7fe63a142440>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe63ac58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe63a141900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe63ac58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe63a58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe63a58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe63a58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe63abfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe6303ea920>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe6303ea920>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe6303ea920>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe6303ea920>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe639ffc550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe639ffc5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
          └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe6303e93f0>
                     │    └ <function error_handle_business at 0x7fe63922b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe6303e1120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3608', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe6303e1120>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe639257e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe6303e1090>
                     │    │             └ <starlette.requests.Request object at 0x7fe6303e9900>
                     │    └ <function process_middleware_common at 0x7fe63922b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe6303e9900>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe6303e1090>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe6397c8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe639330900>
          │    │   │      └ <starlette.requests.Request object at 0x7fe6303e9900>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe63921e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1510>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe63936e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303e94e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe630f6a440>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe6303e9660>
                     └ <function get_request_handler.<locals>.app at 0x7fe630f6a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe63936f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe6303e8d30>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fe631065360>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fe630f78d30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fe6303e9e70>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fe6303e8d30>
                 │                └ <function ResourceService.upload_resource at 0x7fe6317ce5f0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 36, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create)
                             │    │            │                 │      │      │         └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fe63259eb00>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fe63256b970>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 37, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fe6335e3490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fe6335e2710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fe6335e2680>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fe6335e1900>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (95535b5b-9f6e-5b25-8ba8-47753ce3fe3f, Rabiloo, 1, null, null, null, null, null, null, null, 2024-01-30 03:59:59.349022, f, static/images/1_download.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': None, 'key': 'static/images/1_download.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-01-30 11:01:55.200 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34122 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-30 11:02:03.991 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe6397c8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe6397c83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe63ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe63ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe63ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe63ac581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
    │    └ <function subprocess_started at 0x7fe63a142440>
    └ <SpawnProcess name='SpawnProcess-1' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe63ac58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe63a141900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe63ac58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe63a58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe63a58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe63a58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe63abfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe630efe560>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe630efe560>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe630efe560>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe630efe560>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe639ffc550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe639ffc5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe63ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
          └ <fastapi.applications.FastAPI object at 0x7fe63939eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe6303c7370>
                     │    └ <function error_handle_business at 0x7fe63922b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe6303e13f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe630f50850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3608', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe6303e13f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe639257e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe630f52590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe6303e12d0>
                     │    │             └ <starlette.requests.Request object at 0x7fe6303ea9b0>
                     │    └ <function process_middleware_common at 0x7fe63922b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe6303ea9b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe6303e12d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe6397c8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe639330900>
          │    │   │      └ <starlette.requests.Request object at 0x7fe6303ea9b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe6311076a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe63108ab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe63921e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe63108ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe63936e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe6303e1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe6303ea590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe630f6a440>
          └ <fastapi.routing.APIRoute object at 0x7fe630f78c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe6303ea620>
                     └ <function get_request_handler.<locals>.app at 0x7fe630f6a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe63936f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe6303e98d0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fe631065360>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fe630f78d30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fe6303eae30>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fe6303e98d0>
                 │                └ <function ResourceService.upload_resource at 0x7fe6317ce5f0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 36, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create)
                             │    │            │                 │      │      │         └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fe63259eb00>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fe63256b970>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fe63256b940>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 37, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fe6335e3490>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fe631366770>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fe63256baf0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fe6335e2710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fe6335e2680>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fe6335e1900>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fe630fb9840>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (95535b5b-9f6e-5b25-8ba8-47753ce3fe3f, Rabiloo, 1, null, null, null, null, null, null, null, 2024-01-30 03:59:59.349022, f, static/images/1_download.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('95535b5b-9f6e-5b25-8ba8-47753ce3fe3f'), 'name': 'Rabiloo', 'version': '1', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': None, 'key': 'static/images/1_download.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-01-30 11:02:04.001 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55782 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-30 11:04:15.237 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:04:15.339 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:04:15.340 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:04:15.340 request id: app - uvicorn.server:serve - Finished server process [647343]
INFO     2024-01-30 11:04:16.254 request id: app - uvicorn.server:serve - Started server process [650118]
INFO     2024-01-30 11:04:16.255 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:04:16.256 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:04:16.658 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:04:16.759 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:04:16.760 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:04:16.760 request id: app - uvicorn.server:serve - Finished server process [650118]
INFO     2024-01-30 11:04:17.649 request id: app - uvicorn.server:serve - Started server process [650129]
INFO     2024-01-30 11:04:17.650 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:04:17.650 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:04:19.737 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f3f27868310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f3f278683a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f3f28cc3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f3f28e5e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f3f28e5dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f3f28d0c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
    │    └ <function subprocess_started at 0x7f3f28196440>
    └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f3f28d0c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f3f28195900>
    │    │                  └ <uvicorn.server.Server object at 0x7f3f28d0c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3f285ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3f285ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3f285afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3f28cb3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17f550>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17f550>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17f550>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17f550>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f3f28090550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f3f280905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3f28d0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f3f27442b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3f28d0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
          └ <fastapi.applications.FastAPI object at 0x7f3f27442b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3f1f12b100>
                     │    └ <function error_handle_business at 0x7f3f272d35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3f1f0eb520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3608', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3f1f0eb520>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f3f272ffe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3f1f0eb5b0>
                     │    │             └ <starlette.requests.Request object at 0x7f3f1f12a410>
                     │    └ <function process_middleware_common at 0x7f3f272d39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3f1f12a410>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3f1f0eb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f3f27868a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f3f273d4680>
          │    │   │      └ <starlette.requests.Request object at 0x7f3f1f12a410>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3f1f23e9b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1f1644c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3f1f23eaa0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3f1f23e9b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1f1644c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f3f272c62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3f1f23eaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1f1644c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f3f274124d0>
          └ <fastapi.routing.APIRoute object at 0x7f3f1f0f8a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1f1644c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1f12aaa0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3f1f0ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f3f1f0f8a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3f1f17e260>
                     └ <function get_request_handler.<locals>.app at 0x7f3f1f0ea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f3f27413130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f3f1f17ca30>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f3f1f2193f0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f3f1f0f8b20>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f3f1f17d5a0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f3f1f17ca30>
                 │                └ <function ResourceService.upload_resource at 0x7f3f1f8b24d0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f3f245df910>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    resource_create.key = key
    │                     └ 'static/images/1_download.png'
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-01-30 11:04:19.751 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49382 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-30 11:04:21.744 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49388 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 11:04:21.964 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49388 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 11:04:48.049 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 11:04:48.296 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU4OTI4OH0.fnvjLWJVtlwe4QKK1gHjaeaAdewf89fy6vfYnkIje2s","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwNTQ4OH0.-SK_iRTC_BYsME0hE8x_n_BH6OHsFEmaqtQiMTGAgUE"},"links":null,"relationships":null,"timestamp":"2024-01-30 11:04:17"}'}
INFO     2024-01-30 11:04:48.297 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49396 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-30 11:06:43.230 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f3f27868310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f3f278683a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f3f28cc3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f3f28e5e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f3f28e5dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f3f28d0c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
    │    └ <function subprocess_started at 0x7f3f28196440>
    └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f3f28d0c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f3f28195900>
    │    │                  └ <uvicorn.server.Server object at 0x7f3f28d0c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3f285ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3f285ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3f285afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3f28cb3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17ded0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17ded0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17ded0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f1f17ded0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f3f28090550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f3f280905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3f28d0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f3f27442b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3f28d0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
          └ <fastapi.applications.FastAPI object at 0x7f3f27442b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3f1f129ea0>
                     │    └ <function error_handle_business at 0x7f3f272d35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3f1e588940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3520', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3f1e588940>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f3f272ffe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3f1e588a60>
                     │    │             └ <starlette.requests.Request object at 0x7f3f1e594160>
                     │    └ <function process_middleware_common at 0x7f3f272d39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3f1e594160>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3f1e588a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f3f27868a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f3f273d4680>
          │    │   │      └ <starlette.requests.Request object at 0x7f3f1e594160>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3f1f23e9b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e588e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3f1f23eaa0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3f1f23e9b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e588e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f3f272c62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3f1f23eaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e588e50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f3f274124d0>
          └ <fastapi.routing.APIRoute object at 0x7f3f1f0f8a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e588e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e595150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3f1f0ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f3f1f0f8a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3f1e595420>
                     └ <function get_request_handler.<locals>.app at 0x7f3f1f0ea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f3f27413130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f3f1e5977c0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f3f1f2193f0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f3f1f0f8b20>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f3f1e595ed0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f3f1e5977c0>
                 │                └ <function ResourceService.upload_resource at 0x7f3f1f8b24d0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f3f245df910>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    resource_create.key = key
    │                     └ 'static/images/2_download.png'
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-01-30 11:06:43.240 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47314 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
ERROR    2024-01-30 11:06:46.520 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f3f27868310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f3f278683a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f3f28cc3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f3f28e5e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f3f28e5dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f3f28d0c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
    │    └ <function subprocess_started at 0x7f3f28196440>
    └ <SpawnProcess name='SpawnProcess-3' parent=647337 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f3f28d0c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f3f28195900>
    │    │                  └ <uvicorn.server.Server object at 0x7f3f28d0c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3f285ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3f285ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3f285afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3f28cb3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f1e596650>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3f1e596650>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3f1e596650>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3f1e596650>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f3f28090550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f3f280905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3f28d0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f3f27442b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3f28d0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
          └ <fastapi.applications.FastAPI object at 0x7f3f27442b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3f1e596200>
                     │    └ <function error_handle_business at 0x7f3f272d35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3f1e588af0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3f1f0d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3519', 'accept': 'application/json', 'author...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3f1e588af0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f3f272ffe20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3f1f0d64a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3f1e588d30>
                     │    │             └ <starlette.requests.Request object at 0x7f3f1e596080>
                     │    └ <function process_middleware_common at 0x7f3f272d39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3f1e596080>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3f1e588d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f3f27868a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f3f273d4680>
          │    │   │      └ <starlette.requests.Request object at 0x7f3f1e596080>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3f1f23e9b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3f1f2bb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e589360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3f1f23eaa0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3f1f23e9b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e589360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f3f272c62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3f1f23eaa0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e589360>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f3f274124d0>
          └ <fastapi.routing.APIRoute object at 0x7f3f1f0f8a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3f1e589360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3f1e5974f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3f1f0ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f3f1f0f8a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3f1e595fc0>
                     └ <function get_request_handler.<locals>.app at 0x7f3f1f0ea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f3f27413130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f3f1e5962c0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f3f1f2193f0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f3f1f0f8b20>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 101, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f3f1e596710>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f3f1e5962c0>
                 │                └ <function ResourceService.upload_resource at 0x7f3f1f8b24d0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f3f245df910>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    resource_create.key = key
    │                     └ 'static/images/2_download.png'
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-01-30 11:06:46.529 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47316 - "POST /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-01-30 11:07:18.712 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:07:18.813 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:07:18.814 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:07:18.815 request id: app - uvicorn.server:serve - Finished server process [650129]
INFO     2024-01-30 11:07:19.720 request id: app - uvicorn.server:serve - Started server process [651173]
INFO     2024-01-30 11:07:19.721 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:07:19.721 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:07:22.428 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46408 - "POST /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-30 11:07:23.993 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46408 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 11:07:24.117 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46408 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 11:08:44.936 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:08:45.037 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:08:45.038 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:08:45.038 request id: app - uvicorn.server:serve - Finished server process [651173]
INFO     2024-01-30 11:10:10.679 request id: app - uvicorn.server:serve - Started server process [652248]
INFO     2024-01-30 11:10:10.681 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:10:10.681 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:10:13.388 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38312 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 11:10:13.507 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38312 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 11:10:39.958 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:10:40.060 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:10:40.061 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:10:40.061 request id: app - uvicorn.server:serve - Finished server process [652248]
INFO     2024-01-30 11:10:49.915 request id: app - uvicorn.server:serve - Started server process [652501]
INFO     2024-01-30 11:10:49.917 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:10:49.917 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:10:49.921 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46788 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 11:10:50.639 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46788 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 11:12:48.763 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53226 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-01-30 11:29:04.935 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:29:05.037 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:29:05.037 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:29:05.038 request id: app - uvicorn.server:serve - Finished server process [652501]
INFO     2024-01-30 11:29:06.033 request id: app - uvicorn.server:serve - Started server process [660395]
INFO     2024-01-30 11:29:06.035 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:29:06.035 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:34:47.285 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:34:47.387 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:34:47.387 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:34:47.388 request id: app - uvicorn.server:serve - Finished server process [660395]
INFO     2024-01-30 11:34:48.250 request id: app - uvicorn.server:serve - Started server process [662469]
INFO     2024-01-30 11:34:48.251 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:34:48.252 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:35:20.734 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:35:20.837 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:35:20.838 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:35:20.839 request id: app - uvicorn.server:serve - Finished server process [662469]
INFO     2024-01-30 11:35:21.636 request id: app - uvicorn.server:serve - Started server process [662692]
INFO     2024-01-30 11:35:21.637 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:35:21.637 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:35:26.351 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:35:26.453 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:35:26.454 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:35:26.455 request id: app - uvicorn.server:serve - Finished server process [662692]
INFO     2024-01-30 11:35:27.407 request id: app - uvicorn.server:serve - Started server process [662741]
INFO     2024-01-30 11:35:27.408 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:35:27.408 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:35:36.030 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:35:36.132 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:35:36.133 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:35:36.133 request id: app - uvicorn.server:serve - Finished server process [662741]
INFO     2024-01-30 11:35:36.964 request id: app - uvicorn.server:serve - Started server process [662815]
INFO     2024-01-30 11:35:36.965 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:35:36.966 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:36:16.568 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:36:16.669 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:36:16.670 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:36:16.671 request id: app - uvicorn.server:serve - Finished server process [662815]
INFO     2024-01-30 11:36:17.466 request id: app - uvicorn.server:serve - Started server process [663072]
INFO     2024-01-30 11:36:17.467 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:36:17.468 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:36:26.892 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:36:26.994 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:36:26.995 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:36:26.995 request id: app - uvicorn.server:serve - Finished server process [663072]
INFO     2024-01-30 11:36:27.903 request id: app - uvicorn.server:serve - Started server process [663150]
INFO     2024-01-30 11:36:27.905 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:36:27.906 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:36:38.535 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:36:38.637 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:36:38.638 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:36:38.639 request id: app - uvicorn.server:serve - Finished server process [663150]
INFO     2024-01-30 11:36:39.521 request id: app - uvicorn.server:serve - Started server process [663218]
INFO     2024-01-30 11:36:39.522 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:36:39.523 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:36:52.457 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:36:52.558 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:36:52.559 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:36:52.559 request id: app - uvicorn.server:serve - Finished server process [663218]
INFO     2024-01-30 11:36:53.427 request id: app - uvicorn.server:serve - Started server process [663320]
INFO     2024-01-30 11:36:53.428 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:36:53.428 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:02.051 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:37:02.153 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:37:02.154 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:37:02.155 request id: app - uvicorn.server:serve - Finished server process [663320]
INFO     2024-01-30 11:37:03.000 request id: app - uvicorn.server:serve - Started server process [663386]
INFO     2024-01-30 11:37:03.002 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:37:03.003 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:05.912 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:37:06.014 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:37:06.015 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:37:06.015 request id: app - uvicorn.server:serve - Finished server process [663386]
INFO     2024-01-30 11:37:06.819 request id: app - uvicorn.server:serve - Started server process [663421]
INFO     2024-01-30 11:37:06.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:37:06.820 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:13.738 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:37:13.840 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:37:13.840 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:37:13.841 request id: app - uvicorn.server:serve - Finished server process [663421]
INFO     2024-01-30 11:37:14.702 request id: app - uvicorn.server:serve - Started server process [663480]
INFO     2024-01-30 11:37:14.704 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:37:14.704 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:26.138 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:37:26.240 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:37:26.241 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:37:26.241 request id: app - uvicorn.server:serve - Finished server process [663480]
INFO     2024-01-30 11:37:27.110 request id: app - uvicorn.server:serve - Started server process [663551]
INFO     2024-01-30 11:37:27.111 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:37:27.112 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:31.724 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:37:33.572 request id: app - uvicorn.server:serve - Started server process [663617]
INFO     2024-01-30 11:37:33.573 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:37:33.574 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:34.835 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58646 - "GET / HTTP/1.1" 404
INFO     2024-01-30 11:37:34.979 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:37:35.081 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:37:35.082 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:37:35.083 request id: app - uvicorn.server:serve - Finished server process [663617]
INFO     2024-01-30 11:37:35.998 request id: app - uvicorn.server:serve - Started server process [663675]
INFO     2024-01-30 11:37:35.999 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:37:35.999 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:37:38.362 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58666 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 11:37:38.497 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58666 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 11:37:41.501 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58666 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 11:37:41.620 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58666 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-01-30 11:39:50.330 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fbea104c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fbea104c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fbea240fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fbea2562950>
           └ <SpawnProcess name='SpawnProcess-2' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fbea2561fc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fbea24581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=663615 started>
    │    └ <function subprocess_started at 0x7fbea1992440>
    └ <SpawnProcess name='SpawnProcess-2' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fbea2458310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fbea1991900>
    │    │                  └ <uvicorn.server.Server object at 0x7fbea2458310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fbea1daa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbea1daa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbea1dabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbea23fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fbe98835d80>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fbe98835d80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fbe98835d80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fbe98835d80>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fbea185c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fbea185c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbea2459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fbea0c2ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbea2459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe989b4b20>
          └ <fastapi.applications.FastAPI object at 0x7fbea0c2ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fbe98835090>
                     │    └ <function error_handle_business at 0x7fbea0abf5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe989b4b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('ResourceService.upload_resource() takes 3 positional arguments but 4 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbe9882f010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe989b4be0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe989b4b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbe9882f010>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fbea0ae7e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe989b4be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fbe989b4be0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe98989d20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe989b4be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbe9882ef80>
                     │    │             └ <starlette.requests.Request object at 0x7fbe98835180>
                     │    └ <function process_middleware_common at 0x7fbea0abf9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe98989d20>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fbe98835180>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbe9882ef80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('ResourceService.upload_resource() takes 3 positional arguments but 4 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fbea104ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fbea0bbc590>
          │    │   │      └ <starlette.requests.Request object at 0x7fbe98835180>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbe98ca4c10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe98989d20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe9882f400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbe98ca4d00>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbe98ca4c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe9882f400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fbea0aae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbe98ca4d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe9882f400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fbea0bfa4d0>
          └ <fastapi.routing.APIRoute object at 0x7fbe989b5660>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe9882f400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe98835db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fbe989d2e60>
          └ <fastapi.routing.APIRoute object at 0x7fbe989b5660>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fbe98835a50>
                     └ <function get_request_handler.<locals>.app at 0x7fbe989d2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fbea0bfb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fbe98835c60>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fbe98c460e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fbe989b5720>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fbe98835e70>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fbe98835c60>
                 │                └ <function ResourceService.upload_resource at 0x7fbe99096320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fbe99d73880>

TypeError: ResourceService.upload_resource() takes 3 positional arguments but 4 were given
INFO     2024-01-30 11:39:50.343 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43084 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:40:20.320 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:40:20.424 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:40:20.425 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:40:20.425 request id: app - uvicorn.server:serve - Finished server process [663675]
INFO     2024-01-30 11:40:21.253 request id: app - uvicorn.server:serve - Started server process [664611]
INFO     2024-01-30 11:40:21.255 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:40:21.255 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:40:25.140 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f0b90f8c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f0b90f8c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f0b9240fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f0b92562950>
           └ <SpawnProcess name='SpawnProcess-3' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f0b92561fc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f0b924581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=663615 started>
    │    └ <function subprocess_started at 0x7f0b91892440>
    └ <SpawnProcess name='SpawnProcess-3' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f0b92458310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0b91891900>
    │    │                  └ <uvicorn.server.Server object at 0x7f0b92458310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f0b9219a440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f0b9219a3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f0b9219beb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f0b923fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0b889136d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0b889136d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0b889136d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0b889136d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0b9178c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f0b9178c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0b92459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f0b90b6eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0b92459e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0b888e0af0>
          └ <fastapi.applications.FastAPI object at 0x7f0b90b6eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0b889119f0>
                     │    └ <function error_handle_business at 0x7f0b909ff5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0b888e0af0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 'put_object'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0b888ff910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0b888e0bb0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0b888e0af0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0b888ff910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f0b90a2be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0b888e0bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f0b888e0bb0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0b888b5cf0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0b888e0bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0b888ff9a0>
                     │    │             └ <starlette.requests.Request object at 0x7f0b88910d00>
                     │    └ <function process_middleware_common at 0x7f0b909ff9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0b888b5cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0b88910d00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0b888ff9a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 'put_object'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f0b90f8ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f0b90b08400>
          │    │   │      └ <starlette.requests.Request object at 0x7f0b88910d00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0b88bd4be0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0b888b5cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0b8893c8b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0b88bd4cd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0b88bd4be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0b8893c8b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0b909f22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0b88bd4cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0b8893c8b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f0b90b3e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f0b888e1630>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0b8893c8b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0b88911330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0b888fee60>
          └ <fastapi.routing.APIRoute object at 0x7f0b888e1630>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0b88913b80>
                     └ <function get_request_handler.<locals>.app at 0x7f0b888fedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f0b90b3f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f0b88913880>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f0b88b760e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f0b888e16f0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f0b88913730>
                 │                └ <function ResourceService.upload_resource at 0x7f0b88fda320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f0b89d9ccd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │                    │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │                    └ 'resources/1706589625_download.png'
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f0b89d9cd30>
    │    └ <app.src.services.base_service.BaseService object at 0x7f0b89d9cd00>
    └ <app.src.services.resource_service.ResourceService object at 0x7f0b89d9ccd0>

AttributeError: 'S3Storage' object has no attribute 'put_object'
INFO     2024-01-30 11:40:25.154 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40524 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:42:08.124 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:42:08.226 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:42:08.226 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:42:08.227 request id: app - uvicorn.server:serve - Finished server process [664611]
INFO     2024-01-30 11:42:09.024 request id: app - uvicorn.server:serve - Started server process [665273]
INFO     2024-01-30 11:42:09.025 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:42:09.026 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:42:21.959 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:42:22.060 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:42:22.061 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:42:22.061 request id: app - uvicorn.server:serve - Finished server process [665273]
INFO     2024-01-30 11:42:22.951 request id: app - uvicorn.server:serve - Started server process [665356]
INFO     2024-01-30 11:42:22.952 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:42:22.953 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 11:42:33.079 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:42:33.181 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:42:33.182 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:42:33.182 request id: app - uvicorn.server:serve - Finished server process [665356]
INFO     2024-01-30 11:42:33.975 request id: app - uvicorn.server:serve - Started server process [665439]
INFO     2024-01-30 11:42:33.976 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:42:33.977 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:42:39.148 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f8a63ad8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f8a63ad83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f8a64f0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f8a6505e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f8a6505dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f8a64f541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=663615 started>
    │    └ <function subprocess_started at 0x7f8a64456440>
    └ <SpawnProcess name='SpawnProcess-6' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f8a64f54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f8a64455900>
    │    │                  └ <uvicorn.server.Server object at 0x7f8a64f54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8a64ce6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8a64ce63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8a64ce7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8a64ef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f8a5b4036d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8a5b4036d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8a5b4036d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8a5b4036d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f8a64310550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8a643105e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8a64f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8a636b2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8a64f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8a5b3d0af0>
          └ <fastapi.applications.FastAPI object at 0x7f8a636b2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f8a5b4019f0>
                     │    └ <function error_handle_business at 0x7f8a6353f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8a5b3d0af0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 'client'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8a5b3ef9a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8a5b3d0bb0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8a5b3d0af0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8a5b3ef9a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f8a6356be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8a5b3d0bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f8a5b3d0bb0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8a5b3a5cf0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8a5b3d0bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8a5b3efa30>
                     │    │             └ <starlette.requests.Request object at 0x7f8a5b400d00>
                     │    └ <function process_middleware_common at 0x7f8a6353f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8a5b3a5cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f8a5b400d00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8a5b3efa30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 'client'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f8a63ad8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f8a636445e0>
          │    │   │      └ <starlette.requests.Request object at 0x7f8a5b400d00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8a5b6c4be0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8a5b3a5cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5b42c940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8a5b6c4cd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8a5b6c4be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5b42c940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8a635322f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8a5b6c4cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5b42c940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f8a636824d0>
          └ <fastapi.routing.APIRoute object at 0x7f8a5b3d1630>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5b42c940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5b401330>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8a5b3eeef0>
          └ <fastapi.routing.APIRoute object at 0x7f8a5b3d1630>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f8a5b403b80>
                     └ <function get_request_handler.<locals>.app at 0x7f8a5b3eee60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f8a63683130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f8a5b403880>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f8a5b65e170>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f8a5b3d16f0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f8a5b403730>
                 │                └ <function ResourceService.upload_resource at 0x7f8a5baca3b0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f8a6096b880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706589759_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f8a5bac9ea0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f8a6096b940>
    │    └ <app.src.services.base_service.BaseService object at 0x7f8a6096b910>
    └ <app.src.services.resource_service.ResourceService object at 0x7f8a6096b880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    └ <app.src.services.s3_connector.S3Storage object at 0x7f8a6096b940>

AttributeError: 'S3Storage' object has no attribute 'client'
INFO     2024-01-30 11:42:39.162 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57728 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:43:29.118 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:43:29.220 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:43:29.220 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:43:29.221 request id: app - uvicorn.server:serve - Finished server process [665439]
INFO     2024-01-30 11:45:34.843 request id: app - uvicorn.server:serve - Started server process [666536]
INFO     2024-01-30 11:45:34.845 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:45:34.845 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:45:42.108 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f32c7b80310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f32c7b803a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f32c900fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f32c9162950>
           └ <SpawnProcess name='SpawnProcess-13' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f32c9161fc0>
    └ <SpawnProcess name='SpawnProcess-13' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f32c90581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-13' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-13' parent=663615 started>
    │    └ <function subprocess_started at 0x7f32c8496440>
    └ <SpawnProcess name='SpawnProcess-13' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f32c9058310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f32c8495900>
    │    │                  └ <uvicorn.server.Server object at 0x7f32c9058310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f32c8d96440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f32c8d963b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f32c8d97eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f32c8fe7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f32bf5175b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f32bf5175b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f32bf5175b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f32bf5175b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f32c8390550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f32c83905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f32c9059e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f32c775eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f32c9059e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f32bf4e49d0>
          └ <fastapi.applications.FastAPI object at 0x7f32c775eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f32bf5158d0>
                     │    └ <function error_handle_business at 0x7f32c75f35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f32bf4e49d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 's3_bucket'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f32bf4ff910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f32bf4e4a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f32bf4e49d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f32bf4ff910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f32c761be20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f32bf4e4a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f32bf4e4a90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f32bf4b9bd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f32bf4e4a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f32bf4ff9a0>
                     │    │             └ <starlette.requests.Request object at 0x7f32bf514be0>
                     │    └ <function process_middleware_common at 0x7f32c75f39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f32bf4b9bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f32bf514be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f32bf4ff9a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 's3_bucket'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f32c7b80a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f32c76f0720>
          │    │   │      └ <starlette.requests.Request object at 0x7f32bf514be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f32bf7d4ac0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f32bf4b9bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f32bf5388b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f32bf7d4bb0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f32bf7d4ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f32bf5388b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f32c75e22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f32bf7d4bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f32bf5388b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f32c772e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f32bf4e5510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f32bf5388b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f32bf515210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f32bf4fee60>
          └ <fastapi.routing.APIRoute object at 0x7f32bf4e5510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f32bf5174f0>
                     └ <function get_request_handler.<locals>.app at 0x7f32bf4fedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f32c772f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f32bf517670>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f32bf7720e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f32bf4e55d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f32bf517d90>
                 │                └ <function ResourceService.upload_resource at 0x7f32bfbda320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f32c4973880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706589942_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f32bfbd9e10>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f32c4973940>
    │    └ <app.src.services.base_service.BaseService object at 0x7f32c4973910>
    └ <app.src.services.resource_service.ResourceService object at 0x7f32c4973880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 42, in put_object
    Bucket=self.s3_bucket, Key=object_name)
           │                   └ 'resources/1706589942_download.png'
           └ <app.src.services.s3_connector.S3Storage object at 0x7f32c4973940>

AttributeError: 'S3Storage' object has no attribute 's3_bucket'
INFO     2024-01-30 11:45:42.124 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47970 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:45:50.587 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:45:50.689 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:45:50.690 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:45:50.690 request id: app - uvicorn.server:serve - Finished server process [666536]
INFO     2024-01-30 11:46:38.240 request id: app - uvicorn.server:serve - Started server process [666939]
INFO     2024-01-30 11:46:38.241 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:46:38.242 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:46:38.250 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f06b3d4c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f06b3d4c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f06b510bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f06b525e950>
           └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f06b525dfc0>
    └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f06b51541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
    │    └ <function subprocess_started at 0x7f06b4692440>
    └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f06b5154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f06b4691900>
    │    │                  └ <uvicorn.server.Server object at 0x7f06b5154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f06b4f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f06b4f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f06b4f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f06b50f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f06ab8d75b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f06ab8d75b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f06ab8d75b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f06ab8d75b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f06b455c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f06b455c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f06b5155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f06b392ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f06b5155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f06ab8a49d0>
          └ <fastapi.applications.FastAPI object at 0x7f06b392ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f06ab8d58d0>
                     │    └ <function error_handle_business at 0x7f06b37bb5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f06ab8a49d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 's3_bucket'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f06ab8c3910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f06ab8a49d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f06ab8c3910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f06b37e7e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f06ab879bd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f06ab8c39a0>
                     │    │             └ <starlette.requests.Request object at 0x7f06ab8d4be0>
                     │    └ <function process_middleware_common at 0x7f06b37bb9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f06ab879bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f06ab8d4be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f06ab8c39a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 's3_bucket'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f06b3d4ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f06b38c42c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f06ab8d4be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06ab9d8ac0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f06ab879bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab8fc8b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06ab9d8bb0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06ab9d8ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab8fc8b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f06b37ae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06ab9d8bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab8fc8b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f06b38fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f06ab8a5510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab8fc8b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab8d5210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f06ab8c2e60>
          └ <fastapi.routing.APIRoute object at 0x7f06ab8a5510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f06ab8d74f0>
                     └ <function get_request_handler.<locals>.app at 0x7f06ab8c2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f06b38fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f06ab8d7670>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f06ab9760e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f06ab8a55d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f06ab8d7d90>
                 │                └ <function ResourceService.upload_resource at 0x7f06abfd6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f06b0b73880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706589998_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f06abfd5e10>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f06b0b73940>
    │    └ <app.src.services.base_service.BaseService object at 0x7f06b0b73910>
    └ <app.src.services.resource_service.ResourceService object at 0x7f06b0b73880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 42, in put_object
    Bucket=self.s3_bucket, Key=object_name)
           │                   └ 'resources/1706589998_download.png'
           └ <app.src.services.s3_connector.S3Storage object at 0x7f06b0b73940>

AttributeError: 'S3Storage' object has no attribute 's3_bucket'
INFO     2024-01-30 11:46:38.262 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46038 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-01-30 11:46:43.858 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f06b3d4c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f06b3d4c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f06b510bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f06b525e950>
           └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f06b525dfc0>
    └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f06b51541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
    │    └ <function subprocess_started at 0x7f06b4692440>
    └ <SpawnProcess name='SpawnProcess-15' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f06b5154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f06b4691900>
    │    │                  └ <uvicorn.server.Server object at 0x7f06b5154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f06b4f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f06b4f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f06b4f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f06b50f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f06ab51ae90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f06ab51ae90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f06ab51ae90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f06ab51ae90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f06b455c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f06b455c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f06b5155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f06b392ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f06b5155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f06ab8a49d0>
          └ <fastapi.applications.FastAPI object at 0x7f06b392ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f06ab51b190>
                     │    └ <function error_handle_business at 0x7f06b37bb5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f06ab8a49d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 's3_bucket'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f06ab5e9ab0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f06ab8a49d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f06ab5e9ab0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f06b37e7e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f06ab879bd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f06ab8a4a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f06ab5e9b40>
                     │    │             └ <starlette.requests.Request object at 0x7f06ab51a6b0>
                     │    └ <function process_middleware_common at 0x7f06b37bb9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f06ab879bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f06ab51a6b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f06ab5e9b40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 's3_bucket'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f06b3d4ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f06b38c42c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f06ab51a6b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06ab9d8ac0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f06ab879bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab5e9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06ab9d8bb0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06ab9d8ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab5e9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f06b37ae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06ab9d8bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab5e9d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f06b38fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f06ab8a5510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f06ab5e9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f06ab51a920>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f06ab8c2e60>
          └ <fastapi.routing.APIRoute object at 0x7f06ab8a5510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f06ab51a680>
                     └ <function get_request_handler.<locals>.app at 0x7f06ab8c2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f06b38fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f06ab8d7790>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f06ab9760e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f06ab8a55d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f06ab51a4a0>
                 │                └ <function ResourceService.upload_resource at 0x7f06abfd6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f06b0b73880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706590003_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f06abfd5e10>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f06b0b73940>
    │    └ <app.src.services.base_service.BaseService object at 0x7f06b0b73910>
    └ <app.src.services.resource_service.ResourceService object at 0x7f06b0b73880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 42, in put_object
    Bucket=self.s3_bucket, Key=object_name)
           │                   └ 'resources/1706590003_download.png'
           └ <app.src.services.s3_connector.S3Storage object at 0x7f06b0b73940>

AttributeError: 'S3Storage' object has no attribute 's3_bucket'
INFO     2024-01-30 11:46:43.868 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49842 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:47:13.231 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:47:13.333 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:47:13.334 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:47:13.335 request id: app - uvicorn.server:serve - Finished server process [666939]
INFO     2024-01-30 11:47:14.192 request id: app - uvicorn.server:serve - Started server process [667161]
INFO     2024-01-30 11:47:14.193 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:47:14.194 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:47:21.668 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa84c8e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa84c8e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa84dd0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa84de5e950>
           └ <SpawnProcess name='SpawnProcess-16' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa84de5dfc0>
    └ <SpawnProcess name='SpawnProcess-16' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa84dd541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-16' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-16' parent=663615 started>
    │    └ <function subprocess_started at 0x7fa84d262440>
    └ <SpawnProcess name='SpawnProcess-16' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa84dd54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa84d261900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa84dd54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa84db06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa84db063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa84db07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa84dcf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa8482135b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa8482135b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa8482135b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa8482135b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa84d124550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa84d1245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa84dd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa84c4c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa84dd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa8481e09d0>
          └ <fastapi.applications.FastAPI object at 0x7fa84c4c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa8482118d0>
                     │    └ <function error_handle_business at 0x7fa84c3575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa8481e09d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa8481fb910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa8481e0a90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa8481e09d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa8481fb910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa84c383e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa8481e0a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa8481e0a90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa8481b5bd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa8481e0a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa8481fb9a0>
                     │    │             └ <starlette.requests.Request object at 0x7fa848210be0>
                     │    └ <function process_middleware_common at 0x7fa84c3579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa8481b5bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa848210be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa8481fb9a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa84c8e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa84c4604f0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa848210be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa8484d0ac0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa8481b5bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa8482388b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa8484d0bb0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa8484d0ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa8482388b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa84c34a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa8484d0bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa8482388b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa84c4964d0>
          └ <fastapi.routing.APIRoute object at 0x7fa8481e1510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa8482388b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa848211210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa8481fae60>
          └ <fastapi.routing.APIRoute object at 0x7fa8481e1510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa8482134f0>
                     └ <function get_request_handler.<locals>.app at 0x7fa8481fadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa84c497130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa848213670>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fa84846e0e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa8481e15d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 23, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fa848213d90>
                 │                └ <function ResourceService.upload_resource at 0x7fa8488d6320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa84976f880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706590041_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7fa8488d5e10>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fa84976f940>
    │    └ <app.src.services.base_service.BaseService object at 0x7fa84976f910>
    └ <app.src.services.resource_service.ResourceService object at 0x7fa84976f880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 41, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7fa84846d7e0>
    │    └ <botocore.client.S3 object at 0x7fa8482ef3d0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7fa84976f940>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 539, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7fa848449f30>
           └ <s3transfer.futures.TransferFuture object at 0x7fa848060df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7fa84844a8c0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7fa848060df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7fa8482ef3d0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fa848061300...
           │    └ <function Task._execute_main at 0x7fa848448c10>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'resources/1706590041_download.png', 'extra_args': {}})
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7fa8482ef3d0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fa848061300...
                   │    └ <function PutObjectTask._main at 0x7fa848467ac0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'resources/1706590041_download.png', 'extra_args': {}})
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 758, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7fa848061300>
    │      │                 │           └ 'resources/1706590041_download.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fa8482f1360>
    └ <botocore.client.S3 object at 0x7fa8482ef3d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'resources/1706590041_download.png', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7fa8480...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7fa84884a050>
           └ <botocore.client.S3 object at 0x7fa8482ef3d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidAccessKeyId', 'Message': 'The Access Key Id you provided does not exist in our records.', 'Key': '...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does not exist in our records.
INFO     2024-01-30 11:47:21.686 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42684 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:48:51.795 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:48:51.897 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:48:51.897 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:48:51.898 request id: app - uvicorn.server:serve - Finished server process [667161]
INFO     2024-01-30 11:48:52.758 request id: app - uvicorn.server:serve - Started server process [667767]
INFO     2024-01-30 11:48:52.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:48:52.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:48:56.628 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f227984c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f227984c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f227ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f227ad62950>
           └ <SpawnProcess name='SpawnProcess-17' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f227ad61fc0>
    └ <SpawnProcess name='SpawnProcess-17' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f227ac581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=663615 started>
    │    └ <function subprocess_started at 0x7f227a192440>
    └ <SpawnProcess name='SpawnProcess-17' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f227ac58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f227a191900>
    │    │                  └ <uvicorn.server.Server object at 0x7f227ac58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f227a5aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f227a5aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f227a5abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f227abfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f22711e7460>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f22711e7460>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f22711e7460>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f22711e7460>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f227a05c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f227a05c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f227ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f227942ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f227ac59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f22711b4970>
          └ <fastapi.applications.FastAPI object at 0x7f227942ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f22711e5840>
                     │    └ <function error_handle_business at 0x7f22792bf5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f22711b4970>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f22711cf910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f22711b4a30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f22711b4970>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f22711cf910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f22792e7e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f22711b4a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f22711b4a30>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2271189b70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f22711b4a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f22711cf9a0>
                     │    │             └ <starlette.requests.Request object at 0x7f22711e4b50>
                     │    └ <function process_middleware_common at 0x7f22792bf9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2271189b70>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f22711e4b50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f22711cf9a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f227984ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f22793bc5e0>
          │    │   │      └ <starlette.requests.Request object at 0x7f22711e4b50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f22714a0a60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2271189b70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22710108b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f22714a0b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f22714a0a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22710108b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f22792ae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f22714a0b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22710108b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f22793fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f22711b54b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f22710108b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f22711e5180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f22711cee60>
          └ <fastapi.routing.APIRoute object at 0x7f22711b54b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f22711e7910>
                     └ <function get_request_handler.<locals>.app at 0x7f22711cedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f22793fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f22714420e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f22711b5570>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 22, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f22711e74f0>
                 │                └ <function ResourceService.upload_resource at 0x7f2271892320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2272594cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706590136_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f2271891e10>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f2272594d30>
    │    └ <app.src.services.base_service.BaseService object at 0x7f2272594d00>
    └ <app.src.services.resource_service.ResourceService object at 0x7f2272594cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 41, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f22714417e0>
    │    └ <botocore.client.S3 object at 0x7f22712bb400>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f2272594d30>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 539, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f227141df30>
           └ <s3transfer.futures.TransferFuture object at 0x7f2271038c70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f227141e8c0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f2271038c70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f22712bb400>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f2271039180...
           │    └ <function Task._execute_main at 0x7f227141cc10>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'resources/1706590136_download.png', 'extra_args': {}})
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f22712bb400>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f2271039180...
                   │    └ <function PutObjectTask._main at 0x7f227143bac0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'resources/1706590136_download.png', 'extra_args': {}})
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 758, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f2271039180>
    │      │                 │           └ 'resources/1706590136_download.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f22712bd360>
    └ <botocore.client.S3 object at 0x7f22712bb400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'resources/1706590136_download.png', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f22710...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f2271802050>
           └ <botocore.client.S3 object at 0x7f22712bb400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidAccessKeyId', 'Message': 'The Access Key Id you provided does not exist in our records.', 'Key': '...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does not exist in our records.
INFO     2024-01-30 11:48:56.645 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48302 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 11:49:15.696 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 11:49:15.800 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 11:49:15.801 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 11:49:15.801 request id: app - uvicorn.server:serve - Finished server process [667767]
INFO     2024-01-30 11:49:16.704 request id: app - uvicorn.server:serve - Started server process [667923]
INFO     2024-01-30 11:49:16.705 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 11:49:16.706 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 11:49:29.193 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f95906e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f95906e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9591b0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9591c5e950>
           └ <SpawnProcess name='SpawnProcess-18' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9591c5dfc0>
    └ <SpawnProcess name='SpawnProcess-18' parent=663615 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9591b541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=663615 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=663615 started>
    │    └ <function subprocess_started at 0x7f9591066440>
    └ <SpawnProcess name='SpawnProcess-18' parent=663615 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9591b54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9591065900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9591b54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f95918fe440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f95918fe3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f95918ffeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9591af7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f9587fc3460>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9587fc3460>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9587fc3460>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9587fc3460>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9590f24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9590f245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9591b55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f95902c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9591b55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9587f90970>
          └ <fastapi.applications.FastAPI object at 0x7f95902c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9587fc1840>
                     │    └ <function error_handle_business at 0x7f95901575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9587f90970>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9587fab910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9587f90a30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9587f90970>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '3617', 'accept': 'application/json', 'user-a...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9587fab910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f9590183e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9587f90a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f9587f90a30>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9587f65b70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9587f90a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9587fab9a0>
                     │    │             └ <starlette.requests.Request object at 0x7f9587fc0b50>
                     │    └ <function process_middleware_common at 0x7f95901579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9587f65b70>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9587fc0b50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9587fab9a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f95906e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f95902604a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f9587fc0b50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f958c2c4a60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9587f65b70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9587fe88b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f958c2c4b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f958c2c4a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9587fe88b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f959014a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f958c2c4b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9587fe88b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f95902964d0>
          └ <fastapi.routing.APIRoute object at 0x7f9587f914b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9587fe88b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9587fc1180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9587faae60>
          └ <fastapi.routing.APIRoute object at 0x7f9587f914b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9587fc3910>
                     └ <function get_request_handler.<locals>.app at 0x7f9587faadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9590297130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f958c2660e0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f9587f91570>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 22, in create_one
    return await resource_service.upload_resource(file_upload, resource_create)
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f9587fc34f0>
                 │                └ <function ResourceService.upload_resource at 0x7f958c6ca320>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f958d590cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 30, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xe1\x00\x00\x00\xe0\x08\x03\x00\x00\x00\xc21\xf1\xed\x00\x00\x00\xc3PLTE\xf...
    │    │            │         │          └ 'resources/1706590168_download.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f958c6c9e10>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f958d590d30>
    │    └ <app.src.services.base_service.BaseService object at 0x7f958d590d00>
    └ <app.src.services.resource_service.ResourceService object at 0x7f958d590cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 41, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f958c2657e0>
    │    └ <botocore.client.S3 object at 0x7f958c0e3400>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f958d590d30>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 539, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f958c241f30>
           └ <s3transfer.futures.TransferFuture object at 0x7f9587e10c70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f958c2428c0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f9587e10c70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f958c0e3400>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f9587e11180...
           │    └ <function Task._execute_main at 0x7f958c240c10>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'resources/1706590168_download.png', 'extra_args': {}})
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f958c0e3400>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f9587e11180...
                   │    └ <function PutObjectTask._main at 0x7f958c25fac0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'resources/1706590168_download.png', 'extra_args': {}})
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 758, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f9587e11180>
    │      │                 │           └ 'resources/1706590168_download.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f958c0e5360>
    └ <botocore.client.S3 object at 0x7f958c0e3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'resources/1706590168_download.png', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f9587e...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f958c63a050>
           └ <botocore.client.S3 object at 0x7f958c0e3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidAccessKeyId', 'Message': 'The Access Key Id you provided does not exist in our records.', 'Key': '...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The Access Key Id you provided does not exist in our records.
INFO     2024-01-30 11:49:29.208 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45228 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-01-30 12:09:24.689 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 12:09:24.791 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 12:09:24.791 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 12:09:24.792 request id: app - uvicorn.server:serve - Finished server process [667923]
INFO     2024-01-30 12:09:25.622 request id: app - uvicorn.server:serve - Started server process [675765]
INFO     2024-01-30 12:09:25.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 12:09:25.624 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 12:09:38.357 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 12:09:38.459 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 12:09:38.460 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 12:09:38.460 request id: app - uvicorn.server:serve - Finished server process [675765]
INFO     2024-01-30 12:09:39.376 request id: app - uvicorn.server:serve - Started server process [675848]
INFO     2024-01-30 12:09:39.378 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 12:09:39.379 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 12:09:58.528 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 12:09:58.630 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 12:09:58.631 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 12:09:58.632 request id: app - uvicorn.server:serve - Finished server process [675848]
INFO     2024-01-30 12:10:02.969 request id: app - uvicorn.server:serve - Started server process [675999]
INFO     2024-01-30 12:10:02.970 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 12:10:02.970 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 12:10:06.079 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 12:10:06.180 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 12:10:06.181 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 12:10:06.182 request id: app - uvicorn.server:serve - Finished server process [675999]
INFO     2024-01-30 12:10:07.890 request id: app - uvicorn.server:serve - Started server process [676032]
INFO     2024-01-30 12:10:07.891 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 12:10:07.892 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 12:10:52.087 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59242 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 12:10:52.276 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59242 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 12:10:52.309 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59242 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 12:10:52.415 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59242 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 12:12:12.173 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 12:12:12.441 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5MzMzMn0.teHg84xPCSK-EMr6Kdmow1KZMK3UhwNp6-4yvGQJAkE","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwOTUzMn0.EELUPzNKuWFk_f7-z3DzYCmO5SO_PQWNzqvG3sGRKeU"},"links":null,"relationships":null,"timestamp":"2024-01-30 12:10:07"}'}
INFO     2024-01-30 12:12:12.441 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48250 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 12:15:47.121 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40436 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-01-30 12:19:39.250 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 12:19:39.352 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 12:19:39.353 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 12:19:39.354 request id: app - uvicorn.server:serve - Finished server process [676032]
INFO     2024-01-30 12:20:17.146 request id: app - uvicorn.server:serve - Started server process [679505]
INFO     2024-01-30 12:20:17.147 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 12:20:17.148 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 12:21:20.310 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 12:21:20.412 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 12:21:20.413 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 12:21:20.413 request id: app - uvicorn.server:serve - Finished server process [679505]
INFO     2024-01-30 13:12:19.788 request id: app - uvicorn.server:serve - Started server process [698516]
INFO     2024-01-30 13:12:19.790 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:12:19.791 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:12:24.996 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36414 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 13:12:25.121 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36414 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 13:12:50.789 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36426 - "GET /rms/v1.0/resources/from%20app.src.utils.common%20import%20row2dict HTTP/1.1" 403
INFO     2024-01-30 13:13:12.497 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 13:13:12.764 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5Njk5Mn0.g3xUSsWcORhR8ecbmgx6RhtqCRz87VhZuwAvOrt4Amw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxMzE5Mn0.EhzCchZX0vY1W0omJH9_fQ5vAxsyiMbcYbMin2-oLbU"},"links":null,"relationships":null,"timestamp":"2024-01-30 13:12:19"}'}
INFO     2024-01-30 13:13:12.765 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39528 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 13:13:35.977 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56750 - "GET /rms/v1.0/resources/c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-01-30 13:16:39.849 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:16:39.966 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:16:39.967 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:16:39.967 request id: app - uvicorn.server:serve - Finished server process [698516]
INFO     2024-01-30 13:16:40.931 request id: app - uvicorn.server:serve - Started server process [700174]
INFO     2024-01-30 13:16:40.933 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:16:40.933 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:20:22.885 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:20:22.987 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:20:22.987 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:20:22.988 request id: app - uvicorn.server:serve - Finished server process [700174]
INFO     2024-01-30 13:20:24.044 request id: app - uvicorn.server:serve - Started server process [701596]
INFO     2024-01-30 13:20:24.045 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:20:24.046 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:20:40.788 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:20:40.890 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:20:40.891 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:20:40.891 request id: app - uvicorn.server:serve - Finished server process [701596]
INFO     2024-01-30 13:20:41.729 request id: app - uvicorn.server:serve - Started server process [701705]
INFO     2024-01-30 13:20:41.730 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:20:41.731 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:21:05.494 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:21:05.596 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:21:05.597 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:21:05.597 request id: app - uvicorn.server:serve - Finished server process [701705]
INFO     2024-01-30 13:21:06.455 request id: app - uvicorn.server:serve - Started server process [701858]
INFO     2024-01-30 13:21:06.456 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:21:06.457 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:21:52.072 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:21:52.173 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:21:52.174 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:21:52.174 request id: app - uvicorn.server:serve - Finished server process [701858]
INFO     2024-01-30 13:21:53.010 request id: app - uvicorn.server:serve - Started server process [702132]
INFO     2024-01-30 13:21:53.011 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:21:53.012 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:23:48.900 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:23:49.002 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:23:49.002 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:23:49.003 request id: app - uvicorn.server:serve - Finished server process [702132]
INFO     2024-01-30 13:23:49.808 request id: app - uvicorn.server:serve - Started server process [702817]
INFO     2024-01-30 13:23:49.809 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:23:49.810 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:24:04.252 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:24:04.354 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:24:04.354 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:24:04.355 request id: app - uvicorn.server:serve - Finished server process [702817]
INFO     2024-01-30 13:24:05.267 request id: app - uvicorn.server:serve - Started server process [702903]
INFO     2024-01-30 13:24:05.268 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:24:05.269 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:26:14.898 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:26:15.000 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:26:15.000 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:26:15.001 request id: app - uvicorn.server:serve - Finished server process [702903]
INFO     2024-01-30 13:26:15.797 request id: app - uvicorn.server:serve - Started server process [704119]
INFO     2024-01-30 13:26:15.798 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:26:15.799 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:26:45.072 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:26:45.174 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:26:45.176 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:26:45.177 request id: app - uvicorn.server:serve - Finished server process [704119]
INFO     2024-01-30 13:27:57.362 request id: app - uvicorn.server:serve - Started server process [704734]
INFO     2024-01-30 13:27:57.363 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:27:57.364 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:30:58.025 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:30:58.126 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:30:58.127 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:30:58.128 request id: app - uvicorn.server:serve - Finished server process [704734]
INFO     2024-01-30 13:31:41.835 request id: app - uvicorn.server:serve - Started server process [706205]
INFO     2024-01-30 13:31:41.837 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:31:41.837 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:32:02.590 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:32:02.700 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:32:02.701 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:32:02.702 request id: app - uvicorn.server:serve - Finished server process [706205]
INFO     2024-01-30 13:32:03.538 request id: app - uvicorn.server:serve - Started server process [706362]
INFO     2024-01-30 13:32:03.539 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:32:03.539 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:32:20.985 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:32:21.087 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:32:21.088 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:32:21.088 request id: app - uvicorn.server:serve - Finished server process [706362]
INFO     2024-01-30 13:32:21.969 request id: app - uvicorn.server:serve - Started server process [706465]
INFO     2024-01-30 13:32:21.971 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:32:21.971 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:35:30.352 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:35:30.454 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:35:30.455 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:35:30.456 request id: app - uvicorn.server:serve - Finished server process [706465]
INFO     2024-01-30 13:35:31.295 request id: app - uvicorn.server:serve - Started server process [707549]
INFO     2024-01-30 13:35:31.296 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:35:31.297 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:35:57.263 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:35:57.365 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:35:57.366 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:35:57.366 request id: app - uvicorn.server:serve - Finished server process [707549]
INFO     2024-01-30 13:35:58.196 request id: app - uvicorn.server:serve - Started server process [707725]
INFO     2024-01-30 13:35:58.197 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:35:58.198 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:38:06.715 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:38:07.816 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:38:07.817 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:38:07.817 request id: app - uvicorn.server:serve - Finished server process [707725]
INFO     2024-01-30 13:38:43.950 request id: app - uvicorn.server:serve - Started server process [708722]
INFO     2024-01-30 13:38:43.951 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:38:43.952 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:39:14.833 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:39:14.935 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:39:14.935 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:39:14.936 request id: app - uvicorn.server:serve - Finished server process [708722]
INFO     2024-01-30 13:39:15.853 request id: app - uvicorn.server:serve - Started server process [708929]
INFO     2024-01-30 13:39:15.855 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:39:15.855 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:39:49.140 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:39:49.241 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:39:49.242 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:39:49.242 request id: app - uvicorn.server:serve - Finished server process [708929]
INFO     2024-01-30 13:39:50.136 request id: app - uvicorn.server:serve - Started server process [709131]
INFO     2024-01-30 13:39:50.138 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:39:50.138 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:41:37.202 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:41:37.304 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:41:37.305 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:41:37.305 request id: app - uvicorn.server:serve - Finished server process [709131]
INFO     2024-01-30 13:41:59.792 request id: app - uvicorn.server:serve - Started server process [709898]
INFO     2024-01-30 13:41:59.793 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:41:59.794 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:42:36.587 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:42:36.689 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:42:36.689 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:42:36.690 request id: app - uvicorn.server:serve - Finished server process [709898]
INFO     2024-01-30 13:42:37.615 request id: app - uvicorn.server:serve - Started server process [710120]
INFO     2024-01-30 13:42:37.616 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:42:37.617 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:42:48.044 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:42:48.145 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:42:48.146 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:42:48.146 request id: app - uvicorn.server:serve - Finished server process [710120]
INFO     2024-01-30 13:42:48.954 request id: app - uvicorn.server:serve - Started server process [710195]
INFO     2024-01-30 13:42:48.955 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:42:48.956 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:42:52.522 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38098 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 13:42:52.697 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38098 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 13:43:27.170 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 13:43:27.437 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5ODgwN30.9HCR2urvJeluYtsfne58z3j351IaEBry4rVigC2r3Wg","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxNTAwN30.lKukLH3-LkNDpGUfe-HMaQ_hZ8V4GnyqnQT4yGObo3w"},"links":null,"relationships":null,"timestamp":"2024-01-30 13:42:48"}'}
INFO     2024-01-30 13:43:27.438 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38114 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 13:47:17.040 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:47:17.142 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:47:17.142 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:47:17.143 request id: app - uvicorn.server:serve - Finished server process [710195]
INFO     2024-01-30 13:47:17.972 request id: app - uvicorn.server:serve - Started server process [711808]
INFO     2024-01-30 13:47:17.973 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:47:17.974 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:47:26.100 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53730 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 13:47:26.296 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53730 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 13:47:48.634 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 13:47:48.901 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5OTA2OH0.Mf7MKhg_Og4VbaqqtBptuaD6mU5lKWez2RUo-nKyKpw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxNTI2OH0.Hkn7PjgaItX3vFT9DR21OoAu_jy3ZPYdj-CLYsxdDps"},"links":null,"relationships":null,"timestamp":"2024-01-30 13:47:17"}'}
INFO     2024-01-30 13:47:48.902 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53736 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-01-30 13:48:08.972 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4f07ce8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f4f07ce83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f4f0910bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4f0925e950>
           └ <SpawnProcess name='SpawnProcess-31' parent=698514 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4f0925dfc0>
    └ <SpawnProcess name='SpawnProcess-31' parent=698514 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4f091541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-31' parent=698514 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-31' parent=698514 started>
    │    └ <function subprocess_started at 0x7f4f08662440>
    └ <SpawnProcess name='SpawnProcess-31' parent=698514 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4f09154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4f08661900>
    │    │                  └ <uvicorn.server.Server object at 0x7f4f09154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f4f08efe440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f4f08efe3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f4f08effeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f4f090f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f4eff4473a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4eff4473a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4eff4473a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4eff4473a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4f08524550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4f085245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4f09155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4f078c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4f09155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4eff5d8280>
          └ <fastapi.applications.FastAPI object at 0x7f4f078c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4eff4461a0>
                     │    └ <function error_handle_business at 0x7f4f077575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4eff5d8280>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'FileRepository' object has no attribute 'search'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4eff45f7f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4eff5d9fc0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4eff5d8280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4eff45f7f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4eff59f0d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4eff5d9fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4eff45f760>
                     │    │             └ <starlette.requests.Request object at 0x7f4eff4464d0>
                     │    └ <function process_middleware_common at 0x7f4f077579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4eff59f0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4eff4464d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4eff45f760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'FileRepository' object has no attribute 'search'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4f07ce8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4f078602c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f4eff4464d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4eff8c9fc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4eff59f0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4eff525e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4eff8ca0b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4eff8c9fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4eff525e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4f0774a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4eff8ca0b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4eff525e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f4f078964d0>
          └ <fastapi.routing.APIRoute object at 0x7f4eff6040a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4eff525e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4efeb47460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4eff5fb760>
          └ <fastapi.routing.APIRoute object at 0x7f4eff6040a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4efeb44190>
                     └ <function get_request_handler.<locals>.app at 0x7f4eff5fb6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4f07897130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=Non...
                 │                 │         └ <function get_resources at 0x7f4eff87a8c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f4eff604160>
                 └ <function run_in_threadpool at 0x7f4f081f2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f4eff87a8c0>, filters=ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f4eff61c300>
                 │     │         └ <function run_sync at 0x7f4f082b5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4f082b4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'FileRepository' object has no attribute 'search'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f4efe...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f4eff456580>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f4eff61c1c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f4efeb478b0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f4efffce5f0>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f4f04ba0be0>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search(db_session, filters)
                │    │                      │           └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
                │    │                      └ <sqlalchemy.orm.session.Session object at 0x7f4efeb478b0>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f4eff866ef0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f4f04ba0be0>

AttributeError: 'FileRepository' object has no attribute 'search'
INFO     2024-01-30 13:48:08.987 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38904 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 500
INFO     2024-01-30 13:48:35.677 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:48:35.778 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:48:35.779 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:48:35.780 request id: app - uvicorn.server:serve - Finished server process [711808]
INFO     2024-01-30 13:48:36.635 request id: app - uvicorn.server:serve - Started server process [712248]
INFO     2024-01-30 13:48:36.636 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:48:36.637 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 13:48:38.885 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f8c621b4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f8c621b43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f8c6360fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f8c63762950>
           └ <SpawnProcess name='SpawnProcess-32' parent=698514 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f8c63761fc0>
    └ <SpawnProcess name='SpawnProcess-32' parent=698514 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f8c636581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-32' parent=698514 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-32' parent=698514 started>
    │    └ <function subprocess_started at 0x7f8c62b26440>
    └ <SpawnProcess name='SpawnProcess-32' parent=698514 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f8c63658310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f8c62b25900>
    │    │                  └ <uvicorn.server.Server object at 0x7f8c63658310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8c633ce440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8c633ce3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8c633cfeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8c635fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f8c599576a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8c599576a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8c599576a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8c599576a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f8c629ec550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8c629ec5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8c63659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8c61d8eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8c63659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8c59ae42e0>
          └ <fastapi.applications.FastAPI object at 0x7f8c61d8eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f8c59b17af0>
                     │    └ <function error_handle_business at 0x7f8c61c1f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8c59ae42e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Resource' has no attribute 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8c59944040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8c59ae6020>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8c59ae42e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8c59944040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8c59aab130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8c59ae6020>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8c599440d0>
                     │    │             └ <starlette.requests.Request object at 0x7f8c59b16e60>
                     │    └ <function process_middleware_common at 0x7f8c61c1f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8c59aab130>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f8c59b16e60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8c599440d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Resource' has no attribute 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f8c621b4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f8c61d20630>
          │    │   │      └ <starlette.requests.Request object at 0x7f8c59b16e60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8c59dd6020>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8c59aab130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8c59944f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8c59dd6110>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8c59dd6020>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8c59944f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8c61c0e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8c59dd6110>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8c59944f70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f8c61d5e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f8c59b14100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8c59944f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8c59b17370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8c59b07760>
          └ <fastapi.routing.APIRoute object at 0x7f8c59b14100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f8c599573d0>
                     └ <function get_request_handler.<locals>.app at 0x7f8c59b076d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f8c61d5f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=Non...
                 │                 │         └ <function get_resources at 0x7f8c59d868c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f8c59b141c0>
                 └ <function run_in_threadpool at 0x7f8c626badd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f8c59d868c0>, filters=ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f8c59962040>
                 │     │         └ <function run_sync at 0x7f8c6277d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f8c6277c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Resource' has no attribute 'item_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f8c59...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f8c5bd93100>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f8c59962140>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f8c59957340>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f8c5a1de5f0>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f8c5afcfd60>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f8c59957340>
                │    │               └ <function FileRepository.search_resources at 0x7f8c5a1de200>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f8c59d72f50>
                └ <app.src.services.resource_service.ResourceService object at 0x7f8c5afcfd60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 72, in search_resources
    query = query.filter(self.model.item_id == filters.item_id)
            │     │      │    │                │       └ 'c0ec8b64-27ef-593b-a6dd-2427b43b1437'
            │     │      │    │                └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
            │     │      │    └ <class 'app.src.models.resource.Resource'>
            │     │      └ <app.src.repositories.resource.FileRepository object at 0x7f8c59d72f50>
            │     └ <function Query.filter at 0x7f8c60053b50>
            └ <sqlalchemy.orm.query.Query object at 0x7f8c59a28b80>

AttributeError: type object 'Resource' has no attribute 'item_id'
INFO     2024-01-30 13:48:38.901 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55794 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 500
INFO     2024-01-30 13:48:55.889 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:48:55.991 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:48:55.992 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:48:55.992 request id: app - uvicorn.server:serve - Finished server process [712248]
INFO     2024-01-30 13:48:56.828 request id: app - uvicorn.server:serve - Started server process [712381]
INFO     2024-01-30 13:48:56.829 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:48:56.830 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:49:02.244 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:49:02.346 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:49:02.347 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:49:02.347 request id: app - uvicorn.server:serve - Finished server process [712381]
INFO     2024-01-30 13:49:03.207 request id: app - uvicorn.server:serve - Started server process [712429]
INFO     2024-01-30 13:49:03.208 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:49:03.209 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 13:49:09.256 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f0a90478310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f0a904783a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f0a918c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f0a91a5e950>
           └ <SpawnProcess name='SpawnProcess-34' parent=698514 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f0a91a5dfc0>
    └ <SpawnProcess name='SpawnProcess-34' parent=698514 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f0a9190c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=698514 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=698514 started>
    │    └ <function subprocess_started at 0x7f0a90d96440>
    └ <SpawnProcess name='SpawnProcess-34' parent=698514 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f0a9190c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0a90d95900>
    │    │                  └ <uvicorn.server.Server object at 0x7f0a9190c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f0a911ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f0a911ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f0a911afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f0a918b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0a87ceb610>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0a87ceb610>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0a87ceb610>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0a87ceb610>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0a90c90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f0a90c905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0a9190de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f0a90052b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0a9190de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0a87eac250>
          └ <fastapi.applications.FastAPI object at 0x7f0a90052b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0a87ed7a60>
                     │    └ <function error_handle_business at 0x7f0a8fee35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0a87eac250>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceGet' object has no attribute 'id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0a87cd0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0a87eadf90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0a87eac250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0a87cd0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0a87e730a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0a87eadf90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0a87cd00d0>
                     │    │             └ <starlette.requests.Request object at 0x7f0a87ed6dd0>
                     │    └ <function process_middleware_common at 0x7f0a8fee39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0a87e730a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0a87ed6dd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0a87cd00d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceGet' object has no attribute 'id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f0a90478a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f0a8ffe48b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f0a87ed6dd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0a87fe1f90>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0a87e730a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0a87cd0f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0a87fe2080>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0a87fe1f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0a87cd0f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0a8fed22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0a87fe2080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0a87cd0f70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f0a900224d0>
          └ <fastapi.routing.APIRoute object at 0x7f0a87ed4070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0a87cd0f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0a87ed72e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0a87ecb760>
          └ <fastapi.routing.APIRoute object at 0x7f0a87ed4070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0a87ceb340>
                     └ <function get_request_handler.<locals>.app at 0x7f0a87ecb6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f0a90023130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=Non...
                 │                 │         └ <function get_resources at 0x7f0a87f928c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f0a87ed4130>
                 └ <function run_in_threadpool at 0x7f0a9097edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f0a87f928c0>, filters=ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f0a87cf1e80>
                 │     │         └ <function run_sync at 0x7f0a90a41090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f0a90a40820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceGet' object has no attribute 'id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f0a87...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f0a87ffb900>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f0a87cf1c80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f0a87ceb2b0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f0a8c4e6710>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f0a8d1d7d60>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f0a87ceb2b0>
                │    │               └ <function FileRepository.search_resources at 0x7f0a8c4e6320>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f0a87f7eec0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f0a8d1d7d60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 72, in search_resources
    query = query.filter(self.model.id == filters.id)
            │     │      │    │     │     └ ResourceGet(item_id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=...
            │     │      │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f0a8e01aca0>
            │     │      │    └ <class 'app.src.models.resource.Resource'>
            │     │      └ <app.src.repositories.resource.FileRepository object at 0x7f0a87f7eec0>
            │     └ <function Query.filter at 0x7f0a8e25bb50>
            └ <sqlalchemy.orm.query.Query object at 0x7f0a87db8b80>

AttributeError: 'ResourceGet' object has no attribute 'id'
INFO     2024-01-30 13:49:09.272 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39662 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 500
INFO     2024-01-30 13:49:27.678 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 13:49:27.780 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 13:49:27.781 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 13:49:27.782 request id: app - uvicorn.server:serve - Finished server process [712429]
INFO     2024-01-30 13:49:28.652 request id: app - uvicorn.server:serve - Started server process [712582]
INFO     2024-01-30 13:49:28.653 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 13:49:28.653 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 13:49:31.538 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42372 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 422
INFO     2024-01-30 13:52:56.702 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34656 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 422
INFO     2024-01-30 13:56:54.095 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52198 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437&stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 422
INFO     2024-01-30 13:59:56.167 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34998 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437&stage_id=367814e6-063c-560c-b428-20ed1ed85f4f&status_id=535816d8-5da3-5539-aee9-f512d7eb6519&name=A12&version=3&platform=cb9c78a3-a4f9-527c-abf9-4fdac53bfa66&product_type_id=d38f1252-8d5a-5ea5-acf9-5f6c4a57d4df&package_repo_id=227bb9e7-bd3e-5874-a006-172539fa4878&tag=fd02b16b-886c-5b4e-a253-d1dd6c91d46b&key=static%2Fimages%2F3_Screenshot%20from%202024-01-25%2018-12-11.png HTTP/1.1" 422
INFO     2024-01-30 14:00:03.240 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:00:03.341 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:00:03.342 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:00:03.343 request id: app - uvicorn.server:serve - Finished server process [712582]
INFO     2024-01-30 14:00:11.182 request id: app - uvicorn.server:serve - Started server process [716862]
INFO     2024-01-30 14:00:11.183 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:00:11.184 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:00:14.252 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42394 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437&stage_id=367814e6-063c-560c-b428-20ed1ed85f4f&status_id=535816d8-5da3-5539-aee9-f512d7eb6519&name=A12&version=3&platform=cb9c78a3-a4f9-527c-abf9-4fdac53bfa66&product_type_id=d38f1252-8d5a-5ea5-acf9-5f6c4a57d4df&package_repo_id=227bb9e7-bd3e-5874-a006-172539fa4878&tag=fd02b16b-886c-5b4e-a253-d1dd6c91d46b&key=static%2Fimages%2F3_Screenshot%20from%202024-01-25%2018-12-11.png HTTP/1.1" 422
INFO     2024-01-30 14:00:38.847 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41566 - "GET /rms/v1.0/resources/?item_id=c0ec8b64-27ef-593b-a6dd-2427b43b1437&stage_id=367814e6-063c-560c-b428-20ed1ed85f4f&status_id=535816d8-5da3-5539-aee9-f512d7eb6519&name=A12&version=3&platform=cb9c78a3-a4f9-527c-abf9-4fdac53bfa66&product_type_id=d38f1252-8d5a-5ea5-acf9-5f6c4a57d4df&package_repo_id=227bb9e7-bd3e-5874-a006-172539fa4878&tag=fd02b16b-886c-5b4e-a253-d1dd6c91d46b&key=static%2Fimages%2F3_Screenshot%20from%202024-01-25%2018-12-11.png HTTP/1.1" 422
INFO     2024-01-30 14:01:43.738 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53690 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 14:01:43.937 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53690 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 14:02:22.586 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 14:02:22.824 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjU5OTk0Mn0.eUDnKk5rU9aPVCd3I9hbHkh0vOvtc52vTt2MosOnE70","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxNjE0Mn0.e01LLaldIs1yn5wgsxYIrhL3p8CV9FGgI9gcOzVzTWc"},"links":null,"relationships":null,"timestamp":"2024-01-30 14:00:10"}'}
INFO     2024-01-30 14:02:22.826 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53706 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 14:02:47.004 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:02:47.106 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-01-30 14:02:53.313 request id: app - uvicorn.server:serve - Started server process [717846]
INFO     2024-01-30 14:02:53.314 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:02:53.315 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 14:02:54.614 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc7ddcf8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc7ddcf83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc7df10bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc7df25e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc7df25dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc7df1541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=717844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=717844 started>
    │    └ <function subprocess_started at 0x7fc7de676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=717844 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc7df154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc7de675900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc7df154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc7def06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc7def063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc7def07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc7df0f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc7d551b610>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc7d551b610>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc7d551b610>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc7d551b610>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc7de530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc7de5305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc7df155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc7dd8d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc7df155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc7d56a0250>
          └ <fastapi.applications.FastAPI object at 0x7fc7dd8d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc7d56cfa60>
                     │    └ <function error_handle_business at 0x7fc7dd75f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc7d56a0250>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceGet' object has no attribute 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc7d55000d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc7d56a1f90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc7d56a0250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc7d55000d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc7d56670a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc7d56a1f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc7d5500160>
                     │    │             └ <starlette.requests.Request object at 0x7fc7d56cedd0>
                     │    └ <function process_middleware_common at 0x7fc7dd75f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc7d56670a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc7d56cedd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc7d5500160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceGet' object has no attribute 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc7ddcf8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc7dd868540>
          │    │   │      └ <starlette.requests.Request object at 0x7fc7d56cedd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc7d5989f90>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc7d56670a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7d5501000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc7d598a080>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc7d5989f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7d5501000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc7dd7522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc7d598a080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7d5501000>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc7dd8a24d0>
          └ <fastapi.routing.APIRoute object at 0x7fc7d56cc070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7d5501000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7d56cf2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc7d56c37f0>
          └ <fastapi.routing.APIRoute object at 0x7fc7d56cc070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc7d551b340>
                     └ <function get_request_handler.<locals>.app at 0x7fc7d56c3760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc7dd8a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, pl...
                 │                 │         └ <function get_resources at 0x7fc7d5942950>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc7d56cc130>
                 └ <function run_in_threadpool at 0x7fc7de1fedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7fc7d5942950>, filters=ResourceGet(id='c0ec8b64-27ef-593b-a6dd-2427b43b1437',...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc7d5522000>
                 │     │         └ <function run_sync at 0x7fc7de2c1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc7de2c0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceGet' object has no attribute 'item_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fc7d5...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc7d550d200>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc7d5521e00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=None,...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7fc7d551b2b0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7fc7d5d82680>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7fc7d6447d60>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=None,...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7fc7d551b2b0>
                │    │               └ <function FileRepository.search_resources at 0x7fc7d5d82290>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7fc7d5926ec0>
                └ <app.src.services.resource_service.ResourceService object at 0x7fc7d6447d60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 71, in search_resources
    if filters.item_id:
       └ ResourceGet(id='c0ec8b64-27ef-593b-a6dd-2427b43b1437', stage_id=None, status_id=None, name=None, version=None, platform=None,...

AttributeError: 'ResourceGet' object has no attribute 'item_id'
INFO     2024-01-30 14:02:54.629 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34482 - "GET /rms/v1.0/resources/?id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 500
INFO     2024-01-30 14:03:05.257 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:03:05.358 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:03:05.359 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:03:05.359 request id: app - uvicorn.server:serve - Finished server process [717846]
INFO     2024-01-30 14:03:06.178 request id: app - uvicorn.server:serve - Started server process [717939]
INFO     2024-01-30 14:03:06.179 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:03:06.180 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:03:07.896 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34212 - "GET /rms/v1.0/resources/?id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-01-30 14:04:40.723 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:04:40.826 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:04:40.827 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:04:40.828 request id: app - uvicorn.server:serve - Finished server process [717939]
INFO     2024-01-30 14:04:41.666 request id: app - uvicorn.server:serve - Started server process [718480]
INFO     2024-01-30 14:04:41.667 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:04:41.668 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:04:53.919 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34308 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 14:04:54.126 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34308 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 14:05:13.360 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 14:05:13.629 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMDExM30.n7nqzAFK33LKI7USdAXWI5rNsLg6-iOseVlxuhwpTYA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxNjMxM30.dl0796-6vpVMX2ObzNiGEBE97mw4URVG8V3tVWGI3aY"},"links":null,"relationships":null,"timestamp":"2024-01-30 14:04:41"}'}
INFO     2024-01-30 14:05:13.630 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34314 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 14:05:36.244 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57916 - "GET /rms/v1.0/resources/?id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-01-30 14:05:47.246 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41684 - "GET /rms/v1.0/resources/?name=Film HTTP/1.1" 200
INFO     2024-01-30 14:05:50.051 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41684 - "GET /rms/v1.0/resources/?name=Film HTTP/1.1" 200
INFO     2024-01-30 14:05:53.650 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41684 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-30 14:06:08.894 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:06:08.996 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:06:08.997 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:06:08.997 request id: app - uvicorn.server:serve - Finished server process [718480]
INFO     2024-01-30 14:06:09.893 request id: app - uvicorn.server:serve - Started server process [718990]
INFO     2024-01-30 14:06:09.894 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:06:09.895 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:07:22.718 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58318 - "GET /rms/v1.0/resources/?platform=cb9c78a3-a4f9-527c-abf9-4fdac53bfa66 HTTP/1.1" 200
INFO     2024-01-30 14:09:58.170 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:09:58.272 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:09:58.273 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:09:58.273 request id: app - uvicorn.server:serve - Finished server process [718990]
INFO     2024-01-30 14:09:59.154 request id: app - uvicorn.server:serve - Started server process [720311]
INFO     2024-01-30 14:09:59.155 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:09:59.156 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:10:29.633 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:10:29.735 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:10:29.735 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:10:29.736 request id: app - uvicorn.server:serve - Finished server process [720311]
INFO     2024-01-30 14:10:30.652 request id: app - uvicorn.server:serve - Started server process [720504]
INFO     2024-01-30 14:10:30.654 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:10:30.655 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:10:52.110 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:10:52.212 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:10:52.213 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:10:52.213 request id: app - uvicorn.server:serve - Finished server process [720504]
INFO     2024-01-30 14:10:53.047 request id: app - uvicorn.server:serve - Started server process [720636]
INFO     2024-01-30 14:10:53.048 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:10:53.048 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:11:21.823 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:11:21.924 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:11:21.925 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:11:21.925 request id: app - uvicorn.server:serve - Finished server process [720636]
INFO     2024-01-30 14:11:22.735 request id: app - uvicorn.server:serve - Started server process [720850]
INFO     2024-01-30 14:11:22.736 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:11:22.737 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:11:48.502 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:11:48.604 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:11:48.605 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:11:48.605 request id: app - uvicorn.server:serve - Finished server process [720850]
INFO     2024-01-30 14:11:49.439 request id: app - uvicorn.server:serve - Started server process [721016]
INFO     2024-01-30 14:11:49.440 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:11:49.441 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:12:01.874 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:12:01.977 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:12:01.978 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:12:01.978 request id: app - uvicorn.server:serve - Finished server process [721016]
INFO     2024-01-30 14:12:02.819 request id: app - uvicorn.server:serve - Started server process [721100]
INFO     2024-01-30 14:12:02.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:12:02.821 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:12:06.531 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:12:06.633 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:12:06.634 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:12:06.634 request id: app - uvicorn.server:serve - Finished server process [721100]
INFO     2024-01-30 14:12:07.476 request id: app - uvicorn.server:serve - Started server process [721129]
INFO     2024-01-30 14:12:07.477 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:12:07.478 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:12:13.394 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:12:13.495 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:12:13.496 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:12:13.496 request id: app - uvicorn.server:serve - Finished server process [721129]
INFO     2024-01-30 14:12:14.278 request id: app - uvicorn.server:serve - Started server process [721193]
INFO     2024-01-30 14:12:14.279 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:12:14.280 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:12:28.716 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:12:28.857 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:12:28.858 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:12:28.858 request id: app - uvicorn.server:serve - Finished server process [721193]
INFO     2024-01-30 14:12:29.679 request id: app - uvicorn.server:serve - Started server process [721294]
INFO     2024-01-30 14:12:29.680 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:12:29.681 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:12:37.602 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:12:37.703 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:12:37.704 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:12:37.705 request id: app - uvicorn.server:serve - Finished server process [721294]
INFO     2024-01-30 14:12:38.521 request id: app - uvicorn.server:serve - Started server process [721352]
INFO     2024-01-30 14:12:38.523 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:12:38.523 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:12:43.436 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:12:43.538 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:12:43.538 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:12:43.539 request id: app - uvicorn.server:serve - Finished server process [721352]
INFO     2024-01-30 14:12:44.488 request id: app - uvicorn.server:serve - Started server process [721386]
INFO     2024-01-30 14:12:44.489 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:12:44.490 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:13:15.977 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:13:16.078 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:13:16.079 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:13:16.079 request id: app - uvicorn.server:serve - Finished server process [721386]
INFO     2024-01-30 14:13:16.879 request id: app - uvicorn.server:serve - Started server process [721647]
INFO     2024-01-30 14:13:16.881 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:13:16.881 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 14:14:03.648 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fbe407e4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fbe407e43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fbe41c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fbe41d62950>
           └ <SpawnProcess name='SpawnProcess-16' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fbe41d61fc0>
    └ <SpawnProcess name='SpawnProcess-16' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fbe41c581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-16' parent=717844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-16' parent=717844 started>
    │    └ <function subprocess_started at 0x7fbe4115e440>
    └ <SpawnProcess name='SpawnProcess-16' parent=717844 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fbe41c58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fbe4115d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fbe41c58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fbe415aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbe415aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbe415abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbe41bfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fbe37f33610>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fbe37f33610>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fbe37f33610>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fbe37f33610>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fbe4101c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fbe4101c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbe41c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fbe403c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbe41c59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe3c3c0250>
          └ <fastapi.applications.FastAPI object at 0x7fbe403c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fbe3c3efa60>
                     │    └ <function error_handle_business at 0x7fbe402575b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe3c3c0250>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceGet' object has no attribute 'platform_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbe37f1c040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe3c3c1f90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe3c3c0250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbe37f1c040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe3c3830a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe3c3c1f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbe37f1c0d0>
                     │    │             └ <starlette.requests.Request object at 0x7fbe3c3eedd0>
                     │    └ <function process_middleware_common at 0x7fbe402579a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe3c3830a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fbe3c3eedd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbe37f1c0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceGet' object has no attribute 'platform_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fbe407e4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fbe40358540>
          │    │   │      └ <starlette.requests.Request object at 0x7fbe3c3eedd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbe3c4f5f90>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe3c3830a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe37f1cf70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbe3c4f6080>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbe3c4f5f90>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe37f1cf70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fbe4024a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbe3c4f6080>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe37f1cf70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fbe403964d0>
          └ <fastapi.routing.APIRoute object at 0x7fbe3c3ec070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe37f1cf70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3c3ef2e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fbe3c3e3760>
          └ <fastapi.routing.APIRoute object at 0x7fbe3c3ec070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fbe37f33340>
                     └ <function get_request_handler.<locals>.app at 0x7fbe3c3e36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fbe40397130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform=None, product_type_id=None,...
                 │                 │         └ <function get_resources at 0x7fbe3c4a28c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fbe3c3ec130>
                 └ <function run_in_threadpool at 0x7fbe40ceadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7fbe3c4a28c0>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fbe37f3e3c0>
                 │     │         └ <function run_sync at 0x7fbe40dad090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fbe40dac820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceGet' object has no attribute 'platform_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fbe37...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fbe37f3e1c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fbe37f3e380>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform=None, product_type_id=None, package_rep...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7fbe37f332b0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7fbe3c7f2710>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7fbe3d5e7d60>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform=None, product_type_id=None, package_rep...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7fbe37f332b0>
                │    │               └ <function FileRepository.search_resources at 0x7fbe3c7f2320>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7fbe3c492ec0>
                └ <app.src.services.resource_service.ResourceService object at 0x7fbe3d5e7d60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 81, in search_resources
    if filters.platform_id:
       └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform=None, product_type_id=None, package_rep...

AttributeError: 'ResourceGet' object has no attribute 'platform_id'
INFO     2024-01-30 14:14:03.664 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37190 - "GET /rms/v1.0/resources/?package_repo_id=2498ff56-54ae-56c1-8191-697efea8d99e HTTP/1.1" 500
INFO     2024-01-30 14:14:25.356 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:14:25.458 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:14:25.458 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:14:25.459 request id: app - uvicorn.server:serve - Finished server process [721647]
INFO     2024-01-30 14:14:26.251 request id: app - uvicorn.server:serve - Started server process [722049]
INFO     2024-01-30 14:14:26.253 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:14:26.253 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 14:14:28.264 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7ad5f04310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7ad5f043a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7ad730bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7ad745e950>
           └ <SpawnProcess name='SpawnProcess-17' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7ad745dfc0>
    └ <SpawnProcess name='SpawnProcess-17' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7ad73541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=717844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=717844 started>
    │    └ <function subprocess_started at 0x7f7ad6872440>
    └ <SpawnProcess name='SpawnProcess-17' parent=717844 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7ad7354310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7ad6871900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7ad7354310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7ad7106440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7ad71063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7ad7107eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7ad72f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7acd713640>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7acd713640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7acd713640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7acd713640>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7ad673c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7ad673c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7ad7355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7ad5adeb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7ad7355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7acd89c280>
          └ <fastapi.applications.FastAPI object at 0x7f7ad5adeb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7acd8cba90>
                     │    └ <function error_handle_business at 0x7f7ad596b5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7acd89c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceGet' object has no attribute 'repo_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7acd6fc0d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7acd89dfc0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7acd89c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7acd6fc0d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7acd85f0d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7acd89dfc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7acd6fc160>
                     │    │             └ <starlette.requests.Request object at 0x7f7acd8cae00>
                     │    └ <function process_middleware_common at 0x7f7ad596b9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7acd85f0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7acd8cae00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7acd6fc160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceGet' object has no attribute 'repo_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7ad5f04a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7ad5a78360>
          │    │   │      └ <starlette.requests.Request object at 0x7f7acd8cae00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7acdb89fc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7acd85f0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7acd6fd000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7acdb8a0b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7acdb89fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7acd6fd000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7ad595e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7acdb8a0b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7acd6fd000>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7ad5aae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f7acd8c80a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7acd6fd000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7acd8cb310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7acd8bb7f0>
          └ <fastapi.routing.APIRoute object at 0x7f7acd8c80a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7acd713370>
                     └ <function get_request_handler.<locals>.app at 0x7f7acd8bb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7ad5aaf130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=No...
                 │                 │         └ <function get_resources at 0x7f7acdb3a950>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f7acd8c8160>
                 └ <function run_in_threadpool at 0x7f7ad640add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f7acdb3a950>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f7acd71e040>
                 │     │         └ <function run_sync at 0x7f7ad64cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f7ad64cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceGet' object has no attribute 'repo_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f7acd...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f7acd71d940>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f7acd71dec0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, package_...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f7acd7132e0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f7acdf7e680>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f7ace643d90>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, package_...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f7acd7132e0>
                │    │               └ <function FileRepository.search_resources at 0x7f7acdf7e290>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f7acdb22ef0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f7ace643d90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 85, in search_resources
    if filters.repo_id:
       └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, package_...

AttributeError: 'ResourceGet' object has no attribute 'repo_id'
INFO     2024-01-30 14:14:28.279 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37522 - "GET /rms/v1.0/resources/?package_repo_id=2498ff56-54ae-56c1-8191-697efea8d99e HTTP/1.1" 500
INFO     2024-01-30 14:14:48.512 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:14:48.614 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:14:48.614 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:14:48.615 request id: app - uvicorn.server:serve - Finished server process [722049]
INFO     2024-01-30 14:14:49.465 request id: app - uvicorn.server:serve - Started server process [722212]
INFO     2024-01-30 14:14:49.467 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:14:49.468 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-01-30 14:14:53.339 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f9b1ca04310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f9b1ca043a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9b1de0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9b1df62950>
           └ <SpawnProcess name='SpawnProcess-18' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9b1df61fc0>
    └ <SpawnProcess name='SpawnProcess-18' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9b1de581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=717844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=717844 started>
    │    └ <function subprocess_started at 0x7f9b1d376440>
    └ <SpawnProcess name='SpawnProcess-18' parent=717844 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9b1de58310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9b1d375900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9b1de58310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9b1d7aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9b1d7aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9b1d7abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9b1ddfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f9b1829f640>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9b1829f640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9b1829f640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9b1829f640>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9b1d23c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9b1d23c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9b1de59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f9b1c5deb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9b1de59e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9b1846c280>
          └ <fastapi.applications.FastAPI object at 0x7f9b1c5deb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9b1849ba90>
                     │    └ <function error_handle_business at 0x7f9b1c46f5b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9b1846c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'ResourceGet' object has no attribute 'tag_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9b1828c0d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9b1846dfc0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9b1846c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9b1828c0d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9b184330d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9b1846dfc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9b1828c160>
                     │    │             └ <starlette.requests.Request object at 0x7f9b1849ae00>
                     │    └ <function process_middleware_common at 0x7f9b1c46f9a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9b184330d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9b1849ae00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9b1828c160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'ResourceGet' object has no attribute 'tag_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f9b1ca04a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f9b1c570770>
          │    │   │      └ <starlette.requests.Request object at 0x7f9b1849ae00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9b1859dfc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9b184330d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b1828d000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9b1859e0b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9b1859dfc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b1828d000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f9b1c45e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9b1859e0b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b1828d000>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f9b1c5ae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f9b184980a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b1828d000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b1849b310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9b1848f7f0>
          └ <fastapi.routing.APIRoute object at 0x7f9b184980a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9b1829f370>
                     └ <function get_request_handler.<locals>.app at 0x7f9b1848f760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9b1c5af130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=No...
                 │                 │         └ <function get_resources at 0x7f9b1854e950>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f9b18498160>
                 └ <function run_in_threadpool at 0x7f9b1cf0add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f9b1854e950>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f9b182a9fc0>
                 │     │         └ <function run_sync at 0x7f9b1cfcd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f9b1cfcc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'ResourceGet' object has no attribute 'tag_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9b18...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f9b1a5930c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f9b182a9cc0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f9b1829f2e0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f9b18a92680>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f9b197cfd90>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f9b1829f2e0>
                │    │               └ <function FileRepository.search_resources at 0x7f9b18a92290>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f9b18536ef0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f9b197cfd90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 87, in search_resources
    if filters.tag_id:
       └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...

AttributeError: 'ResourceGet' object has no attribute 'tag_id'
INFO     2024-01-30 14:14:53.357 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60078 - "GET /rms/v1.0/resources/?package_repo_id=2498ff56-54ae-56c1-8191-697efea8d99e HTTP/1.1" 500
INFO     2024-01-30 14:14:59.695 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:14:59.803 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:14:59.804 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:14:59.805 request id: app - uvicorn.server:serve - Finished server process [722212]
INFO     2024-01-30 14:15:00.663 request id: app - uvicorn.server:serve - Started server process [722295]
INFO     2024-01-30 14:15:00.665 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:15:00.665 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:15:01.927 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60084 - "GET /rms/v1.0/resources/?package_repo_id=2498ff56-54ae-56c1-8191-697efea8d99e HTTP/1.1" 200
INFO     2024-01-30 14:16:37.823 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36570 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 14:16:37.953 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36570 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 14:16:59.833 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 14:17:00.068 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMDgyMH0.CzZU6De2onIMMrb8DQndcWa9SmaltWLLRO4MObQCIyc","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxNzAyMH0.ipM3ZIbqIfSnbetGg7w2QNbDgs2a_jFLLWrHoEYBVUg"},"links":null,"relationships":null,"timestamp":"2024-01-30 14:15:00"}'}
INFO     2024-01-30 14:17:00.069 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36584 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 14:17:23.416 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37434 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-01-30 14:17:49.713 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56958 - "GET /rms/v1.0/resources/?id=c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-01-30 14:18:01.572 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48498 - "GET /rms/v1.0/resources/?name=Film HTTP/1.1" 200
INFO     2024-01-30 14:18:25.274 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36172 - "GET /rms/v1.0/resources/?version=2 HTTP/1.1" 200
INFO     2024-01-30 14:18:51.648 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43050 - "GET /rms/v1.0/resources/?stage_id=158deee7-c8b7-59b3-b050-d7b34231b006 HTTP/1.1" 200
INFO     2024-01-30 14:19:08.338 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54300 - "GET /rms/v1.0/resources/?status_id=8385412a-6a9b-5577-a57a-0d6c7171f08f HTTP/1.1" 200
INFO     2024-01-30 14:19:26.239 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51870 - "GET /rms/v1.0/resources/?platform_id=31efb758-1b0e-5317-9d50-dc599f929bd3 HTTP/1.1" 200
INFO     2024-01-30 14:19:27.123 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51870 - "GET /rms/v1.0/resources/?platform_id=31efb758-1b0e-5317-9d50-dc599f929bd3 HTTP/1.1" 200
INFO     2024-01-30 14:19:46.380 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48672 - "GET /rms/v1.0/resources/?product_type_id=cda764ee-1a2a-53e4-98d6-85d72986a01d HTTP/1.1" 200
INFO     2024-01-30 14:20:13.224 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34188 - "GET /rms/v1.0/resources/?repo_id=2498ff56-54ae-56c1-8191-697efea8d99e HTTP/1.1" 200
ERROR    2024-01-30 14:22:15.009 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-01-30 14:22:15.011 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56806 - "GET /rms/v1.0/resources/?repo_id=fd02b16b-886c-5b4e-a253-d1dd6c91d46b HTTP/1.1" 400
ERROR    2024-01-30 14:22:39.036 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f076b062c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f076a033010>
    └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'repo_id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'tag_id_1': '10d37537-a777-5443-9b4b-7547a71d89e7\t'}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f07688e53f0; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "10d37537-a777-5443-9b4b-7547a71d89e7	"
LINE 3: ...e-a253-d1dd6c91d46b'::UUID AND resources.tag_id = '10d37537-...
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f07724c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f077265e950>
           └ <SpawnProcess name='SpawnProcess-19' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f077265dfc0>
    └ <SpawnProcess name='SpawnProcess-19' parent=717844 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f077250c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=717844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=717844 started>
    │    └ <function subprocess_started at 0x7f0771996440>
    └ <SpawnProcess name='SpawnProcess-19' parent=717844 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f077250c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0771995900>
    │    │                  └ <uvicorn.server.Server object at 0x7f077250c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f0771dae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f0771dae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f0771dafeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f07724b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0763fa8280>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0763fa8280>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0763fa8280>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0763fa8280>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0771890550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f07718905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f077250de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f0770c4eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f077250de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f07689f4280>
          └ <fastapi.applications.FastAPI object at 0x7f0770c4eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0763fa8a90>
                     │    └ <function error_handle_business at 0x7f0770ae35b0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f07689f4280>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "10d37537-a777-5443-9b4b-7547a71d8...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0763f42290>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f07689f5fc0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f07689f4280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0763f42290>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f07689bb0d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f07689f5fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0763f42050>
                     │    │             └ <starlette.requests.Request object at 0x7f0763f3e9e0>
                     │    └ <function process_middleware_common at 0x7f0770ae39a0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f07689bb0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0763f3e9e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0763f42050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "10d37537-a777-5443-9b4b-7547a71d8...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f077106ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f0770be09f0>
          │    │   │      └ <starlette.requests.Request object at 0x7f0763f3e9e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0768ce5fc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f07689bb0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0763f40af0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0768ce60b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0768ce5fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0763f40af0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f0770ad22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0768ce60b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0763f40af0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f0770c1e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f0768a200a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0763f40af0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0763fa8b80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0768a177f0>
          └ <fastapi.routing.APIRoute object at 0x7f0768a200a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0763fa8250>
                     └ <function get_request_handler.<locals>.app at 0x7f0768a17760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f0770c1f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=No...
                 │                 │         └ <function get_resources at 0x7f0768c96950>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f0768a20160>
                 └ <function run_in_threadpool at 0x7f077156add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f0768c96950>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f0768a38800>
                 │     │         └ <function run_sync at 0x7f077162d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f077162c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "10d375...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f0763...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f0763f3bf00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f0763fb9b00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f0763fc0a60>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f07690ee680>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f0769de3d90>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f0763fc0a60>
                │    │               └ <function FileRepository.search_resources at 0x7f07690ee290>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f0768c7eef0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f0769de3d90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 89, in search_resources
    resources = query.all()
                │     └ <function Query.all at 0x7f076ae79ab0>
                └ <sqlalchemy.orm.query.Query object at 0x7f0763fc1720>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f076ae7a200>
           └ <sqlalchemy.orm.query.Query object at 0x7f0763fc1720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f076aef7760>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f0763fc0a60>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f0763fc1720>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f076aef76d0>
           └ <sqlalchemy.orm.session.Session object at 0x7f0763fc0a60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f076afaf880>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f076b1cff40>
             └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f0763fc1750>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f076b1d4280>
           └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f076b1d4430>
          └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f076b1d44c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f076b1d4700>
    └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "10d37537-a777-5443-9b4b-7547a71d89e7\t"\nLINE 3: ...e-a253-d1...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "10d3753...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "10d37537-a777-5443-9b4b-7547a71d8...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f076b062c20>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f076a033010>
    └ <sqlalchemy.engine.base.Connection object at 0x7f0763fc0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'repo_id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'tag_id_1': '10d37537-a777-5443-9b4b-7547a71d89e7\t'}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f07688e53f0; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "10d37537-a777-5443-9b4b-7547a71d89e7	"
LINE 3: ...e-a253-d1dd6c91d46b'::UUID AND resources.tag_id = '10d37537-...
                                                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.is_deleted IS false AND resources.repo_id = %(repo_id_1)s::UUID AND resources.tag_id = %(tag_id_1)s::UUID]
[parameters: {'repo_id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'tag_id_1': '10d37537-a777-5443-9b4b-7547a71d89e7\t'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-01-30 14:22:39.056 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37944 - "GET /rms/v1.0/resources/?repo_id=fd02b16b-886c-5b4e-a253-d1dd6c91d46b&tag_id=10d37537-a777-5443-9b4b-7547a71d89e7%09 HTTP/1.1" 500
ERROR    2024-01-30 14:22:54.897 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-01-30 14:22:54.898 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55978 - "GET /rms/v1.0/resources/?tag_id=10d37537-a777-5443-9b4b-7547a71d89e7 HTTP/1.1" 400
ERROR    2024-01-30 14:24:51.100 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-01-30 14:24:51.101 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43950 - "GET /rms/v1.0/resources/?tag_id=10d37537-a777-5443-9b4b-7547a71d89e7 HTTP/1.1" 400
INFO     2024-01-30 14:50:18.033 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 14:50:18.134 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 14:50:18.135 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 14:50:18.136 request id: app - uvicorn.server:serve - Finished server process [722295]
INFO     2024-01-30 14:50:27.138 request id: app - uvicorn.server:serve - Started server process [735262]
INFO     2024-01-30 14:50:27.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 14:50:27.140 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 14:50:43.118 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60644 - "GET / HTTP/1.1" 404
INFO     2024-01-30 14:50:50.970 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60654 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 14:50:51.093 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60654 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 14:51:46.024 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Admin@123'}}
ERROR    2024-01-30 14:51:46.291 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Incorrect Password
None
INFO     2024-01-30 14:51:46.292 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37720 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-01-30 14:52:26.822 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 14:52:27.059 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMjk0N30.xnVDzfQ6sU8o3fW8RPrNIot2DqItoohphWWSWvcrKx0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxOTE0N30.C-x8kdrzKA7CuWhEAgmSuQ-vkwK-VNZdoKXE1Qf7A_U"},"links":null,"relationships":null,"timestamp":"2024-01-30 14:50:26"}'}
INFO     2024-01-30 14:52:27.060 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35872 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 14:52:56.914 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMjk0N30.xnVDzfQ6sU8o3fW8RPrNIot2DqItoohphWWSWvcrKx0', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxOTE0N30.C-x8kdrzKA7CuWhEAgmSuQ-vkwK-VNZdoKXE1Qf7A_U'}}
INFO     2024-01-30 14:52:56.921 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMjk3Nn0.JNIbf6SktpssWfyo2HYqWTiPzh8XnsYNEWimlmQQ4mA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxOTE3Nn0.3nhJ_3sjBHWRDG609XbvfCwj7yVQJSC5Wvgq7yl5pgQ"},"links":null,"relationships":null,"timestamp":"2024-01-30 14:50:26"}'}
INFO     2024-01-30 14:52:56.922 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39548 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
INFO     2024-01-30 14:53:05.665 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMjk0N30.xnVDzfQ6sU8o3fW8RPrNIot2DqItoohphWWSWvcrKx0'}}
INFO     2024-01-30 14:53:05.679 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-01-30 14:50:26"}'}
INFO     2024-01-30 14:53:05.680 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54674 - "POST /rms/v1.0/logout HTTP/1.1" 200
ERROR    2024-01-30 14:53:17.772 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Blacklisted Token
None
INFO     2024-01-30 14:53:17.773 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42782 - "GET /rms/v1.0/resources/ HTTP/1.1" 400
INFO     2024-01-30 14:53:24.804 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51408 - "GET /docs HTTP/1.1" 200
INFO     2024-01-30 14:53:24.930 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51408 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-01-30 14:54:55.597 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-01-30 14:54:55.828 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYwMzA5NX0.0ew21Gwqd7K6m_Se-yn3pFTQCkPZp9NKeJ0GMsvqD0E","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjYxOTI5NX0.BOXHKr_Foejh4FpJ88q1sKCnyM8cHQWKKyxUIMNyIfQ"},"links":null,"relationships":null,"timestamp":"2024-01-30 14:50:26"}'}
INFO     2024-01-30 14:54:55.829 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60330 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-01-30 14:55:18.769 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34732 - "GET /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-01-30 14:55:52.596 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42238 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 200
INFO     2024-01-30 14:56:12.003 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52046 - "POST /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-01-30 14:57:23.741 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46410 - "GET /rms/v1.0/resource_stages/%7Bresource_id%7D?resource_stage_id=f6ac4c90-5d2e-535a-a031-81dadddf837a HTTP/1.1" 200
INFO     2024-01-30 14:57:33.863 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58844 - "DELETE /rms/v1.0/resource_stages/f6ac4c90-5d2e-535a-a031-81dadddf837a HTTP/1.1" 200
INFO     2024-01-30 14:58:06.716 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38354 - "GET /rms/v1.0/resources/c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-01-30 14:58:22.567 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51106 - "GET /rms/v1.0/resources/?version=2 HTTP/1.1" 200
INFO     2024-01-30 14:58:52.159 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41008 - "GET /rms/v1.0/resources/?name=TTA3&version=2 HTTP/1.1" 200
ERROR    2024-01-30 14:58:57.584 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-01-30 14:58:57.585 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50214 - "GET /rms/v1.0/resources/?name=TTA3&version=6 HTTP/1.1" 400
INFO     2024-01-30 15:07:00.530 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 15:07:00.632 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 15:07:00.633 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 15:07:00.634 request id: app - uvicorn.server:serve - Finished server process [735262]
INFO     2024-01-30 15:07:01.568 request id: app - uvicorn.server:serve - Started server process [741696]
INFO     2024-01-30 15:07:01.569 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 15:07:01.570 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 15:23:49.401 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 15:23:49.503 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 15:23:49.503 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 15:23:49.504 request id: app - uvicorn.server:serve - Finished server process [741696]
INFO     2024-01-30 15:23:50.311 request id: app - uvicorn.server:serve - Started server process [747369]
INFO     2024-01-30 15:23:50.313 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 15:23:50.313 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 15:41:58.781 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 15:41:58.883 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 15:41:58.884 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 15:41:58.884 request id: app - uvicorn.server:serve - Finished server process [747369]
INFO     2024-01-30 17:17:50.871 request id: app - uvicorn.server:serve - Started server process [794173]
INFO     2024-01-30 17:17:50.872 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 17:17:50.873 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 17:24:23.236 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 17:24:23.337 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 17:24:23.338 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 17:24:23.339 request id: app - uvicorn.server:serve - Finished server process [794173]
INFO     2024-01-30 17:24:25.435 request id: app - uvicorn.server:serve - Started server process [797193]
INFO     2024-01-30 17:24:25.436 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-01-30 17:24:25.437 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-01-30 17:24:31.854 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-01-30 17:24:31.956 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-01-30 17:24:31.957 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-01-30 17:24:31.957 request id: app - uvicorn.server:serve - Finished server process [797193]
INFO     2024-02-02 09:13:22.779 request id: app - uvicorn.server:serve - Started server process [2137804]
INFO     2024-02-02 09:13:22.780 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:13:22.781 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:13:36.917 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:13:38.741 request id: app - uvicorn.server:serve - Started server process [2137956]
INFO     2024-02-02 09:13:38.742 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:13:38.743 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:13:39.574 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43126 - "GET / HTTP/1.1" 404
INFO     2024-02-02 09:13:42.012 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43126 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 09:13:42.075 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43126 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-02 09:13:42.278 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43126 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 09:13:44.181 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43126 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 09:13:44.354 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43126 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 09:14:15.866 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 09:14:16.137 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0MTg1Nn0.XP48MwNZuk_18Lofv0aafbkzHkfUtgDKXL93wOwx9UM","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1ODA1Nn0.UfluaR1jOg6MAKJARsM89vsLyZtUR0Ms9B5FLGlt0fE"},"links":null,"relationships":null,"timestamp":"2024-02-02 09:13:38"}'}
INFO     2024-02-02 09:14:16.138 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43142 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 09:14:35.249 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fbbaa74a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fbba9716f50>
    └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fbba2fb24d0; closed: -1>

psycopg2.errors.UndefinedColumn: column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fbbadb0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fbbadc5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2137954 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fbbadc5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2137954 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fbbadb541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2137954 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2137954 started>
    │    └ <function subprocess_started at 0x7fbbad01e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2137954 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fbbadb54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fbbad01d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fbbadb54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fbbad3a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbbad3a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbbad3a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbbadaf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fbba2b03550>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fbba2b03550>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fbba2b03550>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fbba2b03550>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fbbaced8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fbbaced85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbbadb55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fbbac27ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbbadb55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbba2f8d720>
          └ <fastapi.applications.FastAPI object at 0x7fbbac27ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fbba2b02170>
                     │    └ <function error_handle_business at 0x7fbbac10b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbba2f8d720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbba2b16680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbba2f8c4c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbba2f8d720>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbba2b16680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbba2f5e8f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbba2f8c4c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbba2b16320>
                     │    │             └ <starlette.requests.Request object at 0x7fbba2b03820>
                     │    └ <function process_middleware_common at 0x7fbbac10b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbba2f5e8f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fbba2b03820>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbba2b16320>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fbbac6a0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fbbac20c630>
          │    │   │      └ <starlette.requests.Request object at 0x7fbba2b03820>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbba3bb9810>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbba2f5e8f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbba2238b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbba3bb9900>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbba3bb9810>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbba2238b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fbbac2fa2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbba3bb9900>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbba2238b80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fbbac24a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fbba2f8f8b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbba2238b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbba2b021d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fbba2fa6560>
          └ <fastapi.routing.APIRoute object at 0x7fbba2f8f8b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fbba2259540>
                     └ <function get_request_handler.<locals>.app at 0x7fbba2fa64d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fbbac24b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=No...
                 │                 │         └ <function get_resources at 0x7fbba3b696c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fbba2f8f970>
                 └ <function run_in_threadpool at 0x7fbbacba6dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7fbba3b696c0>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fbba2fd4680>
                 │     │         └ <function run_sync at 0x7fbbacc69090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fbbacc68820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not ex...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fbba2...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fbba2fd4800>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fbbaa4c3080>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7fbba2259240>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7fbba81c5360>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7fbba90f36a0>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7fbba2259240>
                │    │               └ <function FileRepository.search_resources at 0x7fbba81c4f70>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7fbba3b56740>
                └ <app.src.services.resource_service.ResourceService object at 0x7fbba90f36a0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 89, in search_resources
    resources = query.all()
                │     └ <function Query.all at 0x7fbbaa5592d0>
                └ <sqlalchemy.orm.query.Query object at 0x7fbba2259bd0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7fbbaa559a20>
           └ <sqlalchemy.orm.query.Query object at 0x7fbba2259bd0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7fbbaa5d6f80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7fbba2259240>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7fbba2259bd0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7fbbaa5d6ef0>
           └ <sqlalchemy.orm.session.Session object at 0x7fbba2259240>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7fbbaa6970a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7fbbaa8b3760>
             └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7fbba2259090>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fbbaa8b3a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fbbaa8b3be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fbbaa8b3c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fbbaa8b3eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on, resources.created_at AS resources_created_...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fbbaa74a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fbba9716f50>
    └ <sqlalchemy.engine.base.Connection object at 0x7fbba2259720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fbba2fb24d0; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.resource_stage_id AS resources_resource_stage_id, resources.resource_status_id AS resources_resource_status_id, resources.resource_platform_id AS resources_resource_platform_id, resources.product_type_id AS resources_product_type_id, resources.package_repo_id AS resources_package_repo_id, resources.resource_tag_id AS resources_resource_tag_id, resources.user_id AS resources_user_id, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.is_deleted IS false]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 09:14:35.281 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33748 - "GET /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-02-02 09:16:06.917 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:16:34.745 request id: app - uvicorn.server:serve - Started server process [2139075]
INFO     2024-02-02 09:16:34.747 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:16:34.747 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 09:16:36.559 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f063e066440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f063d032f80>
    └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f063679d120; closed: -1>

psycopg2.errors.UndefinedColumn: column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f06414c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f064165e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2139073 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f064165dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2139073 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f064150c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2139073 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2139073 started>
    │    └ <function subprocess_started at 0x7f0640992440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2139073 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f064150c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0640991900>
    │    │                  └ <uvicorn.server.Server object at 0x7f064150c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f0640dae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f0640dae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f0640dafeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f06414b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f06367c32e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f06367c32e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f06367c32e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f06367c32e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0640890550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f06408905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f064150de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f063fc4eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f064150de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0636bad750>
          └ <fastapi.applications.FastAPI object at 0x7f063fc4eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0636be7310>
                     │    └ <function error_handle_business at 0x7f063fae3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0636bad750>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0636bc2dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0636bac4f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0636bad750>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0636bc2dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0636b7e920>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0636bac4f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0636bc2e60>
                     │    │             └ <starlette.requests.Request object at 0x7f0636be66b0>
                     │    └ <function process_middleware_common at 0x7f063fae31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0636b7e920>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0636be66b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0636bc2e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f064006ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f063fbe0590>
          │    │   │      └ <starlette.requests.Request object at 0x7f0636be66b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06377dd840>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0636b7e920>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0636bc3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06377dd930>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06377dd840>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0636bc3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f063fad22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06377dd930>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0636bc3d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f063fc1e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f0636baf8e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0636bc3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0636be6b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0636bc2560>
          └ <fastapi.routing.APIRoute object at 0x7f0636baf8e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0636722bf0>
                     └ <function get_request_handler.<locals>.app at 0x7f0636bc24d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f063fc1f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=No...
                 │                 │         └ <function get_resources at 0x7f06377896c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f0636baf9a0>
                 └ <function run_in_threadpool at 0x7f064056add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f06377896c0>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f0636731480>
                 │     │         └ <function run_sync at 0x7f064062d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f064062c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not ex...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f0636...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f06377d02c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f06367312c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f0636722bc0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f063c0e5360>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f063cddb6d0>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f0636722bc0>
                │    │               └ <function FileRepository.search_resources at 0x7f063c0e4f70>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f0637776770>
                └ <app.src.services.resource_service.ResourceService object at 0x7f063cddb6d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 89, in search_resources
    resources = query.all()
                │     └ <function Query.all at 0x7f063de792d0>
                └ <sqlalchemy.orm.query.Query object at 0x7f0635b103d0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f063de79a20>
           └ <sqlalchemy.orm.query.Query object at 0x7f0635b103d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f063def2f80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f0636722bc0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f0635b103d0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f063def2ef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f0636722bc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f063dfb30a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f063e1cf760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f06367c3a90>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f063e1cfa30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f063e1cfbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f063e1cfc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f063e1cfeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on, resources.created_at AS resources_created_...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f063e066440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f063d032f80>
    └ <sqlalchemy.engine.base.Connection object at 0x7f06367c33a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f063679d120; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.resource_stage_id AS resources_resource_stage_id, resources.resource_status_id AS resources_resource_status_id, resources.resource_platform_id AS resources_resource_platform_id, resources.product_type_id AS resources_product_type_id, resources.package_repo_id AS resources_package_repo_id, resources.resource_tag_id AS resources_resource_tag_id, resources.user_id AS resources_user_id, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.is_deleted IS false]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 09:16:36.578 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42706 - "GET /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-02-02 09:17:30.699 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:17:30.800 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:17:30.801 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:17:30.802 request id: app - uvicorn.server:serve - Finished server process [2139075]
INFO     2024-02-02 09:17:36.662 request id: app - uvicorn.server:serve - Started server process [2139486]
INFO     2024-02-02 09:17:36.664 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:17:36.665 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 09:18:50.425 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6f103685e0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6efb3f3e50>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6ef7bc46d0; closed: -1>

psycopg2.errors.UndefinedColumn: column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f6f18cf52d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f6f18d04040>
           └ <SpawnProcess name='SpawnProcess-1' parent=2139469 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6f18cbf640>
    └ <SpawnProcess name='SpawnProcess-1' parent=2139469 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6f18d12a40>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2139469 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2139469 started>
    │    └ <function subprocess_started at 0x7f6f18225d80>
    └ <SpawnProcess name='SpawnProcess-1' parent=2139469 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6f18d11ab0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6f18225090>
    │    │                  └ <uvicorn.server.Server object at 0x7f6f18d11ab0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6f18c3da20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6f18c3d990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6f18c3f490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6f18ece830>
    └ <Handle <TaskStepMethWrapper object at 0x7f6ef7c56fe0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6ef7c56fe0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6ef7c56fe0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6ef7c56fe0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6f182af400>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6f182af490>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6f18e4e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6f11db4f10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6f18e4e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6ef8495030>
          └ <fastapi.applications.FastAPI object at 0x7f6f11db4f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6ef84d6b00>
                     │    └ <function error_handle_business at 0x7f6f11dde9e0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6ef8495030>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6ef84b6440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6ef8494f40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6ef8495030>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6ef84b6440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6ef8bd21d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6ef8494f40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6ef84b64d0>
                     │    │             └ <starlette.requests.Request object at 0x7f6ef84d5ea0>
                     │    └ <function process_middleware_common at 0x7f6f11ddea70>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6ef8bd21d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6ef84d5ea0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6ef84b64d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6f121a4280>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6f11d39c60>
          │    │   │      └ <starlette.requests.Request object at 0x7f6ef84d5ea0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6ef8b310f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6ef8bd21d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ef84b7370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6ef8b31150>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6ef8b310f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ef84b7370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6f11bf9360>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6ef8b31150>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ef84b7370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6f11d7d7e0>
          └ <fastapi.routing.APIRoute object at 0x7f6ef8497100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ef84b7370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ef84d6380>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f6ef84b51b0>
          └ <fastapi.routing.APIRoute object at 0x7f6ef8497100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6ef85262f0>
                     └ <function get_request_handler.<locals>.app at 0x7f6ef84b5120>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6f11d7e440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=No...
                 │                 │         └ <function get_resources at 0x7f6ef93d3760>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f6ef84971c0>
                 └ <function run_in_threadpool at 0x7f6f1275a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f6ef93d3760>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f6ef8517700>
                 │     │         └ <function run_sync at 0x7f6f1211c670>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f6f1275bd90>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not ex...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f6ef8...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f6ef8b0e100>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f6ef8517740>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f6ef85261a0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f6ef9f1f250>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f6efb1d8670>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name=None, version=None, platform_id=None, product_type_id=None, repo_id=...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f6ef85261a0>
                │    │               └ <function FileRepository.search_resources at 0x7f6ef9f1ee60>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f6ef93c5f00>
                └ <app.src.services.resource_service.ResourceService object at 0x7f6efb1d8670>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 89, in search_resources
    resources = query.all()
                │     └ <function Query.all at 0x7f6f10167400>
                └ <sqlalchemy.orm.query.Query object at 0x7f6ef7c57cd0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f6f10167b50>
           └ <sqlalchemy.orm.query.Query object at 0x7f6ef7c57cd0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f6f101fd120>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f6ef85261a0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f6ef7c57cd0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f6f101fd090>
           └ <sqlalchemy.orm.session.Session object at 0x7f6ef85261a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f6f102ad240>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f6f104d1900>
             └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f6ef7284ca0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f6f104d1bd0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f6f104d1d80>
          └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f6f104d1e10>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f6f104d2050>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on, resources.created_at AS resources_created_...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6f103685e0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6efb3f3e50>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6ef7bddcc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6ef7bc46d0; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.resource_stage_id AS resources_resource_stage_id, resources.resource_status_id AS resources_resource_status_id, resources.resource_platform_id AS resources_resource_platform_id, resources.product_type_id AS resources_product_type_id, resources.package_repo_id AS resources_package_repo_id, resources.resource_tag_id AS resources_resource_tag_id, resources.user_id AS resources_user_id, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.is_deleted IS false]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 09:18:50.484 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57406 - "GET /rms/v1.0/resources/ HTTP/1.1" 500
INFO     2024-02-02 09:18:56.424 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:18:56.526 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:18:56.527 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:18:56.528 request id: app - uvicorn.server:serve - Finished server process [2139486]
INFO     2024-02-02 09:18:58.462 request id: app - uvicorn.server:serve - Started server process [2140290]
INFO     2024-02-02 09:18:58.463 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:18:58.463 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 09:19:13.342 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f88a9c66440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f88a8c32f50>
    └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'name_1': 'Film'}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f88a239d120; closed: -1>

psycopg2.errors.UndefinedColumn: column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f88ad0c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f88ad25e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2140288 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f88ad25dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2140288 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f88ad10c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2140288 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2140288 started>
    │    └ <function subprocess_started at 0x7f88ac592440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2140288 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f88ad10c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f88ac591900>
    │    │                  └ <uvicorn.server.Server object at 0x7f88ad10c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f88ac9ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f88ac9ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f88ac9afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f88ad0b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f88a23c3340>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f88a23c3340>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f88a23c3340>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f88a23c3340>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f88ac490550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f88ac4905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f88ad10de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f88ab84eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f88ad10de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88a27b1720>
          └ <fastapi.applications.FastAPI object at 0x7f88ab84eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f88a27e3310>
                     │    └ <function error_handle_business at 0x7f88ab6e3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88a27b1720>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f88a27c2dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f88a27b04c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88a27b1720>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f88a27c2dd0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88a277e8f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f88a27b04c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f88a27c2e60>
                     │    │             └ <starlette.requests.Request object at 0x7f88a27e2680>
                     │    └ <function process_middleware_common at 0x7f88ab6e31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88a277e8f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f88a27e2680>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f88a27c2e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f88abc6ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f88ab7e44a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f88a27e2680>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f88a33d9810>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88a277e8f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88a27c3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f88a33d9900>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f88a33d9810>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88a27c3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f88ab6d22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f88a33d9900>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88a27c3d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f88ab81e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f88a27b38b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88a27c3d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88a27e2b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f88a27c2560>
          └ <fastapi.routing.APIRoute object at 0x7f88a27b38b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f88a2322bf0>
                     └ <function get_request_handler.<locals>.app at 0x7f88a27c24d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f88ab81f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name='Film', version=None, platform_id=None, product_type_id=...
                 │                 │         └ <function get_resources at 0x7f88a33856c0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f88a27b3970>
                 └ <function run_in_threadpool at 0x7f88ac16add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f88a33856c0>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f88a2331d40>
                 │     │         └ <function run_sync at 0x7f88ac22d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f88ac22c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not ex...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f88a2...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f88a2331440>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f88a2331b00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 56, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name='Film', version=None, platform_id=None, product_type_id=None, repo_i...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f88a2322b60>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f88a3fe5360>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f88a89db6a0>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 67, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name='Film', version=None, platform_id=None, product_type_id=None, repo_i...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f88a2322b60>
                │    │               └ <function FileRepository.search_resources at 0x7f88a3fe4f70>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f88a3376740>
                └ <app.src.services.resource_service.ResourceService object at 0x7f88a89db6a0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 89, in search_resources
    resources = query.all()
                │     └ <function Query.all at 0x7f88a9a752d0>
                └ <sqlalchemy.orm.query.Query object at 0x7f88a17104f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f88a9a75a20>
           └ <sqlalchemy.orm.query.Query object at 0x7f88a17104f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f88a9af2f80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f88a2322b60>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f88a17104f0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f88a9af2ef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f88a2322b60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f88a9bb30a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f88a9dcf760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f88a17104c0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f88a9dcfa30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f88a9dcfbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f88a9dcfc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f88a9dcfeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on, resources.created_at AS resources_created_...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resources.resource_stage_id does not exist\nLINE 1: ...on...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist\nLINE 1: ...on, resourc...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f88a9c66440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f88a8c32f50>
    └ <sqlalchemy.engine.base.Connection object at 0x7f88a23c3400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'name_1': 'Film'}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f88a239d120; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resources.resource_stage_id does not exist
LINE 1: ...on, resources.created_at AS resources_created_at, resources....
                                                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.resource_stage_id AS resources_resource_stage_id, resources.resource_status_id AS resources_resource_status_id, resources.resource_platform_id AS resources_resource_platform_id, resources.product_type_id AS resources_product_type_id, resources.package_repo_id AS resources_package_repo_id, resources.resource_tag_id AS resources_resource_tag_id, resources.user_id AS resources_user_id, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.is_deleted IS false AND resources.name = %(name_1)s]
[parameters: {'name_1': 'Film'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 09:19:13.362 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42754 - "GET /rms/v1.0/resources/?name=Film HTTP/1.1" 500
INFO     2024-02-02 09:19:57.932 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:19:58.034 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:19:58.035 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:19:58.036 request id: app - uvicorn.server:serve - Finished server process [2140290]
INFO     2024-02-02 09:19:58.940 request id: app - uvicorn.server:serve - Started server process [2140660]
INFO     2024-02-02 09:19:58.942 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:19:58.942 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:19:59.244 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:19:59.345 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:19:59.346 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:19:59.346 request id: app - uvicorn.server:serve - Finished server process [2140660]
INFO     2024-02-02 09:20:01.544 request id: app - uvicorn.server:serve - Started server process [2140673]
INFO     2024-02-02 09:20:01.546 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:20:01.546 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:20:04.826 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37926 - "GET /rms/v1.0/resources/?name=Film HTTP/1.1" 200
INFO     2024-02-02 09:20:10.606 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37932 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-02 09:20:35.632 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:20:35.734 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:20:35.734 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:20:35.735 request id: app - uvicorn.server:serve - Finished server process [2140673]
INFO     2024-02-02 09:20:36.582 request id: app - uvicorn.server:serve - Started server process [2140913]
INFO     2024-02-02 09:20:36.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:20:36.584 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:20:41.195 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45398 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-02 09:21:08.268 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:21:08.370 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:21:08.370 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:21:08.371 request id: app - uvicorn.server:serve - Finished server process [2140913]
INFO     2024-02-02 09:50:49.584 request id: app - uvicorn.server:serve - Started server process [2152812]
INFO     2024-02-02 09:50:49.586 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:50:49.586 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:51:12.363 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35774 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 09:51:12.430 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35774 - "GET /static/swagger-ui.css HTTP/1.1" 304
INFO     2024-02-02 09:51:12.567 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35774 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 09:51:28.785 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:51:28.887 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:51:28.888 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:51:28.888 request id: app - uvicorn.server:serve - Finished server process [2152812]
INFO     2024-02-02 09:53:04.449 request id: app - uvicorn.server:serve - Started server process [2153662]
INFO     2024-02-02 09:53:04.451 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:53:04.451 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:53:07.223 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40510 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 09:53:07.440 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40510 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 09:53:19.454 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40524 - "GET /rms/v1.0/resource_tags HTTP/1.1" 403
INFO     2024-02-02 09:54:08.541 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 09:54:08.811 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDQ0OH0.JDPnwHY-5la-XWgW_e4RUJGjoccDrMvNJib1f4FQ49o"},"links":null,"relationships":null,"timestamp":"2024-02-02 09:53:04"}'}
INFO     2024-02-02 09:54:08.811 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55608 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 09:54:32.314 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedColumn: column resource_tags.update_at does not exist\nLINE 1: ...urce_tags.created_at AS resource_tags_created_at, resource_t...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "resource_tags.updated_at".\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 46, in get_all\n    data = session.query(self.model).filter(self.model.is_deleted.is_(False)).all()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all\n    return self._iter().all()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resource_tags.update_at does not exist\nLINE 1: ...urce_tags.created_at AS resource_tags_created_at, resource_t...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "resource_tags.updated_at".\n\n[SQL: SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_tags_created_at, resource_tags.update_at AS resource_tags_update_at, resource_tags.is_deleted AS resource_tags_is_deleted \nFROM resource_tags \nWHERE resource_tags.is_deleted IS false]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n'}
INFO     2024-02-02 09:54:32.315 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40308 - "GET /rms/v1.0/resource_tags HTTP/1.1" 500
INFO     2024-02-02 09:56:00.796 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:56:00.898 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:56:00.898 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:56:00.899 request id: app - uvicorn.server:serve - Finished server process [2153662]
INFO     2024-02-02 09:56:01.817 request id: app - uvicorn.server:serve - Started server process [2155162]
INFO     2024-02-02 09:56:01.818 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:56:01.819 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:56:10.612 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58994 - "GET /rms/v1.0/resource_tags HTTP/1.1" 200
INFO     2024-02-02 09:57:23.194 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDQ0OH0.JDPnwHY-5la-XWgW_e4RUJGjoccDrMvNJib1f4FQ49o'}}
ERROR    2024-02-02 09:57:23.200 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc7ffb4c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc7ffb4c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc800f0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc80105e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=2153494 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc80105dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=2153494 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc800f541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2153494 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2153494 started>
    │    └ <function subprocess_started at 0x7fc800492440>
    └ <SpawnProcess name='SpawnProcess-3' parent=2153494 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc800f54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc800491900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc800f54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc800d06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc800d063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc800d07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc800ef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc7f6b2f3a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc7f6b2f3a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc7f6b2f3a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc7f6b2f3a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc80035c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc80035c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc800f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc7ff736bc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc800f55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc7f6fbc370>
          └ <fastapi.applications.FastAPI object at 0x7fc7ff736bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc7f6b2ef20>
                     │    └ <function error_handle_business at 0x7fc7ff5c7250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc7f6fbc370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc7f6ffcd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc7f6fbc430>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc7f6fbc370>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '165', 'accept': 'application/json', 'authori...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc7f6ffcd30>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc7ff5f7760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc7f6fbc430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc7f6fbc430>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc7f6f91570>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc7f6fbc430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc7f6ffd240>
                     │    │             └ <starlette.requests.Request object at 0x7fc7f6bcb910>
                     │    └ <function process_middleware_common at 0x7fc7ff5c71c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc7f6f91570>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc7f6bcb910>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc7f6ffd240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'User' object is not subscriptable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc7ffb4ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc7ff6c8630>
          │    │   │      └ <starlette.requests.Request object at 0x7fc7f6bcb910>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc7f73f8460>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc7f6f91570>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7f6bda0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc7f73f8550>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc7f73f8460>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7f6bda0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc7ff5ba320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc7f73f8550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7f6bda0e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc7ff7064d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fc7f6fbc520>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc7f6bda0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc7f6709240>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc7f6fcad40>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fc7f6fbc520>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc7f670b3d0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fc7f6fcacb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fc7f670b3d0>
                               └ <function get_request_handler.<locals>.app at 0x7fc7f6fcac20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc7ff707130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'user_data': <app.src.models.user.User object at 0x7fc7f6709090>, 'refresh_token': RefreshToken(refresh_token='eyJhbGciOiJIU...
                 │                 │         └ <function refresh_access_token at 0x7fc7fc989d80>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc7f6fbc610>
                 └ <function run_in_threadpool at 0x7fc80004add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function refresh_access_token at 0x7fc7fc989d80>, user_data=<app.src.models.user.User object at 0x7fc7f67...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc7f6fc1780>
                 │     │         └ <function run_sync at 0x7fc80010d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc80010c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'User' object is not subscriptable")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fc7f6...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc7f6b36f40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc7f6b37000>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 41, in refresh_access_token
    if isinstance(user_data[0], User):
                  │             └ <class 'app.src.models.user.User'>
                  └ <app.src.models.user.User object at 0x7fc7f6709090>

TypeError: 'User' object is not subscriptable
INFO     2024-02-02 09:57:23.218 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56588 - "POST /rms/v1.0/refresh-token HTTP/1.1" 500
INFO     2024-02-02 09:58:09.240 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:58:09.341 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:58:09.342 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:58:09.343 request id: app - uvicorn.server:serve - Finished server process [2155162]
INFO     2024-02-02 09:58:10.206 request id: app - uvicorn.server:serve - Started server process [2156016]
INFO     2024-02-02 09:58:10.207 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:58:10.208 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:58:13.618 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:58:13.720 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:58:13.720 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:58:13.721 request id: app - uvicorn.server:serve - Finished server process [2156016]
INFO     2024-02-02 09:58:14.530 request id: app - uvicorn.server:serve - Started server process [2156143]
INFO     2024-02-02 09:58:14.531 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:58:14.532 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:58:31.474 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 09:58:31.576 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 09:58:31.577 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 09:58:31.578 request id: app - uvicorn.server:serve - Finished server process [2156143]
INFO     2024-02-02 09:58:32.487 request id: app - uvicorn.server:serve - Started server process [2156276]
INFO     2024-02-02 09:58:32.488 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 09:58:32.489 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 09:58:35.915 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDQ0OH0.JDPnwHY-5la-XWgW_e4RUJGjoccDrMvNJib1f4FQ49o'}}
INFO     2024-02-02 09:58:35.958 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDUxNX0.kSjsICeCgTLolzz9FVBRXnUt5G81nAI-wthO_Fl0hMQ","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDcxNX0.M45Hb5J_LRG2Y7HeKbD6t11T-C7SQhS-HPwo9rtlaLU"},"links":null,"relationships":null,"timestamp":"2024-02-02 09:58:32"}'}
INFO     2024-02-02 09:58:35.959 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48952 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
INFO     2024-02-02 09:59:10.967 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
ERROR    2024-02-02 09:59:10.973 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fbe486ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fbe486ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fbe49b0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fbe49c5e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=2153494 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fbe49c5dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=2153494 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fbe49b541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=2153494 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=2153494 started>
    │    └ <function subprocess_started at 0x7fbe49066440>
    └ <SpawnProcess name='SpawnProcess-6' parent=2153494 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fbe49b54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fbe49065900>
    │    │                  └ <uvicorn.server.Server object at 0x7fbe49b54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fbe498e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbe498e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbe498e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbe49af7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fbe3f31abc0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fbe3f31abc0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fbe3f31abc0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fbe3f31abc0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fbe48f24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fbe48f245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbe49b55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fbe482cabc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbe49b55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe3fbc8370>
          └ <fastapi.applications.FastAPI object at 0x7fbe482cabc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fbe3f73b460>
                     │    └ <function error_handle_business at 0x7fbe4815b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe3fbc8370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbe3f718ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe3fbc8430>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbe3fbc8370>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '0', 'accept': 'application/json', 'authoriza...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbe3f718ca0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fbe4818b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe3fbc8430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fbe3fbc8430>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe3fb9d570>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbe3fbc8430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbe3f7191b0>
                     │    │             └ <starlette.requests.Request object at 0x7fbe3fbfad40>
                     │    └ <function process_middleware_common at 0x7fbe4815b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe3fb9d570>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fbe3fbfad40>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbe3f7191b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fbe486eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fbe4825c680>
          │    │   │      └ <starlette.requests.Request object at 0x7fbe3fbfad40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbe3fb00460>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbe3fb9d570>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe3f7ea050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbe3fb00550>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbe3fb00460>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe3f7ea050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fbe4814e320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbe3fb00550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe3f7ea050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fbe4829a4d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fbe3fbc8a00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbe3f7ea050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbe3f318af0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fbe3fbd6e60>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fbe3fbc8a00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fbe3f318df0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fbe3fbd6dd0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fbe3f318df0>
                               └ <function get_request_handler.<locals>.app at 0x7fbe3fbd6d40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fbe4829b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fbe3f73a770>, 'user_token': (<app.src.models.user.User object at ...
                 │                 │         └ <function logout at 0x7fbe45591fc0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fbe3fbc8ac0>
                 └ <function run_in_threadpool at 0x7fbe48bf2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function logout at 0x7fbe45591fc0>, db_session=<sqlalchemy.orm.session.Session object at 0x7fbe3f73a770>,...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fbe440a1b00>
                 │     │         └ <function run_sync at 0x7fbe48cb5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fbe48cb4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fbe3f...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fbe3f308180>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fbe3f308040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 60, in logout
    auth_service.logout(db_session, user_token[1])
    │            │      │           └ (<app.src.models.user.User object at 0x7fbe3f319d80>, HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJI...
    │            │      └ <sqlalchemy.orm.session.Session object at 0x7fbe3f73a770>
    │            └ <function AuthService.logout at 0x7fbe457fdb40>
    └ <app.src.services.auth_service.AuthService object at 0x7fbe455778b0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/auth_service.py", line 43, in logout
    token_data = jwt_decode_token(token)
                 │                └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                 └ <function jwt_decode_token at 0x7fbe457fd750>

  File "/home/rb103/Downloads/resource-management/app/../app/src/utils/security.py", line 35, in jwt_decode_token
    payload: Dict[str, Any] = jwt.decode(access_token, SECRET_KEY, algorithms=ALGORITHM)
             │         │      │   │      │             │                      └ 'HS256'
             │         │      │   │      │             └ 'Rabiloo@123'
             │         │      │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
             │         │      │   └ <function decode at 0x7fbe457fd000>
             │         │      └ <module 'jose.jwt' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py'>
             │         └ typing.Any
             └ typing.Dict

  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
              │   │      │      │    │                  └ True
              │   │      │      │    └ 'HS256'
              │   │      │      └ 'Rabiloo@123'
              │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
              │   └ <function verify at 0x7fbe457e2f80>
              └ <module 'jose.jws' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                │     └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                                                └ <function _load at 0x7fbe457fcdc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...

AttributeError: 'HTTPAuthorizationCredentials' object has no attribute 'rsplit'
INFO     2024-02-02 09:59:10.989 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44504 - "POST /rms/v1.0/logout HTTP/1.1" 500
INFO     2024-02-02 10:01:51.301 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:01:54.018 request id: app - uvicorn.server:serve - Started server process [2157484]
INFO     2024-02-02 10:01:54.020 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:01:54.020 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:01:58.644 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
INFO     2024-02-02 10:03:04.554 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:03:04.656 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-02 10:03:24.819 request id: app - uvicorn.server:serve - Finished server process [2157484]
INFO     2024-02-02 10:03:27.582 request id: app - uvicorn.server:serve - Started server process [2158204]
INFO     2024-02-02 10:03:27.585 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:03:27.586 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:03:37.518 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:03:37.620 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:03:37.621 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:03:37.622 request id: app - uvicorn.server:serve - Finished server process [2158204]
INFO     2024-02-02 10:03:40.366 request id: app - uvicorn.server:serve - Started server process [2158307]
INFO     2024-02-02 10:03:40.369 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:03:40.370 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:03:42.367 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
INFO     2024-02-02 10:04:06.761 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:04:06.863 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-02 10:04:09.621 request id: app - uvicorn.server:serve - Started server process [2158537]
INFO     2024-02-02 10:04:09.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:04:09.624 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:04:11.415 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
INFO     2024-02-02 10:04:28.192 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:04:28.294 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-02 10:05:03.862 request id: app - uvicorn.server:serve - Started server process [2158951]
INFO     2024-02-02 10:05:03.864 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:05:03.864 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:05:06.957 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
ERROR    2024-02-02 10:05:07.002 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f9783ee4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f9783ee43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f978530bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f978545e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2158949 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f978545dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2158949 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f97853541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2158949 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2158949 started>
    │    └ <function subprocess_started at 0x7f978485e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2158949 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9785354310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f978485d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9785354310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f97850e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f97850e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f97850e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f97852f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f977b3fe590>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f977b3fe590>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f977b3fe590>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f977b3fe590>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f978471c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f978471c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9785355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f9783ac6bc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9785355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f977b3cc3d0>
          └ <fastapi.applications.FastAPI object at 0x7f9783ac6bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f977b3ff850>
                     │    └ <function error_handle_business at 0x7f9783957250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f977b3cc3d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f977af1c1f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f977b3cc490>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f977b3cc3d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '0', 'accept': 'application/json', 'authoriza...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f977af1c1f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f9783987760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f977b3cc490>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f977b3cc490>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f977b3a15d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f977b3cc490>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f977af1c280>
                     │    │             └ <starlette.requests.Request object at 0x7f977b3feb60>
                     │    └ <function process_middleware_common at 0x7f97839571c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f977b3a15d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f977b3feb60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f977af1c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f9783ee4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f9783a58860>
          │    │   │      └ <starlette.requests.Request object at 0x7f977b3feb60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f977b3084c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f977b3a15d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f977af1d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f977b3085b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f977b3084c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f977af1d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f978394a320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f977b3085b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f977af1d120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f9783a964d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f977b3cca60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f977af1d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f977b3ff190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f977b3dadd0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f977b3cca60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f977af3f100>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f977b3dad40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f977af3f100>
                               └ <function get_request_handler.<locals>.app at 0x7f977b3dacb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9783a97130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f977af3e7d0>, 'user_token': (<app.src.models.user.User object at ...
                 │                 │         └ <function logout at 0x7f9780d95f30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f977b3ccb20>
                 └ <function run_in_threadpool at 0x7f97843eadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function logout at 0x7f9780d95f30>, db_session=<sqlalchemy.orm.session.Session object at 0x7f977af3e7d0>,...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f977b7b6c80>
                 │     │         └ <function run_sync at 0x7f97844ad090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f97844ac820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9783...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f977af0f040>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f977af0d400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 60, in logout
    auth_service.logout(db_session, user_token[1])
    │            │      │           └ (<app.src.models.user.User object at 0x7f977ab18e20>, HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJI...
    │            │      └ <sqlalchemy.orm.session.Session object at 0x7f977af3e7d0>
    │            └ <function AuthService.logout at 0x7f9780e01a20>
    └ <app.src.services.auth_service.AuthService object at 0x7f9780d7b910>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/auth_service.py", line 43, in logout
    token_data = jwt_decode_token(token)
                 │                └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                 └ <function jwt_decode_token at 0x7f9780e01630>

  File "/home/rb103/Downloads/resource-management/app/../app/src/utils/security.py", line 35, in jwt_decode_token
    payload: Dict[str, Any] = jwt.decode(access_token, SECRET_KEY, algorithms=ALGORITHM)
             │         │      │   │      │             │                      └ 'HS256'
             │         │      │   │      │             └ 'Rabiloo@123'
             │         │      │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
             │         │      │   └ <function decode at 0x7f9780e00ee0>
             │         │      └ <module 'jose.jwt' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py'>
             │         └ typing.Any
             └ typing.Dict

  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
              │   │      │      │    │                  └ True
              │   │      │      │    └ 'HS256'
              │   │      │      └ 'Rabiloo@123'
              │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
              │   └ <function verify at 0x7f9780fe6e60>
              └ <module 'jose.jws' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                │     └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                                                └ <function _load at 0x7f9780e00ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...

AttributeError: 'HTTPAuthorizationCredentials' object has no attribute 'rsplit'
INFO     2024-02-02 10:05:07.025 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42456 - "POST /rms/v1.0/logout HTTP/1.1" 500
INFO     2024-02-02 10:05:17.814 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:07:09.127 request id: app - uvicorn.server:serve - Started server process [2159695]
INFO     2024-02-02 10:07:09.129 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:07:09.130 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:07:13.293 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
INFO     2024-02-02 10:09:42.822 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:09:42.924 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-02 10:09:51.711 request id: app - uvicorn.server:serve - Started server process [2160911]
INFO     2024-02-02 10:09:51.713 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:09:51.713 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:09:55.152 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
ERROR    2024-02-02 10:09:55.193 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f9eb0bc8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f9eb0bc83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9eb200bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9eb215e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2160909 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9eb215dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2160909 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9eb20541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2160909 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2160909 started>
    │    └ <function subprocess_started at 0x7f9eb1546440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2160909 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9eb2054310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9eb1545900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9eb2054310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9eb198a440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9eb198a3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9eb198beb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9eb1ff7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f9ea77f22c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9ea77f22c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9ea77f22c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9ea77f22c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9eb1404550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9eb14045e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9eb2055e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f9eb07a6bc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9eb2055e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9ea77c4370>
          └ <fastapi.applications.FastAPI object at 0x7f9eb07a6bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9ea77f37f0>
                     │    └ <function error_handle_business at 0x7f9eb0637250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9ea77c4370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9ea73141f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9ea77c4430>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9ea77c4370>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '0', 'accept': 'application/json', 'authoriza...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9ea73141f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f9eb0667760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9ea77c4430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f9ea77c4430>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9ea7799570>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9ea77c4430>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9ea7314280>
                     │    │             └ <starlette.requests.Request object at 0x7f9ea77f2b00>
                     │    └ <function process_middleware_common at 0x7f9eb06371c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9ea7799570>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9ea77f2b00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9ea7314280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f9eb0bc8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f9eb073c450>
          │    │   │      └ <starlette.requests.Request object at 0x7f9ea77f2b00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9ea7700460>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9ea7799570>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9ea7315120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9ea7700550>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9ea7700460>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9ea7315120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f9eb062a320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9ea7700550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9ea7315120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f9eb07764d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f9ea77c4a00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9ea7315120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9ea77f3130>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9ea77d2dd0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7f9ea77c4a00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9ea73370a0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7f9ea77d2d40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7f9ea73370a0>
                               └ <function get_request_handler.<locals>.app at 0x7f9ea77d2cb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9eb0777130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f9ea7336740>, 'user_token': (<app.src.models.user.User object at ...
                 │                 │         └ <function logout at 0x7f9ead9e9f30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f9ea77c4ac0>
                 └ <function run_in_threadpool at 0x7f9eb10d2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function logout at 0x7f9ead9e9f30>, db_session=<sqlalchemy.orm.session.Session object at 0x7f9ea7336740>,...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f9ea7faff40>
                 │     │         └ <function run_sync at 0x7f9eb1195090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f9eb1194820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9ea7...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f9ea7309e00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f9ea77cb280>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 60, in logout
    auth_service.logout(db_session, user_token[1])
    │            │      │           └ (<app.src.models.user.User object at 0x7f9ea6716140>, HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJI...
    │            │      └ <sqlalchemy.orm.session.Session object at 0x7f9ea7336740>
    │            └ <function AuthService.logout at 0x7f9eadc4da20>
    └ <app.src.services.auth_service.AuthService object at 0x7f9ead9cf8b0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/auth_service.py", line 43, in logout
    token_data = jwt_decode_token(token)
                 │                └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                 └ <function jwt_decode_token at 0x7f9eadc4d630>

  File "/home/rb103/Downloads/resource-management/app/../app/src/utils/security.py", line 35, in jwt_decode_token
    payload: Dict[str, Any] = jwt.decode(access_token, SECRET_KEY, algorithms=ALGORITHM)
             │         │      │   │      │             │                      └ 'HS256'
             │         │      │   │      │             └ 'Rabiloo@123'
             │         │      │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
             │         │      │   └ <function decode at 0x7f9eadc4cee0>
             │         │      └ <module 'jose.jwt' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py'>
             │         └ typing.Any
             └ typing.Dict

  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
              │   │      │      │    │                  └ True
              │   │      │      │    └ 'HS256'
              │   │      │      └ 'Rabiloo@123'
              │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
              │   └ <function verify at 0x7f9eadc32e60>
              └ <module 'jose.jws' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                │     └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                                                └ <function _load at 0x7f9eadc4cca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...

AttributeError: 'HTTPAuthorizationCredentials' object has no attribute 'rsplit'
INFO     2024-02-02 10:09:55.210 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46268 - "POST /rms/v1.0/logout HTTP/1.1" 500
INFO     2024-02-02 10:14:51.272 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:14:51.374 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:14:51.374 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:14:51.375 request id: app - uvicorn.server:serve - Finished server process [2160911]
INFO     2024-02-02 10:14:53.715 request id: app - uvicorn.server:serve - Started server process [2162589]
INFO     2024-02-02 10:14:53.717 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:14:53.718 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:15:00.892 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
ERROR    2024-02-02 10:16:15.434 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc3fd3bb9a0>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc3fd3bba30>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fc3ffef91b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fc3ffec3eb0>
           └ <SpawnProcess name='SpawnProcess-1' parent=2162565 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc3ffec3520>
    └ <SpawnProcess name='SpawnProcess-1' parent=2162565 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc3fff16dd0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2162565 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2162565 started>
    │    └ <function subprocess_started at 0x7fc3fdc3dc60>
    └ <SpawnProcess name='SpawnProcess-1' parent=2162565 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc3fff15ab0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc3fdc3cf70>
    │    │                  └ <uvicorn.server.Server object at 0x7fc3fff15ab0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc3ffe41a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc3ffe41990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc3ffe43490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc4000d2830>
    └ <Handle <TaskStepMethWrapper object at 0x7fc3fce59720>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc3fce59720>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc3fce59720>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc3fce59720>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc3fdcc72e0>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc3fdcc7370>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc400053c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc3fcfd5030>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc400053c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3dff220e0>
          └ <fastapi.applications.FastAPI object at 0x7fc3fcfd5030>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc3dffda980>
                     │    └ <function error_handle_business at 0x7fc3fce0a8c0>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3dff220e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc3dffb01f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3dff23d90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3dff220e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '0', 'accept': 'application/json', 'authoriza...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc3dffb01f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc3fce47130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3dff23d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc3dff23d90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3dff20f10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3dff23d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc3dffb0280>
                     │    │             └ <starlette.requests.Request object at 0x7fc3dff8e410>
                     │    └ <function process_middleware_common at 0x7fc3fce0a950>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3dff20f10>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc3dff8e410>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc3dffb0280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc3fd3d0160>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc3fcf66c00>
          │    │   │      └ <starlette.requests.Request object at 0x7fc3dff8e410>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc3e4553e20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3dff20f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3dffb1120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc3e4553e80>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc3e4553e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3dffb1120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc3fce15480>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc3e4553e80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3dffb1120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc3fcfa16c0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fc3dff70340>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3dffb1120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3dff8ea40>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc3dff663b0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fc3dff70340>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc3dffda8c0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fc3dff66320>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fc3dffda8c0>
                               └ <function get_request_handler.<locals>.app at 0x7fc3dff66290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc3fcfa2320>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fc3dffd9f60>, 'user_token': (<app.src.models.user.User object at ...
                 │                 │         └ <function logout at 0x7fc3e63f9240>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc3dff70400>
                 └ <function run_in_threadpool at 0x7fc3fda1a560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function logout at 0x7fc3e63f9240>, db_session=<sqlalchemy.orm.session.Session object at 0x7fc3dffd9f60>,...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc3dffcd1c0>
                 │     │         └ <function run_sync at 0x7fc3fd348550>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc3fda1bc70>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'HTTPAuthorizationCredentials' object has no attribute 'rsplit'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fc3df...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc3dffe6340>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc3dff9a900>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/auth_controller.py", line 60, in logout
    auth_service.logout(db_session, user_token[1])
    │            │      │           └ (<app.src.models.user.User object at 0x7fc3dfbf44f0>, HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJI...
    │            │      └ <sqlalchemy.orm.session.Session object at 0x7fc3dffd9f60>
    │            └ <function AuthService.logout at 0x7fc3e6448700>
    └ <app.src.services.auth_service.AuthService object at 0x7fc3e63f4850>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/auth_service.py", line 43, in logout
    token_data = jwt_decode_token(token)
                 │                └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                 └ <function jwt_decode_token at 0x7fc3e6448310>

  File "/home/rb103/Downloads/resource-management/app/../app/src/utils/security.py", line 35, in jwt_decode_token
    payload: Dict[str, Any] = jwt.decode(access_token, SECRET_KEY, algorithms=ALGORITHM)
             │         │      │   │      │             │                      └ 'HS256'
             │         │      │   │      │             └ 'Rabiloo@123'
             │         │      │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
             │         │      │   └ <function decode at 0x7fc3e6437b50>
             │         │      └ <module 'jose.jwt' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py'>
             │         └ typing.Any
             └ typing.Dict

  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
              │   │      │      │    │                  └ True
              │   │      │      │    └ 'HS256'
              │   │      │      └ 'Rabiloo@123'
              │   │      └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
              │   └ <function verify at 0x7fc3e6435b40>
              └ <module 'jose.jws' from '/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                │     └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...
                                                └ <function _load at 0x7fc3e6437910>
  File "/home/rb103/.local/lib/python3.10/site-packages/jose/jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    └ HTTPAuthorizationCredentials(scheme='Bearer', credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vL...

AttributeError: 'HTTPAuthorizationCredentials' object has no attribute 'rsplit'
INFO     2024-02-02 10:16:15.480 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60702 - "POST /rms/v1.0/logout HTTP/1.1" 500
INFO     2024-02-02 10:21:50.571 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:21:50.674 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:21:50.674 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:21:50.675 request id: app - uvicorn.server:serve - Finished server process [2162589]
INFO     2024-02-02 10:21:52.832 request id: app - uvicorn.server:serve - Started server process [2165111]
INFO     2024-02-02 10:21:52.834 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:21:52.835 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:22:06.592 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDQ0OH0.JDPnwHY-5la-XWgW_e4RUJGjoccDrMvNJib1f4FQ49o'}}
INFO     2024-02-02 10:22:08.787 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:22:08.889 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-02 10:22:14.012 request id: app - uvicorn.server:serve - Started server process [2165252]
INFO     2024-02-02 10:22:14.014 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:22:14.014 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:22:16.113 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDQ0OH0.JDPnwHY-5la-XWgW_e4RUJGjoccDrMvNJib1f4FQ49o'}}
INFO     2024-02-02 10:22:16.158 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NTkzNn0.KFUjMGddHixVZC29VX4Hi3O2BVBYDkWGQsRGQXgJ_ts","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MjEzNn0.DVQg13YZ0NzqtSWYhLkc4CtEnlOS2yQIsrTEvHg3rLQ"},"links":null,"relationships":null,"timestamp":"2024-02-02 10:22:13"}'}
INFO     2024-02-02 10:22:16.159 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55306 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
INFO     2024-02-02 10:22:20.598 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NDI0OH0.SsLzUmOlvjNcwssMsHCYwP6kGJ-C7Kax00ou2rEot9U'}}
INFO     2024-02-02 10:22:20.613 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-02 10:22:13"}'}
INFO     2024-02-02 10:22:20.614 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55306 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-02-02 10:22:32.630 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57362 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 10:22:32.832 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57362 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 10:23:00.122 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 10:23:00.354 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NTk4MH0.Q8vLjxms-NMwaDlw5ulzZwJwtPgnUJuBm5yhelujXN4","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MjE4MH0.HmEMQZQWVBv0fiPceHd2KeJs9y_wdDF5-RvxnmYoiT0"},"links":null,"relationships":null,"timestamp":"2024-02-02 10:22:13"}'}
INFO     2024-02-02 10:23:00.355 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57374 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-02 10:23:32.725 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53848 - "GET /rms/v1.0/resources/c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-02-02 10:23:38.186 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46816 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-02 10:24:58.338 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:24:58.439 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:24:58.440 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:24:58.440 request id: app - uvicorn.server:serve - Finished server process [2165252]
INFO     2024-02-02 10:25:37.208 request id: app - uvicorn.server:serve - Started server process [2166890]
INFO     2024-02-02 10:25:37.210 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:25:37.210 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:25:40.029 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47352 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 10:25:40.237 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47352 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 10:26:07.646 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 10:26:07.917 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NjE2N30.k3IGc4p814tv5_nPxEckyy7BGydJTvPTw6I8d0G8JF0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MjM2N30.-DfSChwdw3c_dOOy5-bkozP_VY0zMPPTO6ExQ5JUM3M"},"links":null,"relationships":null,"timestamp":"2024-02-02 10:25:36"}'}
INFO     2024-02-02 10:26:07.918 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47366 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 10:28:11.403 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1673b72440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1670f765f0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '535816d8-5da3-5539-aee9-f512d7eb6519'}
    │      │       └ 'SELECT resource_statuss.id AS resource_statuss_id, resource_statuss.name AS resource_statuss_name, resource_statuss.created_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f16702ee020; closed: -1>

psycopg2.errors.UndefinedColumn: column resource_statuss.update_at does not exist
LINE 1: ...tatuss.created_at AS resource_statuss_created_at, resource_s...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_statuss.updated_at".



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f167b00fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f167b162950>
           └ <SpawnProcess name='SpawnProcess-4' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f167b161fc0>
    └ <SpawnProcess name='SpawnProcess-4' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f167b0581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2165250 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2165250 started>
    │    └ <function subprocess_started at 0x7f167a496440>
    └ <SpawnProcess name='SpawnProcess-4' parent=2165250 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f167b058310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f167a495900>
    │    │                  └ <uvicorn.server.Server object at 0x7f167b058310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f167adaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f167adaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f167adabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f167affb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f167012b130>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f167012b130>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f167012b130>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f167012b130>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f167a390550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f167a3905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f167b059e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1679772bc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f167b059e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f16703d04f0>
          └ <fastapi.applications.FastAPI object at 0x7f1679772bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1670243070>
                     │    └ <function error_handle_business at 0x7f1679603250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f16703d04f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1670228160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f16703d05b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f16703d04f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '38380', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1670228160>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f1679633760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f16703d05b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f16703d05b0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16703a56f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f16703d05b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f16702291b0>
                     │    │             └ <starlette.requests.Request object at 0x7f1670243610>
                     │    └ <function process_middleware_common at 0x7f16796031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16703a56f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1670243610>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f16702291b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1679b90a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f16797047c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f1670243610>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f167030c5e0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f16703a56f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f167011e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f167030c6d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f167030c5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f167011e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f16795f6320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f167030c6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f167011e050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f16797424d0>
          └ <fastapi.routing.APIRoute object at 0x7f16703d1030>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f167011e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f16701286d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f16703dee60>
          └ <fastapi.routing.APIRoute object at 0x7f16703d1030>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1670129450>
                     └ <function get_request_handler.<locals>.app at 0x7f16703dedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1679743130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f16702430d0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f1670f8ce50>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f16703d10f0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f1670203af0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f16702430d0>
                 │                └ <function ResourceService.upload_resource at 0x7f1671be8f70>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f16729b88e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
    │    └ <function ResourceService.check_info at 0x7f1671be9090>
    └ <app.src.services.resource_service.ResourceService object at 0x7f16729b88e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 54, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '535816d8-5da3-5539-aee9-f512d7eb6519'
               │    │            │                 │                        │       └ 'ResourceStatus'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f16729d5750>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f16729b8850>
               │    └ <app.src.services.base_service.BaseService object at 0x7f16729b8910>
               └ <app.src.services.resource_service.ResourceService object at 0x7f16729b88e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 45, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f167397d2d0>
             └ <sqlalchemy.orm.query.Query object at 0x7f1670129690>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f167397da20>
           └ <sqlalchemy.orm.query.Query object at 0x7f1670129690>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f1673802f80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f167012afe0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f1670129690>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f1673802ef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f167012afe0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f1673abf0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f1673fdb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f167012b040>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f1673fdba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f1673fdbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f1673fdbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f1673fdbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.created_at AS resource_statuss_created_a...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resource_statuss.update_at does not exist\nLINE 1: ...tat...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist\nLINE 1: ...tatuss.creat...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1673b72440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1670f765f0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f167012bbb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '535816d8-5da3-5539-aee9-f512d7eb6519'}
    │      │       └ 'SELECT resource_statuss.id AS resource_statuss_id, resource_statuss.name AS resource_statuss_name, resource_statuss.created_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f16702ee020; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resource_statuss.update_at does not exist
LINE 1: ...tatuss.created_at AS resource_statuss_created_at, resource_s...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_statuss.updated_at".

[SQL: SELECT resource_statuss.id AS resource_statuss_id, resource_statuss.name AS resource_statuss_name, resource_statuss.created_at AS resource_statuss_created_at, resource_statuss.update_at AS resource_statuss_update_at, resource_statuss.is_deleted AS resource_statuss_is_deleted 
FROM resource_statuss 
WHERE resource_statuss.id = %(id_1)s::UUID]
[parameters: {'id_1': '535816d8-5da3-5539-aee9-f512d7eb6519'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 10:28:11.422 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40662 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-02 10:28:37.389 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:28:37.490 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:28:37.491 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:28:37.492 request id: app - uvicorn.server:serve - Finished server process [2166890]
INFO     2024-02-02 10:28:38.450 request id: app - uvicorn.server:serve - Started server process [2168147]
INFO     2024-02-02 10:28:38.451 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:28:38.451 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 10:28:38.516 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f0638956440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f06319625c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66'}
    │      │       └ 'SELECT resource_platforms.id AS resource_platforms_id, resource_platforms.name AS resource_platforms_name, resource_platform...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f0630c8de40; closed: -1>

psycopg2.errors.UndefinedColumn: column resource_platforms.update_at does not exist
LINE 1: ...orms.created_at AS resource_platforms_created_at, resource_p...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_platforms.updated_at".



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f063bd0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f063be5e950>
           └ <SpawnProcess name='SpawnProcess-5' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f063be5dfc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f063bd541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2165250 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2165250 started>
    │    └ <function subprocess_started at 0x7f063b18e440>
    └ <SpawnProcess name='SpawnProcess-5' parent=2165250 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f063bd54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f063b18d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f063bd54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f063b5a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f063b5a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f063b5a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f063bcf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0630cc28c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0630cc28c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0630cc28c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0630cc28c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f063b088550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f063b0885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f063bd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f063a462bc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f063bd55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0630dbc4c0>
          └ <fastapi.applications.FastAPI object at 0x7f063a462bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0630defac0>
                     │    └ <function error_handle_business at 0x7f063a2f3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0630dbc4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_platforms.update_at does not exist\nLINE 1: ...orms.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0630c0c1f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0630dbc580>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0630dbc4c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '38380', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0630c0c1f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f063a323760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0630dbc580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f0630dbc580>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0630d916c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0630dbc580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0630c0c280>
                     │    │             └ <starlette.requests.Request object at 0x7f0630deeda0>
                     │    └ <function process_middleware_common at 0x7f063a2f31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0630d916c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0630deeda0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0630c0c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_platforms.update_at does not exist\nLINE 1: ...orms.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f063a878a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f063a3fc2c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f0630deeda0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06319f85b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0630d916c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0630c0d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06319f86a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f06319f85b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0630c0d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f063a2e6320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f06319f86a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0630c0d120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f063a4324d0>
          └ <fastapi.routing.APIRoute object at 0x7f0630dbd000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0630c0d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0630def460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0630dcaef0>
          └ <fastapi.routing.APIRoute object at 0x7f0630dbd000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0630c2f370>
                     └ <function get_request_handler.<locals>.app at 0x7f0630dcae60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f063a433130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f0630c2e9e0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f0631974ee0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f0630dbd0c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f0630c2d930>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f0630c2e9e0>
                 │                └ <function ResourceService.upload_resource at 0x7f06325d5000>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f06336c7a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
    │    └ <function ResourceService.check_info at 0x7f06325d5120>
    └ <app.src.services.resource_service.ResourceService object at 0x7f06336c7a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 54, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66'
               │    │            │                 │                        │       └ 'ResourcePlatform'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f06337157e0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f06336f7f40>
               │    └ <app.src.services.base_service.BaseService object at 0x7f06336c7ac0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f06336c7a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 45, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f063875d2d0>
             └ <sqlalchemy.orm.query.Query object at 0x7f0630301f30>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f063875da20>
           └ <sqlalchemy.orm.query.Query object at 0x7f0630301f30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f06387e6f80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f0630cc2e00>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f0630301f30>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f06387e6ef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f0630cc2e00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f06388a30a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f0638abf760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f0630301fc0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f0638abfa30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f0638abfbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f0638abfc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f0638abfeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column resource_platforms.update_at does not exist\nLINE 1: ...orms.created_at AS resource_platforms_created...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column resource_platforms.update_at does not exist\nLINE 1: ...o...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column resource_platforms.update_at does not exist\nLINE 1: ...orms.creat...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f0638956440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f06319625c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f0630301ff0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66'}
    │      │       └ 'SELECT resource_platforms.id AS resource_platforms_id, resource_platforms.name AS resource_platforms_name, resource_platform...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f0630c8de40; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column resource_platforms.update_at does not exist
LINE 1: ...orms.created_at AS resource_platforms_created_at, resource_p...
                                                             ^
HINT:  Perhaps you meant to reference the column "resource_platforms.updated_at".

[SQL: SELECT resource_platforms.id AS resource_platforms_id, resource_platforms.name AS resource_platforms_name, resource_platforms.created_at AS resource_platforms_created_at, resource_platforms.update_at AS resource_platforms_update_at, resource_platforms.is_deleted AS resource_platforms_is_deleted 
FROM resource_platforms 
WHERE resource_platforms.id = %(id_1)s::UUID]
[parameters: {'id_1': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 10:28:38.534 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42876 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-02 10:28:53.591 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:28:53.692 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:28:53.693 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:28:53.693 request id: app - uvicorn.server:serve - Finished server process [2168147]
INFO     2024-02-02 10:28:54.604 request id: app - uvicorn.server:serve - Started server process [2168267]
INFO     2024-02-02 10:28:54.605 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:28:54.606 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 10:29:01.131 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fda5ee5e440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fda5c2725c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df'}
    │      │       └ 'SELECT product_types.id AS product_types_id, product_types.name AS product_types_name, product_types.created_at AS product_t...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fda5779de40; closed: -1>

psycopg2.errors.UndefinedColumn: column product_types.update_at does not exist
LINE 1: ...uct_types.created_at AS product_types_created_at, product_ty...
                                                             ^
HINT:  Perhaps you meant to reference the column "product_types.updated_at".



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fda6630bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fda6645e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fda6645dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fda663541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=2165250 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=2165250 started>
    │    └ <function subprocess_started at 0x7fda65866440>
    └ <SpawnProcess name='SpawnProcess-6' parent=2165250 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fda66354310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fda65865900>
    │    │                  └ <uvicorn.server.Server object at 0x7fda66354310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fda660fe440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fda660fe3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fda660ffeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fda662f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fda577d68f0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fda577d68f0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fda577d68f0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fda577d68f0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fda65724550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fda657245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fda66355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fda64ac6bc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fda66355e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fda57bcc4c0>
          └ <fastapi.applications.FastAPI object at 0x7fda64ac6bc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fda57bffac0>
                     │    └ <function error_handle_business at 0x7fda64957250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fda57bcc4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column product_types.update_at does not exist\nLINE 1: ...uct_types.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fda577201f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fda57bcc580>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fda57bcc4c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '38380', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fda577201f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fda64987760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fda57bcc580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fda57bcc580>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fda57ba16c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fda57bcc580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fda57720280>
                     │    │             └ <starlette.requests.Request object at 0x7fda57bfeda0>
                     │    └ <function process_middleware_common at 0x7fda649571c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fda57ba16c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fda57bfeda0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fda57720280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column product_types.update_at does not exist\nLINE 1: ...uct_types.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fda64ee8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fda64a604f0>
          │    │   │      └ <starlette.requests.Request object at 0x7fda57bfeda0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fda57b085b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fda57ba16c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fda57721120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fda57b086a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fda57b085b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fda57721120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fda6494a320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fda57b086a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fda57721120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fda64a964d0>
          └ <fastapi.routing.APIRoute object at 0x7fda57bcd000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fda57721120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fda57bff460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fda57bdaef0>
          └ <fastapi.routing.APIRoute object at 0x7fda57bcd000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fda5773f370>
                     └ <function get_request_handler.<locals>.app at 0x7fda57bdae60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fda64a97130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fda5773e9e0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fda5c284ee0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fda57bcd0c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fda5773e560>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fda5773e9e0>
                 │                └ <function ResourceService.upload_resource at 0x7fda5cbe1000>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fda5dbd3a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
    │    └ <function ResourceService.check_info at 0x7fda5cbe1120>
    └ <app.src.services.resource_service.ResourceService object at 0x7fda5dbd3a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 54, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df'
               │    │            │                 │                        │       └ 'ProductType'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7fda5dc217e0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fda5dc03f40>
               │    └ <app.src.services.base_service.BaseService object at 0x7fda5dbd3ac0>
               └ <app.src.services.resource_service.ResourceService object at 0x7fda5dbd3a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 45, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7fda5ec652d0>
             └ <sqlalchemy.orm.query.Query object at 0x7fda57311ae0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7fda5ec65a20>
           └ <sqlalchemy.orm.query.Query object at 0x7fda57311ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7fda5eceef80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7fda577d6e30>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7fda57311ae0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7fda5eceeef0>
           └ <sqlalchemy.orm.session.Session object at 0x7fda577d6e30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7fda5edab0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7fda5efc7760>
             └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7fda57312d70>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fda5efc7a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fda5efc7be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fda5efc7c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fda5efc7eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column product_types.update_at does not exist\nLINE 1: ...uct_types.created_at AS product_types_created_at, ...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column product_types.update_at does not exist\nLINE 1: ...uct_ty...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column product_types.update_at does not exist\nLINE 1: ...uct_types.creat...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fda5ee5e440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fda5c2725c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fda57313310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df'}
    │      │       └ 'SELECT product_types.id AS product_types_id, product_types.name AS product_types_name, product_types.created_at AS product_t...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fda5779de40; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column product_types.update_at does not exist
LINE 1: ...uct_types.created_at AS product_types_created_at, product_ty...
                                                             ^
HINT:  Perhaps you meant to reference the column "product_types.updated_at".

[SQL: SELECT product_types.id AS product_types_id, product_types.name AS product_types_name, product_types.created_at AS product_types_created_at, product_types.update_at AS product_types_update_at, product_types.is_deleted AS product_types_is_deleted 
FROM product_types 
WHERE product_types.id = %(id_1)s::UUID]
[parameters: {'id_1': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 10:29:01.150 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54942 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-02 10:29:08.249 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:29:08.350 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:29:08.351 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:29:08.351 request id: app - uvicorn.server:serve - Finished server process [2168267]
INFO     2024-02-02 10:29:09.208 request id: app - uvicorn.server:serve - Started server process [2168399]
INFO     2024-02-02 10:29:09.247 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:29:09.247 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 10:29:10.967 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f233cd52440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f2335d625c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '227bb9e7-bd3e-5874-a006-172539fa4878'}
    │      │       └ 'SELECT package_repos.id AS package_repos_id, package_repos.name AS package_repos_name, package_repos.created_at AS package_r...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f2335091e40; closed: -1>

psycopg2.errors.UndefinedColumn: column package_repos.update_at does not exist
LINE 1: ...age_repos.created_at AS package_repos_created_at, package_re...
                                                             ^
HINT:  Perhaps you meant to reference the column "package_repos.updated_at".



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f234010bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f234025e950>
           └ <SpawnProcess name='SpawnProcess-7' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f234025dfc0>
    └ <SpawnProcess name='SpawnProcess-7' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f23401541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=2165250 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=2165250 started>
    │    └ <function subprocess_started at 0x7f233f692440>
    └ <SpawnProcess name='SpawnProcess-7' parent=2165250 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2340154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f233f691900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2340154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f233ff06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f233ff063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f233ff07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f23400f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f23350c68c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f23350c68c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f23350c68c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f23350c68c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f233f550550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f233f5505e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2340155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f233e8fabc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2340155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f23351bc4c0>
          └ <fastapi.applications.FastAPI object at 0x7f233e8fabc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f23351efac0>
                     │    └ <function error_handle_business at 0x7f233e787250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f23351bc4c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column package_repos.update_at does not exist\nLINE 1: ...age_repos.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f233500c1f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f23351bc580>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f23351bc4c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '38380', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f233500c1f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f233e7b7760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f23351bc580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f23351bc580>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f23351916c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f23351bc580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f233500c280>
                     │    │             └ <starlette.requests.Request object at 0x7f23351eeda0>
                     │    └ <function process_middleware_common at 0x7f233e7871c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f23351916c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f23351eeda0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f233500c280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column package_repos.update_at does not exist\nLINE 1: ...age_repos.creat...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f233ed20a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f233e88c4f0>
          │    │   │      └ <starlette.requests.Request object at 0x7f23351eeda0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2335df85b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f23351916c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f233500d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2335df86a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2335df85b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f233500d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f233e77a320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2335df86a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f233500d120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f233e8ca4d0>
          └ <fastapi.routing.APIRoute object at 0x7f23351bd000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f233500d120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f23351ef460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f23351caef0>
          └ <fastapi.routing.APIRoute object at 0x7f23351bd000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f233502f370>
                     └ <function get_request_handler.<locals>.app at 0x7f23351cae60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f233e8cb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f233502e9e0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f2335d74ee0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f23351bd0c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f233502d930>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f233502e9e0>
                 │                └ <function ResourceService.upload_resource at 0x7f23369d5000>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f233c0c7a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
    │    └ <function ResourceService.check_info at 0x7f23369d5120>
    └ <app.src.services.resource_service.ResourceService object at 0x7f233c0c7a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 54, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '227bb9e7-bd3e-5874-a006-172539fa4878'
               │    │            │                 │                        │       └ 'PackageRepository'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f233c1157e0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f233c0f7f40>
               │    └ <app.src.services.base_service.BaseService object at 0x7f233c0c7ac0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f233c0c7a90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 45, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f233cb592d0>
             └ <sqlalchemy.orm.query.Query object at 0x7f2334703f70>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f233cb59a20>
           └ <sqlalchemy.orm.query.Query object at 0x7f2334703f70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f233cbe2f80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f23350c6e00>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f2334703f70>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f233cbe2ef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f23350c6e00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f233cc9f0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f233cebb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f2334702440>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f233cebba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f233cebbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f233cebbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f233cebbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UndefinedColumn('column package_repos.update_at does not exist\nLINE 1: ...age_repos.created_at AS package_repos_created_at, ...
          │                    │              └ (<class 'psycopg2.errors.UndefinedColumn'>, UndefinedColumn('column package_repos.update_at does not exist\nLINE 1: ...age_re...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(psycopg2.errors.UndefinedColumn) column package_repos.update_at does not exist\nLINE 1: ...age_repos.creat...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f233cd52440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f2335d625c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f233475ce50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '227bb9e7-bd3e-5874-a006-172539fa4878'}
    │      │       └ 'SELECT package_repos.id AS package_repos_id, package_repos.name AS package_repos_name, package_repos.created_at AS package_r...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f2335091e40; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column package_repos.update_at does not exist
LINE 1: ...age_repos.created_at AS package_repos_created_at, package_re...
                                                             ^
HINT:  Perhaps you meant to reference the column "package_repos.updated_at".

[SQL: SELECT package_repos.id AS package_repos_id, package_repos.name AS package_repos_name, package_repos.created_at AS package_repos_created_at, package_repos.update_at AS package_repos_update_at, package_repos.is_deleted AS package_repos_is_deleted 
FROM package_repos 
WHERE package_repos.id = %(id_1)s::UUID]
[parameters: {'id_1': '227bb9e7-bd3e-5874-a006-172539fa4878'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2024-02-02 10:29:10.985 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57064 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-02 10:29:16.381 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:29:16.483 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:29:16.483 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:29:16.484 request id: app - uvicorn.server:serve - Finished server process [2168399]
INFO     2024-02-02 10:29:17.351 request id: app - uvicorn.server:serve - Started server process [2168483]
INFO     2024-02-02 10:29:17.352 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:29:17.353 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 10:29:19.856 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f54cd34a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f54c635a5c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}
    │      │       └ 'SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f54c5689e40; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b	"
LINE 3: WHERE resource_tags.id = 'fd02b16b-886c-5b4e-a253-d1dd6c91d4...
                                 ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f54d070bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f54d085e950>
           └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f54d085dfc0>
    └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f54d07541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
    │    └ <function subprocess_started at 0x7f54cfc1e440>
    └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f54d0754310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f54cfc1d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f54d0754310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f54cffa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f54cffa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f54cffa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f54d06f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f54c56be8f0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f54c56be8f0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f54c56be8f0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f54c56be8f0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f54cfad8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f54cfad85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f54d0755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f54cee7abc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f54d0755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f54c57b84c0>
          └ <fastapi.applications.FastAPI object at 0x7f54cee7abc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f54c57e7ac0>
                     │    └ <function error_handle_business at 0x7f54ced07250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f54c57b84c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f54c56081f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f54c57b84c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '38380', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f54c56081f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f54ced37760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f54c57896c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f54c5608280>
                     │    │             └ <starlette.requests.Request object at 0x7f54c57e6da0>
                     │    └ <function process_middleware_common at 0x7f54ced071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f54c57896c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f54c57e6da0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f54c5608280>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f54cf2a0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f54cee0c630>
          │    │   │      └ <starlette.requests.Request object at 0x7f54c57e6da0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f54c63f05b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f54c57896c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c5609120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f54c63f06a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f54c63f05b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c5609120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f54ceefa320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f54c63f06a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c5609120>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f54cee4a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f54c57b9000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c5609120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c57e7460>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f54c57c2ef0>
          └ <fastapi.routing.APIRoute object at 0x7f54c57b9000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f54c562b370>
                     └ <function get_request_handler.<locals>.app at 0x7f54c57c2e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f54cee4b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f54c562a9e0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f54c6370ee0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f54c57b90c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f54c562a560>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f54c562a9e0>
                 │                └ <function ResourceService.upload_resource at 0x7f54c6fcd000>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f54cc0bfa90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
    │    └ <function ResourceService.check_info at 0x7f54c6fcd120>
    └ <app.src.services.resource_service.ResourceService object at 0x7f54cc0bfa90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 54, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'
               │    │            │                 │                        │       └ 'ResourceTag'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f54cc10d7e0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f54cc0eff40>
               │    └ <app.src.services.base_service.BaseService object at 0x7f54cc0bfac0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f54cc0bfa90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 45, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f54cd14d2d0>
             └ <sqlalchemy.orm.query.Query object at 0x7f54c56f8a30>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f54cd14da20>
           └ <sqlalchemy.orm.query.Query object at 0x7f54c56f8a30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f54cd1daf80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f54c56bee30>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f54c56f8a30>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f54cd1daef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f54c56bee30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f54cd2970a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f54cd4b3760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f54c56fb250>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f54cd4b3a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f54cd4b3be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f54cd4b3c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f54cd4b3eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t"\nLINE 3: WHERE resour...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "fd02b16...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f54cd34a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f54c635a5c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d52590>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}
    │      │       └ 'SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f54c5689e40; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b	"
LINE 3: WHERE resource_tags.id = 'fd02b16b-886c-5b4e-a253-d1dd6c91d4...
                                 ^

[SQL: SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_tags_created_at, resource_tags.updated_at AS resource_tags_updated_at, resource_tags.is_deleted AS resource_tags_is_deleted 
FROM resource_tags 
WHERE resource_tags.id = %(id_1)s::UUID]
[parameters: {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-02-02 10:29:19.874 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55962 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-02 10:29:38.617 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f54cd34a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f54c635a5c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}
    │      │       └ 'SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f54c568a3e0; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b	"
LINE 3: WHERE resource_tags.id = 'fd02b16b-886c-5b4e-a253-d1dd6c91d4...
                                 ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f54d070bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f54d085e950>
           └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f54d085dfc0>
    └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f54d07541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
    │    └ <function subprocess_started at 0x7f54cfc1e440>
    └ <SpawnProcess name='SpawnProcess-8' parent=2165250 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f54d0754310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f54cfc1d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f54d0754310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f54cffa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f54cffa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f54cffa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f54d06f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f54c4d53940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f54c4d53940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f54c4d53940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f54c4d53940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f54cfad8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f54cfad85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f54d0755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f54cee7abc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f54d0755e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f54c57b84c0>
          └ <fastapi.applications.FastAPI object at 0x7f54cee7abc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f54c4d52770>
                     │    └ <function error_handle_business at 0x7f54ced07250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f54c57b84c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f54c4b692d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f54c57b84c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '38380', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f54c4b692d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f54ced37760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f54c57896c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f54c57b8580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f54c4b69240>
                     │    │             └ <starlette.requests.Request object at 0x7f54c4d50d60>
                     │    └ <function process_middleware_common at 0x7f54ced071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f54c57896c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f54c4d50d60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f54c4b69240>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f54cf2a0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f54cee0c630>
          │    │   │      └ <starlette.requests.Request object at 0x7f54c4d50d60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f54c63f05b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f54c57896c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c4b69510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f54c63f06a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f54c63f05b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c4b69510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f54ceefa320>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f54c63f06a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c4b69510>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f54cee4a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f54c57b9000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f54c4b69510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f54c4d52fe0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f54c57c2ef0>
          └ <fastapi.routing.APIRoute object at 0x7f54c57b9000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f54c4d530a0>
                     └ <function get_request_handler.<locals>.app at 0x7f54c57c2e60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f54cee4b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f54c562aa40>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f54c6370ee0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f54c57b90c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f54c4d53400>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f54c562aa40>
                 │                └ <function ResourceService.upload_resource at 0x7f54c6fcd000>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f54cc0bfa90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 31, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo'...
    │    └ <function ResourceService.check_info at 0x7f54c6fcd120>
    └ <app.src.services.resource_service.ResourceService object at 0x7f54cc0bfa90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 54, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'
               │    │            │                 │                        │       └ 'ResourceTag'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f54cc10d7e0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f54cc0eff40>
               │    └ <app.src.services.base_service.BaseService object at 0x7f54cc0bfac0>
               └ <app.src.services.resource_service.ResourceService object at 0x7f54cc0bfa90>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 45, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f54cd14d2d0>
             └ <sqlalchemy.orm.query.Query object at 0x7f54c4d53be0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f54cd14da20>
           └ <sqlalchemy.orm.query.Query object at 0x7f54c4d53be0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f54cd1daf80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f54c4d51930>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f54c4d53be0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f54cd1daef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f54c4d51930>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f54cd2970a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f54cd4b3760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f54c4d53dc0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f54cd4b3a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f54cd4b3be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f54cd4b3c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f54cd4b3eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t"\nLINE 3: WHERE resour...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "fd02b16...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f54cd34a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f54c635a5c0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f54c4d53e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}
    │      │       └ 'SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f54c568a3e0; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "fd02b16b-886c-5b4e-a253-d1dd6c91d46b	"
LINE 3: WHERE resource_tags.id = 'fd02b16b-886c-5b4e-a253-d1dd6c91d4...
                                 ^

[SQL: SELECT resource_tags.id AS resource_tags_id, resource_tags.name AS resource_tags_name, resource_tags.created_at AS resource_tags_created_at, resource_tags.updated_at AS resource_tags_updated_at, resource_tags.is_deleted AS resource_tags_is_deleted 
FROM resource_tags 
WHERE resource_tags.id = %(id_1)s::UUID]
[parameters: {'id_1': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b\t'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-02-02 10:29:38.630 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58404 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-02 10:30:02.857 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:32798 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-02 10:33:14.771 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:33:14.873 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:33:14.874 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:33:14.874 request id: app - uvicorn.server:serve - Finished server process [2168483]
INFO     2024-02-02 10:33:15.901 request id: app - uvicorn.server:serve - Started server process [2169854]
INFO     2024-02-02 10:33:15.902 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:33:15.902 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:35:55.601 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:35:55.702 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:35:55.703 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:35:55.704 request id: app - uvicorn.server:serve - Finished server process [2169854]
INFO     2024-02-02 10:35:56.641 request id: app - uvicorn.server:serve - Started server process [2170880]
INFO     2024-02-02 10:35:56.642 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:35:56.643 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:37:09.725 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:37:09.827 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:37:09.828 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:37:09.828 request id: app - uvicorn.server:serve - Finished server process [2170880]
INFO     2024-02-02 10:37:10.688 request id: app - uvicorn.server:serve - Started server process [2171334]
INFO     2024-02-02 10:37:10.689 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:37:10.689 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:37:17.106 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:37:17.208 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:37:17.208 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:37:17.209 request id: app - uvicorn.server:serve - Finished server process [2171334]
INFO     2024-02-02 10:37:18.055 request id: app - uvicorn.server:serve - Started server process [2171371]
INFO     2024-02-02 10:37:18.056 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:37:18.057 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:37:25.477 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:37:25.578 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:37:25.579 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:37:25.579 request id: app - uvicorn.server:serve - Finished server process [2171371]
INFO     2024-02-02 10:37:26.418 request id: app - uvicorn.server:serve - Started server process [2171420]
INFO     2024-02-02 10:37:26.420 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:37:26.420 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:37:28.527 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:37:28.629 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:37:28.629 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:37:28.630 request id: app - uvicorn.server:serve - Finished server process [2171420]
INFO     2024-02-02 10:37:29.513 request id: app - uvicorn.server:serve - Started server process [2171449]
INFO     2024-02-02 10:37:29.514 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:37:29.515 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:37:36.934 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:37:37.036 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:37:37.037 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:37:37.037 request id: app - uvicorn.server:serve - Finished server process [2171449]
INFO     2024-02-02 10:37:37.871 request id: app - uvicorn.server:serve - Started server process [2171515]
INFO     2024-02-02 10:37:37.872 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:37:37.873 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:37:38.777 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:37:38.878 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:37:38.879 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:37:38.879 request id: app - uvicorn.server:serve - Finished server process [2171515]
INFO     2024-02-02 10:38:29.113 request id: app - uvicorn.server:serve - Started server process [2172183]
INFO     2024-02-02 10:38:29.115 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:38:29.115 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:38:41.046 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:38:41.147 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:38:41.148 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:38:41.149 request id: app - uvicorn.server:serve - Finished server process [2172183]
INFO     2024-02-02 10:38:42.088 request id: app - uvicorn.server:serve - Started server process [2172267]
INFO     2024-02-02 10:38:42.090 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:38:42.091 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:39:21.792 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:39:21.893 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:39:21.894 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:39:21.895 request id: app - uvicorn.server:serve - Finished server process [2172267]
INFO     2024-02-02 10:40:05.199 request id: app - uvicorn.server:serve - Started server process [2172908]
INFO     2024-02-02 10:40:05.200 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:40:05.201 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:40:08.469 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38686 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 10:40:08.673 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38686 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 10:40:38.542 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 10:40:38.812 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MzIzOH0.XIoU3NnWMj24ZeTTc9KNcK4ghkNbTpC1SOcUolVbt1U"},"links":null,"relationships":null,"timestamp":"2024-02-02 10:40:04"}'}
INFO     2024-02-02 10:40:38.813 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38694 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 10:43:19.897 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw"\nLINE 3: WHERE resources.id = \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e...\n                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw"\nLINE 3: WHERE resources.id = \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e...\n                             ^\n\n[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted \nFROM resources \nWHERE resources.id = %(id_1)s::UUID AND resources.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 10:43:19.898 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48062 - "PUT /rms/v1.0/resources/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw HTTP/1.1" 500
ERROR    2024-02-02 10:43:59.325 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw"\nLINE 3: WHERE resources.id = \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e...\n                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw"\nLINE 3: WHERE resources.id = \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e...\n                             ^\n\n[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted \nFROM resources \nWHERE resources.id = %(id_1)s::UUID AND resources.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 10:43:59.326 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35200 - "PUT /rms/v1.0/resources/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg0NzAzOH0.fUKaXNGr1m-9jb-LssrYc_SFHgTvekQmpZjWXHJ71gw HTTP/1.1" 500
ERROR    2024-02-02 10:44:59.016 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement\n    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 652, in _compile_w_cache\n    compiled_sql = self._compiler(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 291, in _compiler\n    return dialect.statement_compiler(dialect, self, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/compiler.py", line 1269, in __init__\n    Compiled.__init__(self, dialect, statement, **kwargs)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/compiler.py", line 710, in __init__\n    self.string = self.process(self.statement, **compile_kwargs)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/compiler.py", line 755, in process\n    return obj._compiler_dispatch(self, **kwargs)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/annotation.py", line 351, in _compiler_dispatch\n    return self.__element.__class__._compiler_dispatch(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/visitors.py", line 143, in _compiler_dispatch\n    return meth(self, **kw)  # type: ignore  # noqa: E501\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/compiler.py", line 5572, in visit_update\n    crud_params_struct = crud._get_crud_params(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/crud.py", line 326, in _get_crud_params\n    raise exc.CompileError(\nsqlalchemy.exc.CompileError: Unconsumed column names: platform, package_repo_id, tag\n'}
INFO     2024-02-02 10:44:59.017 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36302 - "PUT /rms/v1.0/resources/c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 500
INFO     2024-02-02 10:49:20.987 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:49:21.089 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:49:21.090 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:49:21.091 request id: app - uvicorn.server:serve - Finished server process [2172908]
INFO     2024-02-02 10:49:21.960 request id: app - uvicorn.server:serve - Started server process [2176119]
INFO     2024-02-02 10:49:21.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:49:21.962 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:49:30.057 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41378 - "PUT /rms/v1.0/resources/c0ec8b64-27ef-593b-a6dd-2427b43b1437 HTTP/1.1" 200
INFO     2024-02-02 10:51:18.862 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:51:18.964 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:51:18.964 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:51:18.965 request id: app - uvicorn.server:serve - Finished server process [2176119]
INFO     2024-02-02 10:51:19.882 request id: app - uvicorn.server:serve - Started server process [2176840]
INFO     2024-02-02 10:51:19.884 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:51:19.884 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:51:22.231 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51234 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 10:51:22.429 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51234 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 10:54:18.954 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:54:19.055 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:54:19.056 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:54:19.056 request id: app - uvicorn.server:serve - Finished server process [2176840]
INFO     2024-02-02 10:54:19.883 request id: app - uvicorn.server:serve - Started server process [2177906]
INFO     2024-02-02 10:54:19.884 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:54:19.884 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:55:09.810 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:55:09.911 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:55:09.912 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:55:09.913 request id: app - uvicorn.server:serve - Finished server process [2177906]
INFO     2024-02-02 10:55:10.733 request id: app - uvicorn.server:serve - Started server process [2178617]
INFO     2024-02-02 10:55:10.734 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:55:10.735 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:55:35.297 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:55:35.399 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:55:35.400 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:55:35.401 request id: app - uvicorn.server:serve - Finished server process [2178617]
INFO     2024-02-02 10:55:36.341 request id: app - uvicorn.server:serve - Started server process [2178855]
INFO     2024-02-02 10:55:36.342 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:55:36.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:55:46.168 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:55:46.270 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:55:46.270 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:55:46.271 request id: app - uvicorn.server:serve - Finished server process [2178855]
INFO     2024-02-02 10:55:47.146 request id: app - uvicorn.server:serve - Started server process [2178912]
INFO     2024-02-02 10:55:47.147 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:55:47.148 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:55:56.071 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:55:56.173 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:55:56.174 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:55:56.174 request id: app - uvicorn.server:serve - Finished server process [2178912]
INFO     2024-02-02 10:55:57.062 request id: app - uvicorn.server:serve - Started server process [2178991]
INFO     2024-02-02 10:55:57.063 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:55:57.064 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:56:11.000 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:56:11.101 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:56:11.102 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:56:11.103 request id: app - uvicorn.server:serve - Finished server process [2178991]
INFO     2024-02-02 10:56:12.008 request id: app - uvicorn.server:serve - Started server process [2179089]
INFO     2024-02-02 10:56:12.009 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:56:12.010 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:56:25.445 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:56:25.547 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:56:25.548 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:56:25.548 request id: app - uvicorn.server:serve - Finished server process [2179089]
INFO     2024-02-02 10:56:26.509 request id: app - uvicorn.server:serve - Started server process [2179175]
INFO     2024-02-02 10:56:26.510 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:56:26.511 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:56:57.199 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:56:57.301 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:56:57.302 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:56:57.302 request id: app - uvicorn.server:serve - Finished server process [2179175]
INFO     2024-02-02 10:56:58.223 request id: app - uvicorn.server:serve - Started server process [2179371]
INFO     2024-02-02 10:56:58.224 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:56:58.225 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:57:02.537 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:57:02.638 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:57:02.639 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:57:02.639 request id: app - uvicorn.server:serve - Finished server process [2179371]
INFO     2024-02-02 10:57:03.459 request id: app - uvicorn.server:serve - Started server process [2179403]
INFO     2024-02-02 10:57:03.460 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:57:03.461 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:57:15.193 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:57:15.295 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:57:15.296 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:57:15.296 request id: app - uvicorn.server:serve - Finished server process [2179403]
INFO     2024-02-02 10:57:16.120 request id: app - uvicorn.server:serve - Started server process [2179479]
INFO     2024-02-02 10:57:16.122 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:57:16.122 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:57:38.679 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:57:38.780 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:57:38.781 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:57:38.782 request id: app - uvicorn.server:serve - Finished server process [2179479]
INFO     2024-02-02 10:57:39.626 request id: app - uvicorn.server:serve - Started server process [2179630]
INFO     2024-02-02 10:57:39.627 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:57:39.628 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:57:44.340 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:57:44.442 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:57:44.443 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:57:44.443 request id: app - uvicorn.server:serve - Finished server process [2179630]
INFO     2024-02-02 10:57:45.269 request id: app - uvicorn.server:serve - Started server process [2179659]
INFO     2024-02-02 10:57:45.270 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:57:45.271 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:58:06.224 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:58:06.326 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:58:06.327 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:58:06.327 request id: app - uvicorn.server:serve - Finished server process [2179659]
INFO     2024-02-02 10:58:07.300 request id: app - uvicorn.server:serve - Started server process [2179906]
INFO     2024-02-02 10:58:07.301 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:58:07.302 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:59:27.206 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:59:27.308 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:59:27.309 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:59:27.309 request id: app - uvicorn.server:serve - Finished server process [2179906]
INFO     2024-02-02 10:59:28.205 request id: app - uvicorn.server:serve - Started server process [2180447]
INFO     2024-02-02 10:59:28.206 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:59:28.207 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:59:55.375 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 10:59:55.477 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 10:59:55.477 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 10:59:55.478 request id: app - uvicorn.server:serve - Finished server process [2180447]
INFO     2024-02-02 10:59:56.336 request id: app - uvicorn.server:serve - Started server process [2180629]
INFO     2024-02-02 10:59:56.337 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 10:59:56.337 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 10:59:59.947 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:00.048 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:00.049 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:00.050 request id: app - uvicorn.server:serve - Finished server process [2180629]
INFO     2024-02-02 11:00:00.850 request id: app - uvicorn.server:serve - Started server process [2180657]
INFO     2024-02-02 11:00:00.851 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:00.852 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:00:07.268 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:07.370 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:07.371 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:07.371 request id: app - uvicorn.server:serve - Finished server process [2180657]
INFO     2024-02-02 11:00:08.177 request id: app - uvicorn.server:serve - Started server process [2180707]
INFO     2024-02-02 11:00:08.178 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:08.179 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:00:16.400 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:16.502 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:16.503 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:16.503 request id: app - uvicorn.server:serve - Finished server process [2180707]
INFO     2024-02-02 11:00:17.331 request id: app - uvicorn.server:serve - Started server process [2180767]
INFO     2024-02-02 11:00:17.333 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:17.333 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:00:21.043 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:21.145 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:21.146 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:21.146 request id: app - uvicorn.server:serve - Finished server process [2180767]
INFO     2024-02-02 11:00:21.956 request id: app - uvicorn.server:serve - Started server process [2180816]
INFO     2024-02-02 11:00:21.957 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:21.958 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:00:37.900 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:38.002 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:38.002 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:38.003 request id: app - uvicorn.server:serve - Finished server process [2180816]
INFO     2024-02-02 11:00:38.923 request id: app - uvicorn.server:serve - Started server process [2180918]
INFO     2024-02-02 11:00:38.924 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:38.925 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:00:42.536 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:42.637 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:42.638 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:42.639 request id: app - uvicorn.server:serve - Finished server process [2180918]
INFO     2024-02-02 11:00:43.483 request id: app - uvicorn.server:serve - Started server process [2180947]
INFO     2024-02-02 11:00:43.484 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:43.485 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:00:49.601 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:00:49.703 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:00:49.704 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:00:49.704 request id: app - uvicorn.server:serve - Finished server process [2180947]
INFO     2024-02-02 11:00:50.552 request id: app - uvicorn.server:serve - Started server process [2181003]
INFO     2024-02-02 11:00:50.554 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:00:50.554 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:04.993 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:05.094 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:05.095 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:05.096 request id: app - uvicorn.server:serve - Finished server process [2181003]
INFO     2024-02-02 11:01:05.924 request id: app - uvicorn.server:serve - Started server process [2181083]
INFO     2024-02-02 11:01:05.925 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:05.925 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:10.640 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:10.742 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:10.743 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:10.743 request id: app - uvicorn.server:serve - Finished server process [2181083]
INFO     2024-02-02 11:01:11.600 request id: app - uvicorn.server:serve - Started server process [2181132]
INFO     2024-02-02 11:01:11.602 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:11.602 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:27.743 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:27.845 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:27.846 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:27.846 request id: app - uvicorn.server:serve - Finished server process [2181132]
INFO     2024-02-02 11:01:28.644 request id: app - uvicorn.server:serve - Started server process [2181236]
INFO     2024-02-02 11:01:28.645 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:28.646 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:29.048 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:29.149 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:29.150 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:29.150 request id: app - uvicorn.server:serve - Finished server process [2181236]
INFO     2024-02-02 11:01:29.951 request id: app - uvicorn.server:serve - Started server process [2181241]
INFO     2024-02-02 11:01:29.952 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:29.953 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:32.360 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:32.461 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:32.462 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:32.462 request id: app - uvicorn.server:serve - Finished server process [2181241]
INFO     2024-02-02 11:01:33.313 request id: app - uvicorn.server:serve - Started server process [2181268]
INFO     2024-02-02 11:01:33.314 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:33.315 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:38.930 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:39.031 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:39.032 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:39.032 request id: app - uvicorn.server:serve - Finished server process [2181268]
INFO     2024-02-02 11:01:39.872 request id: app - uvicorn.server:serve - Started server process [2181325]
INFO     2024-02-02 11:01:39.873 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:39.874 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:43.785 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:43.886 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:43.887 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:43.888 request id: app - uvicorn.server:serve - Finished server process [2181325]
INFO     2024-02-02 11:01:44.716 request id: app - uvicorn.server:serve - Started server process [2181357]
INFO     2024-02-02 11:01:44.717 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:44.718 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:01:51.435 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:01:51.537 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:01:51.538 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:01:51.538 request id: app - uvicorn.server:serve - Finished server process [2181357]
INFO     2024-02-02 11:01:52.396 request id: app - uvicorn.server:serve - Started server process [2181404]
INFO     2024-02-02 11:01:52.397 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:01:52.398 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:02:04.029 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:02:04.131 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:02:04.131 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:02:04.132 request id: app - uvicorn.server:serve - Finished server process [2181404]
INFO     2024-02-02 11:02:04.993 request id: app - uvicorn.server:serve - Started server process [2181486]
INFO     2024-02-02 11:02:04.995 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:02:04.995 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:02:25.447 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:02:25.548 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:02:25.549 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:02:25.550 request id: app - uvicorn.server:serve - Finished server process [2181486]
INFO     2024-02-02 11:02:26.392 request id: app - uvicorn.server:serve - Started server process [2181617]
INFO     2024-02-02 11:02:26.394 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:02:26.395 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:03:59.427 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:03:59.529 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:03:59.529 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:03:59.530 request id: app - uvicorn.server:serve - Finished server process [2181617]
INFO     2024-02-02 11:04:00.360 request id: app - uvicorn.server:serve - Started server process [2182158]
INFO     2024-02-02 11:04:00.362 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:04:00.362 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:04:07.982 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:04:08.083 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:04:08.084 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:04:08.085 request id: app - uvicorn.server:serve - Finished server process [2182158]
INFO     2024-02-02 11:04:08.890 request id: app - uvicorn.server:serve - Started server process [2182214]
INFO     2024-02-02 11:04:08.891 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:04:08.892 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:04:18.818 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:04:18.920 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:04:18.921 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:04:18.921 request id: app - uvicorn.server:serve - Finished server process [2182214]
INFO     2024-02-02 11:04:19.779 request id: app - uvicorn.server:serve - Started server process [2182298]
INFO     2024-02-02 11:04:19.780 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:04:19.781 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:04:45.748 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:04:45.850 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:04:45.850 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:04:45.851 request id: app - uvicorn.server:serve - Finished server process [2182298]
INFO     2024-02-02 11:04:46.689 request id: app - uvicorn.server:serve - Started server process [2182446]
INFO     2024-02-02 11:04:46.690 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:04:46.691 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:04:52.607 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:04:52.709 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:04:52.710 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:04:52.710 request id: app - uvicorn.server:serve - Finished server process [2182446]
INFO     2024-02-02 11:04:53.537 request id: app - uvicorn.server:serve - Started server process [2182503]
INFO     2024-02-02 11:04:53.538 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:04:53.538 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:04:57.951 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:04:58.053 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:04:58.054 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:04:58.054 request id: app - uvicorn.server:serve - Finished server process [2182503]
INFO     2024-02-02 11:04:58.891 request id: app - uvicorn.server:serve - Started server process [2182539]
INFO     2024-02-02 11:04:58.893 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:04:58.893 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:09.822 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:05:09.923 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:05:09.924 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:05:09.924 request id: app - uvicorn.server:serve - Finished server process [2182539]
INFO     2024-02-02 11:05:10.760 request id: app - uvicorn.server:serve - Started server process [2182623]
INFO     2024-02-02 11:05:10.761 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:05:10.762 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:17.981 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:05:18.082 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:05:18.083 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:05:18.083 request id: app - uvicorn.server:serve - Finished server process [2182623]
INFO     2024-02-02 11:05:18.944 request id: app - uvicorn.server:serve - Started server process [2182678]
INFO     2024-02-02 11:05:18.946 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:05:18.946 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:23.860 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:05:23.961 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:05:23.962 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:05:23.963 request id: app - uvicorn.server:serve - Finished server process [2182678]
INFO     2024-02-02 11:05:24.837 request id: app - uvicorn.server:serve - Started server process [2182734]
INFO     2024-02-02 11:05:24.838 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:05:24.839 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:28.750 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:05:28.852 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:05:28.852 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:05:28.853 request id: app - uvicorn.server:serve - Finished server process [2182734]
INFO     2024-02-02 11:05:29.709 request id: app - uvicorn.server:serve - Started server process [2182759]
INFO     2024-02-02 11:05:29.710 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:05:29.711 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:34.322 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:05:34.424 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:05:34.425 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:05:34.425 request id: app - uvicorn.server:serve - Finished server process [2182759]
INFO     2024-02-02 11:05:35.239 request id: app - uvicorn.server:serve - Started server process [2182787]
INFO     2024-02-02 11:05:35.241 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:05:35.241 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:46.972 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:05:47.074 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:05:47.074 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:05:47.075 request id: app - uvicorn.server:serve - Finished server process [2182787]
INFO     2024-02-02 11:05:47.892 request id: app - uvicorn.server:serve - Started server process [2182866]
INFO     2024-02-02 11:05:47.894 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:05:47.894 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:05:52.067 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56120 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 11:05:52.280 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56120 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 11:06:17.671 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:06:17.773 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:06:17.774 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:06:17.775 request id: app - uvicorn.server:serve - Finished server process [2182866]
INFO     2024-02-02 11:06:18.817 request id: app - uvicorn.server:serve - Started server process [2183068]
INFO     2024-02-02 11:06:18.818 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:06:18.819 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:06:42.178 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:06:42.280 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:06:42.281 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:06:42.281 request id: app - uvicorn.server:serve - Finished server process [2183068]
INFO     2024-02-02 11:06:43.131 request id: app - uvicorn.server:serve - Started server process [2183224]
INFO     2024-02-02 11:06:43.132 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:06:43.133 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:06:44.400 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34082 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 11:06:44.559 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34082 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 11:09:37.972 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:09:38.074 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:09:38.074 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:09:38.075 request id: app - uvicorn.server:serve - Finished server process [2183224]
INFO     2024-02-02 11:10:01.019 request id: app - uvicorn.server:serve - Started server process [2184395]
INFO     2024-02-02 11:10:01.021 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:10:01.021 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:14:35.813 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:14:35.914 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:14:35.915 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:14:35.915 request id: app - uvicorn.server:serve - Finished server process [2184395]
INFO     2024-02-02 11:16:34.760 request id: app - uvicorn.server:serve - Started server process [2187307]
INFO     2024-02-02 11:16:34.762 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:16:34.762 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:19:33.903 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:19:34.005 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:19:34.006 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:19:34.006 request id: app - uvicorn.server:serve - Finished server process [2187307]
INFO     2024-02-02 11:22:41.171 request id: app - uvicorn.server:serve - Started server process [2189608]
INFO     2024-02-02 11:22:41.173 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:22:41.174 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:23:08.441 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:23:08.543 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:23:08.543 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:23:08.544 request id: app - uvicorn.server:serve - Finished server process [2189608]
INFO     2024-02-02 11:23:09.376 request id: app - uvicorn.server:serve - Started server process [2189782]
INFO     2024-02-02 11:23:09.377 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:23:09.377 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:24:51.930 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:24:52.032 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:24:52.033 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:24:52.033 request id: app - uvicorn.server:serve - Finished server process [2189782]
INFO     2024-02-02 11:24:53.089 request id: app - uvicorn.server:serve - Started server process [2190433]
INFO     2024-02-02 11:24:53.090 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:24:53.091 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:25:31.186 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:25:31.287 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:25:31.288 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:25:31.289 request id: app - uvicorn.server:serve - Finished server process [2190433]
INFO     2024-02-02 11:25:32.119 request id: app - uvicorn.server:serve - Started server process [2191137]
INFO     2024-02-02 11:25:32.122 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:25:32.123 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:25:41.346 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:25:41.448 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:25:41.449 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:25:41.449 request id: app - uvicorn.server:serve - Finished server process [2191137]
INFO     2024-02-02 11:25:42.641 request id: app - uvicorn.server:serve - Started server process [2191206]
INFO     2024-02-02 11:25:42.642 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:25:42.643 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:26:03.596 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:26:03.697 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:26:03.698 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:26:03.698 request id: app - uvicorn.server:serve - Finished server process [2191206]
INFO     2024-02-02 11:26:04.581 request id: app - uvicorn.server:serve - Started server process [2191339]
INFO     2024-02-02 11:26:04.582 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:26:04.582 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:26:08.696 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:26:08.798 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:26:08.798 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:26:08.799 request id: app - uvicorn.server:serve - Finished server process [2191339]
INFO     2024-02-02 11:26:09.628 request id: app - uvicorn.server:serve - Started server process [2191397]
INFO     2024-02-02 11:26:09.630 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:26:09.630 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:28:19.850 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:28:19.951 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:28:19.952 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:28:19.952 request id: app - uvicorn.server:serve - Finished server process [2191397]
INFO     2024-02-02 11:30:33.221 request id: app - uvicorn.server:serve - Started server process [2193132]
INFO     2024-02-02 11:30:33.222 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:30:33.223 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:32:29.526 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:32:29.627 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:32:29.628 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:32:29.629 request id: app - uvicorn.server:serve - Finished server process [2193132]
INFO     2024-02-02 11:32:30.501 request id: app - uvicorn.server:serve - Started server process [2193830]
INFO     2024-02-02 11:32:30.503 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:32:30.503 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:32:55.971 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:32:56.073 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:32:56.074 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:32:56.074 request id: app - uvicorn.server:serve - Finished server process [2193830]
INFO     2024-02-02 11:32:57.046 request id: app - uvicorn.server:serve - Started server process [2193979]
INFO     2024-02-02 11:32:57.047 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:32:57.047 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:33:16.598 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:33:16.700 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:33:16.700 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:33:16.701 request id: app - uvicorn.server:serve - Finished server process [2193979]
INFO     2024-02-02 11:33:17.690 request id: app - uvicorn.server:serve - Started server process [2194110]
INFO     2024-02-02 11:33:17.691 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:33:17.692 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:33:26.013 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:33:26.115 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:33:26.115 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:33:26.116 request id: app - uvicorn.server:serve - Finished server process [2194110]
INFO     2024-02-02 11:33:26.960 request id: app - uvicorn.server:serve - Started server process [2194188]
INFO     2024-02-02 11:33:26.961 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:33:26.962 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:33:32.378 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:33:32.480 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:33:32.480 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:33:32.481 request id: app - uvicorn.server:serve - Finished server process [2194188]
INFO     2024-02-02 11:33:34.182 request id: app - uvicorn.server:serve - Started server process [2194229]
INFO     2024-02-02 11:33:34.183 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:33:34.184 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:34:24.172 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52348 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 11:34:24.385 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52348 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 11:35:00.228 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 11:35:00.498 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1MDMwMH0.R3W0rfJBHfWaAwI6Uk3npBK7OryAVxiAncLAF3Eijs0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2NjUwMH0.wI8uiO051nAjYDH-Xe2mkFeqQpnvjGEVlhjCRjIz43I"},"links":null,"relationships":null,"timestamp":"2024-02-02 11:33:33"}'}
INFO     2024-02-02 11:35:00.499 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52364 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-02 11:35:34.542 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1MDMwMH0.R3W0rfJBHfWaAwI6Uk3npBK7OryAVxiAncLAF3Eijs0', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2NjUwMH0.wI8uiO051nAjYDH-Xe2mkFeqQpnvjGEVlhjCRjIz43I'}}
INFO     2024-02-02 11:35:34.549 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1MDMzNH0.4bjOXVzxF-P8ixzlp6jOhePw4aagp-7Hl1Z0t7nh2Bs","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2NjUzNH0.0Q4RKLr7S7JtzQTQAqKxwdPJfKoU4RGMRcgtHy6-vt4"},"links":null,"relationships":null,"timestamp":"2024-02-02 11:33:33"}'}
INFO     2024-02-02 11:35:34.550 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37442 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
INFO     2024-02-02 11:35:53.370 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 11:35:53.606 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1MDM1M30.wnROPR8hY1Z8JORPPMlWul99ve2H2Czsf4LxnvHcqeM","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2NjU1M30.PHeo_C4DvYrT7OFRyvqloiGRhReoekwIhioewAjAy_w"},"links":null,"relationships":null,"timestamp":"2024-02-02 11:33:33"}'}
INFO     2024-02-02 11:35:53.607 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43024 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-02 11:38:43.622 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34892 - "POST /rms/v1.0/ HTTP/1.1" 200
ERROR    2024-02-02 11:39:47.186 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-02 11:39:47.187 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45646 - "GET /rms/v1.0/resources/10d37537-a777-5443-9b4b-7547a71d89e7 HTTP/1.1" 400
INFO     2024-02-02 11:40:00.031 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48104 - "GET /rms/v1.0/resources/5b105479-79e1-521d-8dc7-19890a89d272 HTTP/1.1" 200
ERROR    2024-02-02 11:40:14.233 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...urces SET name=\'Edit\', version=\'string\', stage_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...urces SET name=\'Edit\', version=\'string\', stage_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'Edit\', \'version\': \'string\', \'stage_id\': \'string\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'5b105479-79e1-521d-8dc7-19890a89d272\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 11:40:14.234 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40496 - "PUT /rms/v1.0/resources/5b105479-79e1-521d-8dc7-19890a89d272 HTTP/1.1" 500
INFO     2024-02-02 11:43:53.669 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50678 - "PUT /rms/v1.0/resources/5b105479-79e1-521d-8dc7-19890a89d272 HTTP/1.1" 200
INFO     2024-02-02 11:44:03.075 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50680 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-02 11:44:25.460 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45850 - "GET /rms/v1.0/resource_tags HTTP/1.1" 200
ERROR    2024-02-02 11:44:35.820 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5f19b7c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f5f19b7c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f5f1afc3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5f1b15e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2194226 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5f1b15dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2194226 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5f1b00c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2194226 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2194226 started>
    │    └ <function subprocess_started at 0x7f5f1a49a440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2194226 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5f1b00c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5f1a499900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5f1b00c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5f1ad8e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5f1ad8e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5f1ad8feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5f1afb3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f5f10030250>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5f10030250>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5f10030250>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5f10030250>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5f1a394550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5f1a3945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5f1b00de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5f19756bf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5f1b00de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5f103bc850>
          └ <fastapi.applications.FastAPI object at 0x7f5f19756bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f5f100326b0>
                     │    └ <function error_handle_business at 0x7f5f195e7250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5f103bc850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UserService' object has no attribute 'get_all'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5f100f7c70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5f103be590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5f103bc850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5f100f7c70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5f103876a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5f103be590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5f100f7f40>
                     │    │             └ <starlette.requests.Request object at 0x7f5f10033a00>
                     │    └ <function process_middleware_common at 0x7f5f195e71c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5f103876a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5f10033a00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5f100f7f40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UserService' object has no attribute 'get_all'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5f19b7ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5f196e87c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f5f10033a00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5f10ffc3a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5f103876a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5f100088b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5f10ffc490>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5f10ffc3a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5f100088b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5f195d6350>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5f10ffc490>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5f100088b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f5f197264d0>
          └ <fastapi.routing.APIRoute object at 0x7f5f1021c130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5f100088b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5f10030820>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5f103fcb80>
          └ <fastapi.routing.APIRoute object at 0x7f5f1021c130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5f100323e0>
                     └ <function get_request_handler.<locals>.app at 0x7f5f103fcaf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5f19727130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f5f10033760>, '_': (<app.src.models.user.User object at 0x7f5f0b3...
                 │                 │         └ <function read_users at 0x7f5f10f836d0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f5f1021c1f0>
                 └ <function run_in_threadpool at 0x7f5f1a082dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_users at 0x7f5f10f836d0>, db_session=<sqlalchemy.orm.session.Session object at 0x7f5f100337...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f5f10039e80>
                 │     │         └ <function run_sync at 0x7f5f1a145090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f5f1a144820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'UserService' object has no attribute 'get_all'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f5f0b...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f5f0b315dc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f5f101956c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 33, in read_users
    data = user_service.get_all(db_session)
           │                    └ <sqlalchemy.orm.session.Session object at 0x7f5f10033760>
           └ <app.src.services.user_service.UserService object at 0x7f5f10ffc160>

AttributeError: 'UserService' object has no attribute 'get_all'
INFO     2024-02-02 11:44:35.834 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43498 - "GET /rms/v1.0/users HTTP/1.1" 500
INFO     2024-02-02 11:45:53.951 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:45:54.053 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:45:54.054 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:45:54.054 request id: app - uvicorn.server:serve - Finished server process [2194229]
INFO     2024-02-02 11:45:54.976 request id: app - uvicorn.server:serve - Started server process [2198441]
INFO     2024-02-02 11:45:54.977 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:45:54.978 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:45:59.590 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:45:59.692 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:45:59.693 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:45:59.693 request id: app - uvicorn.server:serve - Finished server process [2198441]
INFO     2024-02-02 11:46:00.519 request id: app - uvicorn.server:serve - Started server process [2198504]
INFO     2024-02-02 11:46:00.520 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:46:00.520 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:47:56.709 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:47:56.811 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:47:56.812 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:47:56.813 request id: app - uvicorn.server:serve - Finished server process [2198504]
INFO     2024-02-02 11:49:25.824 request id: app - uvicorn.server:serve - Started server process [2199724]
INFO     2024-02-02 11:49:25.825 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:49:25.826 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 11:49:33.358 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fbace22c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fbace22c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fbacf60fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fbacf762950>
           └ <SpawnProcess name='SpawnProcess-5' parent=2194226 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fbacf761fc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=2194226 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fbacf6581f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2194226 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2194226 started>
    │    └ <function subprocess_started at 0x7fbaceb92440>
    └ <SpawnProcess name='SpawnProcess-5' parent=2194226 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fbacf658310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fbaceb91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fbacf658310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fbacefaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbacefaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbacefabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbacf5fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fbac46bb4f0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fbac46bb4f0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fbac46bb4f0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fbac46bb4f0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fbacea5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fbacea5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbacf659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fbacde06bf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fbacf659e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbac47b8910>
          └ <fastapi.applications.FastAPI object at 0x7fbacde06bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fbac4617370>
                     │    └ <function error_handle_business at 0x7fbacdc97250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbac47b8910>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UserService' object has no attribute 'resource_stage_repository'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbac47f5240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbac47ba650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fbac47b8910>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fbac47f5240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbac477f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fbac47ba650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbac47f52d0>
                     │    │             └ <starlette.requests.Request object at 0x7fbac46166e0>
                     │    └ <function process_middleware_common at 0x7fbacdc971c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbac477f760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fbac46166e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fbac47f52d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UserService' object has no attribute 'resource_stage_repository'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fbace22ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fbacdda0270>
          │    │   │      └ <starlette.requests.Request object at 0x7fbac46166e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbac53f4460>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fbac477f760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbac47f6170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbac53f4550>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fbac53f4460>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbac47f6170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fbacdc86350>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fbac53f4550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbac47f6170>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fbacddd64d0>
          └ <fastapi.routing.APIRoute object at 0x7fbac46141f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fbac47f6170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fbac4616bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fbac47f4af0>
          └ <fastapi.routing.APIRoute object at 0x7fbac46141f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fbac4652b90>
                     └ <function get_request_handler.<locals>.app at 0x7fbac47f4a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fbacddd7130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fbac46521a0>, '_': (<app.src.models.user.User object at 0x7fbac45...
                 │                 │         └ <function read_users at 0x7fbac533b6d0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fbac46142b0>
                 └ <function run_in_threadpool at 0x7fbace72add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_users at 0x7fbac533b6d0>, db_session=<sqlalchemy.orm.session.Session object at 0x7fbac46521...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fbac4664240>
                 │     │         └ <function run_sync at 0x7fbace7ed090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fbace7ec820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'UserService' object has no attribute 'resource_stage_repository'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fbac4...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fbac53ab480>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fbac4664a80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 33, in read_users
    data = user_service.get_all(db_session)
           │            │       └ <sqlalchemy.orm.session.Session object at 0x7fbac46521a0>
           │            └ <function UserService.get_all at 0x7fbac6fe9510>
           └ <app.src.services.user_service.UserService object at 0x7fbac53f4220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 124, in get_all
    resource_stages = self.resource_stage_repository.get_all(db_session)
                      │                                      └ <sqlalchemy.orm.session.Session object at 0x7fbac46521a0>
                      └ <app.src.services.user_service.UserService object at 0x7fbac53f4220>

AttributeError: 'UserService' object has no attribute 'resource_stage_repository'
INFO     2024-02-02 11:49:33.372 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60060 - "GET /rms/v1.0/users HTTP/1.1" 500
INFO     2024-02-02 11:49:38.362 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:49:38.464 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:49:38.465 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:49:38.465 request id: app - uvicorn.server:serve - Finished server process [2199724]
INFO     2024-02-02 11:49:42.091 request id: app - uvicorn.server:serve - Started server process [2199828]
INFO     2024-02-02 11:49:42.092 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:49:42.092 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 11:49:44.253 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb99b5e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb99b5e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb99ca0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb99cb5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=2199826 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb99cb5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=2199826 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb99ca541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2199826 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=2199826 started>
    │    └ <function subprocess_started at 0x7fb99bf62440>
    └ <SpawnProcess name='SpawnProcess-1' parent=2199826 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb99ca54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb99bf61900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb99ca54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb99c3a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb99c3a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb99c3a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb99c9f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb991fc7490>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb991fc7490>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb991fc7490>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb991fc7490>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb99be20550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb99be205e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb99ca55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb99b1c6bf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb99ca55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb9923cc8b0>
          └ <fastapi.applications.FastAPI object at 0x7fb99b1c6bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb991f2b310>
                     │    └ <function error_handle_business at 0x7fb99b05b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb9923cc8b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UserService' object has no attribute 'resource_stage_repository'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb991f092d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb9923ce5f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb9923cc8b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb991f092d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb992393700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb9923ce5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb991f09360>
                     │    │             └ <starlette.requests.Request object at 0x7fb991f2a680>
                     │    └ <function process_middleware_common at 0x7fb99b05b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb992393700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb991f2a680>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb991f09360>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UserService' object has no attribute 'resource_stage_repository'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb99b5e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb99b1604a0>
          │    │   │      └ <starlette.requests.Request object at 0x7fb991f2a680>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb992308400>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb992393700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb991f0a200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb9923084f0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb992308400>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb991f0a200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb99b04a350>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb9923084f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb991f0a200>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb99b1964d0>
          └ <fastapi.routing.APIRoute object at 0x7fb991f28190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb991f0a200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb991f2ab90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb991f08b80>
          └ <fastapi.routing.APIRoute object at 0x7fb991f28190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb991f62b30>
                     └ <function get_request_handler.<locals>.app at 0x7fb991f08af0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb99b197130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fb991f62140>, '_': (<app.src.models.user.User object at 0x7fb991b...
                 │                 │         └ <function read_users at 0x7fb992f8f760>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fb991f28250>
                 └ <function run_in_threadpool at 0x7fb99baeedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_users at 0x7fb992f8f760>, db_session=<sqlalchemy.orm.session.Session object at 0x7fb991f621...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fb991f78140>
                 │     │         └ <function run_sync at 0x7fb99bbb1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fb99bbb0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'UserService' object has no attribute 'resource_stage_repository'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fb991...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fb9993d6e80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fb991f2efc0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 33, in read_users
    data = user_service.get_all(db_session)
           │            │       └ <sqlalchemy.orm.session.Session object at 0x7fb991f62140>
           │            └ <function UserService.get_all at 0x7fb9983f55a0>
           └ <app.src.services.user_service.UserService object at 0x7fb9923081c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 124, in get_all
    resource_stages = self.resource_stage_repository.get_all(db_session)
                      │                                      └ <sqlalchemy.orm.session.Session object at 0x7fb991f62140>
                      └ <app.src.services.user_service.UserService object at 0x7fb9923081c0>

AttributeError: 'UserService' object has no attribute 'resource_stage_repository'
INFO     2024-02-02 11:49:44.269 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44116 - "GET /rms/v1.0/users HTTP/1.1" 500
INFO     2024-02-02 11:50:17.183 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:50:17.285 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:50:17.286 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:50:17.286 request id: app - uvicorn.server:serve - Finished server process [2199828]
INFO     2024-02-02 11:50:18.198 request id: app - uvicorn.server:serve - Started server process [2200061]
INFO     2024-02-02 11:50:18.199 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:50:18.200 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:50:30.332 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:50:30.434 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:50:30.435 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:50:30.435 request id: app - uvicorn.server:serve - Finished server process [2200061]
INFO     2024-02-02 11:50:31.281 request id: app - uvicorn.server:serve - Started server process [2200146]
INFO     2024-02-02 11:50:31.308 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:50:31.309 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:50:43.741 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:50:43.842 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:50:43.843 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:50:43.844 request id: app - uvicorn.server:serve - Finished server process [2200146]
INFO     2024-02-02 11:50:44.716 request id: app - uvicorn.server:serve - Started server process [2200241]
INFO     2024-02-02 11:50:44.717 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:50:44.718 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:50:57.151 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:50:57.253 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:50:57.253 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:50:57.254 request id: app - uvicorn.server:serve - Finished server process [2200241]
INFO     2024-02-02 11:50:58.066 request id: app - uvicorn.server:serve - Started server process [2200338]
INFO     2024-02-02 11:50:58.067 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:50:58.068 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:51:03.494 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54804 - "GET /rms/v1.0/users HTTP/1.1" 200
ERROR    2024-02-02 11:51:32.443 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe43566c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe43566c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe436ac3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe436c5e950>
           └ <SpawnProcess name='SpawnProcess-5' parent=2199826 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe436c5dfc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=2199826 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe436b0c1f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2199826 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=2199826 started>
    │    └ <function subprocess_started at 0x7fe435f92440>
    └ <SpawnProcess name='SpawnProcess-5' parent=2199826 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe436b0c310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe435f91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe436b0c310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe4363ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe4363ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe4363afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe436ab3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe42c026200>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe42c026200>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe42c026200>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe42c026200>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe435e90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe435e905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe436b0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe43524ebf0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe436b0de70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe42c1c8910>
          └ <fastapi.applications.FastAPI object at 0x7fe43524ebf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe42c062bc0>
                     │    └ <function error_handle_business at 0x7fe4350e3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe42c1c8910>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UserRepository' object has no attribute 'create_'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe42c005c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe42c1ca650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe42c1c8910>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '66', 'accept': 'application/json', 'authoriz...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe42c005c60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fe43510f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe42c1ca650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fe42c1ca650>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe42c18f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe42c1ca650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe42c006170>
                     │    │             └ <starlette.requests.Request object at 0x7fe42c0fe7d0>
                     │    └ <function process_middleware_common at 0x7fe4350e31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe42c18f760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe42c0fe7d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe42c006170>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UserRepository' object has no attribute 'create_'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe43566ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe4351e0680>
          │    │   │      └ <starlette.requests.Request object at 0x7fe42c0fe7d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe42c104460>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe42c18f760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe427f02ef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe42c104550>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe42c104460>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe427f02ef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe4350d2350>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe42c104550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe427f02ef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe43521e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe42c024b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe427f02ef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe427f44dc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe42c004d30>
          └ <fastapi.routing.APIRoute object at 0x7fe42c024b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe42c026c50>
                     └ <function get_request_handler.<locals>.app at 0x7fe42c004ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe43521f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe42c0621d0>, '_': (<app.src.models.user.User object at 0x7fe427f...
                 │                 │         └ <function create_user at 0x7fe42c74ba30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe42c024bb0>
                 └ <function run_in_threadpool at 0x7fe435b6add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function create_user at 0x7fe42c74ba30>, db_session=<sqlalchemy.orm.session.Session object at 0x7fe42c062...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe42c02bf00>
                 │     │         └ <function run_sync at 0x7fe435c2d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe435c2c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'UserRepository' object has no attribute 'create_'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe427...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe42c03a140>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe42c0381c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 47, in create_user
    data = user_service.create(db_session, user_create)
           │            │      │           └ UserCreate(email='truongtuananhbm@gmail.com', password='$2b$12$TfZeMoPvKIpbWtjq/NubbuAVg2O25W0093ktxFWcAUUk3XNNy/RQC')
           │            │      └ <sqlalchemy.orm.session.Session object at 0x7fe42c0621d0>
           │            └ <function UserService.create at 0x7fe42e3f52d0>
           └ <app.src.services.user_service.UserService object at 0x7fe42c104220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 84, in create
    user = self.user_repository.create_(db_session, obj_in=user_create)
           │    │                       │                  └ UserCreate(email='truongtuananhbm@gmail.com', password='$2b$12$TfZeMoPvKIpbWtjq/NubbuAVg2O25W0093ktxFWcAUUk3XNNy/RQC')
           │    │                       └ <sqlalchemy.orm.session.Session object at 0x7fe42c0621d0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7fe42c1042b0>
           └ <app.src.services.user_service.UserService object at 0x7fe42c104220>

AttributeError: 'UserRepository' object has no attribute 'create_'
INFO     2024-02-02 11:51:32.458 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59400 - "POST /rms/v1.0/users HTTP/1.1" 500
INFO     2024-02-02 11:52:02.033 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:52:02.135 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:52:02.136 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:52:02.136 request id: app - uvicorn.server:serve - Finished server process [2200338]
INFO     2024-02-02 11:52:03.022 request id: app - uvicorn.server:serve - Started server process [2200715]
INFO     2024-02-02 11:52:03.023 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:52:03.024 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 11:52:05.439 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column "role_id" of relation "users" violates not-null constraint\nDETAIL:  Failing row contains (5c3594be-1d5e-51bc-9b03-81153d3ce80f, truongtuananhbm@gmail.com, $2b$12$mGIl/PLPiq47c/mxbBKp3e42a.YiA93nCGR8J2/H.QpU62YMWx/5i, 2024-02-02 04:52:05.195044, 2024-02-02 04:52:05.195044, null, f).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 58, in create\n    session.commit()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit\n    trans.commit(_to_root=True)\n  File "<string>", line 2, in commit\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit\n    self._prepare_impl()\n  File "<string>", line 2, in _prepare_impl\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl\n    self.session.flush()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush\n    self._flush(objects)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush\n    flush_context.execute()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute\n    rec.execute(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj\n    _emit_insert_statements(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements\n    result = connection.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "role_id" of relation "users" violates not-null constraint\nDETAIL:  Failing row contains (5c3594be-1d5e-51bc-9b03-81153d3ce80f, truongtuananhbm@gmail.com, $2b$12$mGIl/PLPiq47c/mxbBKp3e42a.YiA93nCGR8J2/H.QpU62YMWx/5i, 2024-02-02 04:52:05.195044, 2024-02-02 04:52:05.195044, null, f).\n\n[SQL: INSERT INTO users (id, email, password, role_id, is_deleted) VALUES (%(id)s::UUID, %(email)s, %(password)s, %(role_id)s::UUID, %(is_deleted)s) RETURNING users.created_at, users.updated_at]\n[parameters: {\'id\': UUID(\'5c3594be-1d5e-51bc-9b03-81153d3ce80f\'), \'email\': \'truongtuananhbm@gmail.com\', \'password\': \'$2b$12$mGIl/PLPiq47c/mxbBKp3e42a.YiA93nCGR8J2/H.QpU62YMWx/5i\', \'role_id\': None, \'is_deleted\': False}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\n'}
INFO     2024-02-02 11:52:05.441 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39560 - "POST /rms/v1.0/users HTTP/1.1" 500
INFO     2024-02-02 11:53:36.765 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:53:36.867 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:53:36.868 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:53:36.868 request id: app - uvicorn.server:serve - Finished server process [2200715]
INFO     2024-02-02 11:54:49.010 request id: app - uvicorn.server:serve - Started server process [2201682]
INFO     2024-02-02 11:54:49.011 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:54:49.011 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:54:55.995 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46390 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 11:54:56.205 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46390 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 11:55:32.123 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:55:32.225 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:55:32.226 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:55:32.226 request id: app - uvicorn.server:serve - Finished server process [2201682]
INFO     2024-02-02 11:55:33.215 request id: app - uvicorn.server:serve - Started server process [2202404]
INFO     2024-02-02 11:55:33.216 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:55:33.217 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:55:33.690 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37426 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 11:55:33.934 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37426 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 11:55:59.414 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 11:55:59.683 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1MTU1OX0.WJJrQT2ejNQt9s2eQup9oG40mI541tIT-lragQKwp1E","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2Nzc1OX0.BfpuVUd2hpWYBH3zijlW2PnGBZiYObqTZCRMCsyYGIg"},"links":null,"relationships":null,"timestamp":"2024-02-02 11:55:32"}'}
INFO     2024-02-02 11:55:59.684 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37430 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-02 11:56:50.612 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41316 - "POST /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-02 11:57:37.261 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50772 - "PUT /rms/v1.0/users/4b2928c1-0a72-5cd4-9747-b29a380d9ce5 HTTP/1.1" 422
INFO     2024-02-02 11:59:29.033 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 11:59:29.135 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 11:59:29.135 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 11:59:29.136 request id: app - uvicorn.server:serve - Finished server process [2202404]
INFO     2024-02-02 11:59:29.992 request id: app - uvicorn.server:serve - Started server process [2203938]
INFO     2024-02-02 11:59:29.994 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 11:59:29.994 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 11:59:34.656 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35766 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 11:59:34.804 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35766 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 12:00:38.669 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 12:00:38.771 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 12:00:38.771 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 12:00:38.772 request id: app - uvicorn.server:serve - Finished server process [2203938]
INFO     2024-02-02 12:00:39.657 request id: app - uvicorn.server:serve - Started server process [2204367]
INFO     2024-02-02 12:00:39.658 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 12:00:39.659 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 12:00:42.137 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55646 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 12:00:42.277 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55646 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 12:01:26.567 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': '123456'}}
ERROR    2024-02-02 12:01:26.833 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Incorrect Password
None
INFO     2024-02-02 12:01:26.834 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55660 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-02 12:01:47.333 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 12:01:47.566 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg1MTkwN30.3vP90BDI0hTYtx8Z6cqXpnl5dHbt8LFjhYUMCY5rxro","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2ODEwN30.8SvBniM1DPBla3ElyNpKb7icEGkjGcS5WQMXU8GZ1Io"},"links":null,"relationships":null,"timestamp":"2024-02-02 12:00:39"}'}
INFO     2024-02-02 12:01:47.567 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56116 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-02 12:03:02.613 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34318 - "PUT /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 200
INFO     2024-02-02 12:41:13.090 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 12:41:13.191 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 12:41:13.192 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 12:41:13.193 request id: app - uvicorn.server:serve - Finished server process [2204367]
INFO     2024-02-02 12:41:14.016 request id: app - uvicorn.server:serve - Started server process [2218337]
INFO     2024-02-02 12:41:14.018 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 12:41:14.018 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 12:41:22.440 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 12:41:22.541 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 12:41:22.542 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 12:41:22.543 request id: app - uvicorn.server:serve - Finished server process [2218337]
INFO     2024-02-02 12:41:23.396 request id: app - uvicorn.server:serve - Started server process [2218407]
INFO     2024-02-02 12:41:23.397 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 12:41:23.398 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 12:42:49.602 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58628 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 12:42:49.803 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58628 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 12:43:21.294 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 12:43:21.396 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 12:43:21.397 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 12:43:21.397 request id: app - uvicorn.server:serve - Finished server process [2218407]
INFO     2024-02-02 12:43:22.225 request id: app - uvicorn.server:serve - Started server process [2219118]
INFO     2024-02-02 12:43:22.226 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 12:43:22.227 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 12:43:33.357 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 12:43:33.458 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 12:43:33.459 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 12:43:33.459 request id: app - uvicorn.server:serve - Finished server process [2219118]
INFO     2024-02-02 12:43:34.248 request id: app - uvicorn.server:serve - Started server process [2219185]
INFO     2024-02-02 12:43:34.249 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 12:43:34.250 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 13:02:51.824 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 13:02:51.926 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 13:02:51.926 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 13:02:51.927 request id: app - uvicorn.server:serve - Finished server process [2219185]
INFO     2024-02-02 13:03:04.724 request id: app - uvicorn.server:serve - Started server process [2226545]
INFO     2024-02-02 13:03:04.725 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 13:03:04.726 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 13:09:38.693 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 13:09:38.794 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 13:09:38.795 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 13:09:38.796 request id: app - uvicorn.server:serve - Finished server process [2226545]
INFO     2024-02-02 13:09:39.716 request id: app - uvicorn.server:serve - Started server process [2229174]
INFO     2024-02-02 13:09:39.717 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 13:09:39.718 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 13:09:47.844 request id: app - uvicorn.server:serve - Started server process [2229214]
INFO     2024-02-02 13:09:47.846 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 13:09:47.846 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 13:09:50.454 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 13:09:50.556 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 13:09:50.556 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 13:09:50.557 request id: app - uvicorn.server:serve - Finished server process [2229214]
INFO     2024-02-02 13:13:08.444 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 13:13:08.545 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 13:13:08.546 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 13:13:08.547 request id: app - uvicorn.server:serve - Finished server process [2229174]
INFO     2024-02-02 14:15:30.961 request id: app - uvicorn.server:serve - Started server process [2256133]
INFO     2024-02-02 14:15:30.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:15:30.963 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:15:47.606 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:15:47.708 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:15:47.709 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:15:47.709 request id: app - uvicorn.server:serve - Finished server process [2256133]
INFO     2024-02-02 14:15:51.162 request id: app - uvicorn.server:serve - Started server process [2256299]
INFO     2024-02-02 14:15:51.163 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:15:51.164 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:15:51.918 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46586 - "GET / HTTP/1.1" 404
INFO     2024-02-02 14:15:53.838 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46586 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:15:54.068 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46586 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 14:15:55.292 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46586 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:15:55.405 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46586 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 14:16:11.419 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:16:11.520 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:16:11.521 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:16:11.522 request id: app - uvicorn.server:serve - Finished server process [2256299]
INFO     2024-02-02 14:16:12.401 request id: app - uvicorn.server:serve - Started server process [2256506]
INFO     2024-02-02 14:16:12.402 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:16:12.403 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:16:12.976 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55764 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:16:13.089 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55764 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 14:16:50.988 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 14:16:51.273 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDAxMX0.-WbZMUq6sZ9eyYT4biLq8iOHV1zGiO8rB6ZDrrKOT5o","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg3NjIxMX0.WwnrjB6VufjAWry3BNEPYvFDpovWto5fUDBvIJR1kSA"},"links":null,"relationships":null,"timestamp":"2024-02-02 14:16:12"}'}
INFO     2024-02-02 14:16:51.274 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55774 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 14:17:10.906 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f965bff8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f965bff83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f965d40bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f965d55e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=2256297 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f965d55dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=2256297 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f965d4541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2256297 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2256297 started>
    │    └ <function subprocess_started at 0x7f965c972440>
    └ <SpawnProcess name='SpawnProcess-2' parent=2256297 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f965d454310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f965c971900>
    │    │                  └ <uvicorn.server.Server object at 0x7f965d454310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f965cda6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f965cda63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f965cda7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f965d3f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f965ba91210>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f965ba91210>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f965ba91210>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f965ba91210>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f965c82c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f965c82c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f965d455e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f965bbcac80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f965d455e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9652bd4c10>
          └ <fastapi.applications.FastAPI object at 0x7f965bbcac80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9652762ec0>
                     │    └ <function error_handle_business at 0x7f965ba5f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9652bd4c10>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Role' has no attribute 'is_deleted'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9652be2710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9652bd4cd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9652bd4c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9652be2710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9652ba5e10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9652bd4cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9652be3760>
                     │    │             └ <starlette.requests.Request object at 0x7f9652762500>
                     │    └ <function process_middleware_common at 0x7f965ba5f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9652ba5e10>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9652762500>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9652be3760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Role' has no attribute 'is_deleted'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f965bff8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f965bb604a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f9652762500>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9652b107c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9652ba5e10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9652358670>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9652b108b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9652b107c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9652358670>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f965ba4e3e0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9652b108b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9652358670>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f965bb9e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f96527280a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9652358670>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9652370c10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9652be1fc0>
          └ <fastapi.routing.APIRoute object at 0x7f96527280a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f96523711b0>
                     └ <function get_request_handler.<locals>.app at 0x7f9652be1f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f965bb9f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f9652762710>, '_': (<app.src.models.user.User object at 0x7f96523...
                 │                 │         └ <function read_role at 0x7f9652b1c670>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f9652728160>
                 └ <function run_in_threadpool at 0x7f965c4fadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_role at 0x7f9652b1c670>, db_session=<sqlalchemy.orm.session.Session object at 0x7f965276271...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f965273c300>
                 │     │         └ <function run_sync at 0x7f965c5bd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f965c5bc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Role' has no attribute 'is_deleted'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9652...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f965273cf40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f965231ad80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/role_controller.py", line 32, in read_role
    data = role_service.get_all(db_session)
           │            │       └ <sqlalchemy.orm.session.Session object at 0x7f9652762710>
           │            └ <function RoleService.get_all at 0x7f9652b1c310>
           └ <app.src.services.role_service.RoleService object at 0x7f96537f47c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/role_service.py", line 43, in get_all
    roles = self.role_repository.get_all(db_session)
            │    │               │       └ <sqlalchemy.orm.session.Session object at 0x7f9652762710>
            │    │               └ <function BaseSQLRepository.get_all at 0x7f9659c2e170>
            │    └ <app.src.repositories.role.RoleRepository object at 0x7f96537f64a0>
            └ <app.src.services.role_service.RoleService object at 0x7f96537f47c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 46, in get_all
    data = session.query(self.model).filter(self.model.is_deleted.is_(False)).all()
           │       │     │    │             │    └ <class 'app.src.models.role.Role'>
           │       │     │    │             └ <app.src.repositories.role.RoleRepository object at 0x7f96537f64a0>
           │       │     │    └ <class 'app.src.models.role.Role'>
           │       │     └ <app.src.repositories.role.RoleRepository object at 0x7f96537f64a0>
           │       └ <function Session.query at 0x7f9659ec35b0>
           └ <sqlalchemy.orm.session.Session object at 0x7f9652762710>

AttributeError: type object 'Role' has no attribute 'is_deleted'
INFO     2024-02-02 14:17:10.926 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45528 - "GET /rms/v1.0/roles HTTP/1.1" 500
INFO     2024-02-02 14:18:09.805 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:18:09.906 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:18:09.907 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:18:09.907 request id: app - uvicorn.server:serve - Finished server process [2256506]
INFO     2024-02-02 14:18:10.793 request id: app - uvicorn.server:serve - Started server process [2257281]
INFO     2024-02-02 14:18:10.795 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:18:10.795 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:18:14.659 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedColumn: column roles.update_at does not exist\nLINE 1: ...roles_name, roles.created_at AS roles_created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 46, in get_all\n    data = session.query(self.model).filter(self.model.is_deleted.is_(False)).all()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all\n    return self._iter().all()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column roles.update_at does not exist\nLINE 1: ...roles_name, roles.created_at AS roles_created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.update_at AS roles_update_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.is_deleted IS false]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n'}
INFO     2024-02-02 14:18:14.661 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60338 - "GET /rms/v1.0/roles HTTP/1.1" 500
INFO     2024-02-02 14:19:10.946 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:19:11.048 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:19:11.049 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:19:11.049 request id: app - uvicorn.server:serve - Finished server process [2257281]
INFO     2024-02-02 14:19:11.931 request id: app - uvicorn.server:serve - Started server process [2257647]
INFO     2024-02-02 14:19:11.934 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:19:11.934 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:19:15.455 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedColumn: column roles.update_at does not exist\nLINE 1: ...roles_name, roles.created_at AS roles_created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 46, in get_all\n    data = session.query(self.model).filter(self.model.is_deleted.is_(False)).all()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2697, in all\n    return self._iter().all()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column roles.update_at does not exist\nLINE 1: ...roles_name, roles.created_at AS roles_created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.update_at AS roles_update_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.is_deleted IS false]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n'}
INFO     2024-02-02 14:19:15.456 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49880 - "GET /rms/v1.0/roles HTTP/1.1" 500
INFO     2024-02-02 14:19:33.892 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:19:33.993 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:19:33.994 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:19:33.994 request id: app - uvicorn.server:serve - Finished server process [2257647]
INFO     2024-02-02 14:19:34.940 request id: app - uvicorn.server:serve - Started server process [2257793]
INFO     2024-02-02 14:19:34.942 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:19:34.943 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:19:38.007 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37470 - "GET /rms/v1.0/roles HTTP/1.1" 200
ERROR    2024-02-02 14:19:52.862 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:19:52.864 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54404 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:21:20.208 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:21:20.309 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:21:20.310 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:21:20.311 request id: app - uvicorn.server:serve - Finished server process [2257793]
INFO     2024-02-02 14:21:21.223 request id: app - uvicorn.server:serve - Started server process [2258431]
INFO     2024-02-02 14:21:21.225 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:21:21.225 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:21:24.666 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:21:24.668 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39208 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:23:20.217 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49370 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:23:20.333 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49370 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 14:24:02.996 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 14:24:03.229 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MDQ0M30.ctHiTXCUudOfxsbfzCB5JYdyGqbNnp6pr-9BtF_gVEw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg3NjY0M30.NPvAO44O3SK8Ol-FnVlos_mKqSZu4fRQe5akR2mG3s0"},"links":null,"relationships":null,"timestamp":"2024-02-02 14:21:20"}'}
INFO     2024-02-02 14:24:03.231 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49384 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 14:24:24.513 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:24:24.515 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41272 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:38:41.027 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:38:41.129 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:38:41.130 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:38:41.130 request id: app - uvicorn.server:serve - Finished server process [2258431]
INFO     2024-02-02 14:40:17.661 request id: app - uvicorn.server:serve - Started server process [2265587]
INFO     2024-02-02 14:40:17.662 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:40:17.663 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:40:23.145 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:40:23.146 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42400 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:40:26.897 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42400 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:40:27.050 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42400 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 14:40:50.812 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 14:40:51.046 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MTQ1MX0.O5TFwpnYRSYmFBnVOoucDKxuWhhCnlASpJJl01eEuhY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg3NzY1MX0.GJpxGiTk19FSyEvO7nZUfyisXHyXRQhtnKTNwbAqYlU"},"links":null,"relationships":null,"timestamp":"2024-02-02 14:40:17"}'}
INFO     2024-02-02 14:40:51.047 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42406 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 14:41:08.988 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:41:08.990 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34322 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:42:35.108 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:42:35.210 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:42:35.210 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:42:35.211 request id: app - uvicorn.server:serve - Finished server process [2265587]
INFO     2024-02-02 14:42:36.107 request id: app - uvicorn.server:serve - Started server process [2266436]
INFO     2024-02-02 14:42:36.108 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:42:36.109 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:43:11.599 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:43:11.700 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:43:11.701 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:43:11.702 request id: app - uvicorn.server:serve - Finished server process [2266436]
INFO     2024-02-02 14:43:44.001 request id: app - uvicorn.server:serve - Started server process [2266914]
INFO     2024-02-02 14:43:44.002 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:43:44.003 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:43:49.617 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:43:49.718 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:43:49.719 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:43:49.719 request id: app - uvicorn.server:serve - Finished server process [2266914]
INFO     2024-02-02 14:43:50.543 request id: app - uvicorn.server:serve - Started server process [2266966]
INFO     2024-02-02 14:43:50.545 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:43:50.545 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:44:10.996 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:44:11.098 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:44:11.098 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:44:11.099 request id: app - uvicorn.server:serve - Finished server process [2266966]
INFO     2024-02-02 14:44:45.562 request id: app - uvicorn.server:serve - Started server process [2267321]
INFO     2024-02-02 14:44:45.563 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:44:45.564 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:44:55.289 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:44:55.391 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:44:55.391 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:44:55.392 request id: app - uvicorn.server:serve - Finished server process [2267321]
INFO     2024-02-02 14:44:56.290 request id: app - uvicorn.server:serve - Started server process [2267408]
INFO     2024-02-02 14:44:56.291 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:44:56.292 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:45:14.938 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:45:15.039 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:45:15.040 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:45:15.041 request id: app - uvicorn.server:serve - Finished server process [2267408]
INFO     2024-02-02 14:45:15.915 request id: app - uvicorn.server:serve - Started server process [2267516]
INFO     2024-02-02 14:45:15.917 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:45:15.917 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:46:12.556 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:46:12.657 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:46:12.658 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:46:12.659 request id: app - uvicorn.server:serve - Finished server process [2267516]
INFO     2024-02-02 14:46:32.674 request id: app - uvicorn.server:serve - Started server process [2268011]
INFO     2024-02-02 14:46:32.676 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:46:32.676 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:46:38.792 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:46:38.894 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:46:38.894 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:46:38.895 request id: app - uvicorn.server:serve - Finished server process [2268011]
INFO     2024-02-02 14:46:39.995 request id: app - uvicorn.server:serve - Started server process [2268076]
INFO     2024-02-02 14:46:39.997 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:46:39.997 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:47:25.613 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:47:25.715 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:47:25.715 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:47:25.716 request id: app - uvicorn.server:serve - Finished server process [2268076]
INFO     2024-02-02 14:47:26.548 request id: app - uvicorn.server:serve - Started server process [2268359]
INFO     2024-02-02 14:47:26.550 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:47:26.550 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:47:33.770 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:47:33.872 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:47:33.872 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:47:33.873 request id: app - uvicorn.server:serve - Finished server process [2268359]
INFO     2024-02-02 14:47:34.710 request id: app - uvicorn.server:serve - Started server process [2268407]
INFO     2024-02-02 14:47:34.711 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:47:34.712 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:47:35.816 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:47:35.918 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:47:35.919 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:47:35.919 request id: app - uvicorn.server:serve - Finished server process [2268407]
INFO     2024-02-02 14:47:36.768 request id: app - uvicorn.server:serve - Started server process [2268445]
INFO     2024-02-02 14:47:36.769 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:47:36.770 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:47:39.879 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:47:39.980 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:47:39.981 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:47:39.982 request id: app - uvicorn.server:serve - Finished server process [2268445]
INFO     2024-02-02 14:47:40.846 request id: app - uvicorn.server:serve - Started server process [2268470]
INFO     2024-02-02 14:47:40.847 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:47:40.848 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:47:45.261 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:47:45.362 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:47:45.363 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:47:45.364 request id: app - uvicorn.server:serve - Finished server process [2268470]
INFO     2024-02-02 14:47:46.160 request id: app - uvicorn.server:serve - Started server process [2268499]
INFO     2024-02-02 14:47:46.162 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:47:46.162 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:47:47.566 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:47:47.668 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:47:47.669 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:47:47.670 request id: app - uvicorn.server:serve - Finished server process [2268499]
INFO     2024-02-02 14:47:48.566 request id: app - uvicorn.server:serve - Started server process [2268528]
INFO     2024-02-02 14:47:48.568 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:47:48.568 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:47:53.024 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:47:53.025 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42288 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:48:56.740 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:48:56.842 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:48:56.843 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:48:56.843 request id: app - uvicorn.server:serve - Finished server process [2268528]
INFO     2024-02-02 14:48:57.670 request id: app - uvicorn.server:serve - Started server process [2268968]
INFO     2024-02-02 14:48:57.671 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:48:57.672 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:49:21.932 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:49:22.034 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:49:22.035 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:49:22.036 request id: app - uvicorn.server:serve - Finished server process [2268968]
INFO     2024-02-02 14:49:22.887 request id: app - uvicorn.server:serve - Started server process [2269118]
INFO     2024-02-02 14:49:22.888 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:49:22.889 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:49:47.651 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:49:47.753 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:49:47.753 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:49:47.754 request id: app - uvicorn.server:serve - Finished server process [2269118]
INFO     2024-02-02 14:49:48.749 request id: app - uvicorn.server:serve - Started server process [2269274]
INFO     2024-02-02 14:49:48.750 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:49:48.751 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:50:02.586 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:50:02.688 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:50:02.688 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:50:02.689 request id: app - uvicorn.server:serve - Finished server process [2269274]
INFO     2024-02-02 14:50:03.544 request id: app - uvicorn.server:serve - Started server process [2269379]
INFO     2024-02-02 14:50:03.545 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:50:03.546 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:50:19.788 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:50:19.889 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:50:19.890 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:50:19.891 request id: app - uvicorn.server:serve - Finished server process [2269379]
INFO     2024-02-02 14:50:20.693 request id: app - uvicorn.server:serve - Started server process [2269489]
INFO     2024-02-02 14:50:20.695 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:50:20.695 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:50:37.939 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:50:38.041 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:50:38.041 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:50:38.042 request id: app - uvicorn.server:serve - Finished server process [2269489]
INFO     2024-02-02 14:50:38.906 request id: app - uvicorn.server:serve - Started server process [2269594]
INFO     2024-02-02 14:50:38.907 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:50:38.908 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:50:41.394 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "Admin"\nLINE 3: WHERE roles.id = \'Admin\'::UUID AND roles.is_deleted IS false...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'Admin\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:50:41.396 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50878 - "GET /rms/v1.0/roles/Admin HTTP/1.1" 500
INFO     2024-02-02 14:50:56.908 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41544 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:50:57.070 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41544 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-02 14:51:13.696 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{role_name}"\nLINE 3: WHERE roles.id = \'{role_name}\'::UUID AND roles.is_deleted IS...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{role_name}"\nLINE 3: WHERE roles.id = \'{role_name}\'::UUID AND roles.is_deleted IS...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'{role_name}\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:51:13.698 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41552 - "GET /rms/v1.0/roles/%7Brole_name%7D?name=Admin HTTP/1.1" 500
INFO     2024-02-02 14:53:26.442 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:53:26.543 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:53:26.544 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:53:26.545 request id: app - uvicorn.server:serve - Finished server process [2269594]
INFO     2024-02-02 14:53:35.022 request id: app - uvicorn.server:serve - Started server process [2270692]
INFO     2024-02-02 14:53:35.023 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:53:35.024 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:54:59.639 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:54:59.740 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:54:59.741 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:54:59.741 request id: app - uvicorn.server:serve - Finished server process [2270692]
INFO     2024-02-02 14:55:55.440 request id: app - uvicorn.server:serve - Started server process [2271992]
INFO     2024-02-02 14:55:55.441 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:55:55.442 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:56:04.056 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{role_name}"\nLINE 3: WHERE roles.id = \'{role_name}\'::UUID AND roles.is_deleted IS...\n                         ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{role_name}"\nLINE 3: WHERE roles.id = \'{role_name}\'::UUID AND roles.is_deleted IS...\n                         ^\n\n[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at, roles.is_deleted AS roles_is_deleted \nFROM roles \nWHERE roles.id = %(id_1)s::UUID AND roles.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'{role_name}\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-02 14:56:04.058 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35480 - "GET /rms/v1.0/roles/%7Brole_name%7D?name=Admin HTTP/1.1" 500
INFO     2024-02-02 14:56:25.875 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55892 - "GET /docs HTTP/1.1" 200
INFO     2024-02-02 14:56:26.087 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55892 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-02 14:56:43.111 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 14:56:43.349 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MjQwM30.0h85aimg4dctHjG4CK4iz5GT7HkogAEOWUdTXWJyAvY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg3ODYwM30.SySvxGdQVB_ycmVzRQQabpUh5pNSLYctPm9Iv6Wh40M"},"links":null,"relationships":null,"timestamp":"2024-02-02 14:55:55"}'}
INFO     2024-02-02 14:56:43.349 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55896 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-02 14:57:06.644 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb2a4e44310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb2a4e443a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb2a620bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb2a635e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb2a635dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb2a62541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2271598 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=2271598 started>
    │    └ <function subprocess_started at 0x7fb2a578e440>
    └ <SpawnProcess name='SpawnProcess-2' parent=2271598 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb2a6254310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb2a578d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb2a6254310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb2a5ba6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb2a5ba63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb2a5ba7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb2a61f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb297367940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb297367940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb297367940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb297367940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb2a5658550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb2a56585e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb2a6255e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb2a4a1ac20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb2a6255e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb297be4b80>
          └ <fastapi.applications.FastAPI object at 0x7fb2a4a1ac20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb297367b80>
                     │    └ <function error_handle_business at 0x7fb2a48ab250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb297be4b80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Role' has no attribute 'role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb2973343a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb297be4c40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb297be4b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb2973343a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb297bb5d80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb297be4c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb2967375b0>
                     │    │             └ <starlette.requests.Request object at 0x7fb297366140>
                     │    └ <function process_middleware_common at 0x7fb2a48ab1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb297bb5d80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb297366140>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb2967375b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Role' has no attribute 'role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb2a4e44a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb2a49ac4f0>
          │    │   │      └ <starlette.requests.Request object at 0x7fb297366140>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb297b30760>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb297bb5d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb296737a30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb297b30850>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb297b30760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb296737a30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb2a489a380>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb297b30850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb296737a30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb2a49ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7fb297739360>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb296737a30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb2973678e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb297bee3b0>
          └ <fastapi.routing.APIRoute object at 0x7fb297739360>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb2973673d0>
                     └ <function get_request_handler.<locals>.app at 0x7fb297bee320>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb2a49eb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fb297366110>, '_': (<app.src.models.user.User object at 0x7fb2966...
                 │                 │         └ <function read_role_by_name at 0x7fb297b28ca0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fb297739420>
                 └ <function run_in_threadpool at 0x7fb2a5346dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_role_by_name at 0x7fb297b28ca0>, db_session=<sqlalchemy.orm.session.Session object at 0x7fb...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fb297b2e900>
                 │     │         └ <function run_sync at 0x7fb2a5409090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fb2a5408820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Role' has no attribute 'role'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fb297...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fb29663cf40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fb29663f480>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/role_controller.py", line 63, in read_role_by_name
    data = role_service.get_by_name(db_session, role_name)
           │            │           │           └ 'Admin'
           │            │           └ <sqlalchemy.orm.session.Session object at 0x7fb297366110>
           │            └ <function RoleService.get_by_name at 0x7fb297b28430>
           └ <app.src.services.role_service.RoleService object at 0x7fb297b30040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/role_service.py", line 68, in get_by_name
    roles = self.role_repository.get_role_by_name(db_session, filters)
            │    │               │                │           └ 'Admin'
            │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7fb297366110>
            │    │               └ <function RoleRepository.get_role_by_name at 0x7fb297b280d0>
            │    └ <app.src.repositories.role.RoleRepository object at 0x7fb297b30070>
            └ <app.src.services.role_service.RoleService object at 0x7fb297b30040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/role.py", line 19, in get_role_by_name
    obj = session.query(self.model).filter(self.model.role == value, self.model.is_deleted.is_(False)).first()
          │       │     │    │             │    │             │      │    │     │          └ <function ColumnOperators.is_ at 0x7fb29f53a0e0>
          │       │     │    │             │    │             │      │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7fb29eb37560>
          │       │     │    │             │    │             │      │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             │    │             │      └ <app.src.repositories.role.RoleRepository object at 0x7fb297b30070>
          │       │     │    │             │    │             └ 'Admin'
          │       │     │    │             │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             └ <app.src.repositories.role.RoleRepository object at 0x7fb297b30070>
          │       │     │    └ <class 'app.src.models.role.Role'>
          │       │     └ <app.src.repositories.role.RoleRepository object at 0x7fb297b30070>
          │       └ <function Session.query at 0x7fb29ece35b0>
          └ <sqlalchemy.orm.session.Session object at 0x7fb297366110>

AttributeError: type object 'Role' has no attribute 'role'
INFO     2024-02-02 14:57:06.660 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54254 - "GET /rms/v1.0/role/name/Admin HTTP/1.1" 500
INFO     2024-02-02 14:57:31.288 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:57:31.389 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:57:31.391 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:57:31.391 request id: app - uvicorn.server:serve - Finished server process [2271992]
INFO     2024-02-02 14:57:32.379 request id: app - uvicorn.server:serve - Started server process [2272539]
INFO     2024-02-02 14:57:32.396 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:57:32.397 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:57:35.548 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f187bd50310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f187bd503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f187d10bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f187d25e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f187d25dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f187d1541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
    │    └ <function subprocess_started at 0x7f187c692440>
    └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f187d154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f187c691900>
    │    │                  └ <uvicorn.server.Server object at 0x7f187d154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f187cf06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f187cf063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f187cf07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f187d0f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1872306290>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1872306290>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1872306290>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1872306290>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f187c55c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f187c55c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f187d155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f187b92ac20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f187d155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1872bdcb50>
          └ <fastapi.applications.FastAPI object at 0x7f187b92ac20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1872733100>
                     │    └ <function error_handle_business at 0x7f187b7bf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1872bdcb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Role' has no attribute 'role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1872bea7a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1872bdcc10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1872bdcb50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1872bea7a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1872badd50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1872bdcc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1872bea830>
                     │    │             └ <starlette.requests.Request object at 0x7f18727324a0>
                     │    └ <function process_middleware_common at 0x7f187b7bf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1872badd50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f18727324a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1872bea830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Role' has no attribute 'role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f187bd50a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f187b8bc630>
          │    │   │      └ <starlette.requests.Request object at 0x7f18727324a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1872b188e0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1872badd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1872beb6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1872b18cd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1872b188e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1872beb6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f187b7ae380>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1872b18cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1872beb6d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f187b8fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1872731330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1872beb6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1872732980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1872bea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1872731330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f187276e8f0>
                     └ <function get_request_handler.<locals>.app at 0x7f1872bea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f187b8fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f187276df00>, '_': (<app.src.models.user.User object at 0x7f18723...
                 │                 │         └ <function read_role_by_name at 0x7f1872b24d30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f18727313f0>
                 └ <function run_in_threadpool at 0x7f187c24add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_role_by_name at 0x7f1872b24d30>, db_session=<sqlalchemy.orm.session.Session object at 0x7f1...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f187277d400>
                 │     │         └ <function run_sync at 0x7f187c30d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f187c30c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Role' has no attribute 'role'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f1872...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f187277dd40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f187277df00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/role_controller.py", line 63, in read_role_by_name
    data = role_service.get_by_name(db_session, role_name)
           │            │           │           └ 'Admin'
           │            │           └ <sqlalchemy.orm.session.Session object at 0x7f187276df00>
           │            └ <function RoleService.get_by_name at 0x7f1872b244c0>
           └ <app.src.services.role_service.RoleService object at 0x7f18733fa350>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/role_service.py", line 68, in get_by_name
    roles = self.role_repository.get_role_by_name(db_session, filters)
            │    │               │                │           └ 'Admin'
            │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f187276df00>
            │    │               └ <function RoleRepository.get_role_by_name at 0x7f1872b24160>
            │    └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
            └ <app.src.services.role_service.RoleService object at 0x7f18733fa350>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/role.py", line 19, in get_role_by_name
    obj = session.query(self.model).filter(self.model.role.name == value, self.model.is_deleted.is_(False)).first()
          │       │     │    │             │    │                  │      │    │     │          └ <function ColumnOperators.is_ at 0x7f187a1860e0>
          │       │     │    │             │    │                  │      │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f1879a3f560>
          │       │     │    │             │    │                  │      │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             │    │                  │      └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
          │       │     │    │             │    │                  └ 'Admin'
          │       │     │    │             │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
          │       │     │    └ <class 'app.src.models.role.Role'>
          │       │     └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
          │       └ <function Session.query at 0x7f1879beb5b0>
          └ <sqlalchemy.orm.session.Session object at 0x7f187276df00>

AttributeError: type object 'Role' has no attribute 'role'
INFO     2024-02-02 14:57:35.573 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55698 - "GET /rms/v1.0/role/name/Admin HTTP/1.1" 500
ERROR    2024-02-02 14:57:46.273 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f187bd50310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f187bd503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f187d10bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f187d25e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f187d25dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f187d1541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
    │    └ <function subprocess_started at 0x7f187c692440>
    └ <SpawnProcess name='SpawnProcess-3' parent=2271598 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f187d154310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f187c691900>
    │    │                  └ <uvicorn.server.Server object at 0x7f187d154310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f187cf06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f187cf063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f187cf07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f187d0f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f187235b0a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f187235b0a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f187235b0a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f187235b0a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f187c55c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f187c55c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f187d155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f187b92ac20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f187d155e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1872bdcb50>
          └ <fastapi.applications.FastAPI object at 0x7f187b92ac20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f187235baf0>
                     │    └ <function error_handle_business at 0x7f187b7bf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1872bdcb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Role' has no attribute 'role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1872326170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1872bdcc10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1872bdcb50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1872326170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1872badd50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1872bdcc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1871742710>
                     │    │             └ <starlette.requests.Request object at 0x7f187235b730>
                     │    └ <function process_middleware_common at 0x7f187b7bf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1872badd50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f187235b730>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1871742710>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Role' has no attribute 'role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f187bd50a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f187b8bc630>
          │    │   │      └ <starlette.requests.Request object at 0x7f187235b730>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1872b188e0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1872badd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f18717429e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1872b18cd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1872b188e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f18717429e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f187b7ae380>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1872b18cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f18717429e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f187b8fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1872731330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f18717429e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f187235b2b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1872bea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1872731330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f187235b010>
                     └ <function get_request_handler.<locals>.app at 0x7f1872bea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f187b8fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f187235b2e0>, '_': (<app.src.models.user.User object at 0x7f18723...
                 │                 │         └ <function read_role_by_name at 0x7f1872b24d30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f18727313f0>
                 └ <function run_in_threadpool at 0x7f187c24add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_role_by_name at 0x7f1872b24d30>, db_session=<sqlalchemy.orm.session.Session object at 0x7f1...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1872301880>
                 │     │         └ <function run_sync at 0x7f187c30d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f187c30c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Role' has no attribute 'role'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f1872...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1872b30740>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1871775800>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/role_controller.py", line 63, in read_role_by_name
    data = role_service.get_by_name(db_session, role_name)
           │            │           │           └ 'Admin'
           │            │           └ <sqlalchemy.orm.session.Session object at 0x7f187235b2e0>
           │            └ <function RoleService.get_by_name at 0x7f1872b244c0>
           └ <app.src.services.role_service.RoleService object at 0x7f18733fa350>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/role_service.py", line 68, in get_by_name
    roles = self.role_repository.get_role_by_name(db_session, filters)
            │    │               │                │           └ 'Admin'
            │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f187235b2e0>
            │    │               └ <function RoleRepository.get_role_by_name at 0x7f1872b24160>
            │    └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
            └ <app.src.services.role_service.RoleService object at 0x7f18733fa350>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/role.py", line 19, in get_role_by_name
    obj = session.query(self.model).filter(self.model.role.name == value, self.model.is_deleted.is_(False)).first()
          │       │     │    │             │    │                  │      │    │     │          └ <function ColumnOperators.is_ at 0x7f187a1860e0>
          │       │     │    │             │    │                  │      │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f1879a3f560>
          │       │     │    │             │    │                  │      │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             │    │                  │      └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
          │       │     │    │             │    │                  └ 'Admin'
          │       │     │    │             │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
          │       │     │    └ <class 'app.src.models.role.Role'>
          │       │     └ <app.src.repositories.role.RoleRepository object at 0x7f18733fa380>
          │       └ <function Session.query at 0x7f1879beb5b0>
          └ <sqlalchemy.orm.session.Session object at 0x7f187235b2e0>

AttributeError: type object 'Role' has no attribute 'role'
INFO     2024-02-02 14:57:46.284 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48036 - "GET /rms/v1.0/role/name/Admin HTTP/1.1" 500
INFO     2024-02-02 14:58:06.792 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:58:06.893 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:58:06.894 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:58:06.895 request id: app - uvicorn.server:serve - Finished server process [2272539]
INFO     2024-02-02 14:58:07.824 request id: app - uvicorn.server:serve - Started server process [2272870]
INFO     2024-02-02 14:58:07.825 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:58:07.825 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-02 14:58:10.243 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f48545ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f48545ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f4855a0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4855b5e950>
           └ <SpawnProcess name='SpawnProcess-4' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4855b5dfc0>
    └ <SpawnProcess name='SpawnProcess-4' parent=2271598 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4855a541f0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2271598 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=2271598 started>
    │    └ <function subprocess_started at 0x7f4854f66440>
    └ <SpawnProcess name='SpawnProcess-4' parent=2271598 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4855a54310>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4854f65900>
    │    │                  └ <uvicorn.server.Server object at 0x7f4855a54310>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f48553a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f48553a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f48553a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f48559f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f484af0bf10>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f484af0bf10>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f484af0bf10>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f484af0bf10>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4854e24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4854e245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4855a55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f48541c6c20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4855a55e70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f484b7e0b50>
          └ <fastapi.applications.FastAPI object at 0x7f48541c6c20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f484b337100>
                     │    └ <function error_handle_business at 0x7f485405b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f484b7e0b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Role' has no attribute 'Role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f484b7ea7a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f484b7e0c10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f484b7e0b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f484b7ea7a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f484b7b1d50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f484b7e0c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f484b7ea830>
                     │    │             └ <starlette.requests.Request object at 0x7f484b3364a0>
                     │    └ <function process_middleware_common at 0x7f485405b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f484b7b1d50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f484b3364a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f484b7ea830>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Role' has no attribute 'Role'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f48545eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f48541589f0>
          │    │   │      └ <starlette.requests.Request object at 0x7f484b3364a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f484b71c8e0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f484b7b1d50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f484b7eb6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f484b71ccd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f484b71c8e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f484b7eb6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f485404a380>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f484b71ccd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f484b7eb6d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f48541964d0>
          └ <fastapi.routing.APIRoute object at 0x7f484b335330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f484b7eb6d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f484b336980>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f484b7ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f484b335330>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f484b3728f0>
                     └ <function get_request_handler.<locals>.app at 0x7f484b7ea440>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4854197130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f484b371f00>, '_': (<app.src.models.user.User object at 0x7f484af...
                 │                 │         └ <function read_role_by_name at 0x7f484b728d30>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f484b3353f0>
                 └ <function run_in_threadpool at 0x7f4854af2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_role_by_name at 0x7f484b728d30>, db_session=<sqlalchemy.orm.session.Session object at 0x7f4...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f484b349580>
                 │     │         └ <function run_sync at 0x7f4854bb5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4854bb4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Role' has no attribute 'Role'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f484b...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f484b37e140>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f48523cea40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/role_controller.py", line 63, in read_role_by_name
    data = role_service.get_by_name(db_session, role_name)
           │            │           │           └ 'Admin'
           │            │           └ <sqlalchemy.orm.session.Session object at 0x7f484b371f00>
           │            └ <function RoleService.get_by_name at 0x7f484b7284c0>
           └ <app.src.services.role_service.RoleService object at 0x7f484bffe350>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/role_service.py", line 68, in get_by_name
    roles = self.role_repository.get_role_by_name(db_session, filters)
            │    │               │                │           └ 'Admin'
            │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f484b371f00>
            │    │               └ <function RoleRepository.get_role_by_name at 0x7f484b728160>
            │    └ <app.src.repositories.role.RoleRepository object at 0x7f484bffe380>
            └ <app.src.services.role_service.RoleService object at 0x7f484bffe350>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/role.py", line 19, in get_role_by_name
    obj = session.query(self.model).filter(self.model.Role.name == value, self.model.is_deleted.is_(False)).first()
          │       │     │    │             │    │                  │      │    │     │          └ <function ColumnOperators.is_ at 0x7f4852cfa0e0>
          │       │     │    │             │    │                  │      │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f4852337560>
          │       │     │    │             │    │                  │      │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             │    │                  │      └ <app.src.repositories.role.RoleRepository object at 0x7f484bffe380>
          │       │     │    │             │    │                  └ 'Admin'
          │       │     │    │             │    └ <class 'app.src.models.role.Role'>
          │       │     │    │             └ <app.src.repositories.role.RoleRepository object at 0x7f484bffe380>
          │       │     │    └ <class 'app.src.models.role.Role'>
          │       │     └ <app.src.repositories.role.RoleRepository object at 0x7f484bffe380>
          │       └ <function Session.query at 0x7f48524e35b0>
          └ <sqlalchemy.orm.session.Session object at 0x7f484b371f00>

AttributeError: type object 'Role' has no attribute 'Role'
INFO     2024-02-02 14:58:10.259 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54330 - "GET /rms/v1.0/role/name/Admin HTTP/1.1" 500
INFO     2024-02-02 14:58:22.765 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 14:58:22.866 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 14:58:22.867 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 14:58:22.868 request id: app - uvicorn.server:serve - Finished server process [2272870]
INFO     2024-02-02 14:58:23.702 request id: app - uvicorn.server:serve - Started server process [2273060]
INFO     2024-02-02 14:58:23.703 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 14:58:23.704 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 14:58:25.609 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56408 - "GET /rms/v1.0/role/name/Admin HTTP/1.1" 200
INFO     2024-02-02 15:02:56.524 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51084 - "GET /rms/v1.0/roles HTTP/1.1" 200
INFO     2024-02-02 15:04:53.705 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37146 - "GET /rms/v1.0/roles/4b2928c1-0a72-5cd4-9747-b29a380d9ce5 HTTP/1.1" 200
INFO     2024-02-02 15:24:16.253 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2MjQwM30.0h85aimg4dctHjG4CK4iz5GT7HkogAEOWUdTXWJyAvY'}}
INFO     2024-02-02 15:24:16.269 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-02 14:58:23"}'}
INFO     2024-02-02 15:24:16.270 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55172 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-02-02 15:27:35.497 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-02 15:27:35.733 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg2NDI1NX0.qH0tO9AKIn-a2OFoe-quFujR29YLW5iF6iEOoMKdcwk","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNjg4MDQ1NX0.uGntpAfup7qu4H0vJhzygQL5N3b-OBSEH-yn3VTdGYw"},"links":null,"relationships":null,"timestamp":"2024-02-02 14:58:23"}'}
INFO     2024-02-02 15:27:35.734 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43186 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-02 15:28:34.988 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44818 - "PUT /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 200
INFO     2024-02-02 15:38:44.328 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 15:38:44.429 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 15:38:44.430 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 15:38:44.431 request id: app - uvicorn.server:serve - Finished server process [2273060]
INFO     2024-02-02 15:38:45.770 request id: app - uvicorn.server:serve - Started server process [2287705]
INFO     2024-02-02 15:38:45.771 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 15:38:45.772 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 15:39:04.019 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 15:39:04.121 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 15:39:04.121 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 15:39:04.122 request id: app - uvicorn.server:serve - Finished server process [2287705]
INFO     2024-02-02 15:39:04.920 request id: app - uvicorn.server:serve - Started server process [2287797]
INFO     2024-02-02 15:39:04.921 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-02 15:39:04.921 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-02 15:39:47.129 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-02 15:39:47.231 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-02 15:39:47.231 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-02 15:39:47.232 request id: app - uvicorn.server:serve - Finished server process [2287797]
INFO     2024-02-05 08:36:27.510 request id: app - uvicorn.server:serve - Started server process [11303]
INFO     2024-02-05 08:36:27.511 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:36:27.512 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:36:29.583 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53212 - "GET / HTTP/1.1" 404
INFO     2024-02-05 08:36:29.664 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53212 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-05 08:36:53.301 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:36:53.403 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:36:53.404 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:36:53.405 request id: app - uvicorn.server:serve - Finished server process [11303]
INFO     2024-02-05 08:40:57.944 request id: app - uvicorn.server:serve - Started server process [12983]
INFO     2024-02-05 08:40:57.945 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:40:57.946 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:41:02.763 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:41:02.864 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:41:02.865 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:41:02.866 request id: app - uvicorn.server:serve - Finished server process [12983]
INFO     2024-02-05 08:41:03.686 request id: app - uvicorn.server:serve - Started server process [13037]
INFO     2024-02-05 08:41:03.688 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:41:03.688 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:41:38.911 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:41:39.013 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:41:39.014 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:41:39.015 request id: app - uvicorn.server:serve - Finished server process [13037]
INFO     2024-02-05 08:41:40.025 request id: app - uvicorn.server:serve - Started server process [13315]
INFO     2024-02-05 08:41:40.027 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:41:40.028 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:42:07.023 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:42:07.124 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:42:07.125 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:42:07.125 request id: app - uvicorn.server:serve - Finished server process [13315]
INFO     2024-02-05 08:42:07.967 request id: app - uvicorn.server:serve - Started server process [13489]
INFO     2024-02-05 08:42:07.968 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:42:07.969 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:42:11.253 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40320 - "GET / HTTP/1.1" 404
INFO     2024-02-05 08:42:13.202 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40320 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 08:42:13.283 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40320 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-05 08:42:13.284 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40326 - "GET /static/swagger-ui.css HTTP/1.1" 304
INFO     2024-02-05 08:42:13.502 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40320 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 08:42:18.525 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43824 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 08:42:18.712 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43824 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 08:45:39.512 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'name': 'Cute'}}
INFO     2024-02-05 08:45:39.515 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56732 - "POST /rms/v1.0/role HTTP/1.1" 403
INFO     2024-02-05 08:46:07.409 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 08:46:07.824 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzA5OTM2N30.m4df6Dy6eqCMoVWnmjogFGD4qHt-DN6i5cbSUs6yrmI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExNTU2N30.wG1abPuwNpVdVVJSu-SUado5MBvnzx9RBHrWhyfNU1o"},"links":null,"relationships":null,"timestamp":"2024-02-05 08:42:07"}'}
INFO     2024-02-05 08:46:07.825 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48434 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 08:46:27.103 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzA5OTM2N30.m4df6Dy6eqCMoVWnmjogFGD4qHt-DN6i5cbSUs6yrmI', 'content-type': 'application/json'}, 'request_body': {'name': 'Cute'}}
ERROR    2024-02-05 08:46:27.139 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedColumn: column roles.update_at does not exist\nLINE 1: ...::uuid::UUID, \'Cute\') RETURNING roles.created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 58, in create\n    session.commit()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit\n    trans.commit(_to_root=True)\n  File "<string>", line 2, in commit\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit\n    self._prepare_impl()\n  File "<string>", line 2, in _prepare_impl\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl\n    self.session.flush()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush\n    self._flush(objects)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush\n    flush_context.execute()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute\n    rec.execute(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj\n    _emit_insert_statements(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements\n    result = connection.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column roles.update_at does not exist\nLINE 1: ...::uuid::UUID, \'Cute\') RETURNING roles.created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n[SQL: INSERT INTO roles (id, name) VALUES (%(id)s::UUID, %(name)s) RETURNING roles.created_at, roles.update_at, roles.updated_at]\n[parameters: {\'id\': UUID(\'d6cd4a4c-70c3-53f2-b6c0-38ed79220a95\'), \'name\': \'Cute\'}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n'}
INFO     2024-02-05 08:46:27.140 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59966 - "POST /rms/v1.0/role HTTP/1.1" 500
INFO     2024-02-05 08:47:16.058 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzA5OTM2N30.m4df6Dy6eqCMoVWnmjogFGD4qHt-DN6i5cbSUs6yrmI', 'content-type': 'application/json'}, 'request_body': {'name': 'Cute'}}
ERROR    2024-02-05 08:47:16.068 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedColumn: column roles.update_at does not exist\nLINE 1: ...::uuid::UUID, \'Cute\') RETURNING roles.created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 58, in create\n    session.commit()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit\n    trans.commit(_to_root=True)\n  File "<string>", line 2, in commit\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit\n    self._prepare_impl()\n  File "<string>", line 2, in _prepare_impl\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl\n    self.session.flush()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush\n    self._flush(objects)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush\n    flush_context.execute()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute\n    rec.execute(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj\n    _emit_insert_statements(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements\n    result = connection.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column roles.update_at does not exist\nLINE 1: ...::uuid::UUID, \'Cute\') RETURNING roles.created_at, roles.upda...\n                                                             ^\nHINT:  Perhaps you meant to reference the column "roles.updated_at".\n\n[SQL: INSERT INTO roles (id, name) VALUES (%(id)s::UUID, %(name)s) RETURNING roles.created_at, roles.update_at, roles.updated_at]\n[parameters: {\'id\': UUID(\'23c1d4ee-9fa3-5931-9258-cb3fb37e7939\'), \'name\': \'Cute\'}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n'}
INFO     2024-02-05 08:47:16.070 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58550 - "POST /rms/v1.0/role HTTP/1.1" 500
INFO     2024-02-05 08:47:50.756 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:47:50.858 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:47:50.859 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:47:50.859 request id: app - uvicorn.server:serve - Finished server process [13489]
INFO     2024-02-05 08:47:52.009 request id: app - uvicorn.server:serve - Started server process [15872]
INFO     2024-02-05 08:47:52.011 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:47:52.011 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:47:54.850 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzA5OTM2N30.m4df6Dy6eqCMoVWnmjogFGD4qHt-DN6i5cbSUs6yrmI', 'content-type': 'application/json'}, 'request_body': {'name': 'Cute'}}
INFO     2024-02-05 08:47:54.914 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"success","data":{"id":"d61bfe4c-ac5f-5c33-97da-72ec42057916","name":"Cute","created_at":"2024-02-05 01:47:54.894116"},"links":null,"relationships":null,"timestamp":"2024-02-05 08:47:51"}'}
INFO     2024-02-05 08:47:54.915 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35496 - "POST /rms/v1.0/role HTTP/1.1" 200
INFO     2024-02-05 08:48:00.968 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzA5OTM2N30.m4df6Dy6eqCMoVWnmjogFGD4qHt-DN6i5cbSUs6yrmI'}}
ERROR    2024-02-05 08:48:00.979 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fd121d84310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fd121d843a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fd1231c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fd123362950>
           └ <SpawnProcess name='SpawnProcess-10' parent=11301 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fd123361fc0>
    └ <SpawnProcess name='SpawnProcess-10' parent=11301 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fd123210250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=11301 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=11301 started>
    │    └ <function subprocess_started at 0x7fd12269e440>
    └ <SpawnProcess name='SpawnProcess-10' parent=11301 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fd123210370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fd12269d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fd123210370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fd122f92440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd122f923b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd122f93eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd122ee3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fd1181716c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fd1181716c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fd1181716c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fd1181716c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fd122598550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fd1225985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd123211ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fd121956c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd123211ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd1185e4d60>
          └ <fastapi.applications.FastAPI object at 0x7fd121956c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fd11813a6e0>
                     │    └ <function error_handle_business at 0x7fd1217eb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd1185e4d60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("type object 'Role' has no attribute 'is_deleted'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd1185f3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd1185e4e20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd1185e4d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd1185f3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd1185b5f60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd1185e4e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd1185f3d90>
                     │    │             └ <starlette.requests.Request object at 0x7fd11813a800>
                     │    └ <function process_middleware_common at 0x7fd1217eb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd1185b5f60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fd11813a800>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd1185f3d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("type object 'Role' has no attribute 'is_deleted'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fd121d84a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fd1218ec590>
          │    │   │      └ <starlette.requests.Request object at 0x7fd11813a800>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd1185106d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd1185b5f60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd118031990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd1185107c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd1185106d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd118031990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fd1217da3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd1185107c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd118031990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fd12192a4d0>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fd118113ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd118031990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd11805ab60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fd1185f2320>
          └ <rbl_fastapi_base.base.base_router.BaseRoute object at 0x7fd118113ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fd11805b2e0>
                     └ <function BaseRoute.get_route_handler.<locals>.custom_route_handler at 0x7fd1185f2290>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/base/base_router.py", line 33, in custom_route_handler
    response: Response = await original_route_handler(request)
                               │                      └ <starlette.requests.Request object at 0x7fd11805b2e0>
                               └ <function get_request_handler.<locals>.app at 0x7fd1185f2200>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fd12192b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fd118172500>, '_': (<app.src.models.user.User object at 0x7fd1181...
                 │                 │         └ <function read_roles at 0x7fd11851c0d0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fd118113d60>
                 └ <function run_in_threadpool at 0x7fd122286dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_roles at 0x7fd11851c0d0>, db_session=<sqlalchemy.orm.session.Session object at 0x7fd1181725...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fd1181437c0>
                 │     │         └ <function run_sync at 0x7fd122349090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fd122348820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("type object 'Role' has no attribute 'is_deleted'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fd118...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fd1189b0300>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fd1189b1f80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/role_controller.py", line 29, in read_roles
    data = role_service.get_all(db_session)
           │            │       └ <sqlalchemy.orm.session.Session object at 0x7fd118172500>
           │            └ <function RoleService.get_all at 0x7fd11851c3a0>
           └ <app.src.services.role_service.RoleService object at 0x7fd1191fa230>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/role_service.py", line 43, in get_all
    roles = self.role_repository.get_all(db_session)
            │    │               │       └ <sqlalchemy.orm.session.Session object at 0x7fd118172500>
            │    │               └ <function BaseSQLRepository.get_all at 0x7fd11b93e170>
            │    └ <app.src.repositories.role.RoleRepository object at 0x7fd1191fa260>
            └ <app.src.services.role_service.RoleService object at 0x7fd1191fa230>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 46, in get_all
    data = session.query(self.model).filter(self.model.is_deleted.is_(False)).all()
           │       │     │    │             │    └ <class 'app.src.models.role.Role'>
           │       │     │    │             └ <app.src.repositories.role.RoleRepository object at 0x7fd1191fa260>
           │       │     │    └ <class 'app.src.models.role.Role'>
           │       │     └ <app.src.repositories.role.RoleRepository object at 0x7fd1191fa260>
           │       └ <function Session.query at 0x7fd11bbef5b0>
           └ <sqlalchemy.orm.session.Session object at 0x7fd118172500>

AttributeError: type object 'Role' has no attribute 'is_deleted'
INFO     2024-02-05 08:48:01.009 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35510 - "GET /rms/v1.0/role HTTP/1.1" 500
INFO     2024-02-05 08:48:28.148 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:48:28.250 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:48:28.251 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:48:28.251 request id: app - uvicorn.server:serve - Finished server process [15872]
INFO     2024-02-05 08:48:29.156 request id: app - uvicorn.server:serve - Started server process [16100]
INFO     2024-02-05 08:48:29.157 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 08:48:29.158 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 08:48:34.988 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzA5OTM2N30.m4df6Dy6eqCMoVWnmjogFGD4qHt-DN6i5cbSUs6yrmI'}}
INFO     2024-02-05 08:48:35.030 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"success","data":{"4b2928c1-0a72-5cd4-9747-b29a380d9ce5":{"name":"Admin","created_at":"2024-01-25T08:04:29.398984","is_deleted":false,"updated_at":"2024-01-25T08:04:29.398984","id":"4b2928c1-0a72-5cd4-9747-b29a380d9ce5"},"57986dcc-c12d-5f29-ab07-5632c47995da":{"name":"Editor","created_at":"2024-01-25T08:04:29.398984","is_deleted":false,"updated_at":"2024-01-25T08:04:29.398984","id":"57986dcc-c12d-5f29-ab07-5632c47995da"},"82a288f9-3f5f-55fc-8e68-aee5acc1e37d":{"name":"Customer","created_at":"2024-01-25T08:04:29.398984","is_deleted":false,"updated_at":"2024-01-25T08:04:29.398984","id":"82a288f9-3f5f-55fc-8e68-aee5acc1e37d"},"1986d379-7b5b-5268-be1d-4caf90e88d07":{"name":"Guest","created_at":"2024-01-25T08:04:29.398984","is_deleted":false,"updated_at":"2024-01-25T08:04:29.398984","id":"1986d379-7b5b-5268-be1d-4caf90e88d07"},"d61bfe4c-ac5f-5c33-97da-72ec42057916":{"name":"Cute","created_at":"2024-02-05T01:47:54.894116","is_deleted":false,"updated_at":"2024-02-05T01:47:54.894116","id":"d61bfe4c-ac5f-5c33-97da-72ec42057916"}},"links":null,"relationships":null,"timestamp":"2024-02-05 08:48:28"}'}
INFO     2024-02-05 08:48:35.031 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52708 - "GET /rms/v1.0/role HTTP/1.1" 200
INFO     2024-02-05 08:49:07.819 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': '', 'path_params': {'role_id': 'd61bfe4c-ac5f-5c33-97da-72ec42057916'}}
INFO     2024-02-05 08:49:07.828 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"success","data":{"id":"d61bfe4c-ac5f-5c33-97da-72ec42057916","name":"Cute","created_at":"2024-02-05 01:47:54.894116"},"links":null,"relationships":null,"timestamp":"2024-02-05 08:48:28"}'}
INFO     2024-02-05 08:49:07.829 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43314 - "GET /rms/v1.0/role/id/d61bfe4c-ac5f-5c33-97da-72ec42057916 HTTP/1.1" 200
INFO     2024-02-05 08:49:21.024 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': '', 'path_params': {'role_name': 'Cute'}}
INFO     2024-02-05 08:49:21.035 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"success","data":{"id":"d61bfe4c-ac5f-5c33-97da-72ec42057916","name":"Cute","created_at":"2024-02-05 01:47:54.894116"},"links":null,"relationships":null,"timestamp":"2024-02-05 08:48:28"}'}
INFO     2024-02-05 08:49:21.037 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39706 - "GET /rms/v1.0/role/name/Cute HTTP/1.1" 200
INFO     2024-02-05 08:49:43.476 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': '', 'path_params': {'role_id': 'd61bfe4c-ac5f-5c33-97da-72ec42057916'}}
INFO     2024-02-05 08:49:43.477 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39176 - "PUT /rms/v1.0/role/d61bfe4c-ac5f-5c33-97da-72ec42057916 HTTP/1.1" 422
INFO     2024-02-05 08:49:52.565 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': '', 'path_params': {'role_id': 'd61bfe4c-ac5f-5c33-97da-72ec42057916'}}
INFO     2024-02-05 08:49:52.583 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"success","data":{"id":"d61bfe4c-ac5f-5c33-97da-72ec42057916","name":"Cuta","created_at":"2024-02-05 01:47:54.894116"},"links":null,"relationships":null,"timestamp":"2024-02-05 08:48:28"}'}
INFO     2024-02-05 08:49:52.584 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39184 - "PUT /rms/v1.0/role/d61bfe4c-ac5f-5c33-97da-72ec42057916 HTTP/1.1" 200
INFO     2024-02-05 08:49:57.578 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'query_params': '', 'path_params': {'role_id': 'd61bfe4c-ac5f-5c33-97da-72ec42057916'}}
INFO     2024-02-05 08:49:57.592 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"Delete Role Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-05 08:48:28"}'}
INFO     2024-02-05 08:49:57.593 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39184 - "DELETE /rms/v1.0/role/d61bfe4c-ac5f-5c33-97da-72ec42057916 HTTP/1.1" 200
INFO     2024-02-05 08:55:39.216 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 08:55:39.318 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 08:55:39.319 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 08:55:39.319 request id: app - uvicorn.server:serve - Finished server process [16100]
INFO     2024-02-05 09:25:38.434 request id: app - uvicorn.server:serve - Started server process [31684]
INFO     2024-02-05 09:25:38.435 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:25:38.436 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:25:40.352 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37614 - "GET / HTTP/1.1" 404
INFO     2024-02-05 09:25:56.957 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37620 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 09:25:57.116 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37620 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 09:25:58.340 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37620 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 09:25:58.459 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37620 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 09:26:30.797 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 09:26:31.070 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwMTc5MX0.Ax3pE1E0wzMhPftjhNGA-pHiPYbBe6GDocVTz6fld7k","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExNzk5MX0.XtbMJ1AW-6IyHcP1lHd0074B3y6HDLSOR77iLVShm6s"},"links":null,"relationships":null,"timestamp":"2024-02-05 09:25:38"}'}
INFO     2024-02-05 09:26:31.071 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57542 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 09:26:48.047 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33940 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-05 09:26:59.976 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38236 - "DELETE /rms/v1.0/resoures/4e204dde-5da0-57cf-9114-a9acf3799e2c HTTP/1.1" 200
INFO     2024-02-05 09:28:19.298 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:28:19.399 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:28:19.400 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:28:19.401 request id: app - uvicorn.server:serve - Finished server process [31684]
INFO     2024-02-05 09:28:20.248 request id: app - uvicorn.server:serve - Started server process [32896]
INFO     2024-02-05 09:28:20.249 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:28:20.250 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:28:28.982 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:28:29.083 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:28:29.084 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:28:29.085 request id: app - uvicorn.server:serve - Finished server process [32896]
INFO     2024-02-05 09:28:29.956 request id: app - uvicorn.server:serve - Started server process [32949]
INFO     2024-02-05 09:28:29.957 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:28:29.958 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:28:37.185 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:28:37.287 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:28:37.288 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:28:37.288 request id: app - uvicorn.server:serve - Finished server process [32949]
INFO     2024-02-05 09:28:38.113 request id: app - uvicorn.server:serve - Started server process [33006]
INFO     2024-02-05 09:28:38.114 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:28:38.115 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:28:43.637 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:28:43.740 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:28:43.741 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:28:43.742 request id: app - uvicorn.server:serve - Finished server process [33006]
INFO     2024-02-05 09:28:44.668 request id: app - uvicorn.server:serve - Started server process [33056]
INFO     2024-02-05 09:28:44.669 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:28:44.670 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:28:53.501 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53324 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 09:28:53.787 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53324 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 09:29:13.479 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 09:29:13.755 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwMTk1M30.h0UKMn7rXXBljCkipyQ0_7GeGhEtCitXGC43b5Ogwt4","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExODE1M30.zJco0E_5J5PXODCqZaLsFNi6qBFTQqv9Qd_J88pRBfQ"},"links":null,"relationships":null,"timestamp":"2024-02-05 09:28:44"}'}
INFO     2024-02-05 09:29:13.756 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53334 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 09:29:36.861 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51180 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
ERROR    2024-02-05 09:30:31.864 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-05 09:30:31.865 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36448 - "DELETE /rms/v1.0/resoures/4e204dde-5da0-57cf-9114-a9acf3799e2c HTTP/1.1" 400
INFO     2024-02-05 09:31:34.967 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:31:35.069 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:31:35.070 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:31:35.071 request id: app - uvicorn.server:serve - Finished server process [33056]
INFO     2024-02-05 09:31:57.098 request id: app - uvicorn.server:serve - Started server process [34194]
INFO     2024-02-05 09:31:57.099 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:31:57.100 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:32:04.828 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:32:04.934 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:32:04.935 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:32:04.936 request id: app - uvicorn.server:serve - Finished server process [34194]
INFO     2024-02-05 09:32:05.870 request id: app - uvicorn.server:serve - Started server process [34253]
INFO     2024-02-05 09:32:05.871 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:32:05.872 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:32:21.630 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:32:21.734 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:32:21.737 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:32:21.739 request id: app - uvicorn.server:serve - Finished server process [34253]
INFO     2024-02-05 09:32:22.656 request id: app - uvicorn.server:serve - Started server process [34355]
INFO     2024-02-05 09:32:22.657 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:32:22.658 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 09:32:24.565 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-05 09:32:24.566 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60034 - "DELETE /rms/v1.0/resoures/4e204dde-5da0-57cf-9114-a9acf3799e2c HTTP/1.1" 400
INFO     2024-02-05 09:32:39.723 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:32:39.825 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:32:39.826 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:32:39.826 request id: app - uvicorn.server:serve - Finished server process [34355]
INFO     2024-02-05 09:32:40.705 request id: app - uvicorn.server:serve - Started server process [34478]
INFO     2024-02-05 09:32:40.707 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:32:40.707 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 09:32:41.654 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-05 09:32:41.655 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42336 - "DELETE /rms/v1.0/resoures/4e204dde-5da0-57cf-9114-a9acf3799e2c HTTP/1.1" 400
INFO     2024-02-05 09:33:00.659 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38378 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 09:33:00.858 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38378 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-05 09:33:33.853 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-05 09:33:33.854 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38384 - "DELETE /rms/v1.0/resoures/4e204dde-5da0-57cf-9114-a9acf3799e2c HTTP/1.1" 400
INFO     2024-02-05 09:34:12.388 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:34:12.489 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:34:12.490 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:34:12.490 request id: app - uvicorn.server:serve - Finished server process [34478]
INFO     2024-02-05 09:34:13.446 request id: app - uvicorn.server:serve - Started server process [35030]
INFO     2024-02-05 09:34:13.448 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:34:13.448 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:34:26.814 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58162 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 09:34:27.056 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58162 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 09:35:05.002 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 09:35:05.280 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwMjMwNX0.YnJiCeS0anFAu1fw-BMS2ar6IcBChrBf35OaB_27vwI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExODUwNX0.d7-lX4f-mJMIbaM_tSpv-dhc6lg98ql15D4ChqT4ZL4"},"links":null,"relationships":null,"timestamp":"2024-02-05 09:34:13"}'}
INFO     2024-02-05 09:35:05.281 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58174 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 09:35:28.758 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44638 - "DELETE /rms/v1.0/resoures/4e204dde-5da0-57cf-9114-a9acf3799e2c HTTP/1.1" 200
INFO     2024-02-05 09:37:17.110 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:37:17.212 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:37:17.214 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:37:17.217 request id: app - uvicorn.server:serve - Finished server process [35030]
INFO     2024-02-05 09:37:18.108 request id: app - uvicorn.server:serve - Started server process [36122]
INFO     2024-02-05 09:37:18.109 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:37:18.110 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:37:20.318 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:37:20.420 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:37:20.421 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:37:20.422 request id: app - uvicorn.server:serve - Finished server process [36122]
INFO     2024-02-05 09:37:21.263 request id: app - uvicorn.server:serve - Started server process [36151]
INFO     2024-02-05 09:37:21.264 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 09:37:21.265 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 09:37:27.289 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 09:37:27.391 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 09:37:27.393 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 09:37:27.396 request id: app - uvicorn.server:serve - Finished server process [36151]
INFO     2024-02-05 10:54:11.536 request id: app - uvicorn.server:serve - Started server process [68380]
INFO     2024-02-05 10:54:11.537 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 10:54:11.538 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 10:54:29.715 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 10:54:29.817 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 10:54:29.818 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 10:54:29.818 request id: app - uvicorn.server:serve - Finished server process [68380]
INFO     2024-02-05 10:54:31.447 request id: app - uvicorn.server:serve - Started server process [68518]
INFO     2024-02-05 10:54:31.449 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 10:54:31.449 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 10:55:01.714 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37716 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 10:55:01.959 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37716 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 10:55:43.454 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-02-05 10:55:43.475 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/relationships.py", line 2421, in _determine_joins\n    self.primaryjoin = join_condition(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/util.py", line 123, in join_condition\n    return Join._join_condition(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/selectable.py", line 1369, in _join_condition\n    raise exc.NoForeignKeysError(\nsqlalchemy.exc.NoForeignKeysError: Can\'t find any foreign key relationships between \'product_types\' and \'resources\'.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/user.py", line 20, in get_user_by_email\n    obj = session.query(self.model).filter(self.model.email == value,\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2797, in query\n    return self._query_cls(entities, self, **kwargs)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 273, in __init__\n    self._set_entities(entities)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 282, in _set_entities\n    self._raw_columns = [\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 283, in <listcomp>\n    coercions.expect(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 406, in expect\n    insp._post_inspect\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1254, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 2693, in _post_inspect\n    self._check_configure()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 2374, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 4186, in _configure_registries\n    _do_configure_registries(registries, cascade)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 4228, in _do_configure_registries\n    mapper._post_configure_properties()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 2391, in _post_configure_properties\n    prop.init()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/interfaces.py", line 544, in init\n    self.do_init()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/relationships.py", line 1634, in do_init\n    self._setup_join_conditions()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/relationships.py", line 1881, in _setup_join_conditions\n    self._join_condition = jc = JoinCondition(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/relationships.py", line 2308, in __init__\n    self._determine_joins()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/relationships.py", line 2442, in _determine_joins\n    raise sa_exc.NoForeignKeysError(\nsqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship ProductType.resources - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a \'primaryjoin\' expression.\n'}
INFO     2024-02-05 10:55:43.476 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37726 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-02-05 10:59:41.603 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46558 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 10:59:41.933 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46558 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:00:01.327 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-02-05 11:00:01.330 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/user.py", line 20, in get_user_by_email\n    obj = session.query(self.model).filter(self.model.email == value,\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2797, in query\n    return self._query_cls(entities, self, **kwargs)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 273, in __init__\n    self._set_entities(entities)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 282, in _set_entities\n    self._raw_columns = [\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 283, in <listcomp>\n    coercions.expect(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 406, in expect\n    insp._post_inspect\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1254, in __get__\n    obj.__dict__[self.__name__] = result = self.fget(obj)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 2693, in _post_inspect\n    self._check_configure()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 2374, in _check_configure\n    _configure_registries({self.registry}, cascade=True)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 4186, in _configure_registries\n    _do_configure_registries(registries, cascade)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/mapper.py", line 4224, in _do_configure_registries\n    raise e\nsqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can\'t proceed with initialization of other mappers. Triggering mapper: \'Mapper[ProductType(product_types)]\'. Original exception was: Could not determine join condition between parent/child tables on relationship ProductType.resources - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a \'primaryjoin\' expression.\n'}
INFO     2024-02-05 11:00:01.331 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46572 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-02-05 11:02:28.423 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:02:28.527 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:02:28.527 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:02:28.528 request id: app - uvicorn.server:serve - Finished server process [68518]
INFO     2024-02-05 11:02:29.450 request id: app - uvicorn.server:serve - Started server process [71909]
INFO     2024-02-05 11:02:29.451 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:02:29.452 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:02:32.765 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:02:32.867 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:02:32.868 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:02:32.869 request id: app - uvicorn.server:serve - Finished server process [71909]
INFO     2024-02-05 11:02:33.736 request id: app - uvicorn.server:serve - Started server process [71950]
INFO     2024-02-05 11:02:33.738 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:02:33.738 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:06:23.386 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:06:25.181 request id: app - uvicorn.server:serve - Started server process [73275]
INFO     2024-02-05 11:06:25.182 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:06:25.183 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:07:09.360 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:07:09.462 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:07:09.463 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:07:09.463 request id: app - uvicorn.server:serve - Finished server process [73275]
INFO     2024-02-05 11:07:10.896 request id: app - uvicorn.server:serve - Started server process [73552]
INFO     2024-02-05 11:07:10.897 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:07:10.898 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:08:41.581 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:08:41.683 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:08:41.685 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:08:41.687 request id: app - uvicorn.server:serve - Finished server process [73552]
INFO     2024-02-05 11:08:43.154 request id: app - uvicorn.server:serve - Started server process [74157]
INFO     2024-02-05 11:08:43.155 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:08:43.155 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:08:57.717 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:08:57.820 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:08:57.821 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:08:57.822 request id: app - uvicorn.server:serve - Finished server process [74157]
INFO     2024-02-05 11:08:58.832 request id: app - uvicorn.server:serve - Started server process [74258]
INFO     2024-02-05 11:08:58.834 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:08:58.834 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:10:46.856 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:10:46.958 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:10:46.960 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:10:46.962 request id: app - uvicorn.server:serve - Finished server process [74258]
INFO     2024-02-05 11:10:48.676 request id: app - uvicorn.server:serve - Started server process [74894]
INFO     2024-02-05 11:10:48.678 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:10:48.678 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:10:57.072 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48112 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:10:57.429 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48112 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:11:14.457 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 11:11:14.743 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwODA3NH0.usIZ_XQ3dNMV_lAOqNDgiHt_kRVRbD_C9FQUJz1Ul10","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNDI3NH0.rndP7p8E2bKOYBUH0ciEZ9M9-SCWVQFgPMH3lO9bM9I"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:10:48"}'}
INFO     2024-02-05 11:11:14.744 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48128 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 11:11:45.579 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwODA3NH0.usIZ_XQ3dNMV_lAOqNDgiHt_kRVRbD_C9FQUJz1Ul10', 'content-type': 'application/json'}, 'request_body': {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNDI3NH0.rndP7p8E2bKOYBUH0ciEZ9M9-SCWVQFgPMH3lO9bM9I'}}
INFO     2024-02-05 11:11:45.588 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwODEwNX0.s9qy5_Xo1qVLOLVfq9pdHcmZ1oUlHm4pBU3kXuZf-nI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNDMwNX0.sBtJpGAFiToNmdt_IvbQIn354UdaUJrKyRl90gptpI4"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:10:48"}'}
INFO     2024-02-05 11:11:45.589 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33850 - "POST /rms/v1.0/refresh-token HTTP/1.1" 200
INFO     2024-02-05 11:12:03.744 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwODA3NH0.usIZ_XQ3dNMV_lAOqNDgiHt_kRVRbD_C9FQUJz1Ul10'}}
INFO     2024-02-05 11:12:03.761 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-05 11:10:48"}'}
INFO     2024-02-05 11:12:03.762 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36440 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-02-05 11:12:07.205 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36440 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:12:07.491 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36440 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:13:14.466 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 11:13:14.752 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwODE5NH0.2VaRUgoUzdT-dARDBbRT5mNS1ekXiOR5NjA9cpLveT0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNDM5NH0.OaWk3pQXCZtXkj4RV_5fGP_gsdFw17x004wZ-lAirCc"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:10:48"}'}
INFO     2024-02-05 11:13:14.753 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36074 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 11:18:05.177 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35662 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-05 11:20:34.188 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57696 - "GET /rms/v1.0/resources/dd9d8358-3243-5aa3-9be7-ac2ce2951972 HTTP/1.1" 200
INFO     2024-02-05 11:20:49.741 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42552 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-05 11:20:57.201 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50660 - "DELETE /rms/v1.0/resoure/dd9d8358-3243-5aa3-9be7-ac2ce2951972 HTTP/1.1" 200
INFO     2024-02-05 11:21:12.105 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52736 - "DELETE /rms/v1.0/resoures/dd9d8358-3243-5aa3-9be7-ac2ce2951972 HTTP/1.1" 200
INFO     2024-02-05 11:22:00.357 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38080 - "PUT /rms/v1.0/resource_stages/%7Bresource_stages_id%7D?resource_stage_id=367814e6-063c-560c-b428-20ed1ed85f4f HTTP/1.1" 200
INFO     2024-02-05 11:22:08.579 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43102 - "GET /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-02-05 11:22:21.539 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48326 - "POST /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-02-05 11:22:42.680 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38782 - "GET /rms/v1.0/resource_stages/%7Bresource_id%7D?resource_stage_id=89410055-475c-50e3-9f7b-861478e574e4 HTTP/1.1" 200
INFO     2024-02-05 11:22:47.948 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33334 - "DELETE /rms/v1.0/resource_stages/89410055-475c-50e3-9f7b-861478e574e4 HTTP/1.1" 200
INFO     2024-02-05 11:23:18.541 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52596 - "PUT /rms/v1.0/resource_tags/%7Bresource_tags_id%7D?resource_tag_id=fd02b16b-886c-5b4e-a253-d1dd6c91d46b HTTP/1.1" 200
INFO     2024-02-05 11:23:24.059 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33352 - "GET /rms/v1.0/resource_tags HTTP/1.1" 200
INFO     2024-02-05 11:23:35.449 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59598 - "POST /rms/v1.0/resource_tags HTTP/1.1" 200
INFO     2024-02-05 11:23:49.301 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53014 - "GET /rms/v1.0/resource_tags/%7Bresource_id%7D?resource_tag_id=5d904ea4-76e5-5a07-bd2d-74497c433e91 HTTP/1.1" 200
INFO     2024-02-05 11:24:02.051 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42764 - "DELETE /rms/v1.0/resource_tags/fd02b16b-886c-5b4e-a253-d1dd6c91d46b HTTP/1.1" 200
ERROR    2024-02-05 11:26:18.224 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f044b440310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f044b4403a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f044c80fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f044c962950>
           └ <SpawnProcess name='SpawnProcess-1' parent=74892 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f044c961fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=74892 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f044c854250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=74892 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=74892 started>
    │    └ <function subprocess_started at 0x7f044bd92440>
    └ <SpawnProcess name='SpawnProcess-1' parent=74892 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f044c854370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f044bd91900>
    │    │                  └ <uvicorn.server.Server object at 0x7f044c854370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f044c1aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f044c1aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f044c1abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f044c7fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0440d5b940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0440d5b940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0440d5b940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0440d5b940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f044bc5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f044bc5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f044c855ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f044b016c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f044c855ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0441bc0700>
          └ <fastapi.applications.FastAPI object at 0x7f044b016c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f0440d5b5b0>
                     │    └ <function error_handle_business at 0x7f044aeaf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0441bc0700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UserRepository' object has no attribute 'get_'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f04416bcc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0441bc2440>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0441bc0700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f04416bcc10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0441b7f550>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0441bc2440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f04416bcaf0>
                     │    │             └ <starlette.requests.Request object at 0x7f0440d5b8b0>
                     │    └ <function process_middleware_common at 0x7f044aeaf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0441b7f550>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0440d5b8b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f04416bcaf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UserRepository' object has no attribute 'get_'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f044b440a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f044afac9f0>
          │    │   │      └ <starlette.requests.Request object at 0x7f0440d5b8b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0441b000a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0441b7f550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0440d381f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0441b00190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0441b000a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0440d381f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f044ae9e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0441b00190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0440d381f0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f044afea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f0441714df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0440d381f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0440d5ba00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0441be3ac0>
          └ <fastapi.routing.APIRoute object at 0x7f0441714df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0440d58880>
                     └ <function get_request_handler.<locals>.app at 0x7f0441be3a30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f044afeb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f0440d5baf0>, '_': (<app.src.models.user.User object at 0x7f0440d...
                 │                 │         └ <function read_user_by_id at 0x7f04427e27a0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f0441714e20>
                 └ <function run_in_threadpool at 0x7f044b94add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_by_id at 0x7f04427e27a0>, db_session=<sqlalchemy.orm.session.Session object at 0x7f044...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f0441773a00>
                 │     │         └ <function run_sync at 0x7f044ba0d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f044ba0c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'UserRepository' object has no attribute 'get_'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f0440...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f0441b14f00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f044279ff00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 39, in read_user_by_id
    data = user_service.get(db_session, user_id)
           │            │   │           └ '60c9aa85-381a-562a-915f-7d3d53ed6009'
           │            │   └ <sqlalchemy.orm.session.Session object at 0x7f0440d5baf0>
           │            └ <function UserService.get at 0x7f04481ed480>
           └ <app.src.services.user_service.UserService object at 0x7f04427dbe20>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 73, in get
    user = self.user_repository.get_(db_session, obj_id=user_id)
           │    │                    │                  └ '60c9aa85-381a-562a-915f-7d3d53ed6009'
           │    │                    └ <sqlalchemy.orm.session.Session object at 0x7f0440d5baf0>
           │    └ <app.src.repositories.user.UserRepository object at 0x7f04427dbeb0>
           └ <app.src.services.user_service.UserService object at 0x7f04427dbe20>

AttributeError: 'UserRepository' object has no attribute 'get_'
INFO     2024-02-05 11:26:18.244 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46116 - "GET /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 500
INFO     2024-02-05 11:26:26.979 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:26:27.080 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:26:27.081 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:26:27.082 request id: app - uvicorn.server:serve - Finished server process [74894]
INFO     2024-02-05 11:26:28.006 request id: app - uvicorn.server:serve - Started server process [80700]
INFO     2024-02-05 11:26:28.008 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:26:28.009 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:26:30.314 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37554 - "GET /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 200
INFO     2024-02-05 11:27:18.166 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48282 - "PUT /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 200
ERROR    2024-02-05 11:27:25.711 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-05 11:27:25.712 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53838 - "DELETE /rms/v1.0/users/1986d379-7b5b-5268-be1d-4caf90e88d07 HTTP/1.1" 400
ERROR    2024-02-05 11:27:41.886 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa4dc450310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa4dc4503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa4dd80fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa4dd962950>
           └ <SpawnProcess name='SpawnProcess-2' parent=74892 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa4dd961fc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=74892 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa4dd854250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=74892 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=74892 started>
    │    └ <function subprocess_started at 0x7fa4dcd92440>
    └ <SpawnProcess name='SpawnProcess-2' parent=74892 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa4dd854370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa4dcd91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa4dd854370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa4dd1aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa4dd1aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa4dd1abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa4dd7fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa4d1f87130>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa4d1f87130>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa4d1f87130>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa4d1f87130>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa4dcc5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa4dcc5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa4dd855ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa4dc032c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa4dd855ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa4d2fbc760>
          └ <fastapi.applications.FastAPI object at 0x7fa4dc032c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa4d1f879a0>
                     │    └ <function error_handle_business at 0x7fa4dbecb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa4d2fbc760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'UserRepository' object has no attribute 'delete_'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa4d1f0bb50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d2fbe4a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa4d2fbc760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'accept': 'application/json', 'authorization': 'Bearer eyJhbGci...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa4d1f0bb50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa4dbef7760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d2fbe4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d2fbe4a0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa4d2f7b5b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa4d2fbe4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa4d1f0a680>
                     │    │             └ <starlette.requests.Request object at 0x7fa4d1f87af0>
                     │    └ <function process_middleware_common at 0x7fa4dbecb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa4d2f7b5b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa4d1f87af0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa4d1f0a680>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'UserRepository' object has no attribute 'delete_'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa4dc450a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa4dbfc8720>
          │    │   │      └ <starlette.requests.Request object at 0x7fa4d1f87af0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa4d2f04100>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa4d2f7b5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d1f94040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa4d2f041f0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa4d2f04100>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d1f94040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa4dbeba3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa4d2f041f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d1f94040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa4dc0064d0>
          └ <fastapi.routing.APIRoute object at 0x7fa4d2b11810>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa4d1f94040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa4d1f87e80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa4d2fe3c70>
          └ <fastapi.routing.APIRoute object at 0x7fa4d2b11810>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa4d1f87a90>
                     └ <function get_request_handler.<locals>.app at 0x7fa4d2fe3be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa4dc007130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa4d1f84580>, '_': (<app.src.models.user.User object at 0x7fa4d1f...
                 │                 │         └ <function delete_user at 0x7fa4d3be2a70>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fa4d2b11840>
                 └ <function run_in_threadpool at 0x7fa4dc94add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function delete_user at 0x7fa4d3be2a70>, db_session=<sqlalchemy.orm.session.Session object at 0x7fa4d1f84...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fa4d3385500>
                 │     │         └ <function run_sync at 0x7fa4dca0d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fa4dca0c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'UserRepository' object has no attribute 'delete_'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fa4d1...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fa4d2b39a80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fa4d3b920c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 55, in delete_user
    user_service.delete(db_session, user_id)
    │            │      │           └ '60c9aa85-381a-562a-915f-7d3d53ed6009'
    │            │      └ <sqlalchemy.orm.session.Session object at 0x7fa4d1f84580>
    │            └ <function UserService.delete at 0x7fa4d91e9510>
    └ <app.src.services.user_service.UserService object at 0x7fa4d3bdbe80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/user_service.py", line 91, in delete
    self.user_repository.delete_(db_session, obj_id=user.id)
    │    │                       │                  │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7fa4da02d6c0>
    │    │                       │                  └ <app.src.models.user.User object at 0x7fa4d1f868c0>
    │    │                       └ <sqlalchemy.orm.session.Session object at 0x7fa4d1f84580>
    │    └ <app.src.repositories.user.UserRepository object at 0x7fa4d3bdbf10>
    └ <app.src.services.user_service.UserService object at 0x7fa4d3bdbe80>

AttributeError: 'UserRepository' object has no attribute 'delete_'
INFO     2024-02-05 11:27:41.904 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46452 - "DELETE /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 500
INFO     2024-02-05 11:27:47.988 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:27:48.091 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:27:48.093 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:27:48.095 request id: app - uvicorn.server:serve - Finished server process [80700]
INFO     2024-02-05 11:27:49.084 request id: app - uvicorn.server:serve - Started server process [81183]
INFO     2024-02-05 11:27:49.085 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:27:49.086 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:27:49.748 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49988 - "DELETE /rms/v1.0/users/60c9aa85-381a-562a-915f-7d3d53ed6009 HTTP/1.1" 200
INFO     2024-02-05 11:27:54.743 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49988 - "GET /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-05 11:28:01.539 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50210 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:28:01.832 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50210 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:28:28.208 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 11:28:28.460 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwOTEwOH0.1QF3Qw4Y_mXtdqrRGZd888dY3dXdOUclazPXsv_YYO0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNTMwOH0.NySlIW2IOGaY0oF51W_CQM9hTLIpp_Xwh_wi7i0MMiE"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:27:48"}'}
INFO     2024-02-05 11:28:28.461 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50216 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 11:29:37.492 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36660 - "POST /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-05 11:29:52.161 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwOTEwOH0.1QF3Qw4Y_mXtdqrRGZd888dY3dXdOUclazPXsv_YYO0'}}
INFO     2024-02-05 11:29:52.175 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-05 11:27:48"}'}
INFO     2024-02-05 11:29:52.176 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47356 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-02-05 11:30:18.796 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': '123456'}}
INFO     2024-02-05 11:30:19.043 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEwOTIxOX0.VW8jm-n_1nyMP6NV1QSn6K_2dcLF3cswRn48kM37QFY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNTQxOX0.FogEn-kDA3Ms62DSNi-a5k7oRxWJcN6AAhGXULzoe68"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:27:48"}'}
INFO     2024-02-05 11:30:19.045 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37540 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 11:32:26.632 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33602 - "POST /rms/v1.0/ HTTP/1.1" 200
ERROR    2024-02-05 11:34:46.883 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...ee7-c8b7-59b3-b050-d7b34231b006\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...ee7-c8b7-59b3-b050-d7b34231b006\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'158deee7-c8b7-59b3-b050-d7b34231b006\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 11:34:46.885 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35036 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 11:36:13.647 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:36:13.781 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:36:13.784 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:36:13.787 request id: app - uvicorn.server:serve - Finished server process [81183]
INFO     2024-02-05 11:37:07.248 request id: app - uvicorn.server:serve - Started server process [84560]
INFO     2024-02-05 11:37:07.249 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:37:07.250 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 11:37:10.729 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-05 11:37:10.730 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57668 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 400
INFO     2024-02-05 11:37:27.436 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47228 - "GET /rms/v1.0/resources/?name=Rabiloo100 HTTP/1.1" 200
INFO     2024-02-05 11:37:51.142 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36670 - "DELETE /rms/v1.0/resoure/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 200
INFO     2024-02-05 11:38:07.032 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51136 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-05 11:38:33.742 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46212 - "DELETE /rms/v1.0/resoures/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 200
INFO     2024-02-05 11:38:39.195 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46226 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-05 11:43:04.978 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:43:05.080 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:43:05.082 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:43:05.084 request id: app - uvicorn.server:serve - Finished server process [84560]
INFO     2024-02-05 11:43:26.491 request id: app - uvicorn.server:serve - Started server process [86722]
INFO     2024-02-05 11:43:26.492 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:43:26.492 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:43:41.721 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56128 - "GET /docs HTTP/1.1" 200
ERROR    2024-02-05 11:43:42.020 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f150b7d03a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f150b7d0310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f150cc0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f150cd62950>
           └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f150cd61fc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f150cc54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
    │    └ <function subprocess_started at 0x7f150c146440>
    └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f150cc54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f150c145900>
    │    │                  └ <uvicorn.server.Server object at 0x7f150cc54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f150c58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f150c58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f150c58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f150cbfb250>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f150c008550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f150c0085e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f150cc55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f150b3a6c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f150cc55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1501fc0730>
          └ <fastapi.applications.FastAPI object at 0x7f150b3a6c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1501b47280>
                     │    └ <function error_handle_business at 0x7f150b23f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1501fc0730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1501b30b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1501fc2470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1501fc0730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1501b30b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1501f7f580>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1501fc2470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1501b31480>
                     │    │             └ <starlette.requests.Request object at 0x7f1501b44be0>
                     │    └ <function process_middleware_common at 0x7f150b23f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1501f7f580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1501b44be0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1501b31480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f150b7d0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f150b33c8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f1501b44be0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1501f040d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1501f7f580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501b90160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1501f041c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1501f040d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501b90160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f150b22e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1501f041c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501b90160>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f150b37a4d0>
          └ <starlette.routing.Route object at 0x7f150b22e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501b90160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b477c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f150b23f520>
          └ <starlette.routing.Route object at 0x7f150b22e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1501b88100>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f150c008b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 214, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function custom_openapi at 0x7f150c008af0>
           │            └ <fastapi.applications.FastAPI object at 0x7f150b3a6c50>
           └ <class 'starlette.responses.JSONResponse'>

  File "/home/rb103/Downloads/resource-management/app/src/app.py", line 29, in custom_openapi
    openapi_schema = get_openapi(
                     └ <function get_openapi at 0x7f150b3bd900>

  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 394, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {<class 'app.src.schemas.resource_tag.ResourceTagUpdate'>: 'ResourceTagUpdate', <class 'app.src.schemas.session.RefreshToken'...
             │                      └ <fastapi.routing.APIRoute object at 0x7f1501fc36d0>
             └ <function get_openapi_path at 0x7f150b3bd7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 206, in get_openapi_path
    request_body_oai = get_openapi_operation_request_body(
                       └ <function get_openapi_operation_request_body at 0x7f150b3bd5a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 125, in get_openapi_operation_request_body
    body_schema, _, _ = field_schema(
                        └ <cyfunction field_schema at 0x7f150bd41150>

  File "pydantic/schema.py", line 249, in pydantic.schema.field_schema
    s, schema_overrides = get_field_info_schema(field)
                          └ <cyfunction get_field_info_schema at 0x7f150bd41080>

  File "pydantic/schema.py", line 217, in pydantic.schema.get_field_info_schema
    schema_['default'] = encode_default(field.default)
                         └ <cyfunction encode_default at 0x7f150bd41f20>

  File "pydantic/schema.py", line 996, in pydantic.schema.encode_default
    return pydantic_encoder(dft)
           └ <cyfunction pydantic_encoder at 0x7f150bd29b10>

  File "pydantic/json.py", line 90, in pydantic.json.pydantic_encoder
    raise TypeError(f"Object of type '{obj.__class__.__name__}' is not JSON serializable")

TypeError: Object of type 'function' is not JSON serializable
INFO     2024-02-05 11:43:42.036 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56128 - "GET /openapi.json HTTP/1.1" 500
INFO     2024-02-05 11:43:44.655 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56138 - "GET /docs HTTP/1.1" 200
ERROR    2024-02-05 11:43:44.856 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f150b7d03a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f150b7d0310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f150cc0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f150cd62950>
           └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f150cd61fc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f150cc54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
    │    └ <function subprocess_started at 0x7f150c146440>
    └ <SpawnProcess name='SpawnProcess-3' parent=84558 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f150cc54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f150c145900>
    │    │                  └ <uvicorn.server.Server object at 0x7f150cc54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f150c58e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f150c58e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f150c58feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f150cbfb250>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f150c008550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f150c0085e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f150cc55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f150b3a6c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f150cc55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1501fc0730>
          └ <fastapi.applications.FastAPI object at 0x7f150b3a6c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1501b8a980>
                     │    └ <function error_handle_business at 0x7f150b23f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1501fc0730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1501b90040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1501fc2470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1501fc0730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1501b90040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1501f7f580>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1501fc2470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1501b900d0>
                     │    │             └ <starlette.requests.Request object at 0x7f1501b8a5c0>
                     │    └ <function process_middleware_common at 0x7f150b23f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1501f7f580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1501b8a5c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1501b900d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f150b7d0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f150b33c8b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f1501b8a5c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1501f040d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1501f7f580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501a4b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1501f041c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1501f040d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501a4b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f150b22e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1501f041c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501a4b880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f150b37a4d0>
          └ <starlette.routing.Route object at 0x7f150b22e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1501a4b880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1501b8a7a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f150b23f520>
          └ <starlette.routing.Route object at 0x7f150b22e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1501b8a410>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f150c008b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 214, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function custom_openapi at 0x7f150c008af0>
           │            └ <fastapi.applications.FastAPI object at 0x7f150b3a6c50>
           └ <class 'starlette.responses.JSONResponse'>

  File "/home/rb103/Downloads/resource-management/app/src/app.py", line 29, in custom_openapi
    openapi_schema = get_openapi(
                     └ <function get_openapi at 0x7f150b3bd900>

  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 394, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {<class 'app.src.schemas.resource_tag.ResourceTagUpdate'>: 'ResourceTagUpdate', <class 'app.src.schemas.session.RefreshToken'...
             │                      └ <fastapi.routing.APIRoute object at 0x7f1501fc36d0>
             └ <function get_openapi_path at 0x7f150b3bd7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 206, in get_openapi_path
    request_body_oai = get_openapi_operation_request_body(
                       └ <function get_openapi_operation_request_body at 0x7f150b3bd5a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 125, in get_openapi_operation_request_body
    body_schema, _, _ = field_schema(
                        └ <cyfunction field_schema at 0x7f150bd41150>

  File "pydantic/schema.py", line 249, in pydantic.schema.field_schema
    s, schema_overrides = get_field_info_schema(field)
                          └ <cyfunction get_field_info_schema at 0x7f150bd41080>

  File "pydantic/schema.py", line 217, in pydantic.schema.get_field_info_schema
    schema_['default'] = encode_default(field.default)
                         └ <cyfunction encode_default at 0x7f150bd41f20>

  File "pydantic/schema.py", line 996, in pydantic.schema.encode_default
    return pydantic_encoder(dft)
           └ <cyfunction pydantic_encoder at 0x7f150bd29b10>

  File "pydantic/json.py", line 90, in pydantic.json.pydantic_encoder
    raise TypeError(f"Object of type '{obj.__class__.__name__}' is not JSON serializable")

TypeError: Object of type 'function' is not JSON serializable
INFO     2024-02-05 11:43:44.866 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56138 - "GET /openapi.json HTTP/1.1" 500
INFO     2024-02-05 11:43:58.022 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:43:59.563 request id: app - uvicorn.server:serve - Started server process [86926]
INFO     2024-02-05 11:43:59.564 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:43:59.565 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:44:02.112 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57700 - "GET /docs HTTP/1.1" 200
ERROR    2024-02-05 11:44:02.196 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7c198403a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7c19840310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7c1ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7c1ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7c1ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7c1ac54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
    │    └ <function subprocess_started at 0x7f7c1a192440>
    └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7c1ac54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7c1a191900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7c1ac54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7c1a5aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7c1a5aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7c1a5abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7c1abfb250>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7c1a05c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7c1a05c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7c1ac55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7c1ac55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
          └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7c1012f250>
                     │    └ <function error_handle_business at 0x7f7c192af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7c10118c10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7c102aa440>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7c10118c10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7c102aa440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7c10119510>
                     │    │             └ <starlette.requests.Request object at 0x7f7c1012ca90>
                     │    └ <function process_middleware_common at 0x7f7c192af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7c1012ca90>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7c10119510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7c19840a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7c193ac630>
          │    │   │      └ <starlette.requests.Request object at 0x7f7c1012ca90>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7c10be80a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c101781f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7c10be8190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7c10be80a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c101781f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7c1929e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7c10be8190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c101781f0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7c193ea4d0>
          └ <starlette.routing.Route object at 0x7f7c1929e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c101781f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c1012f7c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7c192af520>
          └ <starlette.routing.Route object at 0x7f7c1929e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7c1012f4c0>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f7c1a05cb80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 214, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function custom_openapi at 0x7f7c1a05caf0>
           │            └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
           └ <class 'starlette.responses.JSONResponse'>

  File "/home/rb103/Downloads/resource-management/app/src/app.py", line 29, in custom_openapi
    openapi_schema = get_openapi(
                     └ <function get_openapi at 0x7f7c1942d900>

  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 394, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {<class 'app.src.schemas.response.ResponseObject'>: 'ResponseObject', <class 'app.src.schemas.user.UserUpdate'>: 'UserUpdate'...
             │                      └ <fastapi.routing.APIRoute object at 0x7f7c102ab6a0>
             └ <function get_openapi_path at 0x7f7c1942d7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 206, in get_openapi_path
    request_body_oai = get_openapi_operation_request_body(
                       └ <function get_openapi_operation_request_body at 0x7f7c1942d5a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 125, in get_openapi_operation_request_body
    body_schema, _, _ = field_schema(
                        └ <cyfunction field_schema at 0x7f7c19db5150>

  File "pydantic/schema.py", line 249, in pydantic.schema.field_schema
    s, schema_overrides = get_field_info_schema(field)
                          └ <cyfunction get_field_info_schema at 0x7f7c19db5080>

  File "pydantic/schema.py", line 217, in pydantic.schema.get_field_info_schema
    schema_['default'] = encode_default(field.default)
                         └ <cyfunction encode_default at 0x7f7c19db5f20>

  File "pydantic/schema.py", line 996, in pydantic.schema.encode_default
    return pydantic_encoder(dft)
           └ <cyfunction pydantic_encoder at 0x7f7c19d9db10>

  File "pydantic/json.py", line 90, in pydantic.json.pydantic_encoder
    raise TypeError(f"Object of type '{obj.__class__.__name__}' is not JSON serializable")

TypeError: Object of type 'function' is not JSON serializable
INFO     2024-02-05 11:44:02.210 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57700 - "GET /openapi.json HTTP/1.1" 500
INFO     2024-02-05 11:44:02.977 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57706 - "GET /docs HTTP/1.1" 200
ERROR    2024-02-05 11:44:03.152 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7c198403a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7c19840310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7c1ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7c1ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7c1ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7c1ac54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
    │    └ <function subprocess_started at 0x7f7c1a192440>
    └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7c1ac54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7c1a191900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7c1ac54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7c1a5aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7c1a5aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7c1a5abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7c1abfb250>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7c1a05c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7c1a05c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7c1ac55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7c1ac55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
          └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7c10172950>
                     │    └ <function error_handle_business at 0x7f7c192af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7c10178160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7c102aa440>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7c10178160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7c102aa440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7c10178040>
                     │    │             └ <starlette.requests.Request object at 0x7f7c101732b0>
                     │    └ <function process_middleware_common at 0x7f7c192af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7c101732b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7c10178040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7c19840a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7c193ac630>
          │    │   │      └ <starlette.requests.Request object at 0x7f7c101732b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7c10be80a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7c10be8190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7c10be80a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7c1929e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7c10be8190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037910>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7c193ea4d0>
          └ <starlette.routing.Route object at 0x7f7c1929e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10172770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7c192af520>
          └ <starlette.routing.Route object at 0x7f7c1929e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7c101723e0>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f7c1a05cb80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 214, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function custom_openapi at 0x7f7c1a05caf0>
           │            └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
           └ <class 'starlette.responses.JSONResponse'>

  File "/home/rb103/Downloads/resource-management/app/src/app.py", line 29, in custom_openapi
    openapi_schema = get_openapi(
                     └ <function get_openapi at 0x7f7c1942d900>

  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 394, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {<class 'app.src.schemas.response.ResponseObject'>: 'ResponseObject', <class 'app.src.schemas.user.UserUpdate'>: 'UserUpdate'...
             │                      └ <fastapi.routing.APIRoute object at 0x7f7c102ab6a0>
             └ <function get_openapi_path at 0x7f7c1942d7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 206, in get_openapi_path
    request_body_oai = get_openapi_operation_request_body(
                       └ <function get_openapi_operation_request_body at 0x7f7c1942d5a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 125, in get_openapi_operation_request_body
    body_schema, _, _ = field_schema(
                        └ <cyfunction field_schema at 0x7f7c19db5150>

  File "pydantic/schema.py", line 249, in pydantic.schema.field_schema
    s, schema_overrides = get_field_info_schema(field)
                          └ <cyfunction get_field_info_schema at 0x7f7c19db5080>

  File "pydantic/schema.py", line 217, in pydantic.schema.get_field_info_schema
    schema_['default'] = encode_default(field.default)
                         └ <cyfunction encode_default at 0x7f7c19db5f20>

  File "pydantic/schema.py", line 996, in pydantic.schema.encode_default
    return pydantic_encoder(dft)
           └ <cyfunction pydantic_encoder at 0x7f7c19d9db10>

  File "pydantic/json.py", line 90, in pydantic.json.pydantic_encoder
    raise TypeError(f"Object of type '{obj.__class__.__name__}' is not JSON serializable")

TypeError: Object of type 'function' is not JSON serializable
INFO     2024-02-05 11:44:03.162 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57706 - "GET /openapi.json HTTP/1.1" 500
INFO     2024-02-05 11:44:16.689 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57718 - "GET /docs HTTP/1.1" 200
ERROR    2024-02-05 11:44:16.798 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7c198403a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7c19840310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7c1ac0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7c1ad62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7c1ad61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7c1ac54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
    │    └ <function subprocess_started at 0x7f7c1a192440>
    └ <SpawnProcess name='SpawnProcess-1' parent=86924 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7c1ac54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7c1a191900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7c1ac54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7c1a5aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7c1a5aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7c1a5abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7c1abfb250>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7c1a05c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7c1a05c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7c1ac55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7c1ac55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
          └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7c10171780>
                     │    └ <function error_handle_business at 0x7f7c192af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7c1015ff40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7c102aa440>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7c102a8700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7c1015ff40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7c102aa440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7c10119ab0>
                     │    │             └ <starlette.requests.Request object at 0x7f7c10171cc0>
                     │    └ <function process_middleware_common at 0x7f7c192af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7c10171cc0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7c10119ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("Object of type 'function' is not JSON serializable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7c19840a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7c193ac630>
          │    │   │      └ <starlette.requests.Request object at 0x7f7c10171cc0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7c10be80a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7c10267550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7c10be8190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7c10be80a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7c1929e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7c10be8190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037d90>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7c193ea4d0>
          └ <starlette.routing.Route object at 0x7f7c1929e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7c10037d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7c10171d20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7c192af520>
          └ <starlette.routing.Route object at 0x7f7c1929e7d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7c101716c0>
                     └ <function FastAPI.setup.<locals>.openapi at 0x7f7c1a05cb80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 214, in openapi
    return JSONResponse(self.openapi())
           │            │    └ <function custom_openapi at 0x7f7c1a05caf0>
           │            └ <fastapi.applications.FastAPI object at 0x7f7c19416c50>
           └ <class 'starlette.responses.JSONResponse'>

  File "/home/rb103/Downloads/resource-management/app/src/app.py", line 29, in custom_openapi
    openapi_schema = get_openapi(
                     └ <function get_openapi at 0x7f7c1942d900>

  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 394, in get_openapi
    result = get_openapi_path(route=route, model_name_map=model_name_map)
             │                      │                     └ {<class 'app.src.schemas.response.ResponseObject'>: 'ResponseObject', <class 'app.src.schemas.user.UserUpdate'>: 'UserUpdate'...
             │                      └ <fastapi.routing.APIRoute object at 0x7f7c102ab6a0>
             └ <function get_openapi_path at 0x7f7c1942d7e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 206, in get_openapi_path
    request_body_oai = get_openapi_operation_request_body(
                       └ <function get_openapi_operation_request_body at 0x7f7c1942d5a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/openapi/utils.py", line 125, in get_openapi_operation_request_body
    body_schema, _, _ = field_schema(
                        └ <cyfunction field_schema at 0x7f7c19db5150>

  File "pydantic/schema.py", line 249, in pydantic.schema.field_schema
    s, schema_overrides = get_field_info_schema(field)
                          └ <cyfunction get_field_info_schema at 0x7f7c19db5080>

  File "pydantic/schema.py", line 217, in pydantic.schema.get_field_info_schema
    schema_['default'] = encode_default(field.default)
                         └ <cyfunction encode_default at 0x7f7c19db5f20>

  File "pydantic/schema.py", line 996, in pydantic.schema.encode_default
    return pydantic_encoder(dft)
           └ <cyfunction pydantic_encoder at 0x7f7c19d9db10>

  File "pydantic/json.py", line 90, in pydantic.json.pydantic_encoder
    raise TypeError(f"Object of type '{obj.__class__.__name__}' is not JSON serializable")

TypeError: Object of type 'function' is not JSON serializable
INFO     2024-02-05 11:44:16.809 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57718 - "GET /openapi.json HTTP/1.1" 500
INFO     2024-02-05 11:44:27.584 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:44:27.688 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:44:27.691 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:44:27.693 request id: app - uvicorn.server:serve - Finished server process [86926]
INFO     2024-02-05 11:44:28.538 request id: app - uvicorn.server:serve - Started server process [87096]
INFO     2024-02-05 11:44:28.539 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:44:28.540 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:44:57.353 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:44:57.455 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:44:57.457 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:44:57.459 request id: app - uvicorn.server:serve - Finished server process [87096]
INFO     2024-02-05 11:44:58.326 request id: app - uvicorn.server:serve - Started server process [87320]
INFO     2024-02-05 11:44:58.327 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:44:58.327 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:45:00.472 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33070 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:45:00.647 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33070 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-02-05 11:45:00.649 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33084 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-05 11:45:00.840 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33084 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:45:09.575 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:45:09.677 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:45:09.678 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:45:09.680 request id: app - uvicorn.server:serve - Finished server process [87320]
INFO     2024-02-05 11:45:11.564 request id: app - uvicorn.server:serve - Started server process [87403]
INFO     2024-02-05 11:45:11.565 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:45:11.566 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:46:25.652 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:46:25.755 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:46:25.757 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:46:25.759 request id: app - uvicorn.server:serve - Finished server process [87403]
INFO     2024-02-05 11:46:26.651 request id: app - uvicorn.server:serve - Started server process [88072]
INFO     2024-02-05 11:46:26.652 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:46:26.653 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:46:32.008 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49332 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:46:32.281 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49332 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:47:04.629 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': '123456'}}
INFO     2024-02-05 11:47:04.906 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExMDIyNH0.4DZrHJV1nszQ9NylqGkfJZSfI5MKSfJp8QOab6jVsEw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNjQyNH0.asWCATVpFcl2vBASSfrfoo7PHSKWhcRnxqxNCeLLO4E"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:46:26"}'}
INFO     2024-02-05 11:47:04.907 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49340 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-05 11:48:27.759 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:48:27.863 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:48:27.866 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:48:27.868 request id: app - uvicorn.server:serve - Finished server process [88072]
INFO     2024-02-05 11:48:28.720 request id: app - uvicorn.server:serve - Started server process [88781]
INFO     2024-02-05 11:48:28.722 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:48:28.722 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:48:31.297 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55928 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:48:31.532 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55928 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:48:53.343 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': '123456'}}
INFO     2024-02-05 11:48:53.624 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExMDMzM30.rHM28tfE57FFB_X_oR1pm0UT5KGyapmda3g5kHJsz6k","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNjUzM30.u12Xtz8BQkdzKMEQl2nAbAuRXP94hr7SRupVZltaOM4"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:48:28"}'}
INFO     2024-02-05 11:48:53.625 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55938 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-05 11:49:52.433 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column "name" of relation "resources" violates not-null constraint\nDETAIL:  Failing row contains (a7ebb6c6-50b3-5a50-bfd0-86ca855b9330, null, null, 367814e6-063c-560c-b428-20ed1ed85f4f, null, null, null, null, null, null, 2024-02-05 04:32:26.616579, f, null).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "name" of relation "resources" violates not-null constraint\nDETAIL:  Failing row contains (a7ebb6c6-50b3-5a50-bfd0-86ca855b9330, null, null, 367814e6-063c-560c-b428-20ed1ed85f4f, null, null, null, null, null, null, 2024-02-05 04:32:26.616579, f, null).\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': None, \'version\': None, \'stage_id\': \'367814e6-063c-560c-b428-20ed1ed85f4f\', \'status_id\': None, \'platform_id\': None, \'product_type_id\': None, \'repo_id\': None, \'tag_id\': None, \'user_id\': None, \'key\': None, \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\n'}
INFO     2024-02-05 11:49:52.434 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40260 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 11:50:35.446 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:50:35.548 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:50:35.551 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:50:35.553 request id: app - uvicorn.server:serve - Finished server process [88781]
INFO     2024-02-05 11:50:36.410 request id: app - uvicorn.server:serve - Started server process [89526]
INFO     2024-02-05 11:50:36.411 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:50:36.412 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:52:17.019 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:52:17.122 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:52:17.123 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:52:17.126 request id: app - uvicorn.server:serve - Finished server process [89526]
INFO     2024-02-05 11:52:38.609 request id: app - uvicorn.server:serve - Started server process [90220]
INFO     2024-02-05 11:52:38.610 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:52:38.610 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:54:21.433 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 11:54:21.536 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 11:54:21.539 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 11:54:21.541 request id: app - uvicorn.server:serve - Finished server process [90220]
INFO     2024-02-05 11:55:39.649 request id: app - uvicorn.server:serve - Started server process [91752]
INFO     2024-02-05 11:55:39.650 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 11:55:39.651 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 11:55:43.274 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33858 - "GET /docs HTTP/1.1" 200
INFO     2024-02-05 11:55:43.526 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33858 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-05 11:56:03.712 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33872 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 403
INFO     2024-02-05 11:56:08.614 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33872 - "GET /actuator/health HTTP/1.1" 200
INFO     2024-02-05 11:56:27.731 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-05 11:56:28.002 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExMDc4OH0.iugiNE4Lhd14BuKFlUjlFSKlv2a782gaMi-dB_MpBP8","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyNjk4OH0.AZ783Av7G04CuaR6-Tg4g3UDo6skLZ_6tZJI52Rr0yY"},"links":null,"relationships":null,"timestamp":"2024-02-05 11:55:39"}'}
INFO     2024-02-05 11:56:28.003 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46050 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-05 11:56:41.048 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 11:56:41.050 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57594 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
ERROR    2024-02-05 11:56:44.050 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 11:56:44.051 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57594 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 12:00:05.329 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:00:05.432 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:00:05.434 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:00:05.437 request id: app - uvicorn.server:serve - Finished server process [91752]
INFO     2024-02-05 12:00:38.250 request id: app - uvicorn.server:serve - Started server process [93655]
INFO     2024-02-05 12:00:38.251 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:00:38.252 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 12:00:42.928 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 12:00:42.929 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54986 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 12:00:51.005 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:00:51.106 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:00:51.107 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:00:51.108 request id: app - uvicorn.server:serve - Finished server process [93655]
INFO     2024-02-05 12:00:51.961 request id: app - uvicorn.server:serve - Started server process [93747]
INFO     2024-02-05 12:00:51.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:00:51.962 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:06:58.824 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:06:58.926 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:06:58.928 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:06:58.930 request id: app - uvicorn.server:serve - Finished server process [93747]
INFO     2024-02-05 12:40:28.625 request id: app - uvicorn.server:serve - Started server process [107429]
INFO     2024-02-05 12:40:28.627 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:40:28.627 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 12:40:38.991 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-05 12:40:38.992 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42166 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 400
INFO     2024-02-05 12:41:04.195 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'anhtt@rabiloo.com', 'password': '123456'}}
INFO     2024-02-05 12:41:04.436 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzExMzQ2NH0.pe-_ycs8N2Gr06NgJvIHyYDKuFeiqi_DYvrULu266II","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbmh0dEByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzEyOTY2NH0.1j_mGziTIxH-rWDyXyePaFTFjJyXi2olEa-T5tSzpgQ"},"links":null,"relationships":null,"timestamp":"2024-02-05 12:40:28"}'}
INFO     2024-02-05 12:41:04.437 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33388 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-05 12:41:17.972 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 12:41:17.973 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51012 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 12:42:20.580 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:42:20.682 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:42:20.682 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:42:20.683 request id: app - uvicorn.server:serve - Finished server process [107429]
INFO     2024-02-05 12:43:33.029 request id: app - uvicorn.server:serve - Started server process [108587]
INFO     2024-02-05 12:43:33.030 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:43:33.031 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:44:04.456 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:44:04.558 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:44:04.559 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:44:04.560 request id: app - uvicorn.server:serve - Finished server process [108587]
INFO     2024-02-05 12:44:19.912 request id: app - uvicorn.server:serve - Started server process [108860]
INFO     2024-02-05 12:44:19.915 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:44:19.915 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:49:24.651 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:49:24.755 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-05 12:49:26.466 request id: app - uvicorn.server:serve - Finished server process [108860]
INFO     2024-02-05 12:49:28.254 request id: app - uvicorn.server:serve - Started server process [110850]
INFO     2024-02-05 12:49:28.255 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:49:28.256 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 12:49:30.591 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 12:49:30.592 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33238 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 12:49:52.959 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:49:53.061 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:49:53.063 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:49:53.066 request id: app - uvicorn.server:serve - Finished server process [110850]
INFO     2024-02-05 12:49:55.339 request id: app - uvicorn.server:serve - Started server process [111009]
INFO     2024-02-05 12:49:55.341 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:49:55.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:51:34.311 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:51:34.413 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-05 12:51:36.324 request id: app - uvicorn.server:serve - Finished server process [111009]
INFO     2024-02-05 12:51:39.083 request id: app - uvicorn.server:serve - Started server process [111767]
INFO     2024-02-05 12:51:39.084 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:51:39.084 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 12:51:41.703 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 12:51:41.704 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42096 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 12:51:50.032 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:51:50.133 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 12:51:50.134 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 12:51:50.135 request id: app - uvicorn.server:serve - Finished server process [111767]
INFO     2024-02-05 12:51:52.385 request id: app - uvicorn.server:serve - Started server process [111850]
INFO     2024-02-05 12:51:52.387 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:51:52.388 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:56:48.439 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:56:48.541 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-05 12:56:58.620 request id: app - uvicorn.server:serve - Started server process [114198]
INFO     2024-02-05 12:56:58.621 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:56:58.622 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-05 12:57:00.722 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 78, in update\n    session.query(self.model).filter(self.model.id == obj_id).update(update_data)  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3284, in update\n    self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1524, in orm_execute_statement\n    return super().orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "string"\nLINE 1: ...55a-b0aa-52ff-9787-f047bff33e9c\'::UUID, status_id=\'string\'::...\n                                                             ^\n\n[SQL: UPDATE resources SET name=%(name)s, version=%(version)s, stage_id=%(stage_id)s::UUID, status_id=%(status_id)s::UUID, platform_id=%(platform_id)s::UUID, product_type_id=%(product_type_id)s::UUID, repo_id=%(repo_id)s::UUID, tag_id=%(tag_id)s::UUID, user_id=%(user_id)s::UUID, key=%(key)s WHERE resources.id = %(id_1)s::UUID]\n[parameters: {\'name\': \'string\', \'version\': \'string\', \'stage_id\': \'8724e55a-b0aa-52ff-9787-f047bff33e9c\', \'status_id\': \'string\', \'platform_id\': \'string\', \'product_type_id\': \'string\', \'repo_id\': \'string\', \'tag_id\': \'string\', \'user_id\': \'string\', \'key\': \'string\', \'id_1\': \'a7ebb6c6-50b3-5a50-bfd0-86ca855b9330\'}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-05 12:57:00.723 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38342 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 500
INFO     2024-02-05 12:57:09.467 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:57:26.498 request id: app - uvicorn.server:serve - Started server process [114352]
INFO     2024-02-05 12:57:26.500 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:57:26.501 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:58:17.081 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:58:17.183 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-05 12:58:30.555 request id: app - uvicorn.server:serve - Finished server process [114352]
INFO     2024-02-05 12:58:33.266 request id: app - uvicorn.server:serve - Started server process [115225]
INFO     2024-02-05 12:58:33.268 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:58:33.269 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:59:08.562 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 12:59:08.664 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-05 12:59:09.670 request id: app - uvicorn.server:serve - Finished server process [115225]
INFO     2024-02-05 12:59:14.128 request id: app - uvicorn.server:serve - Started server process [115700]
INFO     2024-02-05 12:59:14.130 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-05 12:59:14.131 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-05 12:59:39.028 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44492 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 200
INFO     2024-02-05 13:02:48.265 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52368 - "PUT /rms/v1.0/resources/a7ebb6c6-50b3-5a50-bfd0-86ca855b9330 HTTP/1.1" 200
INFO     2024-02-05 13:03:07.094 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-05 13:03:07.197 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-05 13:03:07.200 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-05 13:03:07.204 request id: app - uvicorn.server:serve - Finished server process [115700]

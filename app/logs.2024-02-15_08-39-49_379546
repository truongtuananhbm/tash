INFO     2024-02-15 08:39:49.378 request id: app - uvicorn.server:serve - Started server process [1105497]
INFO     2024-02-15 08:39:49.379 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 08:39:49.380 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 08:39:58.256 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET / HTTP/1.1" 404
INFO     2024-02-15 08:39:58.353 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-15 08:40:01.563 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 08:40:01.637 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-15 08:40:01.638 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44506 - "GET /static/swagger-ui.css HTTP/1.1" 304
INFO     2024-02-15 08:40:01.859 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-15 08:40:02.936 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 08:40:03.116 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44494 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-15 08:41:21.634 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 08:41:21.736 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 08:41:21.737 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 08:41:21.737 request id: app - uvicorn.server:serve - Finished server process [1105497]
INFO     2024-02-15 08:41:22.607 request id: app - uvicorn.server:serve - Started server process [1106240]
INFO     2024-02-15 08:41:22.609 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 08:41:22.609 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 08:41:25.738 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38922 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 08:41:25.878 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38922 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-15 08:41:46.443 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-15 08:41:46.719 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk2MzEwNn0.ULRWehiLZVdbIENtJ9r3VJEoZN-OtpsxyTOtd4-t5k0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk3OTMwNn0.r2XwK61a8f_WscPUOrOmJ42ORSFi243pdRx9-0JBavQ"},"links":null,"relationships":null,"timestamp":"2024-02-15 08:41:22"}'}
INFO     2024-02-15 08:41:46.720 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38930 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-15 08:42:08.406 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f3d58a38310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f3d58a383a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f3d59e0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f3d59f5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1105495 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f3d59f5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1105495 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f3d59e54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1105495 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1105495 started>
    │    └ <function subprocess_started at 0x7f3d5938e440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1105495 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f3d59e54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f3d5938d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f3d59e54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3d597a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3d597a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3d597a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3d59df7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f3d4f34e710>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3d4f34e710>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3d4f34e710>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3d4f34e710>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f3d59258550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f3d592585e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3d59e55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f3d58612c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3d59e55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3d540b46d0>
          └ <fastapi.applications.FastAPI object at 0x7f3d58612c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3d4f34e440>
                     │    └ <function error_handle_business at 0x7f3d584ab250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3d540b46d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'in <string>' requires string as left operand, not InstrumentedAttribute")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3d4f7800d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3d540b6410>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3d540b46d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3d4f7800d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3d54073520>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3d540b6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3d4f780160>
                     │    │             └ <starlette.requests.Request object at 0x7f3d4f77fd00>
                     │    └ <function process_middleware_common at 0x7f3d584ab1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3d54073520>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3d4f77fd00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3d4f780160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'in <string>' requires string as left operand, not InstrumentedAttribute")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f3d58a38a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f3d585a8770>
          │    │   │      └ <starlette.requests.Request object at 0x7f3d4f77fd00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3d541f8070>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3d54073520>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3d4f34aa70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3d541f8160>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3d541f8070>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3d4f34aa70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f3d5849a3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3d541f8160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3d4f34aa70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f3d585e64d0>
          └ <fastapi.routing.APIRoute object at 0x7f3d540e8100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3d4f34aa70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3d4f34fe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3d540da950>
          └ <fastapi.routing.APIRoute object at 0x7f3d540e8100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3d4f34e530>
                     └ <function get_request_handler.<locals>.app at 0x7f3d540da8c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f3d585e7130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'filters': ResourceGet(id=None, stage_id=None, status_id=None, name='Rabiloo', version=None, platform_id=None, product_type_...
                 │                 │         └ <function get_resources at 0x7f3d5415ab00>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f3d540e81c0>
                 └ <function run_in_threadpool at 0x7f3d58f32dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function get_resources at 0x7f3d5415ab00>, filters=ResourceGet(id=None, stage_id=None, status_id=None, na...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f3d4f7317c0>
                 │     │         └ <function run_sync at 0x7f3d58ff5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f3d58ff4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("'in <string>' requires string as left operand, not InstrumentedAttribute")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f3d4f...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f3d541f2d80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f3d4f7e3b80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 52, in get_resources
    resources: List[models.Resource] = resource_service.search_resources(db_session, filters)
               │    │      │           │                │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name='Rabiloo', version=None, platform_id=None, product_type_id=None, rep...
               │    │      │           │                │                └ <sqlalchemy.orm.session.Session object at 0x7f3d4f34f9d0>
               │    │      │           │                └ <function ResourceService.search_resources at 0x7f3d547b6710>
               │    │      │           └ <app.src.services.resource_service.ResourceService object at 0x7f3d557d3220>
               │    │      └ <class 'app.src.models.resource.Resource'>
               │    └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               └ typing.List

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 65, in search_resources
    resources = self.file_repository.search_resources(db_session, filters)
                │    │               │                │           └ ResourceGet(id=None, stage_id=None, status_id=None, name='Rabiloo', version=None, platform_id=None, product_type_id=None, rep...
                │    │               │                └ <sqlalchemy.orm.session.Session object at 0x7f3d4f34f9d0>
                │    │               └ <function FileRepository.search_resources at 0x7f3d557e6b00>
                │    └ <app.src.repositories.resource.FileRepository object at 0x7f3d54147190>
                └ <app.src.services.resource_service.ResourceService object at 0x7f3d557d3220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/resource.py", line 62, in search_resources
    query = query.filter(self.model.name in filters.name)
            │     │      │    │     │       │       └ 'Rabiloo'
            │     │      │    │     │       └ ResourceGet(id=None, stage_id=None, status_id=None, name='Rabiloo', version=None, platform_id=None, product_type_id=None, rep...
            │     │      │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f3d56626660>
            │     │      │    └ <class 'app.src.models.resource.Resource'>
            │     │      └ <app.src.repositories.resource.FileRepository object at 0x7f3d54147190>
            │     └ <function Query.filter at 0x7f3d56857370>
            └ <sqlalchemy.orm.query.Query object at 0x7f3d4f77f3d0>

TypeError: 'in <string>' requires string as left operand, not InstrumentedAttribute
INFO     2024-02-15 08:42:08.426 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49692 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 500
INFO     2024-02-15 08:42:23.361 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 08:42:23.463 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 08:42:23.464 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 08:42:23.464 request id: app - uvicorn.server:serve - Finished server process [1106240]
INFO     2024-02-15 08:42:24.612 request id: app - uvicorn.server:serve - Started server process [1106594]
INFO     2024-02-15 08:42:24.613 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 08:42:24.614 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 08:42:26.178 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-15 08:42:26.180 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56476 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 400
INFO     2024-02-15 08:42:50.762 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46434 - "GET /rms/v1.0/resources/?name=Rabiloo100 HTTP/1.1" 200
INFO     2024-02-15 08:45:26.856 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 08:45:26.958 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 08:45:26.959 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 08:45:26.959 request id: app - uvicorn.server:serve - Finished server process [1106594]
INFO     2024-02-15 08:45:28.396 request id: app - uvicorn.server:serve - Started server process [1107811]
INFO     2024-02-15 08:45:28.398 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 08:45:28.398 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 08:45:33.105 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52152 - "GET /rms/v1.0/resources/?name=Rabiloo100 HTTP/1.1" 200
INFO     2024-02-15 08:45:38.462 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48606 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 200
INFO     2024-02-15 08:56:43.359 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 08:56:43.461 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 08:56:43.462 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 08:56:43.463 request id: app - uvicorn.server:serve - Finished server process [1107811]
INFO     2024-02-15 08:57:18.820 request id: app - uvicorn.server:serve - Started server process [1112499]
INFO     2024-02-15 08:57:18.821 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 08:57:18.822 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 08:57:25.868 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-15 08:57:25.869 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35754 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 400
INFO     2024-02-15 08:57:49.238 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 08:57:49.339 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 08:57:49.340 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 08:57:49.341 request id: app - uvicorn.server:serve - Finished server process [1112499]
INFO     2024-02-15 08:57:50.279 request id: app - uvicorn.server:serve - Started server process [1112696]
INFO     2024-02-15 08:57:50.281 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 08:57:50.281 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 08:57:53.906 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46310 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 200
INFO     2024-02-15 08:58:02.058 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46318 - "GET /rms/v1.0/resources/?name=TTA HTTP/1.1" 200
INFO     2024-02-15 08:58:02.218 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46318 - "GET /rms/v1.0/resources/?name=TTA HTTP/1.1" 200
ERROR    2024-02-15 10:16:23.065 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-15 10:16:23.067 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55462 - "GET /rms/v1.0/resources/?name=TTA HTTP/1.1" 400
INFO     2024-02-15 10:30:42.711 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:30:42.813 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:30:42.815 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:30:42.817 request id: app - uvicorn.server:serve - Finished server process [1112696]
INFO     2024-02-15 10:30:44.306 request id: app - uvicorn.server:serve - Started server process [1147261]
INFO     2024-02-15 10:30:44.308 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:30:44.308 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:31:13.709 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk2MzEwNn0.ULRWehiLZVdbIENtJ9r3VJEoZN-OtpsxyTOtd4-t5k0'}}
ERROR    2024-02-15 10:31:13.754 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-15 10:31:13.755 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41220 - "POST /rms/v1.0/logout HTTP/1.1" 400
INFO     2024-02-15 10:31:38.850 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'truongtuananhbm@gmail.com', 'password': '123456'}}
ERROR    2024-02-15 10:31:38.858 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-15 10:31:38.859 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40170 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:31:57.681 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'truongtuananhbm@gmai.com', 'password': '123456'}}
ERROR    2024-02-15 10:31:57.685 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-15 10:31:57.686 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46992 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:32:02.651 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'truongtuananhbm@gmai.com', 'password': '123456'}}
ERROR    2024-02-15 10:32:02.655 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-15 10:32:02.656 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46992 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:33:16.221 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': '12345'}}
ERROR    2024-02-15 10:33:16.459 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Incorrect Password
None
INFO     2024-02-15 10:33:16.460 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51160 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:33:41.556 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'truongtuananhbm@gmai.com', 'password': '12345'}}
ERROR    2024-02-15 10:33:41.560 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-15 10:33:41.561 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41096 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:33:43.837 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'truongtuananhbm@gmai.com', 'password': '12345'}}
ERROR    2024-02-15 10:33:43.840 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-15 10:33:43.841 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41096 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:34:00.676 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'truongtuananhbm@gmai.com', 'password': '123456'}}
ERROR    2024-02-15 10:34:00.680 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Found
None
INFO     2024-02-15 10:34:00.680 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43674 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:44:42.934 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:44:43.036 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:44:43.037 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:44:43.037 request id: app - uvicorn.server:serve - Finished server process [1147261]
INFO     2024-02-15 10:44:43.963 request id: app - uvicorn.server:serve - Started server process [1152261]
INFO     2024-02-15 10:44:43.964 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:44:43.965 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:44:50.192 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:44:50.293 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:44:50.294 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:44:50.295 request id: app - uvicorn.server:serve - Finished server process [1152261]
INFO     2024-02-15 10:44:51.201 request id: app - uvicorn.server:serve - Started server process [1152296]
INFO     2024-02-15 10:44:51.203 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:44:51.203 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:45:06.962 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:45:07.063 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:45:07.064 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:45:07.065 request id: app - uvicorn.server:serve - Finished server process [1152296]
INFO     2024-02-15 10:45:07.963 request id: app - uvicorn.server:serve - Started server process [1152424]
INFO     2024-02-15 10:45:07.964 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:45:07.965 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:45:56.155 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:45:56.257 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:45:56.258 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:45:56.258 request id: app - uvicorn.server:serve - Finished server process [1152424]
INFO     2024-02-15 10:45:57.129 request id: app - uvicorn.server:serve - Started server process [1152741]
INFO     2024-02-15 10:45:57.130 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:45:57.131 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:46:29.164 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:46:29.266 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:46:29.267 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:46:29.268 request id: app - uvicorn.server:serve - Finished server process [1152741]
INFO     2024-02-15 10:46:30.201 request id: app - uvicorn.server:serve - Started server process [1152979]
INFO     2024-02-15 10:46:30.202 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:46:30.202 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:47:31.145 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:47:31.247 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:47:31.248 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:47:31.248 request id: app - uvicorn.server:serve - Finished server process [1152979]
INFO     2024-02-15 10:47:32.258 request id: app - uvicorn.server:serve - Started server process [1153350]
INFO     2024-02-15 10:47:32.259 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:47:32.260 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:47:41.697 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:47:41.799 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:47:41.802 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:47:41.804 request id: app - uvicorn.server:serve - Finished server process [1153350]
INFO     2024-02-15 10:47:42.784 request id: app - uvicorn.server:serve - Started server process [1153402]
INFO     2024-02-15 10:47:42.786 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:47:42.787 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:47:44.093 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:47:44.195 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:47:44.196 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:47:44.197 request id: app - uvicorn.server:serve - Finished server process [1153402]
INFO     2024-02-15 10:47:45.035 request id: app - uvicorn.server:serve - Started server process [1153429]
INFO     2024-02-15 10:47:45.036 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:47:45.037 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:48:28.333 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:48:28.434 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:48:28.436 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:48:28.436 request id: app - uvicorn.server:serve - Finished server process [1153429]
INFO     2024-02-15 10:48:29.453 request id: app - uvicorn.server:serve - Started server process [1153730]
INFO     2024-02-15 10:48:29.455 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:48:29.455 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:49:08.711 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:49:08.812 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:49:08.813 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:49:08.814 request id: app - uvicorn.server:serve - Finished server process [1153730]
INFO     2024-02-15 10:49:12.547 request id: app - uvicorn.server:serve - Started server process [1153986]
INFO     2024-02-15 10:49:12.548 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:49:12.548 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:49:39.253 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:49:41.123 request id: app - uvicorn.server:serve - Started server process [1154167]
INFO     2024-02-15 10:49:41.125 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:49:41.125 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:49:43.257 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52006 - "GET / HTTP/1.1" 404
INFO     2024-02-15 10:49:46.136 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52006 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 10:49:46.288 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52006 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-15 10:49:46.800 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52006 - "GET /d%C3%B3c HTTP/1.1" 404
INFO     2024-02-15 10:49:53.962 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52014 - "GET /doc HTTP/1.1" 404
INFO     2024-02-15 10:49:57.590 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52014 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 10:49:57.712 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52014 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-15 10:50:48.778 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': '123456'}}
ERROR    2024-02-15 10:50:49.053 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Incorrect Password
None
INFO     2024-02-15 10:50:49.054 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50366 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 10:50:59.099 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-15 10:50:59.338 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk3MDg1OX0.4_uxrAVX7H_sSEPOL3nXAL2D8f4L0JYLKX-gidWZIeA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk4NzA1OX0.IDFDIIzmyj0yW55_cH3wZ4Wh59SV5wGWhAhBAwhVF-s"},"links":null,"relationships":null,"timestamp":"2024-02-15 10:49:40"}'}
INFO     2024-02-15 10:50:59.339 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49258 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-15 10:51:21.645 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:51:21.748 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:51:21.749 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:51:21.749 request id: app - uvicorn.server:serve - Finished server process [1154167]
INFO     2024-02-15 10:51:22.638 request id: app - uvicorn.server:serve - Started server process [1154845]
INFO     2024-02-15 10:51:22.640 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:51:22.640 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:51:24.430 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42660 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 10:51:24.608 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42660 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-15 10:51:38.894 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f0245a0c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f0245a0c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f0246e0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f0246f5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f0246f5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f0246e54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1154165 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1154165 started>
    │    └ <function subprocess_started at 0x7f0246372440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1154165 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f0246e54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f0246371900>
    │    │                  └ <uvicorn.server.Server object at 0x7f0246e54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f02467a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f02467a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f02467a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f0246df7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0237f43cd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0237f43cd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0237f43cd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0237f43cd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f0246238550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f02462385e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0246e55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f02455e6c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f0246e55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f023c1a8c40>
          └ <fastapi.applications.FastAPI object at 0x7f02455e6c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f023c028e80>
                     │    └ <function error_handle_business at 0x7f024547f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f023c1a8c40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ NameError("name 'user_id' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f023c019090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f023c1aa980>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f023c1a8c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f023c019090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f023c15fa90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f023c1aa980>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f023c019ea0>
                     │    │             └ <starlette.requests.Request object at 0x7f023c029a50>
                     │    └ <function process_middleware_common at 0x7f024547f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f023c15fa90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f023c029a50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f023c019ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ NameError("name 'user_id' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f0245a0ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f024557c770>
          │    │   │      └ <starlette.requests.Request object at 0x7f023c029a50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f023cdfdae0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f023c15fa90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f023c0703a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f023cdfdbd0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f023cdfdae0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f023c0703a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f024546e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f023cdfdbd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f023c0703a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f02455ba4d0>
          └ <fastapi.routing.APIRoute object at 0x7f023c1fe200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f023c0703a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f023c0659c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f023c018160>
          └ <fastapi.routing.APIRoute object at 0x7f023c1fe200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f023c098d60>
                     └ <function get_request_handler.<locals>.app at 0x7f023c0180d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f02455bb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f023c098f40>, '_': (<app.src.models.user.User object at 0x7f0237f...
                 │                 │         └ <function read_user_id at 0x7f023cdc2d40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f023c1fe2c0>
                 └ <function run_in_threadpool at 0x7f0245f0edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_id at 0x7f023cdc2d40>, db_session=<sqlalchemy.orm.session.Session object at 0x7f023c09...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f023c027800>
                 │     │         └ <function run_sync at 0x7f0245fd1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f0245fd0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=NameError("name 'user_id' is not defined")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f023c...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f023cddf4c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f023c08c380>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 62, in read_user_id
    data = user_service.get_user_id_by_access_token(db_session, user_id)
           │            │                           └ <sqlalchemy.orm.session.Session object at 0x7f023c098f40>
           │            └ <function UserService.get_user_id_by_access_token at 0x7f023e779480>
           └ <app.src.services.user_service.UserService object at 0x7f023cdfd900>

NameError: name 'user_id' is not defined
INFO     2024-02-15 10:51:38.922 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42662 - "GET /rms/v1.0/user/%7Buser_id%7D HTTP/1.1" 500
INFO     2024-02-15 10:51:51.171 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:51:51.272 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:51:51.273 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:51:51.274 request id: app - uvicorn.server:serve - Finished server process [1154845]
INFO     2024-02-15 10:51:52.100 request id: app - uvicorn.server:serve - Started server process [1155025]
INFO     2024-02-15 10:51:52.101 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:51:52.102 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:53:22.589 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:53:22.690 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:53:22.693 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:53:22.695 request id: app - uvicorn.server:serve - Finished server process [1155025]
INFO     2024-02-15 10:54:43.034 request id: app - uvicorn.server:serve - Started server process [1156042]
INFO     2024-02-15 10:54:43.036 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:54:43.037 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 10:54:50.718 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5ef8e50310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f5ef8e503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f5efa20fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5efa362950>
           └ <SpawnProcess name='SpawnProcess-7' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5efa361fc0>
    └ <SpawnProcess name='SpawnProcess-7' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5efa258250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1154165 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1154165 started>
    │    └ <function subprocess_started at 0x7f5ef9792440>
    └ <SpawnProcess name='SpawnProcess-7' parent=1154165 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5efa258370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5ef9791900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5efa258370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5ef9baa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5ef9baa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5ef9babeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5efa1fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f5eeb789960>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5eeb789960>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5eeb789960>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5eeb789960>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5ef965c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5ef965c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5efa259ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5ef8a26c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5efa259ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5eebbc4df0>
          └ <fastapi.applications.FastAPI object at 0x7f5ef8a26c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f5eeb762080>
                     │    └ <function error_handle_business at 0x7f5ef88bf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5eebbc4df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("UserService.get_user_id_by_access_token() missing 1 required positional argument: 'token'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5eeb734e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5eebbc6b30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5eebbc4df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5eeb734e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5eebb7bc40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5eebbc6b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5eeb734ee0>
                     │    │             └ <starlette.requests.Request object at 0x7f5eeb7455a0>
                     │    └ <function process_middleware_common at 0x7f5ef88bf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5eebb7bc40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5eeb7455a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5eeb734ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("UserService.get_user_id_by_access_token() missing 1 required positional argument: 'token'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5ef8e50a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5ef89bc6d0>
          │    │   │      └ <starlette.requests.Request object at 0x7f5eeb7455a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5eebb19c00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5eebb7bc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5eeb735d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5eebb19cf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5eebb19c00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5eeb735d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5ef88ae3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5eebb19cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5eeb735d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f5ef89fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f5eeb71a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5eeb735d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5eeb745930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5eeb734160>
          └ <fastapi.routing.APIRoute object at 0x7f5eeb71a3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5eeb789ae0>
                     └ <function get_request_handler.<locals>.app at 0x7f5eeb7340d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5ef89fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f5eeb789000>, 'credentials': HTTPAuthorizationCredentials(scheme=...
                 │                 │         └ <function read_user_id at 0x7f5ef02ded40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f5eeb71a470>
                 └ <function run_in_threadpool at 0x7f5ef934add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_id at 0x7f5ef02ded40>, db_session=<sqlalchemy.orm.session.Session object at 0x7f5eeb78...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f5eeb78cbc0>
                 │     │         └ <function run_sync at 0x7f5ef940d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f5ef940c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("UserService.get_user_id_by_access_token() missing 1 required positional argument: 'toke...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f5eeb...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f5eeb78d380>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f5eeb78d4c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 65, in read_user_id
    data = user_service.get_user_id_by_access_token(db_session)
           │            │                           └ <sqlalchemy.orm.session.Session object at 0x7f5eeb789000>
           │            └ <function UserService.get_user_id_by_access_token at 0x7f5ef1be9480>
           └ <app.src.services.user_service.UserService object at 0x7f5eebb199c0>

TypeError: UserService.get_user_id_by_access_token() missing 1 required positional argument: 'token'
INFO     2024-02-15 10:54:50.736 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57986 - "GET /rms/v1.0/user/%7Buser_id%7D HTTP/1.1" 500
INFO     2024-02-15 10:55:15.966 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:55:16.068 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:55:16.069 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:55:16.069 request id: app - uvicorn.server:serve - Finished server process [1156042]
INFO     2024-02-15 10:55:16.939 request id: app - uvicorn.server:serve - Started server process [1156704]
INFO     2024-02-15 10:55:16.941 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:55:16.942 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 10:55:19.839 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 72, in sqlalchemy.cyextension.resultproxy.BaseRow._get_by_key_impl_mapping

KeyError: '__table__'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 89, in sqlalchemy.cyextension.resultproxy.BaseRow.__getattr__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 74, in sqlalchemy.cyextension.resultproxy.BaseRow._get_by_key_impl_mapping
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/result.py", line 135, in _key_fallback
    raise KeyError(key) from err
                   │         └ KeyError('__table__')
                   └ '__table__'

KeyError: '__table__'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f710580bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f710595e950>
           └ <SpawnProcess name='SpawnProcess-8' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f710595dfc0>
    └ <SpawnProcess name='SpawnProcess-8' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7105854250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=1154165 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=1154165 started>
    │    └ <function subprocess_started at 0x7f7104d3e440>
    └ <SpawnProcess name='SpawnProcess-8' parent=1154165 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7105854370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7104d3d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7105854370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f710518a440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f710518a3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f710518beb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f71057f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f70fab78eb0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f70fab78eb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f70fab78eb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f70fab78eb0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7104bf8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7104bf85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7105855ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7103f96c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7105855ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f70fafb0df0>
          └ <fastapi.applications.FastAPI object at 0x7f7103f96c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f70fab4e080>
                     │    └ <function error_handle_business at 0x7f7103e2b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f70fafb0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError('__table__')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f70fab20e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f70fafb2b30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f70fafb0df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f70fab20e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f70faf6bc40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f70fafb2b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f70fab20ee0>
                     │    │             └ <starlette.requests.Request object at 0x7f70fab315a0>
                     │    └ <function process_middleware_common at 0x7f7103e2b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f70faf6bc40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f70fab315a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f70fab20ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError('__table__')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f71043c4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7103f2c900>
          │    │   │      └ <starlette.requests.Request object at 0x7f70fab315a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f70faf05c00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f70faf6bc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f70fab21d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f70faf05cf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f70faf05c00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f70fab21d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7103e1a3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f70faf05cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f70fab21d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7103f6a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f70fab063b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f70fab21d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f70fab31930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f70fab20160>
          └ <fastapi.routing.APIRoute object at 0x7f70fab063b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f70fab79ae0>
                     └ <function get_request_handler.<locals>.app at 0x7f70fab200d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7103f6b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f70fab79000>, 'credentials': HTTPAuthorizationCredentials(scheme=...
                 │                 │         └ <function read_user_id at 0x7f70fbbcad40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f70fab06470>
                 └ <function run_in_threadpool at 0x7f71048c6dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_id at 0x7f70fbbcad40>, db_session=<sqlalchemy.orm.session.Session object at 0x7f70fab7...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f70fab74ec0>
                 │     │         └ <function run_sync at 0x7f7104989090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f7104988820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError('__table__')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f70fa...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f70fab756c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f70fab2e900>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 66, in read_user_id
    return ResponseObject(data=row2dict(data), code="BE0000")
           │                   │        └ (UUID('10d37537-a777-5443-9b4b-7547a71d89e7'),)
           │                   └ <function row2dict at 0x7f71021ad120>
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "/home/rb103/Downloads/resource-management/app/../app/src/utils/common.py", line 12, in row2dict
    for column in row.__table__.columns:
                  └ (UUID('10d37537-a777-5443-9b4b-7547a71d89e7'),)

  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 91, in sqlalchemy.cyextension.resultproxy.BaseRow.__getattr__

AttributeError: __table__
INFO     2024-02-15 10:55:19.861 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41134 - "GET /rms/v1.0/user/%7Buser_id%7D HTTP/1.1" 500
INFO     2024-02-15 10:57:14.926 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:57:15.030 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 10:57:15.032 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 10:57:15.034 request id: app - uvicorn.server:serve - Finished server process [1156704]
INFO     2024-02-15 10:57:15.957 request id: app - uvicorn.server:serve - Started server process [1157409]
INFO     2024-02-15 10:57:15.959 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:57:15.959 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 10:57:22.761 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f37c3a48310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f37c3a483a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f37c4e0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f37c4f62950>
           └ <SpawnProcess name='SpawnProcess-9' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f37c4f61fc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=1154165 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f37c4e58250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1154165 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1154165 started>
    │    └ <function subprocess_started at 0x7f37c4392440>
    └ <SpawnProcess name='SpawnProcess-9' parent=1154165 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f37c4e58370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f37c4391900>
    │    │                  └ <uvicorn.server.Server object at 0x7f37c4e58370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f37c47aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f37c47aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f37c47abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f37c4dfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f37ba778ee0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f37ba778ee0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f37ba778ee0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f37ba778ee0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f37c425c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f37c425c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f37c4e59ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f37c361ac50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f37c4e59ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37babb8e20>
          └ <fastapi.applications.FastAPI object at 0x7f37c361ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f37ba7560b0>
                     │    └ <function error_handle_business at 0x7f37c34af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37babb8e20>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('__init__() takes exactly 1 positional argument (2 given)')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f37ba728e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f37babbab60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f37babb8e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f37ba728e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f37bab73c70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f37babbab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f37ba728ee0>
                     │    │             └ <starlette.requests.Request object at 0x7f37ba7395d0>
                     │    └ <function process_middleware_common at 0x7f37c34af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f37bab73c70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f37ba7395d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f37ba728ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('__init__() takes exactly 1 positional argument (2 given)')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f37c3a48a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f37c35b05e0>
          │    │   │      └ <starlette.requests.Request object at 0x7f37ba7395d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f37bab0dc00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f37bab73c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f37ba729d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f37bab0dcf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f37bab0dc00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f37ba729d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f37c349e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f37bab0dcf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f37ba729d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f37c35ee4d0>
          └ <fastapi.routing.APIRoute object at 0x7f37ba70e3e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f37ba729d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f37ba739960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f37ba728160>
          └ <fastapi.routing.APIRoute object at 0x7f37ba70e3e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f37ba779ae0>
                     └ <function get_request_handler.<locals>.app at 0x7f37ba7280d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f37c35ef130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f37ba779030>, 'credentials': HTTPAuthorizationCredentials(scheme=...
                 │                 │         └ <function read_user_id at 0x7f37bb3d2d40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f37ba70e4a0>
                 └ <function run_in_threadpool at 0x7f37c3f4add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_id at 0x7f37bb3d2d40>, db_session=<sqlalchemy.orm.session.Session object at 0x7f37ba77...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f37ba77cb00>
                 │     │         └ <function run_sync at 0x7f37c400d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f37c400c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('__init__() takes exactly 1 positional argument (2 given)')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f37ba...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f37ba70bd00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f37ba77d340>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 66, in read_user_id
    return ResponseObject(data, code="BE0000")
           │              └ (UUID('10d37537-a777-5443-9b4b-7547a71d89e7'),)
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "pydantic/main.py", line 332, in pydantic.main.BaseModel.__init__
    def __init__(__pydantic_self__, **data: Any) -> None:
                                            └ typing.Any

TypeError: __init__() takes exactly 1 positional argument (2 given)
INFO     2024-02-15 10:57:22.778 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45958 - "GET /rms/v1.0/user/%7Buser_id%7D HTTP/1.1" 500
INFO     2024-02-15 10:58:14.199 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:58:17.203 request id: app - uvicorn.server:serve - Started server process [1157979]
INFO     2024-02-15 10:58:17.205 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:58:17.205 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 10:59:11.004 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 10:59:54.675 request id: app - uvicorn.server:serve - Started server process [1158684]
INFO     2024-02-15 10:59:54.676 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 10:59:54.677 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 10:59:59.592 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5de5f78310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f5de5f783a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f5de73c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5de7562950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1158682 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5de7561fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1158682 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5de7410250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1158682 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1158682 started>
    │    └ <function subprocess_started at 0x7f5de689e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1158682 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5de7410370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5de689d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5de7410370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5de7176440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5de71763b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5de7177eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5de70c7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f5ddc388eb0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5ddc388eb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5ddc388eb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5ddc388eb0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5de6798550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f5de67985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5de7411ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5de5b52c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5de7411ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5ddc7c0df0>
          └ <fastapi.applications.FastAPI object at 0x7f5de5b52c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f5ddc362080>
                     │    └ <function error_handle_business at 0x7f5de59eb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5ddc7c0df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValidationError(model='ResponseObject', errors=[{'loc': ('data',), 'msg': 'value is not a valid list', 'type': 'type_error.li...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5ddc330e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5ddc7c2b30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f5ddc7c0df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f5ddc330e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5ddc77bc40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f5ddc7c2b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5ddc330ee0>
                     │    │             └ <starlette.requests.Request object at 0x7f5ddc3415a0>
                     │    └ <function process_middleware_common at 0x7f5de59eb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5ddc77bc40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5ddc3415a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5ddc330ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValidationError(model='ResponseObject', errors=[{'loc': ('data',), 'msg': 'value is not a valid list', 'type': 'type_error.li...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5de5f78a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5de5ae8860>
          │    │   │      └ <starlette.requests.Request object at 0x7f5ddc3415a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5ddc715c00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f5ddc77bc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5ddc331d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5ddc715cf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f5ddc715c00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5ddc331d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f5de59da3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f5ddc715cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5ddc331d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f5de5b264d0>
          └ <fastapi.routing.APIRoute object at 0x7f5ddc3163b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5ddc331d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f5ddc341930>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f5ddc330160>
          └ <fastapi.routing.APIRoute object at 0x7f5ddc3163b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5ddc389ae0>
                     └ <function get_request_handler.<locals>.app at 0x7f5ddc3300d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f5de5b27130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f5ddc389000>, 'credentials': HTTPAuthorizationCredentials(scheme=...
                 │                 │         └ <function read_user_id at 0x7f5ddd3dad40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f5ddc316470>
                 └ <function run_in_threadpool at 0x7f5de6472dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_id at 0x7f5ddd3dad40>, db_session=<sqlalchemy.orm.session.Session object at 0x7f5ddc38...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f5ddc384fc0>
                 │     │         └ <function run_sync at 0x7f5de6535090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f5de6534820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ValidationError(model='ResponseObject', errors=[{'loc': ('data',), 'msg': 'value is not a valid li...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f5ddc...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f5ddc385940>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f5ddc33e900>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 66, in read_user_id
    return ResponseObject(data=data, code="BE0000")
           │                   └ (UUID('10d37537-a777-5443-9b4b-7547a71d89e7'),)
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
    raise validation_error

pydantic.error_wrappers.ValidationError: 3 validation errors for ResponseObject
data
  value is not a valid list (type=type_error.list)
data
  value is not a valid dict (type=type_error.dict)
data
  str type expected (type=type_error.str)
INFO     2024-02-15 10:59:59.608 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34008 - "GET /rms/v1.0/user/%7Buser_id%7D HTTP/1.1" 500
INFO     2024-02-15 11:00:44.303 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:00:44.405 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:00:44.407 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:00:44.409 request id: app - uvicorn.server:serve - Finished server process [1158684]
INFO     2024-02-15 11:00:45.252 request id: app - uvicorn.server:serve - Started server process [1158980]
INFO     2024-02-15 11:00:45.253 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:00:45.254 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:00:51.894 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f925dd08310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f925dd083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f925f10bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f925f25e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1158682 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f925f25dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1158682 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f925f154250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1158682 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1158682 started>
    │    └ <function subprocess_started at 0x7f925e676440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1158682 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f925f154370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f925e675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f925f154370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f925ef06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f925ef063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f925ef07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f925f0f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f925416cee0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f925416cee0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f925416cee0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f925416cee0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f925e53c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f925e53c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f925f155ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f925d8dac50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f925f155ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f92542a4e20>
          └ <fastapi.applications.FastAPI object at 0x7f925d8dac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f92541420b0>
                     │    └ <function error_handle_business at 0x7f925d76f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f92542a4e20>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('__init__() takes exactly 1 positional argument (2 given)')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9254114e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f92542a6b60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f92542a4e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9254114e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f925425fc70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f92542a6b60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9254114ee0>
                     │    │             └ <starlette.requests.Request object at 0x7f92541255d0>
                     │    └ <function process_middleware_common at 0x7f925d76f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f925425fc70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f92541255d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9254114ee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('__init__() takes exactly 1 positional argument (2 given)')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f925dd08a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f925d870720>
          │    │   │      └ <starlette.requests.Request object at 0x7f92541255d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9254bf9c00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f925425fc70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9254115d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9254bf9cf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9254bf9c00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9254115d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f925d75e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9254bf9cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9254115d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f925d8ae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f92542fa3e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9254115d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9254125960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9254114160>
          └ <fastapi.routing.APIRoute object at 0x7f92542fa3e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f925416dae0>
                     └ <function get_request_handler.<locals>.app at 0x7f92541140d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f925d8af130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f925416d030>, 'credentials': HTTPAuthorizationCredentials(scheme=...
                 │                 │         └ <function read_user_id at 0x7f9254bbed40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f92542fa4a0>
                 └ <function run_in_threadpool at 0x7f925e20add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function read_user_id at 0x7f9254bbed40>, db_session=<sqlalchemy.orm.session.Session object at 0x7f925416...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f92541652c0>
                 │     │         └ <function run_sync at 0x7f925e2cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f925e2cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('__init__() takes exactly 1 positional argument (2 given)')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9254...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f92542efdc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f9254122900>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/user_controller.py", line 66, in read_user_id
    return ResponseObject(data, code="BE0000")
           │              └ (UUID('10d37537-a777-5443-9b4b-7547a71d89e7'),)
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "pydantic/main.py", line 332, in pydantic.main.BaseModel.__init__
    def __init__(__pydantic_self__, **data: Any) -> None:
                                            └ typing.Any

TypeError: __init__() takes exactly 1 positional argument (2 given)
INFO     2024-02-15 11:00:51.912 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47444 - "GET /rms/v1.0/user/%7Buser_id%7D HTTP/1.1" 500
INFO     2024-02-15 11:02:01.452 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:02:01.554 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:02:01.555 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:02:01.556 request id: app - uvicorn.server:serve - Finished server process [1158980]
INFO     2024-02-15 11:02:02.654 request id: app - uvicorn.server:serve - Started server process [1159458]
INFO     2024-02-15 11:02:02.656 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:02:02.657 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:02:29.449 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:02:29.551 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:02:29.552 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:02:29.552 request id: app - uvicorn.server:serve - Finished server process [1159458]
INFO     2024-02-15 11:03:25.622 request id: app - uvicorn.server:serve - Started server process [1159971]
INFO     2024-02-15 11:03:25.624 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:03:25.624 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:03:56.436 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:03:56.538 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:03:56.539 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:03:56.540 request id: app - uvicorn.server:serve - Finished server process [1159971]
INFO     2024-02-15 11:04:28.370 request id: app - uvicorn.server:serve - Started server process [1160373]
INFO     2024-02-15 11:04:28.372 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:04:28.373 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:04:52.368 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:04:52.471 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:04:52.472 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:04:52.472 request id: app - uvicorn.server:serve - Finished server process [1160373]
INFO     2024-02-15 11:04:53.411 request id: app - uvicorn.server:serve - Started server process [1160537]
INFO     2024-02-15 11:04:53.412 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:04:53.413 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:05:07.667 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:05:07.769 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:05:07.770 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:05:07.770 request id: app - uvicorn.server:serve - Finished server process [1160537]
INFO     2024-02-15 11:05:08.800 request id: app - uvicorn.server:serve - Started server process [1160631]
INFO     2024-02-15 11:05:08.801 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:05:08.802 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:05:46.546 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:05:46.647 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:05:46.648 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:05:46.649 request id: app - uvicorn.server:serve - Finished server process [1160631]
INFO     2024-02-15 11:05:47.554 request id: app - uvicorn.server:serve - Started server process [1160889]
INFO     2024-02-15 11:05:47.556 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:05:47.557 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:06:09.530 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40426 - "GET /docs HTTP/1.1" 200
INFO     2024-02-15 11:06:09.847 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40426 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-15 11:06:43.391 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': '123456'}}
ERROR    2024-02-15 11:06:43.676 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Incorrect Password
None
INFO     2024-02-15 11:06:43.677 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40438 - "POST /rms/v1.0/login/access-token HTTP/1.1" 400
INFO     2024-02-15 11:07:16.594 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-15 11:07:16.835 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk3MTgzNn0.0THIKn_H85EtILmO50RrKtQCRIiJJcdOWFMxWb-uFR0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwNzk4ODAzNn0.dfEDgLClphCwpMcDHkpMUUMuA4IjxzSQ5szxec6Zw2U"},"links":null,"relationships":null,"timestamp":"2024-02-15 11:05:47"}'}
INFO     2024-02-15 11:07:16.836 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49424 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-15 11:09:10.400 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fdd3f834310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fdd3f8343a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fdd40c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fdd40d62950>
           └ <SpawnProcess name='SpawnProcess-10' parent=1158682 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdd40d61fc0>
    └ <SpawnProcess name='SpawnProcess-10' parent=1158682 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdd40c58250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=1158682 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=1158682 started>
    │    └ <function subprocess_started at 0x7fdd40192440>
    └ <SpawnProcess name='SpawnProcess-10' parent=1158682 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdd40c58370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fdd40191900>
    │    │                  └ <uvicorn.server.Server object at 0x7fdd40c58370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fdd405aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fdd405aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fdd405abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fdd40bfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fdd35f7b6d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fdd35f7b6d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fdd35f7b6d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fdd35f7b6d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fdd4005c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fdd4005c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdd40c59ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdd3f40ac50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdd40c59ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdd363b8e20>
          └ <fastapi.applications.FastAPI object at 0x7fdd3f40ac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fdd35b90370>
                     │    └ <function error_handle_business at 0x7fdd3f2a3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdd363b8e20>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdd35f28f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdd363bab60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdd363b8e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdd35f28f70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fdd3f2cf760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdd363bab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fdd363bab60>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdd36377c70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdd363bab60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdd35b52d40>
                     │    │             └ <starlette.requests.Request object at 0x7fdd35b90e20>
                     │    └ <function process_middleware_common at 0x7fdd3f2a31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdd36377c70>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fdd35b90e20>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdd35b52d40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fdd3f834a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fdd3f3a06d0>
          │    │   │      └ <starlette.requests.Request object at 0x7fdd35b90e20>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdd36ffc190>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdd36377c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdd35b535b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdd36ffe5c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdd36ffc190>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdd35b535b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fdd3f2923b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdd36ffe5c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdd35b535b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fdd3f3de4d0>
          └ <fastapi.routing.APIRoute object at 0x7fdd363bb5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdd35b535b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdd35b90940>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fdd363de9e0>
          └ <fastapi.routing.APIRoute object at 0x7fdd363bb5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fdd35b91060>
                     └ <function get_request_handler.<locals>.app at 0x7fdd363de950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fdd3f3df130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fdd35b908e0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fdd36f62830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fdd363bb6a0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 29, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fdd35b914e0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fdd35b908e0>
                 │                └ <function ResourceService.upload_resource at 0x7fdd37bb67a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fdd3c5d7190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 41, in upload_resource
    user_id = UserService.get_user_id_by_access_token(db_session, credentials.credentials)
              │           │                           │           └ Depends(HTTPBearer)
              │           │                           └ <sqlalchemy.orm.session.Session object at 0x7fdd35b908e0>
              │           └ <function UserService.get_user_id_by_access_token at 0x7fdd3c5e9480>
              └ <class 'app.src.services.user_service.UserService'>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:09:10.418 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38794 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:10:24.362 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:10:24.464 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:10:24.466 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:10:24.469 request id: app - uvicorn.server:serve - Finished server process [1160889]
INFO     2024-02-15 11:10:28.038 request id: app - uvicorn.server:serve - Started server process [1162525]
INFO     2024-02-15 11:10:28.040 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:10:28.041 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:10:55.975 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f88e8ffb910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f88e8ffb9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f88ebb51120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f88ebb13e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=1162520 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f88ebb13490>
    └ <SpawnProcess name='SpawnProcess-1' parent=1162520 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f88ebd13490>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1162520 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1162520 started>
    │    └ <function subprocess_started at 0x7f88e9879bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1162520 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f88ebb64ee0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f88e9878ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f88ebb64ee0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f88eba91a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f88eba91990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f88eba93490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f88ebd22830>
    └ <Handle <TaskStepMethWrapper object at 0x7f88e8a8ca60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f88e8a8ca60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f88e8a8ca60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f88e8a8ca60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f88e98ff250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f88e98ff2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f88ebb07b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f88e8c10e80>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f88ebb07b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88cbb20610>
          └ <fastapi.applications.FastAPI object at 0x7f88e8c10e80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f88ca8b7dc0>
                     │    └ <function error_handle_business at 0x7f88e8c32830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88cbb20610>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f88cbb9d000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f88cbb222c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88cbb20610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f88cbb9d000>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f88e8a7b130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f88cbb222c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f88cbb222c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88d00cb400>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f88cbb222c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f88cbb9d090>
                     │    │             └ <starlette.requests.Request object at 0x7f88cbba0af0>
                     │    └ <function process_middleware_common at 0x7f88e8c328c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88d00cb400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f88cbba0af0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f88cbb9d090>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f88e90140d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f88e8b9e570>
          │    │   │      └ <starlette.requests.Request object at 0x7f88cbba0af0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f88d0023880>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88d00cb400>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88cbb9df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f88d0023820>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f88d0023880>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88cbb9df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f88e8a492d0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f88d0023820>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88cbb9df30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f88e8bd5630>
          └ <fastapi.routing.APIRoute object at 0x7f88cbb22ce0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f88cbb9df30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f88cbba11b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f88cbb4a0e0>
          └ <fastapi.routing.APIRoute object at 0x7f88cbb22ce0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f88cbba3cd0>
                     └ <function get_request_handler.<locals>.app at 0x7f88cbb4a050>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f88e8bd6290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f88cbba3ca0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f88d01b0e50>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f88cbb22da0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 29, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f88cbba3f40>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f88cbba3ca0>
                 │                └ <function ResourceService.upload_resource at 0x7f88d0d00ca0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f88d1dfbfa0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 41, in upload_resource
    user_id = UserService.get_user_id_by_access_token(db_session, credentials.credentials)
              │           │                           │           └ Depends(HTTPBearer)
              │           │                           └ <sqlalchemy.orm.session.Session object at 0x7f88cbba3ca0>
              │           └ <function UserService.get_user_id_by_access_token at 0x7f88d1e20280>
              └ <class 'app.src.services.user_service.UserService'>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:10:56.032 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57370 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:11:04.633 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:11:06.515 request id: app - uvicorn.server:serve - Started server process [1162852]
INFO     2024-02-15 11:11:06.517 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:11:06.517 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:11:07.920 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f42cdafc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f42cdafc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f42cef0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f42cf05e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1162850 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f42cf05dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1162850 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f42cef54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1162850 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1162850 started>
    │    └ <function subprocess_started at 0x7f42ce476440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1162850 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f42cef54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f42ce475900>
    │    │                  └ <uvicorn.server.Server object at 0x7f42cef54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f42ced06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f42ced063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f42ced07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f42ceef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f42c4001ff0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f42c4001ff0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f42c4001ff0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f42c4001ff0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f42ce330550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f42ce3305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f42cef55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f42cd6cec50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f42cef55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f42c42a4df0>
          └ <fastapi.applications.FastAPI object at 0x7f42cd6cec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f42c412a140>
                     │    └ <function error_handle_business at 0x7f42cd563250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f42c42a4df0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f42c4114ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f42c42a6b30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f42c42a4df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f42c4114ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f42cd58f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f42c42a6b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f42c42a6b30>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f42c425fc40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f42c42a6b30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f42c4114f70>
                     │    │             └ <starlette.requests.Request object at 0x7f42c41293f0>
                     │    └ <function process_middleware_common at 0x7f42cd5631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f42c425fc40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f42c41293f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f42c4114f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f42cdafca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f42cd664590>
          │    │   │      └ <starlette.requests.Request object at 0x7f42c41293f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f42c4be0160>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f42c425fc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f42c4115e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f42c4be2590>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f42c4be0160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f42c4115e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f42cd5523b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f42c4be2590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f42c4115e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f42cd6a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f42c42a75b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f42c4115e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f42c4129a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f42c42ca9e0>
          └ <fastapi.routing.APIRoute object at 0x7f42c42a75b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f42c4161ba0>
                     └ <function get_request_handler.<locals>.app at 0x7f42c42ca950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f42cd6a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f42c4161d50>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f42c4b4e830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f42c42a7670>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 29, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f42c4160550>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f42c4161d50>
                 │                └ <function ResourceService.upload_resource at 0x7f42c57a27a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f42c67c3160>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 41, in upload_resource
    user_id = UserService.get_user_id_by_access_token(db_session, credentials.credentials)
              │           │                           │           └ Depends(HTTPBearer)
              │           │                           └ <sqlalchemy.orm.session.Session object at 0x7f42c4161d50>
              │           └ <function UserService.get_user_id_by_access_token at 0x7f42c67d5480>
              └ <class 'app.src.services.user_service.UserService'>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:11:07.937 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59882 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:11:10.046 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:11:12.768 request id: app - uvicorn.server:serve - Started server process [1162916]
INFO     2024-02-15 11:11:12.771 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:11:12.772 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:11:46.996 request id: app - uvicorn.server:serve - Started server process [1163219]
INFO     2024-02-15 11:11:46.998 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:11:46.998 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:11:48.439 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7faf422a4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7faf422a43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7faf4370bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7faf4385e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1163217 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7faf4385dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1163217 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7faf43754250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1163217 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1163217 started>
    │    └ <function subprocess_started at 0x7faf42c1e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1163217 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7faf43754370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7faf42c1d900>
    │    │                  └ <uvicorn.server.Server object at 0x7faf43754370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7faf42fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7faf42fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7faf42fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7faf436f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7faf387fa020>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7faf387fa020>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7faf387fa020>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7faf387fa020>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7faf42ad8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7faf42ad85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7faf43755ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7faf41e76c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7faf43755ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7faf3889cdf0>
          └ <fastapi.applications.FastAPI object at 0x7faf41e76c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7faf387220e0>
                     │    └ <function error_handle_business at 0x7faf41d0b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7faf3889cdf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7faf3870cee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7faf3889eb30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7faf3889cdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7faf3870cee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7faf41d37760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7faf3889eb30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7faf3889eb30>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7faf38857c40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7faf3889eb30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7faf3870cf70>
                     │    │             └ <starlette.requests.Request object at 0x7faf387213c0>
                     │    └ <function process_middleware_common at 0x7faf41d0b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7faf38857c40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7faf387213c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7faf3870cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7faf422a4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7faf41e0c770>
          │    │   │      └ <starlette.requests.Request object at 0x7faf387213c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7faf391dc160>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7faf38857c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faf3870de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7faf391de590>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7faf391dc160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faf3870de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7faf41efa3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7faf391de590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faf3870de10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7faf41e4a4d0>
          └ <fastapi.routing.APIRoute object at 0x7faf3889f5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faf3870de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faf38721a80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7faf388c29e0>
          └ <fastapi.routing.APIRoute object at 0x7faf3889f5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7faf38759ae0>
                     └ <function get_request_handler.<locals>.app at 0x7faf388c2950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7faf41e4b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7faf387590c0>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7faf39146830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7faf3889f670>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 29, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7faf387583a0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7faf387590c0>
                 │                └ <function ResourceService.upload_resource at 0x7faf39d9e7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7faf3acf3160>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 41, in upload_resource
    user_id = UserService.get_user_id_by_access_token(db_session, credentials.credentials)
              │           │                           │           └ Depends(HTTPBearer)
              │           │                           └ <sqlalchemy.orm.session.Session object at 0x7faf387590c0>
              │           └ <function UserService.get_user_id_by_access_token at 0x7faf3ad05480>
              └ <class 'app.src.services.user_service.UserService'>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:11:48.454 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39574 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:16:24.469 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:16:24.573 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:16:24.575 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:16:24.576 request id: app - uvicorn.server:serve - Finished server process [1163219]
INFO     2024-02-15 11:16:30.125 request id: app - uvicorn.server:serve - Started server process [1164901]
INFO     2024-02-15 11:16:30.127 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:16:30.127 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:16:49.709 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:16:49.811 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:16:49.812 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:16:49.813 request id: app - uvicorn.server:serve - Finished server process [1164901]
INFO     2024-02-15 11:16:50.686 request id: app - uvicorn.server:serve - Started server process [1165059]
INFO     2024-02-15 11:16:50.688 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:16:50.689 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:16:53.902 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:16:54.004 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:16:54.006 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:16:54.007 request id: app - uvicorn.server:serve - Finished server process [1165059]
INFO     2024-02-15 11:16:56.211 request id: app - uvicorn.server:serve - Started server process [1165122]
INFO     2024-02-15 11:16:56.212 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:16:56.213 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:17:00.154 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f63d9220310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f63d92203a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f63da60bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f63da75e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1165120 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f63da75dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1165120 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f63da654250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1165120 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1165120 started>
    │    └ <function subprocess_started at 0x7f63d9b8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1165120 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f63da654370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f63d9b8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f63da654370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f63d9fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f63d9fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f63d9fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f63da5f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f63cb702110>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f63cb702110>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f63cb702110>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f63cb702110>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f63d9a58550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f63d9a585e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f63da655ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f63d8df6c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f63da655ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63cbfa0f10>
          └ <fastapi.applications.FastAPI object at 0x7f63d8df6c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f63cbb2e200>
                     │    └ <function error_handle_business at 0x7f63d8c8f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63cbfa0f10>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f63cbb18ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63cbfa2c50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f63cbfa0f10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f63cbb18ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f63d8cbb760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63cbfa2c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f63cbfa2c50>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63cbf63d60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f63cbfa2c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f63cbb18f70>
                     │    │             └ <starlette.requests.Request object at 0x7f63cbb2d4e0>
                     │    └ <function process_middleware_common at 0x7f63d8c8f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63cbf63d60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f63cbb2d4e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f63cbb18f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f63d9220a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f63d8d8c770>
          │    │   │      └ <starlette.requests.Request object at 0x7f63cbb2d4e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f63d05e4280>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f63cbf63d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63cbb19e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f63d05e66b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f63d05e4280>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63cbb19e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f63d8c7e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f63d05e66b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63cbb19e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f63d8dca4d0>
          └ <fastapi.routing.APIRoute object at 0x7f63cbfa36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f63cbb19e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f63cbb2dba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f63cbfce9e0>
          └ <fastapi.routing.APIRoute object at 0x7f63cbfa36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f63cbb65bd0>
                     └ <function get_request_handler.<locals>.app at 0x7f63cbfce950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f63d8dcb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f63cbb65180>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f63d0552830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f63cbfa3790>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f63cbb64490>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f63cbb65180>
                 │                └ <function ResourceService.upload_resource at 0x7f63d11a67a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f63d1f6f160>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 41, in upload_resource
    user_id = user_service.get_user_id_by_access_token(db_session, credentials.credentials)
              │            │                           │           └ Depends(HTTPBearer)
              │            │                           └ <sqlalchemy.orm.session.Session object at 0x7f63cbb65180>
              │            └ <function UserService.get_user_id_by_access_token at 0x7f63d1f81480>
              └ <app.src.services.user_service.UserService object at 0x7f63d1f9c4f0>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:17:00.170 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51038 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:19:36.478 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:19:36.580 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:19:36.580 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:19:36.581 request id: app - uvicorn.server:serve - Finished server process [1165122]
INFO     2024-02-15 11:20:07.006 request id: app - uvicorn.server:serve - Started server process [1166247]
INFO     2024-02-15 11:20:07.007 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:20:07.008 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:20:09.727 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6dfb5ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6dfb5ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f6dfca0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f6dfcb62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1166244 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6dfcb61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1166244 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6dfca58250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1166244 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1166244 started>
    │    └ <function subprocess_started at 0x7f6dfbf66440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1166244 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6dfca58370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6dfbf65900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6dfca58370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6dfc3aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6dfc3aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6dfc3abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6dfc9fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6df1b1b4c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6df1b1b4c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6df1b1b4c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6df1b1b4c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6dfbe24550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6dfbe245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6dfca59ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6dfb1c2c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6dfca59ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6df23bcfd0>
          └ <fastapi.applications.FastAPI object at 0x7f6dfb1c2c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6df1f422c0>
                     │    └ <function error_handle_business at 0x7f6dfb05b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6df23bcfd0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6df1f2cee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6df23bed10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6df23bcfd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6df1f2cee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6dfb087760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6df23bed10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f6df23bed10>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6df2377e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6df23bed10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6df1f2cf70>
                     │    │             └ <starlette.requests.Request object at 0x7f6df1f415a0>
                     │    └ <function process_middleware_common at 0x7f6dfb05b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6df2377e20>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6df1f415a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6df1f2cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6dfb5eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6dfb158720>
          │    │   │      └ <starlette.requests.Request object at 0x7f6df1f415a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6df2308340>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6df2377e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6df1f2de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6df230a770>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6df2308340>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6df1f2de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6dfb04a3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6df230a770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6df1f2de10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6dfb1964d0>
          └ <fastapi.routing.APIRoute object at 0x7f6df23bf790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6df1f2de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6df1f41c60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f6df23e29e0>
          └ <fastapi.routing.APIRoute object at 0x7f6df23bf790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6df1f79c60>
                     └ <function get_request_handler.<locals>.app at 0x7f6df23e2950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6dfb197130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f6df1f79270>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f6df2f66830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f6df23bf850>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f6df1f785e0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f6df1f79270>
                 │                └ <function ResourceService.upload_resource at 0x7f6df3bbe7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6df83d3160>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 43, in upload_resource
    user_id = user_service.get_user_id_by_access_token(db_session, credentials.credentials)
              │            │                           │           └ Depends(HTTPBearer)
              │            │                           └ <sqlalchemy.orm.session.Session object at 0x7f6df1f79270>
              │            └ <function UserService.get_user_id_by_access_token at 0x7f6df83e5480>
              └ <app.src.services.user_service.UserService object at 0x7f6df8412fe0>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:20:09.747 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57900 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:20:18.058 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:20:18.160 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:20:18.162 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:20:18.162 request id: app - uvicorn.server:serve - Finished server process [1166247]
INFO     2024-02-15 11:20:19.014 request id: app - uvicorn.server:serve - Started server process [1166337]
INFO     2024-02-15 11:20:19.015 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:20:19.016 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:20:21.271 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f5345b84310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f5345b843a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f534700fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5347162950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1166244 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5347161fc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1166244 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5347058250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1166244 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1166244 started>
    │    └ <function subprocess_started at 0x7f5346496440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1166244 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5347058370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5346495900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5347058370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f5346da2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f5346da23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f5346da3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5346ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f533c112200>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f533c112200>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f533c112200>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f533c112200>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5346390550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f53463905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5347059ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f5345766c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5347059ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f533c3b4fd0>
          └ <fastapi.applications.FastAPI object at 0x7f5345766c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f533c23e2c0>
                     │    └ <function error_handle_business at 0x7f53455ff250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f533c3b4fd0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f533c228ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f533c3b6d10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f533c3b4fd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f533c228ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f534562b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f533c3b6d10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f533c3b6d10>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f533c373e20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f533c3b6d10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f533c228f70>
                     │    │             └ <starlette.requests.Request object at 0x7f533c23d5a0>
                     │    └ <function process_middleware_common at 0x7f53455ff1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f533c373e20>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f533c23d5a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f533c228f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f5345b84a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f5345704540>
          │    │   │      └ <starlette.requests.Request object at 0x7f533c23d5a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f533c300340>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f533c373e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f533c229e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f533c302770>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f533c300340>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f533c229e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f53455ee3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f533c302770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f533c229e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f534573a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f533c3b7790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f533c229e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f533c23dc60>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f533c3e29e0>
          └ <fastapi.routing.APIRoute object at 0x7f533c3b7790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f533c275c60>
                     └ <function get_request_handler.<locals>.app at 0x7f533c3e2950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f534573b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f533c275270>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f533cf62830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f533c3b7850>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f533c2745e0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f533c275270>
                 │                └ <function ResourceService.upload_resource at 0x7f533dbba7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f533e97f160>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 43, in upload_resource
    user_id = user_service.get_user_id_by_access_token(db_session1, credentials.credentials)
              │            │                           │            └ Depends(HTTPBearer)
              │            │                           └ Depends(get_db_session)
              │            └ <function UserService.get_user_id_by_access_token at 0x7f533e991480>
              └ <app.src.services.user_service.UserService object at 0x7f533e9bafe0>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:20:21.285 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45094 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:21:12.950 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:21:13.052 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:21:13.054 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:21:13.056 request id: app - uvicorn.server:serve - Finished server process [1166337]
INFO     2024-02-15 11:25:12.535 request id: app - uvicorn.server:serve - Started server process [1168500]
INFO     2024-02-15 11:25:12.536 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:25:12.537 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:25:15.853 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:25:15.957 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:25:15.958 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:25:15.958 request id: app - uvicorn.server:serve - Finished server process [1168500]
INFO     2024-02-15 11:25:17.690 request id: app - uvicorn.server:serve - Started server process [1168645]
INFO     2024-02-15 11:25:17.691 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:25:17.692 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:25:21.817 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f9c472fc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f9c472fc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9c4870bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9c4885e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1168643 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9c4885dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1168643 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9c48754250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1168643 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1168643 started>
    │    └ <function subprocess_started at 0x7f9c47c72440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1168643 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9c48754370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9c47c71900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9c48754370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9c48506440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9c485063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9c48507eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9c486f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f9c3cd0a140>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9c3cd0a140>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9c3cd0a140>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9c3cd0a140>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9c47b30550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9c47b305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9c48755ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f9c46ed6c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9c48755ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9c3d7acf10>
          └ <fastapi.applications.FastAPI object at 0x7f9c46ed6c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9c3d632200>
                     │    └ <function error_handle_business at 0x7f9c46d6f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9c3d7acf10>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9c3d61cee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9c3d7aec50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9c3d7acf10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9c3d61cee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f9c46d9b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9c3d7aec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f9c3d7aec50>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9c3d76bd60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9c3d7aec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9c3d61cf70>
                     │    │             └ <starlette.requests.Request object at 0x7f9c3d6314e0>
                     │    └ <function process_middleware_common at 0x7f9c46d6f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9c3d76bd60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9c3d6314e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9c3d61cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Depends' object has no attribute 'credentials'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f9c472fca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f9c46e6c770>
          │    │   │      └ <starlette.requests.Request object at 0x7f9c3d6314e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9c3e3f0280>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9c3d76bd60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9c3d61de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9c3e3f26b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9c3e3f0280>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9c3d61de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f9c46d5e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9c3e3f26b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9c3d61de10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f9c46eaa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f9c3d7af6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9c3d61de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9c3d631ba0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9c3d7d69e0>
          └ <fastapi.routing.APIRoute object at 0x7f9c3d7af6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9c3d669bd0>
                     └ <function get_request_handler.<locals>.app at 0x7f9c3d7d6950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9c46eab130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f9c3d669180>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f9c3e356830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f9c3d7af790>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create)
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f9c3d668be0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f9c3d669180>
                 │                └ <function ResourceService.upload_resource at 0x7f9c3efae7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f9c44173160>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 42, in upload_resource
    user_id = user_service.get_user_id_by_access_token(db_session, credentials.credentials)
              │            │                           │           └ Depends(HTTPBearer)
              │            │                           └ <sqlalchemy.orm.session.Session object at 0x7f9c3d669180>
              │            └ <function UserService.get_user_id_by_access_token at 0x7f9c44185480>
              └ <app.src.services.user_service.UserService object at 0x7f9c441a0520>

AttributeError: 'Depends' object has no attribute 'credentials'
INFO     2024-02-15 11:25:21.833 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46664 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:25:46.920 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:25:47.022 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:25:47.025 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:25:47.027 request id: app - uvicorn.server:serve - Finished server process [1168645]
INFO     2024-02-15 11:25:49.852 request id: app - uvicorn.server:serve - Started server process [1168822]
INFO     2024-02-15 11:25:49.854 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:25:49.855 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:29:32.528 request id: app - uvicorn.server:serve - Started server process [1170429]
INFO     2024-02-15 11:29:32.530 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:29:32.531 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:29:46.713 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7eff97a17910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7eff97a179a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7effa656d120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7effa6533e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=1170402 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7effa6533490>
    └ <SpawnProcess name='SpawnProcess-1' parent=1170402 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7effa672f490>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1170402 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1170402 started>
    │    └ <function subprocess_started at 0x7effa4291bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1170402 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7effa672f5b0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7effa4290ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7effa672f5b0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7effa64b1a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7effa64b1990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7effa64b3490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7effa673e830>
    └ <Handle <TaskStepMethWrapper object at 0x7eff8ab9b6d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7eff8ab9b6d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7eff8ab9b6d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7eff8ab9b6d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7effa431b250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7effa431b2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7effa685ff70>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7eff97634d60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7effa685ff70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7eff8ab1c580>
          └ <fastapi.applications.FastAPI object at 0x7eff97634d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7eff8ab99780>
                     │    └ <function error_handle_business at 0x7eff9765a830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7eff8ab1c580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7eff8abb8160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7eff8ab1e230>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7eff8ab1c580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7eff8abb8160>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7eff9749b130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7eff8ab1e230>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7eff8ab1e230>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7eff8afcb370>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7eff8ab1e230>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7eff8abb81f0>
                     │    │             └ <starlette.requests.Request object at 0x7eff8ab98a60>
                     │    └ <function process_middleware_common at 0x7eff9765a8c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7eff8afcb370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7eff8ab98a60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7eff8abb81f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7eff97a300d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7eff975b6200>
          │    │   │      └ <starlette.requests.Request object at 0x7eff8ab98a60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7eff8af237f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7eff8afcb370>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7eff8abb9090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7eff8af23790>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7eff8af237f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7eff8abb9090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7eff974758a0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7eff8af23790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7eff8abb9090>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7eff975f9630>
          └ <fastapi.routing.APIRoute object at 0x7eff8ab1ec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7eff8abb9090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7eff8ab99120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7eff8ab49240>
          └ <fastapi.routing.APIRoute object at 0x7eff8ab1ec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7eff8ab9b4c0>
                     └ <function get_request_handler.<locals>.app at 0x7eff8ab491b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7eff975fa290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7eff8ab9b130>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7eff8b7a7f40>
                 └ <fastapi.dependencies.models.Dependant object at 0x7eff8ab1ed10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create, user[0])
                 │                │               │           │            │                └ (<app.src.models.user.User object at 0x7eff8a7aa830>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7eff8ab9bee0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7eff8ab9b130>
                 │                └ <function ResourceService.upload_resource at 0x7eff97e5bd90>
                 └ <app.src.services.resource_service.ResourceService object at 0x7eff949e0640>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 43, in upload_resource
    resource_create.key = key
    │                     └ 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png'
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-02-15 11:29:46.774 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50802 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:30:16.951 request id: app - uvicorn.server:serve - Started server process [1170793]
INFO     2024-02-15 11:30:16.952 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:30:16.953 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:30:18.687 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa791908310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa7919083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa792d0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa792e5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1170791 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa792e5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1170791 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa792d54250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1170791 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1170791 started>
    │    └ <function subprocess_started at 0x7fa792276440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1170791 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa792d54370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa792275900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa792d54370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa792b06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa792b063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa792b07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa792cf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa783306080>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa783306080>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa783306080>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa783306080>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa79213c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa79213c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa792d55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa7914dac50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa792d55ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa7880a8e80>
          └ <fastapi.applications.FastAPI object at 0x7fa7914dac50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa783f2e170>
                     │    └ <function error_handle_business at 0x7fa79136f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa7880a8e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa783f18ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7880aabc0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa7880a8e80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa783f18ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa79139b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7880aabc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa7880aabc0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa788063cd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa7880aabc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa783f18f70>
                     │    │             └ <starlette.requests.Request object at 0x7fa783f2d450>
                     │    └ <function process_middleware_common at 0x7fa79136f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa788063cd0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa783f2d450>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa783f18f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa791908a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa791470720>
          │    │   │      └ <starlette.requests.Request object at 0x7fa783f2d450>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa7889ec1f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa788063cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa783f19e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa7889ee620>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa7889ec1f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa783f19e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa79135e3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa7889ee620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa783f19e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa7914ae4d0>
          └ <fastapi.routing.APIRoute object at 0x7fa7880ab640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa783f19e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa783f2db10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa7880d29e0>
          └ <fastapi.routing.APIRoute object at 0x7fa7880ab640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa783f6db40>
                     └ <function get_request_handler.<locals>.app at 0x7fa7880d2950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa7914af130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa783f6d120>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7fa788952830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa7880ab700>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create, user[0])
                 │                │               │           │            │                └ (<app.src.models.user.User object at 0x7fa783364910>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7fa783f6c8b0>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7fa783f6d120>
                 │                └ <function ResourceService.upload_resource at 0x7fa7895aa7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa78a5c7190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 43, in upload_resource
    resource_create.key = key
    │                     └ 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png'
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-02-15 11:30:18.703 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35764 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:31:20.306 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:31:20.407 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:31:20.408 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:31:20.409 request id: app - uvicorn.server:serve - Finished server process [1170793]
INFO     2024-02-15 11:31:21.272 request id: app - uvicorn.server:serve - Started server process [1171188]
INFO     2024-02-15 11:31:21.273 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:31:21.274 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-15 11:31:42.518 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7f171ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7f171ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7f1860bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7f1875e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1170791 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7f1875dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1170791 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7f18654250>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1170791 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1170791 started>
    │    └ <function subprocess_started at 0x7f7f17b62440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1170791 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7f18654370>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7f17b61900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7f18654370>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7f17fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7f17fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7f17fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7f185f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7f0cc121a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7f0cc121a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7f0cc121a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7f0cc121a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7f17a20550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7f17a205e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7f18655ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7f16dc2c50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7f18655ed0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f0d9b4f40>
          └ <fastapi.applications.FastAPI object at 0x7f7f16dc2c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7f0d53a260>
                     │    └ <function error_handle_business at 0x7f7f16c5b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f0d9b4f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "user_id"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7f0d524ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f0d9b6c80>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f0d9b4f40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61776', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7f0d524ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f7f16c87760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f0d9b6c80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f7f0d9b6c80>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f0d96fd90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f0d9b6c80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7f0d524f70>
                     │    │             └ <starlette.requests.Request object at 0x7f7f0d539540>
                     │    └ <function process_middleware_common at 0x7f7f16c5b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f0d96fd90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7f0d539540>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7f0d524f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "user_id"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7f171eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7f16d58680>
          │    │   │      └ <starlette.requests.Request object at 0x7f7f0d539540>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7f0e5fc2b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f0d96fd90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f0d525e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7f0e5fe6e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7f0e5fc2b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f0d525e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7f16c4a3b0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7f0e5fe6e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f0d525e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7f16d964d0>
          └ <fastapi.routing.APIRoute object at 0x7f7f0d9b7700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f0d525e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f0d539c00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7f0d9de9e0>
          └ <fastapi.routing.APIRoute object at 0x7f7f0d9b7700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7f0d571c00>
                     └ <function get_request_handler.<locals>.app at 0x7f7f0d9de950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7f16d97130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f7f0d571210>, 'resource_create': ResourceCreate(stage_id='367814e...
                 │         └ <function create_one at 0x7f7f0e55e830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f7f0d9b77c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 31, in create_one
    return await resource_service.upload_resource(db_session, file_upload, resource_create, user[0])
                 │                │               │           │            │                └ (<app.src.models.user.User object at 0x7f7f0cc74a30>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │           │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               │           └ <starlette.datastructures.UploadFile object at 0x7f7f0d570580>
                 │                │               └ <sqlalchemy.orm.session.Session object at 0x7f7f0d571210>
                 │                └ <function ResourceService.upload_resource at 0x7f7f0f1b27a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f7f0ff7b220>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 44, in upload_resource
    resource_create.user_id = user_id
    │                         └ UUID('10d37537-a777-5443-9b4b-7547a71d89e7')
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "user_id"
INFO     2024-02-15 11:31:42.535 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57218 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-15 11:31:48.981 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:31:49.083 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:31:49.087 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:31:49.090 request id: app - uvicorn.server:serve - Finished server process [1171188]
INFO     2024-02-15 11:31:50.040 request id: app - uvicorn.server:serve - Started server process [1171358]
INFO     2024-02-15 11:31:50.042 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:31:50.042 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:31:54.962 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:31:55.065 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:31:55.066 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:31:55.068 request id: app - uvicorn.server:serve - Finished server process [1171358]
INFO     2024-02-15 11:31:56.025 request id: app - uvicorn.server:serve - Started server process [1171422]
INFO     2024-02-15 11:31:56.027 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-15 11:31:56.027 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-15 11:31:58.231 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57280 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-15 11:34:10.603 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-15 11:34:10.705 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-15 11:34:10.706 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-15 11:34:10.706 request id: app - uvicorn.server:serve - Finished server process [1171422]
INFO     2024-02-20 13:31:54.949 request id: app - uvicorn.server:serve - Started server process [11032]
INFO     2024-02-20 13:31:54.950 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:31:54.951 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:31:55.709 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36912 - "GET / HTTP/1.1" 404
INFO     2024-02-20 13:31:55.787 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36912 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-20 13:32:02.844 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36918 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 13:32:02.912 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36918 - "GET /static/swagger-ui.css HTTP/1.1" 304
INFO     2024-02-20 13:32:02.914 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59596 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 304
INFO     2024-02-20 13:32:03.054 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59596 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 13:42:46.718 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:42:46.820 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:42:46.820 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:42:46.821 request id: app - uvicorn.server:serve - Finished server process [11032]
INFO     2024-02-20 13:42:47.719 request id: app - uvicorn.server:serve - Started server process [15107]
INFO     2024-02-20 13:42:47.721 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:42:47.721 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:43:02.273 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:43:02.374 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:43:02.376 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:43:02.377 request id: app - uvicorn.server:serve - Finished server process [15107]
INFO     2024-02-20 13:43:03.271 request id: app - uvicorn.server:serve - Started server process [15196]
INFO     2024-02-20 13:43:03.273 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:43:03.274 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:43:08.227 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47130 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 13:43:08.362 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47130 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 13:48:34.186 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:48:34.289 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:48:34.290 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:48:34.291 request id: app - uvicorn.server:serve - Finished server process [15196]
INFO     2024-02-20 13:48:35.218 request id: app - uvicorn.server:serve - Started server process [17252]
INFO     2024-02-20 13:48:35.219 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:48:35.220 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:49:24.593 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:49:24.695 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:49:24.696 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:49:24.697 request id: app - uvicorn.server:serve - Finished server process [17252]
INFO     2024-02-20 13:51:18.549 request id: app - uvicorn.server:serve - Started server process [18255]
INFO     2024-02-20 13:51:18.551 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:18.551 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:22.162 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:22.264 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:22.265 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:22.265 request id: app - uvicorn.server:serve - Finished server process [18255]
INFO     2024-02-20 13:51:23.238 request id: app - uvicorn.server:serve - Started server process [18295]
INFO     2024-02-20 13:51:23.239 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:23.240 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:29.858 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:29.962 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:29.963 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:29.964 request id: app - uvicorn.server:serve - Finished server process [18295]
INFO     2024-02-20 13:51:30.951 request id: app - uvicorn.server:serve - Started server process [18360]
INFO     2024-02-20 13:51:30.952 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:30.952 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:34.262 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:34.363 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:34.364 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:34.364 request id: app - uvicorn.server:serve - Finished server process [18360]
INFO     2024-02-20 13:51:35.207 request id: app - uvicorn.server:serve - Started server process [18394]
INFO     2024-02-20 13:51:35.208 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:35.209 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:39.424 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:39.528 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:39.528 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:39.529 request id: app - uvicorn.server:serve - Finished server process [18394]
INFO     2024-02-20 13:51:40.408 request id: app - uvicorn.server:serve - Started server process [18449]
INFO     2024-02-20 13:51:40.410 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:40.411 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:46.634 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:46.737 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:46.739 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:46.740 request id: app - uvicorn.server:serve - Finished server process [18449]
INFO     2024-02-20 13:51:47.677 request id: app - uvicorn.server:serve - Started server process [18482]
INFO     2024-02-20 13:51:47.678 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:47.679 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:50.289 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:50.391 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:50.394 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:50.396 request id: app - uvicorn.server:serve - Finished server process [18482]
INFO     2024-02-20 13:51:51.274 request id: app - uvicorn.server:serve - Started server process [18525]
INFO     2024-02-20 13:51:51.275 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:51.275 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:51:55.991 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:51:56.093 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:51:56.095 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:51:56.097 request id: app - uvicorn.server:serve - Finished server process [18525]
INFO     2024-02-20 13:51:57.037 request id: app - uvicorn.server:serve - Started server process [18578]
INFO     2024-02-20 13:51:57.038 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:51:57.039 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:53:32.912 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:53:33.014 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:53:33.015 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:53:33.015 request id: app - uvicorn.server:serve - Finished server process [18578]
INFO     2024-02-20 13:53:33.938 request id: app - uvicorn.server:serve - Started server process [19130]
INFO     2024-02-20 13:53:33.940 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:53:33.941 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 13:55:34.210 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54612 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 13:55:34.454 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54612 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 13:58:24.218 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 13:58:24.319 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 13:58:24.320 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 13:58:24.321 request id: app - uvicorn.server:serve - Finished server process [19130]
INFO     2024-02-20 13:58:25.211 request id: app - uvicorn.server:serve - Started server process [21479]
INFO     2024-02-20 13:58:25.212 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 13:58:25.212 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 14:10:01.096 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 14:10:01.199 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 14:10:01.202 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 14:10:01.204 request id: app - uvicorn.server:serve - Finished server process [21479]
INFO     2024-02-20 14:10:02.107 request id: app - uvicorn.server:serve - Started server process [25443]
INFO     2024-02-20 14:10:02.108 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 14:10:02.109 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 14:24:08.787 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42572 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 14:24:09.142 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42572 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 14:36:43.291 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53172 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 14:36:43.571 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53172 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 14:37:07.944 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
ERROR    2024-02-20 14:37:07.987 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/user.py", line 21, in get_user_by_email\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 14:37:07.988 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53184 - "POST /rms/v1.0/login/access-token HTTP/1.1" 500
INFO     2024-02-20 14:46:38.875 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45182 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 14:46:39.186 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45182 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 14:49:44.383 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 14:49:44.485 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 14:49:44.488 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 14:49:44.490 request id: app - uvicorn.server:serve - Finished server process [25443]
INFO     2024-02-20 14:49:46.544 request id: app - uvicorn.server:serve - Started server process [42616]
INFO     2024-02-20 14:49:46.545 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 14:49:46.546 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 14:49:49.471 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41052 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 14:49:49.807 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41052 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 14:51:54.664 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 14:51:54.959 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQxNzMxNH0.jqOLwHKuu4uBa-EfY-dlF-2h7lN2Tka_gXaxNR5ohMs","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQzMzUxNH0.6V_xXbQL1tHMQHMh0w8zKKWWPJh5BU4K1aaZwfAS7iw"},"links":null,"relationships":null,"timestamp":"2024-02-20 14:49:46"}'}
INFO     2024-02-20 14:51:54.959 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41640 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 15:03:31.312 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2a4833c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f2a4833c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2a4970bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2a4985e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=42613 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2a4985dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=42613 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2a49754100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=42613 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=42613 started>
    │    └ <function subprocess_started at 0x7f2a48c8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=42613 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2a49754220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2a48c8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2a49754220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2a49506440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2a495063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2a49507eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2a496f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2a3ef47f70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2a3ef47f70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2a3ef47f70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2a3ef47f70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2a48b5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2a48b5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2a49755f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2a47f1ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2a49755f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2a3f7b0e50>
          └ <fastapi.applications.FastAPI object at 0x7f2a47f1ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2a3f3736d0>
                     │    └ <function error_handle_business at 0x7f2a47daf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2a3f7b0e50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("'int' object is not callable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2a3f318ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2a3f7b2b90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2a3f7b0e50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61962', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2a3f318ee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f2a47ddb760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2a3f7b2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f2a3f7b2b90>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2a3f76bca0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2a3f7b2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2a3f319fc0>
                     │    │             └ <starlette.requests.Request object at 0x7f2a3f373dc0>
                     │    └ <function process_middleware_common at 0x7f2a47daf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2a3f76bca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2a3f373dc0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2a3f319fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("'int' object is not callable")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2a4833ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2a47eac860>
          │    │   │      └ <starlette.requests.Request object at 0x7f2a3f373dc0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2a3fbf01c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2a3f76bca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a3ef4ae60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2a3fbf25f0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2a3fbf01c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a3ef4ae60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2a47d9e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2a3fbf25f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a3ef4ae60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2a47eea4d0>
          └ <fastapi.routing.APIRoute object at 0x7f2a3f7b3610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2a3ef4ae60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2a3f373b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2a3f7d2a70>
          └ <fastapi.routing.APIRoute object at 0x7f2a3f7b3610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2a3ef841f0>
                     └ <function get_request_handler.<locals>.app at 0x7f2a3f7d29e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2a47eeb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f2a3fb568c0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f2a3f7b36d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f2a3ef85d50>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoT...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f2a3f373760>
                 │                └ <function ResourceService.upload_resource at 0x7f2a443aa830>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f2a45173190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 51, in upload_resource
    logging.ERROR(f"Lỗi khi tải lên tài nguyên: {str(e)}")
    │       └ 40
    └ <module 'logging' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/logging/__init__.py'>

TypeError: 'int' object is not callable
INFO     2024-02-20 15:03:31.340 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43384 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:04:51.129 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:04:51.230 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:04:51.231 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:04:51.232 request id: app - uvicorn.server:serve - Finished server process [42616]
INFO     2024-02-20 15:04:52.132 request id: app - uvicorn.server:serve - Started server process [50382]
INFO     2024-02-20 15:04:52.133 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:04:52.134 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:04:55.959 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
ERROR    2024-02-20 15:04:55.962 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6b345d0310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6b345d03a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f6b35a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f6b35b62950>
           └ <SpawnProcess name='SpawnProcess-2' parent=42613 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6b35b61fc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=42613 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6b35a58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=42613 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=42613 started>
    │    └ <function subprocess_started at 0x7f6b34f4a440>
    └ <SpawnProcess name='SpawnProcess-2' parent=42613 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6b35a58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6b34f49900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6b35a58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6b3538e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6b3538e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6b3538feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6b359fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6b2b340a60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6b2b340a60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6b2b340a60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6b2b340a60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6b34e08550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6b34e085e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6b35a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6b341aab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6b35a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6b2b7c0eb0>
          └ <fastapi.applications.FastAPI object at 0x7f6b341aab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6b2b3421d0>
                     │    └ <function error_handle_business at 0x7f6b3403f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6b2b7c0eb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6b2b32cee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6b2b7c2bf0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6b2b7c0eb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61962', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6b2b32cee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6b3406b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6b2b7c2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f6b2b7c2bf0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6b2b777d00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6b2b7c2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6b2b32cf70>
                     │    │             └ <starlette.requests.Request object at 0x7f6b2b3414b0>
                     │    └ <function process_middleware_common at 0x7f6b3403f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6b2b777d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6b2b3414b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6b2b32cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6b345d0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6b3413c680>
          │    │   │      └ <starlette.requests.Request object at 0x7f6b2b3414b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6b2b704220>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6b2b777d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6b2b32de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6b2b706650>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6b2b704220>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6b2b32de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6b3402e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6b2b706650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6b2b32de10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6b3417a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f6b2b7c3670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6b2b32de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6b2b341b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f6b2b7e29e0>
          └ <fastapi.routing.APIRoute object at 0x7f6b2b7c3670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6b2b381ba0>
                     └ <function get_request_handler.<locals>.app at 0x7f6b2b7e2950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6b3417b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f6b2bf66830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f6b2b7c3730>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6b2af78970>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoT...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6b2b380760>
                 │                └ <function ResourceService.upload_resource at 0x7f6b303ba7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6b313db190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 46, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f6b303ba680>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f6b313db1f0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f6b313db1c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f6b313db190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f6b2bf65f30>
    │    └ <botocore.client.S3 object at 0x7f6b2bb93e80>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f6b313db1f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 539, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f6b2bf3a680>
           └ <s3transfer.futures.TransferFuture object at 0x7f6b2af78ca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f6b2bf3b010>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f6b2af78ca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f6b2bb93e80>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f6b2af791b0...
           │    └ <function Task._execute_main at 0x7f6b2bf392d0>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f6b2bb93e80>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f6b2af791b0...
                   │    └ <function PutObjectTask._main at 0x7f6b2bf64280>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 758, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f6b2af791b0>
    │      │                 │           └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f6b2bb95900>
    └ <botocore.client.S3 object at 0x7f6b2bb93e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFile...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f6b30332950>
           └ <botocore.client.S3 object at 0x7f6b2bb93e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 15:04:55.986 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40240 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:06:24.512 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:06:24.614 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:06:24.616 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:06:24.618 request id: app - uvicorn.server:serve - Finished server process [50382]
INFO     2024-02-20 15:06:27.174 request id: app - uvicorn.server:serve - Started server process [50958]
INFO     2024-02-20 15:06:27.176 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:06:27.177 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:09:42.074 request id: app - uvicorn.server:serve - Started server process [52286]
INFO     2024-02-20 15:09:42.076 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:09:42.077 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:09:44.628 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f95189d0310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f95189d03a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9519e0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9519f62950>
           └ <SpawnProcess name='SpawnProcess-4' parent=52032 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9519f61fc0>
    └ <SpawnProcess name='SpawnProcess-4' parent=52032 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9519e58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=52032 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=52032 started>
    │    └ <function subprocess_started at 0x7f951934a440>
    └ <SpawnProcess name='SpawnProcess-4' parent=52032 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9519e58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9519349900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9519e58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f951978e440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f951978e3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f951978feb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9519dfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f950f31a0e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f950f31a0e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f950f31a0e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f950f31a0e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9519208550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f95192085e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9519e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f95185aab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9519e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f95140c0eb0>
          └ <fastapi.applications.FastAPI object at 0x7f95185aab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f950f7421d0>
                     │    └ <function error_handle_business at 0x7f951843f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f95140c0eb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f950f72ce50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f95140c2bf0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f95140c0eb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61962', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f950f72ce50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f951846b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f95140c2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f95140c2bf0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9514077d00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f95140c2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f950f72cee0>
                     │    │             └ <starlette.requests.Request object at 0x7f950f7414b0>
                     │    └ <function process_middleware_common at 0x7f951843f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9514077d00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f950f7414b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f950f72cee0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f95189d0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f951853c770>
          │    │   │      └ <starlette.requests.Request object at 0x7f950f7414b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9514004220>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9514077d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f950f72dd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9514006650>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9514004220>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f950f72dd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f951842e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9514006650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f950f72dd80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f951857a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f95140c3670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f950f72dd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f950f741b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f95140e6950>
          └ <fastapi.routing.APIRoute object at 0x7f95140c3670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f950f779ba0>
                     └ <function get_request_handler.<locals>.app at 0x7f95140e68c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f951857b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f95141667a0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f95140c3730>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f950f37c970>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoT...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f950f778760>
                 │                └ <function ResourceService.upload_resource at 0x7f95147ba710>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f95157db190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 46, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f95147ba5f0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f95157db1f0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f95157db1c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f95157db190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f9514165ea0>
    │    └ <botocore.client.S3 object at 0x7f950fb93e80>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f95157db1f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 539, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f95141365f0>
           └ <s3transfer.futures.TransferFuture object at 0x7f950f37cca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f9514136f80>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f950f37cca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f950fb93e80>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f950f37d1b0...
           │    └ <function Task._execute_main at 0x7f9514135240>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f950fb93e80>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f950f37d1b0...
                   │    └ <function PutObjectTask._main at 0x7f95141641f0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 758, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f950f37d1b0>
    │      │                 │           └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f950fb95870>
    └ <botocore.client.S3 object at 0x7f950fb93e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFile...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f95147328c0>
           └ <botocore.client.S3 object at 0x7f950fb93e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 15:09:44.653 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41382 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:11:03.157 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:11:03.260 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:11:03.262 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:11:03.264 request id: app - uvicorn.server:serve - Finished server process [52286]
INFO     2024-02-20 15:11:04.342 request id: app - uvicorn.server:serve - Started server process [52780]
INFO     2024-02-20 15:11:04.344 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:11:04.344 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:11:07.134 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
ERROR    2024-02-20 15:11:07.136 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f037dca4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f037dca43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f037f10bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f037f25e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=52777 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f037f25dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=52777 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f037f154100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=52777 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=52777 started>
    │    └ <function subprocess_started at 0x7f037e61a440>
    └ <SpawnProcess name='SpawnProcess-1' parent=52777 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f037f154220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f037e619900>
    │    │                  └ <uvicorn.server.Server object at 0x7f037f154220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f037e9a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f037e9a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f037e9a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f037f0f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f0374120b20>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f0374120b20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f0374120b20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f0374120b20>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f037e4d8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f037e4d85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f037f155f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f037d87ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f037f155f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f03742a0eb0>
          └ <fastapi.applications.FastAPI object at 0x7f037d87ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f03741221d0>
                     │    └ <function error_handle_business at 0x7f037d70b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f03742a0eb0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f037410cee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f03742a2bf0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f03742a0eb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61962', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f037410cee0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f037d737760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f03742a2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f03742a2bf0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f037425bd00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f03742a2bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f037410cf70>
                     │    │             └ <starlette.requests.Request object at 0x7f03741214b0>
                     │    └ <function process_middleware_common at 0x7f037d70b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f037425bd00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f03741214b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f037410cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f037dca4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f037d818360>
          │    │   │      └ <starlette.requests.Request object at 0x7f03741214b0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0374be8220>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f037425bd00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f037410de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0374bea650>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0374be8220>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f037410de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f037d8fa2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0374bea650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f037410de10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f037d84a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f03742a3670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f037410de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f0374121b70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f03742c69e0>
          └ <fastapi.routing.APIRoute object at 0x7f03742a3670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0374161ba0>
                     └ <function get_request_handler.<locals>.app at 0x7f03742c6950>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f037d84b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f0374b46830>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f03742a3730>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f0374058970>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoT...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f0374160760>
                 │                └ <function ResourceService.upload_resource at 0x7f037579e7a0>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f03766f3190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 46, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f037579e680>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f03766f31f0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f03766f31c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f03766f3190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f0374b45f30>
    │    └ <botocore.client.S3 object at 0x7f0374373e80>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f03766f31f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 539, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f0374b1a680>
           └ <s3transfer.futures.TransferFuture object at 0x7f0374058ca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f0374b1b010>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f0374058ca0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f0374373e80>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f03740591b0...
           │    └ <function Task._execute_main at 0x7f0374b192d0>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f0374373e80>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f03740591b0...
                   │    └ <function PutObjectTask._main at 0x7f0374b44280>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 758, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f03740591b0>
    │      │                 │           └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f0374375900>
    └ <botocore.client.S3 object at 0x7f0374373e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 386, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFile...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f0375712950>
           └ <botocore.client.S3 object at 0x7f0374373e80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 705, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 15:11:07.164 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57532 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:17:20.111 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:17:34.378 request id: app - uvicorn.server:serve - Started server process [55219]
INFO     2024-02-20 15:17:34.380 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:17:34.381 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:17:38.275 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
ERROR    2024-02-20 15:17:38.277 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f49e728c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f49e728c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f49e870bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f49e885e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=55217 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f49e885dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=55217 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f49e8754100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=55217 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=55217 started>
    │    └ <function subprocess_started at 0x7f49e7b8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=55217 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f49e8754220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f49e7b8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f49e8754220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f49e7fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f49e7fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f49e7fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f49e86f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f49dd049660>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f49dd049660>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f49dd049660>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f49dd049660>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f49e7a88550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f49e7a885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f49e8755f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f49e6e6ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f49e8755f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49dd1c1510>
          └ <fastapi.applications.FastAPI object at 0x7f49e6e6ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f49dd04a800>
                     │    └ <function error_handle_business at 0x7f49e6cff250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49dd1c1510>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f49dd019cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49dd1c3250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f49dd1c1510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61962', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f49dd019cf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f49e6d2b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49dd1c3250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f49dd1c3250>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f49dd1c03a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f49dd1c3250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f49dd019d80>
                     │    │             └ <starlette.requests.Request object at 0x7f49dd049ae0>
                     │    └ <function process_middleware_common at 0x7f49e6cff1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f49dd1c03a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f49dd049ae0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f49dd019d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f49e728ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f49e6dfc680>
          │    │   │      └ <starlette.requests.Request object at 0x7f49dd049ae0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f49dd3048b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f49dd1c03a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f49dd01ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f49dd306ce0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f49dd3048b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f49dd01ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f49e6cee2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f49dd306ce0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f49dd01ac20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f49e6e3a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f49dd1c3ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f49dd01ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f49dd04a1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f49dd1e77f0>
          └ <fastapi.routing.APIRoute object at 0x7f49dd1c3ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f49dd092110>
                     └ <function get_request_handler.<locals>.app at 0x7f49dd1e7760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f49e6e3b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f49dd2576d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f49dd1c3d60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f49e5bc4fd0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoT...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f49dd091300>
                 │                └ <function ResourceService.upload_resource at 0x7f49deb2f400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f49e416f190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 46, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f49deb2f2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f49e416f1f0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f49e416f1c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f49e416f190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f49dd256dd0>
    │    └ <botocore.client.S3 object at 0x7f49dd67d9f0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f49e416f1f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f49dd21ca60>
           └ <s3transfer.futures.TransferFuture object at 0x7f49e5bc5300>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f49dd21d3f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f49e5bc5300>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f49dd67d9f0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f49e5bc5810...
           │    └ <function Task._execute_main at 0x7f49dd230790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f49dd67d9f0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f49e5bc5810...
                   │    └ <function PutObjectTask._main at 0x7f49dd254e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f49e5bc5810>
    │      │                 │           └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f49dd676320>
    └ <botocore.client.S3 object at 0x7f49dd67d9f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFile...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f49def9e4d0>
           └ <botocore.client.S3 object at 0x7f49dd67d9f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1009, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 15:17:38.299 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60460 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:18:33.301 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:18:33.403 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:18:33.405 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:18:33.407 request id: app - uvicorn.server:serve - Finished server process [55219]
INFO     2024-02-20 15:18:49.605 request id: app - uvicorn.server:serve - Started server process [55709]
INFO     2024-02-20 15:18:49.607 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:18:49.607 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:19:00.066 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 15:19:00.068 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6035380310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f60353803a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f60367c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f603695e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f603695dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f603680c100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
    │    └ <function subprocess_started at 0x7f6035c9a440>
    └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f603680c220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6035c99900>
    │    │                  └ <uvicorn.server.Server object at 0x7f603680c220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6036596440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f60365963b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6036597eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f60367b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f60344b54b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f60344b54b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f60344b54b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f60344b54b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6035b94550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6035b945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f603680df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6034f56b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f603680df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60273b9510>
          └ <fastapi.applications.FastAPI object at 0x7f6034f56b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f60344b59c0>
                     │    └ <function error_handle_business at 0x7f6034de7250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60273b9510>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Sc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f602720dcf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60273b9510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61962', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f602720dcf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6034e13760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60273b83a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f602720dd80>
                     │    │             └ <starlette.requests.Request object at 0x7f602723dae0>
                     │    └ <function process_middleware_common at 0x7f6034de71c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60273b83a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f602723dae0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f602720dd80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Sc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6035380a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6034ee8680>
          │    │   │      └ <starlette.requests.Request object at 0x7f602723dae0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f60273008b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60273b83a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f602720ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6027302ce0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f60273008b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f602720ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6034dd62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6027302ce0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f602720ec20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6034f264d0>
          └ <fastapi.routing.APIRoute object at 0x7f60273bbca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f602720ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f602723e1a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f60273df7f0>
          └ <fastapi.routing.APIRoute object at 0x7f60273bbca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6027286110>
                     └ <function get_request_handler.<locals>.app at 0x7f60273df760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6034f27130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f60277536d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f60273bbd60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f60344b4fa0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoT...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f60272846d0>
                 │                └ <function ResourceService.upload_resource at 0x7f602cf3f400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f602e17f190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 46, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f602cf3f2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f602e17f1f0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f602e17f1c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f602e17f190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f6027752dd0>
    │    └ <botocore.client.S3 object at 0x7f6027b899f0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f602e17f1f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f6027714a60>
           └ <s3transfer.futures.TransferFuture object at 0x7f60344b52d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f60277153f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f60344b52d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Sc...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f6027b899f0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f60344b57e0...
           │    └ <function Task._execute_main at 0x7f602772c790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f6027b899f0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f60344b57e0...
                   │    └ <function PutObjectTask._main at 0x7f6027750e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f60344b57e0>
    │      │                 │           └ 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f6027b82320>
    └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5200_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFile...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f602d3ae4d0>
           └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7f602d3ae560>
                            └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/5200_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'heade...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7f602d7e1360>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/5200_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'heade...
           │    └ <function Endpoint._send_request at 0x7f602d7e1750>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7f602d7e1990>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7f602d7b65f0>
                │    └ <botocore.hooks.EventAliaser object at 0x7f6027b89f60>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7f602d7b60e0>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7f6027b896f0>
           └ <botocore.hooks.EventAliaser object at 0x7f6027b89f60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7f602d7b6050>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7f6027b896f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7f60277932e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f60277932b0>
       └ <botocore.retryhandler.RetryHandler object at 0x7f60277932e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7f602d3afd00>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f60277932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Sc...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7f6027793250>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f60277932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7f6027774040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7f602d3c0280>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7f6027774040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Sc...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5200_Screenshot...
                    │    └ <function Endpoint._send at 0x7f602d7e1a20>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5200_Screenshot...
           │    │            └ <function URLLib3Session.send at 0x7f602d75e320>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7f6027774100>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/5200_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5200_Screenshot...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5200_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 15:19:00.095 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35868 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:19:00.126 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35872 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 15:19:00.375 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35872 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 15:19:31.858 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 15:19:32.104 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQxODk3Mn0.9PfTd7iHDYRW8g9M4r4ZSVwPV_O5c3-sMyakVkysjgI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQzNTE3Mn0.MRtQR3Hu8601uuXCn2q7QL-SOdqJ3cmTglp2_mnzbo4"},"links":null,"relationships":null,"timestamp":"2024-02-20 15:18:49"}'}
INFO     2024-02-20 15:19:32.105 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35886 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 15:21:37.004 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 15:21:37.005 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6035380310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f60353803a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f60367c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f603695e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f603695dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f603680c100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
    │    └ <function subprocess_started at 0x7f6035c9a440>
    └ <SpawnProcess name='SpawnProcess-1' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f603680c220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6035c99900>
    │    │                  └ <uvicorn.server.Server object at 0x7f603680c220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6036596440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f60365963b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6036597eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f60367b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6034535fc0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6034535fc0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6034535fc0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6034535fc0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6035b94550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6035b945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f603680df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6034f56b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f603680df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60273b9510>
          └ <fastapi.applications.FastAPI object at 0x7f6034f56b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6034534130>
                     │    └ <function error_handle_business at 0x7f6034de7250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60273b9510>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Sc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6025731ab0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60273b9510>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61964', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6025731ab0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f6034e13760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60273b83a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60273bb250>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6025731bd0>
                     │    │             └ <starlette.requests.Request object at 0x7f6034537850>
                     │    └ <function process_middleware_common at 0x7f6034de71c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60273b83a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6034537850>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6025731bd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Sc...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6035380a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6034ee8680>
          │    │   │      └ <starlette.requests.Request object at 0x7f6034537850>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f60273008b0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60273b83a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6025731e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6027302ce0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f60273008b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6025731e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6034dd62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6027302ce0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6025731e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6034f264d0>
          └ <fastapi.routing.APIRoute object at 0x7f60273bbca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6025731e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6034534f70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f60273df7f0>
          └ <fastapi.routing.APIRoute object at 0x7f60273bbca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f60345342b0>
                     └ <function get_request_handler.<locals>.app at 0x7f60273df760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6034f27130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f60277536d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f60273bbd60>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6034535840>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Demo1...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f60345372b0>
                 │                └ <function ResourceService.upload_resource at 0x7f602cf3f400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f602e17f190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 46, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f602cf3f2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f602e17f1f0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f602e17f1c0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f602e17f190>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f6027752dd0>
    │    └ <botocore.client.S3 object at 0x7f6027b899f0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f602e17f1f0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f6027714a60>
           └ <s3transfer.futures.TransferFuture object at 0x7f6034535a50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f60277153f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f6034535a50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Sc...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f6027b899f0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f60345361a0...
           │    └ <function Task._execute_main at 0x7f602772c790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f6027b899f0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f60345361a0...
                   │    └ <function PutObjectTask._main at 0x7f6027750e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png', 'extr...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f60345361a0>
    │      │                 │           └ 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f6027b82320>
    └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/1000_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFile...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f602d3ae4d0>
           └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7f602d3ae560>
                            └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/1000_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'heade...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7f602d7e1360>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7f6027b899f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/1000_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'heade...
           │    └ <function Endpoint._send_request at 0x7f602d7e1750>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7f602d7e1990>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7f602d7b65f0>
                │    └ <botocore.hooks.EventAliaser object at 0x7f6027b89f60>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7f602d7b60e0>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7f6027b896f0>
           └ <botocore.hooks.EventAliaser object at 0x7f6027b89f60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7f602d7b6050>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7f6027b896f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7f60277932e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f60277932b0>
       └ <botocore.retryhandler.RetryHandler object at 0x7f60277932e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7f602d3afd00>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f60277932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Sc...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7f6027793250>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f60277932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7f6027774040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7f602d3c0280>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7f6027774040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Sc...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/1000_Screenshot...
                    │    └ <function Endpoint._send at 0x7f602d7e1a20>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/1000_Screenshot...
           │    │            └ <function URLLib3Session.send at 0x7f602d75e320>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7f6027774100>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/1000_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/1000_Screenshot...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/1000_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 15:21:37.021 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51698 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:22:22.373 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:22:22.475 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:22:22.475 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:22:22.476 request id: app - uvicorn.server:serve - Finished server process [55709]
INFO     2024-02-20 15:22:23.384 request id: app - uvicorn.server:serve - Started server process [56979]
INFO     2024-02-20 15:22:23.385 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:22:23.386 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:22:31.618 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:22:31.720 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:22:31.720 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:22:31.721 request id: app - uvicorn.server:serve - Finished server process [56979]
INFO     2024-02-20 15:22:32.652 request id: app - uvicorn.server:serve - Started server process [57047]
INFO     2024-02-20 15:22:32.654 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:22:32.654 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:23:08.601 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44736 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-20 15:24:11.862 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:24:11.964 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:24:11.965 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:24:11.965 request id: app - uvicorn.server:serve - Finished server process [57047]
INFO     2024-02-20 15:24:12.890 request id: app - uvicorn.server:serve - Started server process [57639]
INFO     2024-02-20 15:24:12.892 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:24:12.892 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:25:24.466 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:25:24.567 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:25:24.568 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:25:24.569 request id: app - uvicorn.server:serve - Finished server process [57639]
INFO     2024-02-20 15:25:25.480 request id: app - uvicorn.server:serve - Started server process [58543]
INFO     2024-02-20 15:25:25.481 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:25:25.481 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:25:50.609 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47468 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 15:25:50.956 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47468 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-20 15:27:43.732 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: "ResourceCreate" object has no field "key"
ERROR    2024-02-20 15:27:43.734 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f012e0f0310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f012e0f03a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f012f50bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f012f65e950>
           └ <SpawnProcess name='SpawnProcess-5' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f012f65dfc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f012f554100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=55707 started>
    │    └ <function subprocess_started at 0x7f012ea62440>
    └ <SpawnProcess name='SpawnProcess-5' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f012f554220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f012ea61900>
    │    │                  └ <uvicorn.server.Server object at 0x7f012f554220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f012f2e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f012f2e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f012f2e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f012f4f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f012c91f130>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f012c91f130>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f012c91f130>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f012c91f130>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f012e924550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f012e9245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f012f555f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f012dccab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f012f555f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f01240d1420>
          └ <fastapi.applications.FastAPI object at 0x7f012dccab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f012c91f6d0>
                     │    └ <function error_handle_business at 0x7f012db5f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f01240d1420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f011ff1a830>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f01240d3160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f01240d1420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61771', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f011ff1a830>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f012db8b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f01240d3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f01240d3160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01240d02b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f01240d3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f011ff1ad40>
                     │    │             └ <starlette.requests.Request object at 0x7f011ff8f850>
                     │    └ <function process_middleware_common at 0x7f012db5f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01240d02b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f011ff8f850>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f011ff1ad40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ValueError('"ResourceCreate" object has no field "key"')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f012e0f0a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f012dc5c860>
          │    │   │      └ <starlette.requests.Request object at 0x7f011ff8f850>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f01240107c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f01240d02b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f011ff91360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0124012bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f01240107c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f011ff91360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f012db4e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0124012bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f011ff91360>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f012dc9a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f01240d3bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f011ff91360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f011ff8da80>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f01240ff7f0>
          └ <fastapi.routing.APIRoute object at 0x7f01240d3bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f011ff8ded0>
                     └ <function get_request_handler.<locals>.app at 0x7f01240ff760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f012dc9b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f012415f6d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f01240d3c70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f012c955a20>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoN...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f011ff8da50>
                 │                └ <function ResourceService.upload_resource at 0x7f0125d33400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f0126f73100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 44, in upload_resource
    resource_create.key = key
    │                     └ 'static/images/0_Screenshot from 2024-02-15 10-13-51.png'
    └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='DemoN...

  File "pydantic/main.py", line 357, in pydantic.main.BaseModel.__setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "ResourceCreate" object has no field "key"
INFO     2024-02-20 15:27:43.750 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38404 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:29:39.331 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:29:39.433 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:29:39.434 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:29:39.435 request id: app - uvicorn.server:serve - Finished server process [58543]
INFO     2024-02-20 15:29:40.399 request id: app - uvicorn.server:serve - Started server process [60250]
INFO     2024-02-20 15:29:40.400 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:29:40.401 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:31:20.002 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:31:20.105 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:31:20.107 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:31:20.110 request id: app - uvicorn.server:serve - Finished server process [60250]
INFO     2024-02-20 15:31:21.072 request id: app - uvicorn.server:serve - Started server process [60864]
INFO     2024-02-20 15:31:21.074 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:31:21.074 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:31:53.605 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:31:53.706 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:31:53.707 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:31:53.707 request id: app - uvicorn.server:serve - Finished server process [60864]
INFO     2024-02-20 15:31:59.733 request id: app - uvicorn.server:serve - Started server process [61099]
INFO     2024-02-20 15:31:59.734 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:31:59.735 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:32:30.461 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37364 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 15:32:30.759 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37364 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 15:32:50.302 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 15:32:50.580 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQxOTc3MH0.68LTZYJM5kWYP3GKFkq9FRIWJGkkcF0j-xumtaA3Aqw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQzNTk3MH0.CZ-_SaMMVPdJJupgSc7WWZ1u0tj0CV0G9-2hvj6PTkM"},"links":null,"relationships":null,"timestamp":"2024-02-20 15:31:59"}'}
INFO     2024-02-20 15:32:50.581 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37368 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 15:34:27.612 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 15:34:27.614 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb082a94310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb082a943a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb083f0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb08405e950>
           └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb08405dfc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb083f54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
    │    └ <function subprocess_started at 0x7fb08338e440>
    └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb083f54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb08338d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb083f54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb0837a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb0837a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb0837a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb083ef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb07888bb20>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb07888bb20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb07888bb20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb07888bb20>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb083288550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb0832885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb083f55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb08266eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb083f55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0789bd480>
          └ <fastapi.applications.FastAPI object at 0x7fb08266eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb078889b70>
                     │    └ <function error_handle_business at 0x7fb082503250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0789bd480>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb078819c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0789bd480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61772', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb078819c60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb08252f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0789bc310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb07881acb0>
                     │    │             └ <starlette.requests.Request object at 0x7fb07888b6d0>
                     │    └ <function process_middleware_common at 0x7fb0825031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0789bc310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb07888b6d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb07881acb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb082a94a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb082600860>
          │    │   │      └ <starlette.requests.Request object at 0x7fb07888b6d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb078afc820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0789bc310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0813b3a30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb078afec50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb078afc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0813b3a30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb0824f22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb078afec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0813b3a30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb08263e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fb0789bfc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb0813b3a30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0813e7190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb0789ef760>
          └ <fastapi.routing.APIRoute object at 0x7fb0789bfc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb0813e6e90>
                     └ <function get_request_handler.<locals>.app at 0x7fb0789ef6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb08263f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fb078a53640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fb0789bfcd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fb0813e52d0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabol...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fb0813bb580>
                 │                └ <function ResourceService.upload_resource at 0x7fb07a32b370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fb07b86b0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 48, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/0_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7fb07a32b250>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fb07b86b130>
    │    └ <app.src.services.base_service.BaseService object at 0x7fb07b86b100>
    └ <app.src.services.resource_service.ResourceService object at 0x7fb07b86b0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7fb078a52d40>
    │    └ <botocore.client.S3 object at 0x7fb078e799c0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7fb07b86b130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7fb078a149d0>
           └ <s3transfer.futures.TransferFuture object at 0x7fb0813e50f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7fb078a15360>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7fb0813e50f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7fb078e799c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fb0813e4be0...
           │    └ <function Task._execute_main at 0x7fb078a2c700>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7fb078e799c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fb0813e4be0...
                   │    └ <function PutObjectTask._main at 0x7fb078a50dc0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7fb0813e4be0>
    │      │                 │           └ 'static/images/0_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fb078e72290>
    └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7fb07a79e440>
           └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7fb07a79e4d0>
                            └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7fb07abd52d0>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    └ <function Endpoint._send_request at 0x7fb07abd56c0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7fb07abd5900>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7fb07abaa560>
                │    └ <botocore.hooks.EventAliaser object at 0x7fb078e79f30>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7fb07abaa050>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7fb078e796c0>
           └ <botocore.hooks.EventAliaser object at 0x7fb078e79f30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7fb07aba9fc0>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7fb078e796c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7fb078a932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fb078a93280>
       └ <botocore.retryhandler.RetryHandler object at 0x7fb078a932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7fb07a79fc70>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fb078a93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7fb078a93220>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fb078a93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7fb078a23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7fb07a7b01f0>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7fb078a23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20...
                    │    └ <function Endpoint._send at 0x7fb07abd5990>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20...
           │    │            └ <function URLLib3Session.send at 0x7fb07ab4a290>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7fb078a740d0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 15:34:27.635 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51386 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 15:34:58.779 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 15:34:58.781 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb082a94310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb082a943a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb083f0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb08405e950>
           └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb08405dfc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb083f54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
    │    └ <function subprocess_started at 0x7fb08338e440>
    └ <SpawnProcess name='SpawnProcess-9' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb083f54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb08338d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb083f54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb0837a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb0837a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb0837a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb083ef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb0784a51e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb0784a51e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb0784a51e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb0784a51e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb083288550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb0832885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb083f55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb08266eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb083f55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0789bd480>
          └ <fastapi.applications.FastAPI object at 0x7fb08266eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb0784a7640>
                     │    └ <function error_handle_business at 0x7fb082503250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0789bd480>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb0813b3b50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb0789bd480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61772', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb0813b3b50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fb08252f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0789bc310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb0789bf1c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb0813edd80>
                     │    │             └ <starlette.requests.Request object at 0x7fb0784a7760>
                     │    └ <function process_middleware_common at 0x7fb0825031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0789bc310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb0784a7760>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb0813edd80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb082a94a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb082600860>
          │    │   │      └ <starlette.requests.Request object at 0x7fb0784a7760>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb078afc820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb0789bc310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb078391e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb078afec50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb078afc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb078391e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb0824f22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb078afec50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb078391e10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb08263e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fb0789bfc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb078391e10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb0784a4400>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb0789ef760>
          └ <fastapi.routing.APIRoute object at 0x7fb0789bfc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb0784a45b0>
                     └ <function get_request_handler.<locals>.app at 0x7fb0789ef6d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb08263f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fb078a53640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fb0789bfcd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fb0784a5630>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabol...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fb0784a4250>
                 │                └ <function ResourceService.upload_resource at 0x7fb07a32b370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fb07b86b0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 48, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/0_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7fb07a32b250>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fb07b86b130>
    │    └ <app.src.services.base_service.BaseService object at 0x7fb07b86b100>
    └ <app.src.services.resource_service.ResourceService object at 0x7fb07b86b0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7fb078a52d40>
    │    └ <botocore.client.S3 object at 0x7fb078e799c0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7fb07b86b130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7fb078a149d0>
           └ <s3transfer.futures.TransferFuture object at 0x7fb0784a5690>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7fb078a15360>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7fb0784a5690>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7fb078e799c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fb0784a53f0...
           │    └ <function Task._execute_main at 0x7fb078a2c700>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7fb078e799c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fb0784a53f0...
                   │    └ <function PutObjectTask._main at 0x7fb078a50dc0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7fb0784a53f0>
    │      │                 │           └ 'static/images/0_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fb078e72290>
    └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7fb07a79e440>
           └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7fb07a79e4d0>
                            └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7fb07abd52d0>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7fb078e799c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    └ <function Endpoint._send_request at 0x7fb07abd56c0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7fb07abd5900>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7fb07abaa560>
                │    └ <botocore.hooks.EventAliaser object at 0x7fb078e79f30>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7fb07abaa050>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7fb078e796c0>
           └ <botocore.hooks.EventAliaser object at 0x7fb078e79f30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7fb07aba9fc0>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7fb078e796c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7fb078a932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fb078a93280>
       └ <botocore.retryhandler.RetryHandler object at 0x7fb078a932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7fb07a79fc70>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fb078a93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7fb078a93220>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fb078a93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7fb078a23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7fb07a7b01f0>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7fb078a23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Scree...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20...
                    │    └ <function Endpoint._send at 0x7fb07abd5990>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20...
           │    │            └ <function URLLib3Session.send at 0x7fb07ab4a290>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7fb078a740d0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/0_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 15:34:58.813 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:32912 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:35:15.044 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:35:15.148 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:35:15.149 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:35:15.149 request id: app - uvicorn.server:serve - Finished server process [61099]
INFO     2024-02-20 15:35:16.191 request id: app - uvicorn.server:serve - Started server process [62305]
INFO     2024-02-20 15:35:16.192 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:35:16.193 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:35:16.556 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46980 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-20 15:35:36.483 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:35:36.586 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:35:36.589 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:35:36.591 request id: app - uvicorn.server:serve - Finished server process [62305]
INFO     2024-02-20 15:35:37.574 request id: app - uvicorn.server:serve - Started server process [62441]
INFO     2024-02-20 15:35:37.575 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:35:37.576 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:37:39.170 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:37:39.273 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:37:39.273 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:37:39.274 request id: app - uvicorn.server:serve - Finished server process [62441]
INFO     2024-02-20 15:37:40.240 request id: app - uvicorn.server:serve - Started server process [63163]
INFO     2024-02-20 15:37:40.241 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:37:40.242 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:37:46.365 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:37:46.468 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:37:46.470 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:37:46.472 request id: app - uvicorn.server:serve - Finished server process [63163]
INFO     2024-02-20 15:37:47.429 request id: app - uvicorn.server:serve - Started server process [63222]
INFO     2024-02-20 15:37:47.430 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:37:47.431 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:37:53.487 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37180 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-20 15:38:34.153 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:38:34.256 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:38:34.259 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:38:34.261 request id: app - uvicorn.server:serve - Finished server process [63222]
INFO     2024-02-20 15:38:35.197 request id: app - uvicorn.server:serve - Started server process [63526]
INFO     2024-02-20 15:38:35.198 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:38:35.199 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:38:37.697 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2024-02-20 15:38:37.699 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fcfd5662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fcfcf71ebc0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fcfcd4f1a80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcfd8a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcfd8b62950>
           └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcfd8b61fc0>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcfd8a58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    └ <function subprocess_started at 0x7fcfd7f92440>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcfd8a58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcfd7f91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcfd8a58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcfd83aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcfd83aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcfd83abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcfd89fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfd5e8bfd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcfd5e8bfd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcfd5e8bfd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfd5e8bfd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcfd7e5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcfd7e5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
          └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcfd5e32770>
                     │    └ <function error_handle_business at 0x7fcfd70af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcd419c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61773', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcd419c60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcfd70db760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcd419cf0>
                     │    │             └ <starlette.requests.Request object at 0x7fcfcd4499f0>
                     │    └ <function process_middleware_common at 0x7fcfd70af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcfcd4499f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcd419cf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcfd763ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcfd71aca90>
          │    │   │      └ <starlette.requests.Request object at 0x7fcfcd4499f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcd41ab90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcd41ab90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcfd709e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcd41ab90>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcfd71ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcd41ab90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcd44a0b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcfcd5f3760>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcfcd48a020>
                     └ <function get_request_handler.<locals>.app at 0x7fcfcd5f36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcfd71eb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fcfcd65b640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcfcd5c7cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fcfd5e88f40>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabol...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcfcd4885e0>
                 │                └ <function ResourceService.upload_resource at 0x7fcfcf74b370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'Raboli0', ...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fcfd43eb2e0>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fcfd43d7100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fcfd54eecb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fcfcd69b6d0>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fcfd54edf30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
                └ <function SessionTransaction.commit at 0x7fcfd54edea0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7fcfd54ede10>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
                └ <function SessionTransaction._prepare_impl at 0x7fcfd54edcf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7fcfd5300940>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fcfcd69b6d0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7fcfd5300af0>
    └ <sqlalchemy.orm.session.Session object at 0x7fcfcd69b6d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7fcfd5ef4bc0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7fcfd54dedd0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fcfd5e8af20>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fcfd5e8af20>
    │   └ <function SaveUpdateAll.execute at 0x7fcfd54df6d0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7fcfd54c9cf0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7fcfd54ca710>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7fcfd57cb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7fcfd5ec1150>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fcfd57cba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fcfd57cbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fcfd57cbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fcfd57cbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "resources_name_key"\nDETAIL:  Key (name)=(Raboli0) already e...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "resources_name_k...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fcfd5662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fcfcf71ebc0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fcfd5e8b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fcfcd4f1a80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-02-20 15:38:37.724 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56414 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 15:39:03.036 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:39:03.038 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcfd763c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcfd763c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcfd8a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcfd8b62950>
           └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcfd8b61fc0>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcfd8a58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    └ <function subprocess_started at 0x7fcfd7f92440>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcfd8a58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcfd7f91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcfd8a58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcfd83aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcfd83aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcfd83abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcfd89fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfcd48a0b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcfcd48a0b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcfcd48a0b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfcd48a0b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcfd7e5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcfd7e5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
          └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcfd5e32950>
                     │    └ <function error_handle_business at 0x7fcfd70af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcd41a5f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61773', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcd41a5f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcfd70db760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcc97ba30>
                     │    │             └ <starlette.requests.Request object at 0x7fcfd5ec3cd0>
                     │    └ <function process_middleware_common at 0x7fcfd70af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcfd5ec3cd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcc97ba30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcfd763ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcfd71aca90>
          │    │   │      └ <starlette.requests.Request object at 0x7fcfd5ec3cd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7ab1c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7ab1c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcfd709e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7ab1c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcfd71ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7ab1c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec2830>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcfcd5f3760>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcfd5ec2770>
                     └ <function get_request_handler.<locals>.app at 0x7fcfcd5f36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcfd71eb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fcfcd65b640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcfcd5c7cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fcfd5ec2290>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabol...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcfd5ec3160>
                 │                └ <function ResourceService.upload_resource at 0x7fcfcf74b370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'Raboli1', ...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fcfd43eb2e0>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fcfd43d7100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fcfd54eecb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fcfcd69b6d0>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fcfd54edf30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fcfd54edea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fcfd54ed120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:39:03.053 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52378 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 15:39:13.656 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:39:13.659 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcfd763c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcfd763c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcfd8a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcfd8b62950>
           └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcfd8b61fc0>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcfd8a58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    └ <function subprocess_started at 0x7fcfd7f92440>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcfd8a58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcfd7f91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcfd8a58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcfd83aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcfd83aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcfd83abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcfd89fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfcd4495d0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcfcd4495d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcfcd4495d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfcd4495d0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcfd7e5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcfd7e5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
          └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcfcd449450>
                     │    └ <function error_handle_business at 0x7fcfd70af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcc7abd90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61773', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcc7abd90>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcfd70db760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcc7abf40>
                     │    │             └ <starlette.requests.Request object at 0x7fcfd5ec1b40>
                     │    └ <function process_middleware_common at 0x7fcfd70af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcfd5ec1b40>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcc7abf40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcfd763ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcfd71aca90>
          │    │   │      └ <starlette.requests.Request object at 0x7fcfd5ec1b40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7abeb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7abeb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcfd709e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7abeb0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcfd71ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc7abeb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfd5ec1f00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcfcd5f3760>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcfd5ec1e40>
                     └ <function get_request_handler.<locals>.app at 0x7fcfcd5f36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcfd71eb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fcfcd65b640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcfcd5c7cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fcfcc6eca60>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabol...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcfcd489c90>
                 │                └ <function ResourceService.upload_resource at 0x7fcfcf74b370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'Raboli1', ...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fcfd43eb2e0>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fcfd43d7100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fcfd54eecb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fcfcd69b6d0>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fcfd54edf30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fcfd54edea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fcfd54ed120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:39:13.681 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58344 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:39:25.045 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49454 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 15:39:25.354 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49454 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 15:39:46.741 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 15:39:47.016 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQyMDE4N30.OzavHazShzILxmVBeuFuECJVj2KF0FMrni-v-PGqS8I","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQzNjM4N30.OZK9vBdXhHdPP-gcOITXEU6h821E6YKksB0rEtnyLto"},"links":null,"relationships":null,"timestamp":"2024-02-20 15:38:34"}'}
INFO     2024-02-20 15:39:47.017 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49456 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 15:41:00.313 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:41:00.315 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcfd763c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcfd763c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcfd8a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcfd8b62950>
           └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcfd8b61fc0>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcfd8a58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
    │    └ <function subprocess_started at 0x7fcfd7f92440>
    └ <SpawnProcess name='SpawnProcess-14' parent=55707 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcfd8a58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcfd7f91900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcfd8a58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcfd83aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcfd83aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcfd83abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcfd89fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfd5ec2e60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcfd5ec2e60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcfd5ec2e60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfd5ec2e60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcfd7e5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcfd7e5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfd8a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
          └ <fastapi.applications.FastAPI object at 0x7fcfd721ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcfcc6eff40>
                     │    └ <function error_handle_business at 0x7fcfd70af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcc6fc1f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfcd5c5480>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfcc6fc1f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcfd70db760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfcd5c71c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcc6fc310>
                     │    │             └ <starlette.requests.Request object at 0x7fcfcc6ec040>
                     │    └ <function process_middleware_common at 0x7fcfd70af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcfcc6ec040>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfcc6fc310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcfd763ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcfd71aca90>
          │    │   │      └ <starlette.requests.Request object at 0x7fcfcc6ec040>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfcd5c4310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc6fc550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfcd504820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc6fc550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcfd709e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfcd506c50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc6fc550>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcfd71ea4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfcc6fc550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfcc6efc70>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcfcd5f3760>
          └ <fastapi.routing.APIRoute object at 0x7fcfcd5c7c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcfcc6ee2c0>
                     └ <function get_request_handler.<locals>.app at 0x7fcfcd5f36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcfd71eb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fcfcd65b640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcfcd5c7cd0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fcfcc6eec50>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA4'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcfcc6ee020>
                 │                └ <function ResourceService.upload_resource at 0x7fcfcf74b370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA4', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fcfd43eb2e0>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fcfd43d7100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fcfd43d70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fcfd54eecb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fcfcd69b6d0>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcfd44137c0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fcfd54edf30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fcfd54edea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fcfd54ed120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fcfcd5eac00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(Raboli0) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('9edbdc60-0861-5c02-a3b8-6f1d03764ab2'), 'name': 'Raboli0', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:41:00.325 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60806 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:41:14.715 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:41:14.816 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:41:14.818 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:41:14.820 request id: app - uvicorn.server:serve - Finished server process [63526]
INFO     2024-02-20 15:41:17.943 request id: app - uvicorn.server:serve - Started server process [64493]
INFO     2024-02-20 15:41:17.945 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:41:17.946 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:41:20.243 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44354 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-20 15:44:03.811 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:44:03.912 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:44:03.913 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:44:03.914 request id: app - uvicorn.server:serve - Finished server process [64493]
INFO     2024-02-20 15:55:08.985 request id: app - uvicorn.server:serve - Started server process [69923]
INFO     2024-02-20 15:55:08.987 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:55:08.987 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:55:11.177 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2024-02-20 15:55:11.179 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fc2e485a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fc2de7feb60>
    └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fc2dc5f9a80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc2e7c0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc2e7d5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc2e7d5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc2e7c54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
    │    └ <function subprocess_started at 0x7fc2e708e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc2e7c54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc2e708d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc2e7c54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc2e79a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc2e79a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc2e79a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc2e7bf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc2e50d8880>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc2e50d8880>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc2e50d8880>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc2e50d8880>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc2e6f8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc2e6f8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc2e7c55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc2e6372b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc2e7c55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
          └ <fastapi.applications.FastAPI object at 0x7fc2e6372b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc2e5086680>
                     │    └ <function error_handle_business at 0x7fc2e6207250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc2dc51dcf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc2dc51dcf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc2e6233760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc2dc51dd80>
                     │    │             └ <starlette.requests.Request object at 0x7fc2dc54d990>
                     │    └ <function process_middleware_common at 0x7fc2e62071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc2dc54d990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc2dc51dd80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc2e6798a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc2e6304770>
          │    │   │      └ <starlette.requests.Request object at 0x7fc2dc54d990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc2dc8047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc51ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc2dc806bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc2dc8047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc51ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc2e61f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc2dc806bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc51ec20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc2e63424d0>
          └ <fastapi.routing.APIRoute object at 0x7fc2dc6cbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc51ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2dc54e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc2dc6eb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fc2dc6cbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc2dc591fc0>
                     └ <function get_request_handler.<locals>.app at 0x7fc2dc6eb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc2e6343130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fc2dc7576d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc2dc6cbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fc2e50d8e50>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA4'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fc2dc590520>
                 │                └ <function ResourceService.upload_resource at 0x7fc2de32b400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc2df56f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA4', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fc2df583370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc2df59d240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fc2df56f100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fc2df56f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fc2e46e6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fc2dc79b670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc2df59d240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fc2e46e5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
                └ <function SessionTransaction.commit at 0x7fc2e46e5ea0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7fc2e46e5e10>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
                └ <function SessionTransaction._prepare_impl at 0x7fc2e46e5cf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7fc2e46f8940>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fc2dc79b670>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7fc2e46f8af0>
    └ <sqlalchemy.orm.session.Session object at 0x7fc2dc79b670>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7fc2e5144f80>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7fc2e46d6dd0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fc2e50dbd00>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fc2e50dbd00>
    │   └ <function SaveUpdateAll.execute at 0x7fc2e46d76d0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7fc2e46c1cf0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7fc2e46c2710>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7fc2e49c3760>
             └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7fc2e51110c0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fc2e49c3a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fc2e49c3be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fc2e49c3c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fc2e49c3eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "resources_name_key"\nDETAIL:  Key (name)=(TTA4) already exis...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "resources_name_k...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fc2e485a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fc2de7feb60>
    └ <sqlalchemy.engine.base.Connection object at 0x7fc2e50d9c60>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fc2dc5f9a80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-02-20 15:55:11.201 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37582 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:55:25.442 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52200 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 15:55:25.778 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52200 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 15:55:44.816 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 15:55:45.072 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQyMTE0NX0.9CxgnZKvM341ce3RDUR9OVmE8Mpo4OURwa09ChgRYgk","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQzNzM0NX0.SXD0zm3ol_UUhyduR2WysHGwwqqjNDTa_lVHesnFvZk"},"links":null,"relationships":null,"timestamp":"2024-02-20 15:55:08"}'}
INFO     2024-02-20 15:55:45.073 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52202 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 15:57:40.278 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:57:40.280 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc2e6798310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc2e67983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc2e7c0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc2e7d5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc2e7d5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc2e7c54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
    │    └ <function subprocess_started at 0x7fc2e708e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc2e7c54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc2e708d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc2e7c54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc2e79a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc2e79a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc2e79a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc2e7bf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086290>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086290>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086290>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086290>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc2e6f8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc2e6f8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc2e7c55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc2e6372b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc2e7c55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
          └ <fastapi.applications.FastAPI object at 0x7fc2e6372b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc2e5112aa0>
                     │    └ <function error_handle_business at 0x7fc2e6207250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc2dc0b71c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc2dc0b71c0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc2e6233760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc2dc0b72e0>
                     │    │             └ <starlette.requests.Request object at 0x7fc2e5111d80>
                     │    └ <function process_middleware_common at 0x7fc2e62071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc2e5111d80>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc2dc0b72e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc2e6798a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc2e6304770>
          │    │   │      └ <starlette.requests.Request object at 0x7fc2e5111d80>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc2dc8047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc0b7490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc2dc806bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc2dc8047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc0b7490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc2e61f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc2dc806bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc0b7490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc2e63424d0>
          └ <fastapi.routing.APIRoute object at 0x7fc2dc6cbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2dc0b7490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2e5112080>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc2dc6eb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fc2dc6cbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc2e5086980>
                     └ <function get_request_handler.<locals>.app at 0x7fc2dc6eb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc2e6343130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fc2dc7576d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc2dc6cbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fc2d778abf0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA4'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fc2d778b820>
                 │                └ <function ResourceService.upload_resource at 0x7fc2de32b400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc2df56f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA4', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fc2df583370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc2df59d240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fc2df56f100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fc2df56f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fc2e46e6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fc2dc79b670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc2df59d240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fc2e46e5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fc2e46e5ea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fc2e46e5120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:57:40.291 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53900 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 15:58:14.955 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:58:14.958 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc2e6798310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc2e67983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc2e7c0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc2e7d5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc2e7d5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc2e7c54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
    │    └ <function subprocess_started at 0x7fc2e708e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=69921 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc2e7c54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc2e708d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc2e7c54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc2e79a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc2e79a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc2e79a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc2e7bf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086320>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086320>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086320>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc2e5086320>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc2e6f8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc2e6f8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc2e7c55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc2e6372b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc2e7c55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
          └ <fastapi.applications.FastAPI object at 0x7fc2e6372b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc2dc54d390>
                     │    └ <function error_handle_business at 0x7fc2e6207250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc2d77b41f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc2dc6c9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc2d77b41f0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fc2e6233760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc2dc6cb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc2d77b4310>
                     │    │             └ <starlette.requests.Request object at 0x7fc2d778b2e0>
                     │    └ <function process_middleware_common at 0x7fc2e62071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc2d778b2e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc2d77b4310>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc2e6798a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc2e6304770>
          │    │   │      └ <starlette.requests.Request object at 0x7fc2d778b2e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc2dc8047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc2dc6c82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2d77b4430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc2dc806bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc2dc8047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2d77b4430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc2e61f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc2dc806bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2d77b4430>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc2e63424d0>
          └ <fastapi.routing.APIRoute object at 0x7fc2dc6cbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc2d77b4430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc2d778b280>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc2dc6eb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fc2dc6cbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc2d778ada0>
                     └ <function get_request_handler.<locals>.app at 0x7fc2dc6eb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc2e6343130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fc2dc7576d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fc2dc6cbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fc2e5086980>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA5'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fc2d778aaa0>
                 │                └ <function ResourceService.upload_resource at 0x7fc2de32b400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fc2df56f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA5', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fc2df583370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc2df59d240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fc2df56f100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fc2df56f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fc2e46e6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fc2dc79b670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc2df59d240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fc2e46e5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fc2e46e5ea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fc2e46e5120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fc2e50decc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA4) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('55635e04-d6ec-5d56-adfd-f2a1a1d302be'), 'name': 'TTA4', 'version': '0', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/0_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:58:14.975 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34120 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:58:24.615 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:58:24.717 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:58:24.717 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:58:24.718 request id: app - uvicorn.server:serve - Finished server process [69923]
INFO     2024-02-20 15:58:27.809 request id: app - uvicorn.server:serve - Started server process [71379]
INFO     2024-02-20 15:58:27.810 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:58:27.811 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 15:58:33.445 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2024-02-20 15:58:33.447 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fa965c5a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fa95fb06b60>
    └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fa95daf9a80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa96900bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa96915e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa96915dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa969054100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
    │    └ <function subprocess_started at 0x7fa96848e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa969054220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa96848d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa969054220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa968da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa968da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa968da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa968ff7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa9664dff70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa9664dff70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa9664dff70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa9664dff70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa96838c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa96838c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa969055f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa967772b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa969055f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
          └ <fastapi.applications.FastAPI object at 0x7fa967772b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa966486710>
                     │    └ <function error_handle_business at 0x7fa967607250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa95da1dcf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa95da1dcf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa967633760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa95da1dd80>
                     │    │             └ <starlette.requests.Request object at 0x7fa95da4d990>
                     │    └ <function process_middleware_common at 0x7fa9676071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa95da4d990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa95da1dd80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa967b98a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa9677047c0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa95da4d990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa95dd047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95da1ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa95dd06bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa95dd047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95da1ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa9675f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa95dd06bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95da1ec20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa9677424d0>
          └ <fastapi.routing.APIRoute object at 0x7fa95dbcbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95da1ec20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa95da4e050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa95dbeb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fa95dbcbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa95da91fc0>
                     └ <function get_request_handler.<locals>.app at 0x7fa95dbeb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa967743130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fa95dc536d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa95dbcbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fa9664dcee0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fa95da90580>
                 │                └ <function ResourceService.upload_resource at 0x7fa95fb33400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa9649cf0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA3', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fa9649e3370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fa9649fd240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fa9649cf100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fa9649cf0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fa965ae6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fa95dc97670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fa9649fd240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fa965ae5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
                └ <function SessionTransaction.commit at 0x7fa965ae5ea0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7fa965ae5e10>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
                └ <function SessionTransaction._prepare_impl at 0x7fa965ae5cf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7fa965af8940>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fa95dc97670>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7fa965af8af0>
    └ <sqlalchemy.orm.session.Session object at 0x7fa95dc97670>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7fa966540dc0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7fa965ad6dd0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fa9664deec0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7fa9664deec0>
    │   └ <function SaveUpdateAll.execute at 0x7fa965ad76d0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7fa965ac1cf0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7fa965ac2710>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7fa965dc3760>
             └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7fa966511150>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7fa965dc3a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7fa965dc3be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7fa965dc3c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7fa965dc3eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "resources_name_key"\nDETAIL:  Key (name)=(TTA3) already exis...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "resources_name_k...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7fa965c5a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7fa95fb06b60>
    └ <sqlalchemy.engine.base.Connection object at 0x7fa9664df2e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7fa95daf9a80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-02-20 15:58:33.466 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40788 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 15:58:40.522 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:58:40.525 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa967b98310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa967b983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa96900bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa96915e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa96915dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa969054100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
    │    └ <function subprocess_started at 0x7fa96848e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa969054220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa96848d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa969054220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa968da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa968da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa968da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa968ff7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa966486a10>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa966486a10>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa966486a10>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa966486a10>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa96838c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa96838c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa969055f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa967772b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa969055f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
          └ <fastapi.applications.FastAPI object at 0x7fa967772b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa95da91d20>
                     │    └ <function error_handle_business at 0x7fa967607250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa9664bf250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa9664bf250>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa967633760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa9664bf910>
                     │    │             └ <starlette.requests.Request object at 0x7fa966511a50>
                     │    └ <function process_middleware_common at 0x7fa9676071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa966511a50>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa9664bf910>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa967b98a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa9677047c0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa966511a50>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa95dd047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95cdb7250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa95dd06bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa95dd047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95cdb7250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa9675f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa95dd06bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95cdb7250>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa9677424d0>
          └ <fastapi.routing.APIRoute object at 0x7fa95dbcbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95cdb7250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966512140>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa95dbeb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fa95dbcbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa966512dd0>
                     └ <function get_request_handler.<locals>.app at 0x7fa95dbeb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa967743130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fa95dc536d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa95dbcbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fa966512590>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA5'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fa9665126b0>
                 │                └ <function ResourceService.upload_resource at 0x7fa95fb33400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa9649cf0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA5', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fa9649e3370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fa9649fd240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fa9649cf100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fa9649cf0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fa965ae6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fa95dc97670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fa9649fd240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fa965ae5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fa965ae5ea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fa965ae5120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:58:40.538 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40802 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 15:59:06.379 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-20 15:59:06.382 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa967b98310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa967b983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa96900bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa96915e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa96915dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa969054100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
    │    └ <function subprocess_started at 0x7fa96848e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=71376 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa969054220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa96848d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa969054220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa968da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa968da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa968da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa968ff7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa95daf6cb0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa95daf6cb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa95daf6cb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa95daf6cb0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa96838c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa96838c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa969055f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa967772b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa969055f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
          └ <fastapi.applications.FastAPI object at 0x7fa967772b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa967639120>
                     │    └ <function error_handle_business at 0x7fa967607250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa95cdb76d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa95dbc9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa95cdb76d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa967633760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa95dbcb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa95cdb7e20>
                     │    │             └ <starlette.requests.Request object at 0x7fa966512fe0>
                     │    └ <function process_middleware_common at 0x7fa9676071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa966512fe0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa95cdb7e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa967b98a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa9677047c0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa966512fe0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa95dd047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa95dbc82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95ccf8040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa95dd06bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa95dd047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95ccf8040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa9675f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa95dd06bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95ccf8040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa9677424d0>
          └ <fastapi.routing.APIRoute object at 0x7fa95dbcbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa95ccf8040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa966513520>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa95dbeb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fa95dbcbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa966512a10>
                     └ <function get_request_handler.<locals>.app at 0x7fa95dbeb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa967743130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fa95dc536d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa95dbcbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fa95ccfca00>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA5'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fa966512f80>
                 │                └ <function ResourceService.upload_resource at 0x7fa95fb33400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa9649cf0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA5', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7fa9649e3370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fa9649fd240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7fa9649cf100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7fa9649cf0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7fa965ae6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7fa95dc97670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fa9649fd240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7fa965ae5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7fa965ae5ea0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7fa965ae5120>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7fa9664ffa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 901, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('eef75a6e-4a2a-5271-a68b-d49ba2665ed3'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-20 15:59:06.398 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43938 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 15:59:15.949 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 15:59:16.051 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 15:59:16.054 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 15:59:16.056 request id: app - uvicorn.server:serve - Finished server process [71379]
INFO     2024-02-20 15:59:17.622 request id: app - uvicorn.server:serve - Started server process [71694]
INFO     2024-02-20 15:59:17.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 15:59:17.624 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 15:59:20.695 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38158 - "POST /rms/v1.0/ HTTP/1.1" 200
ERROR    2024-02-20 15:59:33.654 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('e15a7df6-24fa-5b81-af96-30f22ac7b65c'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2024-02-20 15:59:33.657 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f927175e440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f926b7feb60>
    └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('e15a7df6-24fa-5b81-af96-30f22ac7b65c'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f92695f1a80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9274b0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9274c5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=71692 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9274c5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=71692 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9274b54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71692 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=71692 started>
    │    └ <function subprocess_started at 0x7f927408e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=71692 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9274b54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f927408d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9274b54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9274906440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f92749063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9274907eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9274af7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f9269589c00>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9269589c00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9269589c00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9269589c00>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9273f5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9273f5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9274b55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f927332ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9274b55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f92696c1420>
          └ <fastapi.applications.FastAPI object at 0x7f927332ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9269589d20>
                     │    └ <function error_handle_business at 0x7f92731bf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f92696c1420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9269516710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f92696c3160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f92696c1420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9269516710>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f92731eb760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f92696c3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f92696c3160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f92696c02b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f92696c3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9269516c20>
                     │    │             └ <starlette.requests.Request object at 0x7f927203bf70>
                     │    └ <function process_middleware_common at 0x7f92731bf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f92696c02b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f927203bf70>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9269516c20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f9273750a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f92732bc770>
          │    │   │      └ <starlette.requests.Request object at 0x7f927203bf70>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f92698007c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f92696c02b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f927202f9a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9269802bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f92698007c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f927202f9a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f92731ae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9269802bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f927202f9a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f92732fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f92696c3bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f927202f9a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f92731f1120>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f92696e77f0>
          └ <fastapi.routing.APIRoute object at 0x7f92696c3bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f92720c6d70>
                     └ <function get_request_handler.<locals>.app at 0x7f92696e7760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f92732fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f92697536d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f92696c3c70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f9268990070>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f92720932e0>
                 │                └ <function ResourceService.upload_resource at 0x7f926b32b400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f927056f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA3', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f9270583370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f92705a1240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f927056f100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f927056f0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f92715eacb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f9269797670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f92705a1240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f92715e9f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f92720d60c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f92720d60c0>
                └ <function SessionTransaction.commit at 0x7f92715e9ea0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7f92715e9e10>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f92720d60c0>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f92720d60c0>
                └ <function SessionTransaction._prepare_impl at 0x7f92715e9cf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7f92715fc940>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f9269797670>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f92720d60c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f92715fcaf0>
    └ <sqlalchemy.orm.session.Session object at 0x7f9269797670>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f9268994680>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f92715dadd0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f92720c70a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f92720c70a0>
    │   └ <function SaveUpdateAll.execute at 0x7f92715db6d0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f92715c5cf0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f92715c6710>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f92718c7760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f92720c7760>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f92718c7a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f92718c7be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f92718c7c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f92718c7eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "resources_name_key"\nDETAIL:  Key (name)=(TTA3) already exis...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "resources_name_k...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f927175e440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f926b7feb60>
    └ <sqlalchemy.engine.base.Connection object at 0x7f92720c5ae0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('e15a7df6-24fa-5b81-af96-30f22ac7b65c'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f92695f1a80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('e15a7df6-24fa-5b81-af96-30f22ac7b65c'), 'name': 'TTA3', 'version': '1', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/1_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-02-20 15:59:33.686 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36258 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:06:06.927 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:06:08.655 request id: app - uvicorn.server:serve - Started server process [74433]
INFO     2024-02-20 16:06:08.656 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:06:08.657 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:06:18.735 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('a14ab1a7-2e08-5d30-8a0f-e7d1f3d1e632'), 'name': 'TTA3', 'version': '2', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/2_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2024-02-20 16:06:18.737 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f86f176a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f86eb30ab60>
    └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('a14ab1a7-2e08-5d30-8a0f-e7d1f3d1e632'), 'name': 'TTA3', 'version': '2', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f86e9605a80; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f86f4b0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f86f4c5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=74430 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f86f4c5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=74430 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f86f4b54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=74430 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=74430 started>
    │    └ <function subprocess_started at 0x7f86f405a440>
    └ <SpawnProcess name='SpawnProcess-1' parent=74430 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f86f4b54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f86f4059900>
    │    │                  └ <uvicorn.server.Server object at 0x7f86f4b54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f86f48e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f86f48e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f86f48e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f86f4af7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f86f1f37f70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f86f1f37f70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f86f1f37f70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f86f1f37f70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f86f3f1c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f86f3f1c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f86f4b55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f86f32c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f86f4b55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f86e96d5420>
          └ <fastapi.applications.FastAPI object at 0x7f86f32c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f86f1eda710>
                     │    └ <function error_handle_business at 0x7f86f315b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f86e96d5420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f86e9529cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f86e96d7160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f86e96d5420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f86e9529cf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f86f3187760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f86e96d7160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f86e96d7160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f86e96d42b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f86e96d7160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f86e9529d80>
                     │    │             └ <starlette.requests.Request object at 0x7f86e9559990>
                     │    └ <function process_middleware_common at 0x7f86f315b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f86e96d42b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f86e9559990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f86e9529d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f86f36e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f86f3258810>
          │    │   │      └ <starlette.requests.Request object at 0x7f86e9559990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f86e96147c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f86e96d42b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f86e952ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f86e9616bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f86e96147c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f86e952ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f86f314a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f86e9616bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f86e952ac20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f86f32964d0>
          └ <fastapi.routing.APIRoute object at 0x7f86e96d7bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f86e952ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f86e955a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f86e96f77f0>
          └ <fastapi.routing.APIRoute object at 0x7f86e96d7bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f86e959dfc0>
                     └ <function get_request_handler.<locals>.app at 0x7f86e96f7760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f86f3297130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f86e97636d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f86e96d7c70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f86f1f34ee0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f86e959c580>
                 │                └ <function ResourceService.upload_resource at 0x7f86eb337400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f86f057b0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'TTA3', 've...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f86f058f370>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f86f05ad240>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f86f057b100>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f86f057b0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f86f15f6cb0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f86e97a7670>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f86f05ad240>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f86f15f5f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f86e95261c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f86e95261c0>
                └ <function SessionTransaction.commit at 0x7f86f15f5ea0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7f86f15f5e10>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f86e95261c0>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f86e95261c0>
                └ <function SessionTransaction._prepare_impl at 0x7f86f15f5cf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7f86f1408940>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f86e97a7670>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f86e95261c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f86f1408af0>
    └ <sqlalchemy.orm.session.Session object at 0x7f86e97a7670>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f86f1f98d40>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f86f15e6dd0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f86f1f36ec0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f86f1f36ec0>
    │   └ <function SaveUpdateAll.execute at 0x7f86f15e76d0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f86f15d1cf0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f86f15d2710>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f86f18d3760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f86f1f690f0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f86f18d3a30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f86f18d3be0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f86f18d3c70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f86f18d3eb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "resources_name_key"\nDETAIL:  Key (name)=(TTA3) already exis...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "resources_name_k...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"\nDETAIL...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f86f176a440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f86eb30ab60>
    └ <sqlalchemy.engine.base.Connection object at 0x7f86f1f372e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('a14ab1a7-2e08-5d30-8a0f-e7d1f3d1e632'), 'name': 'TTA3', 'version': '2', 'stage_id': '367814e6-063c-560c-b428-20e...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f86e9605a80; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "resources_name_key"
DETAIL:  Key (name)=(TTA3) already exists.

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('a14ab1a7-2e08-5d30-8a0f-e7d1f3d1e632'), 'name': 'TTA3', 'version': '2', 'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'platform_id': 'cb9c78a3-a4f9-527c-abf9-4fdac53bfa66', 'product_type_id': 'd38f1252-8d5a-5ea5-acf9-5f6c4a57d4df', 'repo_id': '227bb9e7-bd3e-5874-a006-172539fa4878', 'tag_id': 'fd02b16b-886c-5b4e-a253-d1dd6c91d46b', 'user_id': '10d37537-a777-5443-9b4b-7547a71d89e7', 'key': 'static/images/2_Screenshot from 2024-02-15 10-13-51.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-02-20 16:06:18.758 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56742 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:08:46.725 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:08:46.827 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:08:46.828 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:08:46.828 request id: app - uvicorn.server:serve - Finished server process [74433]
INFO     2024-02-20 16:08:49.473 request id: app - uvicorn.server:serve - Started server process [75416]
INFO     2024-02-20 16:08:49.474 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:08:49.475 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:09:06.386 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 16:09:06.389 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f57749fc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f57749fc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f5775e0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5775f62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5775f61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5775e58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
    │    └ <function subprocess_started at 0x7f5775372440>
    └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5775e58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5775371900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5775e58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f57757aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f57757aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f57757abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5775dfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f5773245390>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f5773245390>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f5773245390>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f5773245390>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5775230550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f57752305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5775e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f57745dab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5775e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f576a9c5420>
          └ <fastapi.applications.FastAPI object at 0x7f57745dab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f57732458a0>
                     │    └ <function error_handle_business at 0x7f577446f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f576a9c5420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f576a815cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f576a9c5420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f576a815cf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f577449b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f576a9c42b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f576a815d80>
                     │    │             └ <starlette.requests.Request object at 0x7f576a845990>
                     │    └ <function process_middleware_common at 0x7f577446f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f576a9c42b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f576a845990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f576a815d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f57749fca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f577456c680>
          │    │   │      └ <starlette.requests.Request object at 0x7f576a845990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f576a9047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f576a9c42b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f576a816c20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f576a906bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f576a9047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f576a816c20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f577445e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f576a906bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f576a816c20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f57745aa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f576a9c7bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f576a816c20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f576a846050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f576a9e77f0>
          └ <fastapi.routing.APIRoute object at 0x7f576a9c7bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f576a88dfc0>
                     └ <function get_request_handler.<locals>.app at 0x7f576a9e7760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f57745ab130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f576aa576d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f576a9c7c70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f5773244e50>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f576a88c520>
                 │                └ <function ResourceService.upload_resource at 0x7f577033f400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f57717db0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 48, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/2_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f577033f2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f57717db130>
    │    └ <app.src.services.base_service.BaseService object at 0x7f57717db100>
    └ <app.src.services.resource_service.ResourceService object at 0x7f57717db0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f576aa56dd0>
    │    └ <botocore.client.S3 object at 0x7f576ab91960>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f57717db130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f576aa1ca60>
           └ <s3transfer.futures.TransferFuture object at 0x7f57732451b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f576aa1d3f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f57732451b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Scree...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f576ab91960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f57732456c0...
           │    └ <function Task._execute_main at 0x7f576aa34790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/2_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f576ab91960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f57732456c0...
                   │    └ <function PutObjectTask._main at 0x7f576aa54e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/2_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f57732456c0>
    │      │                 │           └ 'static/images/2_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f576ab8a320>
    └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/2_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f57707b24d0>
           └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7f57707b2560>
                            └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/2_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7f5770be9360>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/2_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    └ <function Endpoint._send_request at 0x7f5770be9750>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7f5770be9990>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7f5770bbe5f0>
                │    └ <botocore.hooks.EventAliaser object at 0x7f576ab91ed0>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7f5770bbe0e0>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7f576ab91660>
           └ <botocore.hooks.EventAliaser object at 0x7f576ab91ed0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7f5770bbe050>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7f576ab91660>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7f576aa9b250>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f576aa9b220>
       └ <botocore.retryhandler.RetryHandler object at 0x7f576aa9b250>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7f57707b3d00>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f576aa9b220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Scree...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7f576aa9b1c0>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f576aa9b220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7f576aa2bee0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7f57707c4280>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7f576aa2bee0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Scree...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/2_Screenshot%20...
                    │    └ <function Endpoint._send at 0x7f5770be9a20>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/2_Screenshot%20...
           │    │            └ <function URLLib3Session.send at 0x7f5770b62320>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7f576aa2bfd0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/2_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/2_Screenshot%20...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/2_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 16:09:06.423 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53526 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 16:22:16.198 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 16:22:16.200 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f57749fc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f57749fc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f5775e0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f5775f62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f5775f61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f5775e58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
    │    └ <function subprocess_started at 0x7f5775372440>
    └ <SpawnProcess name='SpawnProcess-1' parent=75414 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f5775e58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f5775371900>
    │    │                  └ <uvicorn.server.Server object at 0x7f5775e58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f57757aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f57757aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f57757abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5775dfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f57732bae00>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f57732bae00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f57732bae00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f57732bae00>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f5775230550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f57752305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5775e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f57745dab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f5775e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f576a9c5420>
          └ <fastapi.applications.FastAPI object at 0x7f57745dab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f57732b85b0>
                     │    └ <function error_handle_business at 0x7f577446f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f576a9c5420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f57732292d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f576a9c5420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f57732292d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f577449b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f576a9c42b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f576a9c7160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5773229ab0>
                     │    │             └ <starlette.requests.Request object at 0x7f5773247d30>
                     │    └ <function process_middleware_common at 0x7f577446f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f576a9c42b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f5773247d30>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f5773229ab0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f57749fca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f577456c680>
          │    │   │      └ <starlette.requests.Request object at 0x7f5773247d30>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f576a9047c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f576a9c42b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5768d39b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f576a906bf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f576a9047c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5768d39b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f577445e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f576a906bf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5768d39b40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f57745aa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f576a9c7bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f5768d39b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f57732476d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f576a9e77f0>
          └ <fastapi.routing.APIRoute object at 0x7f576a9c7bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f5773247610>
                     └ <function get_request_handler.<locals>.app at 0x7f576a9e7760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f57745ab130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f576aa576d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f576a9c7c70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f57732bb9a0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f5773246320>
                 │                └ <function ResourceService.upload_resource at 0x7f577033f400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f57717db0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 48, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/3_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f577033f2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f57717db130>
    │    └ <app.src.services.base_service.BaseService object at 0x7f57717db100>
    └ <app.src.services.resource_service.ResourceService object at 0x7f57717db0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f576aa56dd0>
    │    └ <botocore.client.S3 object at 0x7f576ab91960>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f57717db130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f576aa1ca60>
           └ <s3transfer.futures.TransferFuture object at 0x7f57732bba90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f576aa1d3f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f57732bba90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Scree...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f576ab91960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f57732b8730...
           │    └ <function Task._execute_main at 0x7f576aa34790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/3_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f576ab91960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f57732b8730...
                   │    └ <function PutObjectTask._main at 0x7f576aa54e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/3_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f57732b8730>
    │      │                 │           └ 'static/images/3_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f576ab8a320>
    └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/3_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f57707b24d0>
           └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7f57707b2560>
                            └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/3_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7f5770be9360>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7f576ab91960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/3_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    └ <function Endpoint._send_request at 0x7f5770be9750>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7f5770be9990>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7f5770bbe5f0>
                │    └ <botocore.hooks.EventAliaser object at 0x7f576ab91ed0>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7f5770bbe0e0>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7f576ab91660>
           └ <botocore.hooks.EventAliaser object at 0x7f576ab91ed0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7f5770bbe050>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7f576ab91660>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7f576aa9b250>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f576aa9b220>
       └ <botocore.retryhandler.RetryHandler object at 0x7f576aa9b250>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7f57707b3d00>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f576aa9b220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Scree...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7f576aa9b1c0>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f576aa9b220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7f576aa2bee0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7f57707c4280>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7f576aa2bee0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Scree...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/3_Screenshot%20...
                    │    └ <function Endpoint._send at 0x7f5770be9a20>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/3_Screenshot%20...
           │    │            └ <function URLLib3Session.send at 0x7f5770b62320>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7f576aa2bfd0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/3_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/3_Screenshot%20...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/3_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 16:22:16.227 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40960 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:22:43.007 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:22:43.109 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:22:43.110 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:22:43.110 request id: app - uvicorn.server:serve - Finished server process [75416]
INFO     2024-02-20 16:22:44.049 request id: app - uvicorn.server:serve - Started server process [80345]
INFO     2024-02-20 16:22:44.050 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:22:44.051 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 16:22:59.156 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43952 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-20 16:24:37.007 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:24:37.109 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:24:37.112 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:24:37.114 request id: app - uvicorn.server:serve - Finished server process [80345]
INFO     2024-02-20 16:32:22.880 request id: app - uvicorn.server:serve - Started server process [84693]
INFO     2024-02-20 16:32:22.881 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:32:22.882 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:32:41.764 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-20 16:32:41.766 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37170 - "POST /rms/v1.0/ HTTP/1.1" 400
INFO     2024-02-20 16:32:50.146 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQyMTE0NX0.9CxgnZKvM341ce3RDUR9OVmE8Mpo4OURwa09ChgRYgk'}}
ERROR    2024-02-20 16:32:50.152 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-20 16:32:50.153 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37180 - "POST /rms/v1.0/logout HTTP/1.1" 400
INFO     2024-02-20 16:32:53.217 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37180 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 16:32:53.529 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37180 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 16:33:14.631 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 16:33:14.910 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQyMzM5NH0.7isxeibqrbORlDBlCNclARIchbGezTbqciFa-wdWtYs","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQzOTU5NH0.waBg88CAgdLanIGjqlvU0gZdHih2ja6xywklI0Tyqas"},"links":null,"relationships":null,"timestamp":"2024-02-20 16:32:22"}'}
INFO     2024-02-20 16:33:14.911 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57852 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 16:34:36.625 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 16:34:36.628 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcbd0bb8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcbd0bb83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcbd200fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcbd2162950>
           └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcbd2161fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcbd2058100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
    │    └ <function subprocess_started at 0x7fcbd1526440>
    └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcbd2058220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcbd1525900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcbd2058220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcbd1dce440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcbd1dce3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcbd1dcfeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcbd1ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcbc6a4d900>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcbc6a4d900>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcbc6a4d900>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcbc6a4d900>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcbd13ec550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcbd13ec5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcbd2059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcbd078eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcbd2059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcbc6bc54b0>
          └ <fastapi.applications.FastAPI object at 0x7fcbd078eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcbc6a4de10>
                     │    └ <function error_handle_business at 0x7fcbd061f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcbc6bc54b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcbcf4d8820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcbc6bc54b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcbcf4d8820>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcbd064b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcbc6bc4340>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcbcf4d88b0>
                     │    │             └ <starlette.requests.Request object at 0x7fcbcf50d330>
                     │    └ <function process_middleware_common at 0x7fcbd061f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcbc6bc4340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcbcf50d330>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcbcf4d88b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcbd0bb8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcbd0720720>
          │    │   │      └ <starlette.requests.Request object at 0x7fcbcf50d330>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcbc6b1e2c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcbc6bc4340>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbcf4d8280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcbc6b1e3b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcbc6b1e2c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbcf4d8280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcbd060e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcbc6b1e3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbcf4d8280>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcbd075e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcbc6bc7c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbcf4d8280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf50f910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcbc6bf36d0>
          └ <fastapi.routing.APIRoute object at 0x7fcbc6bc7c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcbcf50c550>
                     └ <function get_request_handler.<locals>.app at 0x7fcbc6bf3640>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcbd075f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fcbc6c57640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcbc6bc7d00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fcbcf50e290>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcbcf50ebf0>
                 │                └ <function ResourceService.upload_resource at 0x7fcbcc533370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcbcd9cb0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7fcbcc533250>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fcbcd9cb130>
    │    └ <app.src.services.base_service.BaseService object at 0x7fcbcd9cb100>
    └ <app.src.services.resource_service.ResourceService object at 0x7fcbcd9cb0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7fcbc6c56d40>
    │    └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7fcbcd9cb130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7fcbc6c189d0>
           └ <s3transfer.futures.TransferFuture object at 0x7fcbcf50c9d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7fcbc6c19360>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7fcbcf50c9d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7fcbc6f7d9c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fcbcf4a2950...
           │    └ <function Task._execute_main at 0x7fcbc6c30700>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7fcbc6f7d9c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fcbcf4a2950...
                   │    └ <function PutObjectTask._main at 0x7fcbc6c54dc0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7fcbcf4a2950>
    │      │                 │           └ 'static/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fcbc6f76290>
    └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7fcbcc9a6440>
           └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7fcbcc9a64d0>
                            └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7fcbccddd2d0>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    └ <function Endpoint._send_request at 0x7fcbccddd6c0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7fcbccddd900>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7fcbccdb2560>
                │    └ <botocore.hooks.EventAliaser object at 0x7fcbc6f7df30>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7fcbccdb2050>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7fcbc6f7d6c0>
           └ <botocore.hooks.EventAliaser object at 0x7fcbc6f7df30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7fcbccdb1fc0>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7fcbc6f7d6c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7fcbc6c932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fcbc6c93280>
       └ <botocore.retryhandler.RetryHandler object at 0x7fcbc6c932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7fcbcc9a7c70>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fcbc6c93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7fcbc6c93220>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fcbc6c93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7fcbc6c23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7fcbcc9b81f0>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7fcbc6c23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20...
                    │    └ <function Endpoint._send at 0x7fcbccddd990>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20...
           │    │            └ <function URLLib3Session.send at 0x7fcbccd52290>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7fcbc6c780d0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 16:34:36.659 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59496 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 16:37:21.352 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png"
ERROR    2024-02-20 16:37:21.354 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcbd0bb8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcbd0bb83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcbd200fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcbd2162950>
           └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcbd2161fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcbd2058100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
    │    └ <function subprocess_started at 0x7fcbd1526440>
    └ <SpawnProcess name='SpawnProcess-1' parent=84670 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcbd2058220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcbd1525900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcbd2058220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcbd1dce440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcbd1dce3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcbd1dcfeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcbd1ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcbcf5410c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcbcf5410c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcbcf5410c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcbcf5410c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcbd13ec550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcbd13ec5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcbd2059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcbd078eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcbd2059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcbc6bc54b0>
          └ <fastapi.applications.FastAPI object at 0x7fcbd078eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcbcf540df0>
                     │    └ <function error_handle_business at 0x7fcbd061f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcbc6bc54b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcbcf4d9d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcbc6bc54b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcbcf4d9d80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fcbd064b760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcbc6bc4340>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcbc6bc71f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcbcf4d8ca0>
                     │    │             └ <starlette.requests.Request object at 0x7fcbcf542e30>
                     │    └ <function process_middleware_common at 0x7fcbd061f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcbc6bc4340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcbcf542e30>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcbcf4d8ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcbd0bb8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcbd0720720>
          │    │   │      └ <starlette.requests.Request object at 0x7fcbcf542e30>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcbc6b1e2c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcbc6bc4340>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbc4da6050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcbc6b1e3b0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcbc6b1e2c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbc4da6050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcbd060e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcbc6b1e3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbc4da6050>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcbd075e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcbc6bc7c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcbc4da6050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcbcf541720>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcbc6bf36d0>
          └ <fastapi.routing.APIRoute object at 0x7fcbc6bc7c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcbcf541630>
                     └ <function get_request_handler.<locals>.app at 0x7fcbc6bf3640>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcbd075f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fcbc6c57640>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fcbc6bc7d00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fcbcf543100>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fcbcf543670>
                 │                └ <function ResourceService.upload_resource at 0x7fcbcc533370>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fcbcd9cb0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7fcbcc533250>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fcbcd9cb130>
    │    └ <app.src.services.base_service.BaseService object at 0x7fcbcd9cb100>
    └ <app.src.services.resource_service.ResourceService object at 0x7fcbcd9cb0d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7fcbc6c56d40>
    │    └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7fcbcd9cb130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7fcbc6c189d0>
           └ <s3transfer.futures.TransferFuture object at 0x7fcbcf543220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7fcbc6c19360>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7fcbcf543220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7fcbc6f7d9c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fcbc4e2c310...
           │    └ <function Task._execute_main at 0x7fcbc6c30700>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7fcbc6f7d9c0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fcbc4e2c310...
                   │    └ <function PutObjectTask._main at 0x7fcbc6c54dc0>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7fcbc4e2c310>
    │      │                 │           └ 'static/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fcbc6f76290>
    └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7fcbcc9a6440>
           └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7fcbcc9a64d0>
                            └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7fcbccddd2d0>
           │    └ s3(https://minio.rabiloo.net:9000)
           └ <botocore.client.S3 object at 0x7fcbc6f7d9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers'...
           │    └ <function Endpoint._send_request at 0x7fcbccddd6c0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7fcbccddd900>
          └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7fcbccdb2560>
                │    └ <botocore.hooks.EventAliaser object at 0x7fcbc6f7df30>
                └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7fcbccdb2050>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7fcbc6f7d6c0>
           └ <botocore.hooks.EventAliaser object at 0x7fcbc6f7df30>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7fcbccdb1fc0>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7fcbc6f7d6c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://minio.rabiloo.net:9000), 'operation': OperationModel(name=PutObject), 'attempts': 5...
               └ <botocore.retryhandler.RetryHandler object at 0x7fcbc6c932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': EndpointConnectionError('Could not connect to the endpoint URL: "...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fcbc6c93280>
       └ <botocore.retryhandler.RetryHandler object at 0x7fcbc6c932b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7fcbcc9a7c70>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fcbc6c93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7fcbc6c93220>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7fcbc6c93280>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7fcbc6c23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7fcbcc9b81f0>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7fcbc6c23f40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ EndpointConnectionError('Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Scree...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20...
                    │    └ <function Endpoint._send at 0x7fcbccddd990>
                    └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20...
           │    │            └ <function URLLib3Session.send at 0x7fcbccd52290>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7fcbc6c780d0>
           └ s3(https://minio.rabiloo.net:9000)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 493, in send
    raise EndpointConnectionError(endpoint_url=request.url, error=e)
          │                                    │       └ 'https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                                    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20...
          └ <class 'botocore.exceptions.EndpointConnectionError'>

botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: "https://minio.rabiloo.net:9000/bigdata/static/images/5_Screenshot%20from%202024-02-15%2010-13-51.png"
INFO     2024-02-20 16:37:21.368 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53954 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:37:57.396 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:37:57.498 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:37:57.500 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:37:57.502 request id: app - uvicorn.server:serve - Finished server process [84693]
INFO     2024-02-20 16:37:58.640 request id: app - uvicorn.server:serve - Started server process [87668]
INFO     2024-02-20 16:37:58.642 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:37:58.642 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:38:03.352 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
ERROR    2024-02-20 16:38:03.355 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa5cde7c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa5cde7c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa5cf2c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa5cf45e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=87666 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa5cf45dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=87666 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa5cf30c100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=87666 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=87666 started>
    │    └ <function subprocess_started at 0x7fa5ce796440>
    └ <SpawnProcess name='SpawnProcess-1' parent=87666 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa5cf30c220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa5ce795900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa5cf30c220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa5cebae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa5cebae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa5cebafeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa5cf2b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa5bfc39450>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa5bfc39450>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa5bfc39450>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa5bfc39450>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa5ce690550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa5ce6905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa5cf30df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa5cda52b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa5cf30df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa5bfdb9420>
          └ <fastapi.applications.FastAPI object at 0x7fa5cda52b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa5bfc3a6b0>
                     │    └ <function error_handle_business at 0x7fa5cd8e3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa5bfdb9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa5bfc09cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa5bfdbb160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa5bfdb9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa5bfc09cf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7fa5cd90f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa5bfdbb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7fa5bfdbb160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa5bfdb82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa5bfdbb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa5bfc09d80>
                     │    │             └ <starlette.requests.Request object at 0x7fa5bfc39990>
                     │    └ <function process_middleware_common at 0x7fa5cd8e31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa5bfdb82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa5bfc39990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa5bfc09d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa5cde7ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa5cd9dccc0>
          │    │   │      └ <starlette.requests.Request object at 0x7fa5bfc39990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa5bfef87c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa5bfdb82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa5bfc0ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa5bfefabf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa5bfef87c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa5bfc0ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa5cd8d22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa5bfefabf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa5bfc0ac20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa5cda224d0>
          └ <fastapi.routing.APIRoute object at 0x7fa5bfdbbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa5bfc0ac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa5bfc3a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa5bfddb7f0>
          └ <fastapi.routing.APIRoute object at 0x7fa5bfdbbbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa5bfc81fc0>
                     └ <function get_request_handler.<locals>.app at 0x7fa5bfddb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa5cda23130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7fa5bfe4b6d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7fa5bfdbbc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7fa5cc7b4e50>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7fa5bfc80520>
                 │                └ <function ResourceService.upload_resource at 0x7fa5c5737400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7fa5c6bd30d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ 'static/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7fa5c57372e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fa5c6bd3130>
    │    └ <app.src.services.base_service.BaseService object at 0x7fa5c6bd3100>
    └ <app.src.services.resource_service.ResourceService object at 0x7fa5c6bd30d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7fa5bfe4add0>
    │    └ <botocore.client.S3 object at 0x7fa5c4285960>
    └ <app.src.services.s3_connector.S3Storage object at 0x7fa5c6bd3130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7fa5bfe14a60>
           └ <s3transfer.futures.TransferFuture object at 0x7fa5cc7b51b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7fa5bfe153f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7fa5cc7b51b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7fa5c4285960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fa5cc7b56c0...
           │    └ <function Task._execute_main at 0x7fa5bfe28790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7fa5c4285960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fa5cc7b56c0...
                   │    └ <function PutObjectTask._main at 0x7fa5bfe48e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_a...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7fa5cc7b56c0>
    │      │                 │           └ 'static/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fa5c427e320>
    └ <botocore.client.S3 object at 0x7fa5c4285960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': 'static/images/5_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChu...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7fa5c5baa4d0>
           └ <botocore.client.S3 object at 0x7fa5c4285960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1009, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 16:38:03.415 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53800 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:40:49.212 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:41:06.446 request id: app - uvicorn.server:serve - Started server process [88883]
INFO     2024-02-20 16:41:06.447 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:41:06.448 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:41:10.758 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/blacklist_token.py", line 18, in is_black_token\n    if session.query(self.model).filter(self.model.token == token).first():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 16:41:10.760 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60178 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:42:41.747 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:42:41.849 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:42:41.850 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:42:41.851 request id: app - uvicorn.server:serve - Finished server process [88883]
INFO     2024-02-20 16:42:42.830 request id: app - uvicorn.server:serve - Started server process [89561]
INFO     2024-02-20 16:42:42.832 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:42:42.832 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:42:53.513 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/blacklist_token.py", line 18, in is_black_token\n    if session.query(self.model).filter(self.model.token == token).first():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 16:42:53.514 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48878 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:43:11.664 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:43:11.766 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:43:11.767 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:43:11.767 request id: app - uvicorn.server:serve - Finished server process [89561]
INFO     2024-02-20 16:43:14.268 request id: app - uvicorn.server:serve - Started server process [89750]
INFO     2024-02-20 16:43:14.270 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:43:14.270 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:43:25.950 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/blacklist_token.py", line 18, in is_black_token\n    if session.query(self.model).filter(self.model.token == token).first():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 16:43:25.952 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50280 - "POST /rms/v1.0/ HTTP/1.1" 500
ERROR    2024-02-20 16:43:41.860 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/blacklist_token.py", line 18, in is_black_token\n    if session.query(self.model).filter(self.model.token == token).first():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 16:43:41.863 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47110 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:44:09.023 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:44:09.126 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:44:09.128 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:44:09.132 request id: app - uvicorn.server:serve - Finished server process [89750]
INFO     2024-02-20 16:44:12.459 request id: app - uvicorn.server:serve - Started server process [90136]
INFO     2024-02-20 16:44:12.461 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:44:12.462 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:44:25.699 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/blacklist_token.py", line 18, in is_black_token\n    if session.query(self.model).filter(self.model.token == token).first():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 16:44:25.704 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50134 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:45:16.801 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:45:16.903 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:45:16.905 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:45:16.908 request id: app - uvicorn.server:serve - Finished server process [90136]
INFO     2024-02-20 16:45:20.046 request id: app - uvicorn.server:serve - Started server process [90592]
INFO     2024-02-20 16:45:20.048 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:45:20.049 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:45:27.662 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/blacklist_token.py", line 18, in is_black_token\n    if session.query(self.model).filter(self.model.token == token).first():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2114, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1981, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n  File "<string>", line 2, in _connection_for_bind\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1108, in _connection_for_bind\n    conn = bind.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3251, in connect\n    return self._connection_cls(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection\n    return self.pool.connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 455, in connect\n    return _ConnectionFairy._checkout(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 719, in checkout\n    rec = pool._do_get()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 168, in _do_get\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get\n    return self._create_connection()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection\n    return _ConnectionRecord(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 681, in __init__\n    self.__connect()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 905, in __connect\n    with util.safe_reraise():\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 641, in connect\n    return dialect.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 580, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "192.168.10.9", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n'}
INFO     2024-02-20 16:45:27.666 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40050 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:46:23.459 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:46:23.564 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:46:23.568 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:46:23.572 request id: app - uvicorn.server:serve - Finished server process [90592]
INFO     2024-02-20 16:46:26.843 request id: app - uvicorn.server:serve - Started server process [91020]
INFO     2024-02-20 16:46:26.845 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:46:26.845 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:46:49.175 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
ERROR    2024-02-20 16:46:51.501 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f072d44f910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f072d44f9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f072ffad120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f072ff6fe20>
           └ <SpawnProcess name='SpawnProcess-1' parent=91015 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f072ff6f490>
    └ <SpawnProcess name='SpawnProcess-1' parent=91015 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f072ffbe860>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=91015 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=91015 started>
    │    └ <function subprocess_started at 0x7f072dcc5bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=91015 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f072ffbdc00>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f072dcc4ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f072ffbdc00>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f072fee9a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f072fee9990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f072feeb490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f073017a830>
    └ <Handle <TaskStepMethWrapper object at 0x7f070f214940>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f070f214940>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f070f214940>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f070f214940>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f072dd53250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f072dd532e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f072ff461d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f072d064dc0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f072ff461d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f070f2bdd50>
          └ <fastapi.applications.FastAPI object at 0x7f072d064dc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f070f33d270>
                     │    └ <function error_handle_business at 0x7f072d08a830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f070f2bdd50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f070f2dbd00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f070f2bdd20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f070f2bdd50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f070f2dbd00>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f072cecb130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f070f2bdd20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f070f2bdd20>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f070f472e90>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f070f2bdd20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f070f2dbd90>
                     │    │             └ <starlette.requests.Request object at 0x7f070f33c550>
                     │    └ <function process_middleware_common at 0x7f072d08a8c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f070f472e90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f070f33c550>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f070f2dbd90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f072d4640d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f072cfe5850>
          │    │   │      └ <starlette.requests.Request object at 0x7f070f33c550>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f070f3cb340>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f070f472e90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f070f354ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f070f3cb2e0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f070f3cb340>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f070f354ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f072d09d210>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f070f3cb2e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f070f354ca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f072d029630>
          └ <fastapi.routing.APIRoute object at 0x7f070f2be770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f070f354ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f070f33cc10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f070f2d8e50>
          └ <fastapi.routing.APIRoute object at 0x7f070f2be770>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f070f33f9d0>
                     └ <function get_request_handler.<locals>.app at 0x7f070f2d8dc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f072d02a290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f070f51bbe0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f070f2be830>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f070f24e320>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f070f33f010>
                 │                └ <function ResourceService.upload_resource at 0x7f071557b640>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f07163a3f10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ '/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f071557b520>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f07163a3eb0>
    │    └ <app.src.services.base_service.BaseService object at 0x7f07163a3ee0>
    └ <app.src.services.resource_service.ResourceService object at 0x7f07163a3f10>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f070f51b2e0>
    │    └ <botocore.client.S3 object at 0x7f070fbd46d0>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f07163a3eb0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f070f4dd000>
           └ <s3transfer.futures.TransferFuture object at 0x7f070f24ead0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f070f4dd990>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f070f24ead0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f070fbd46d0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f070e0d5450...
           │    └ <function Task._execute_main at 0x7f070f4f0ca0>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_args': ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f070fbd46d0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f070e0d5450...
                   │    └ <function PutObjectTask._main at 0x7f070f519360>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_args': ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f070e0d5450>
    │      │                 │           └ '/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f070fbba710>
    └ <botocore.client.S3 object at 0x7f070fbd46d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChunk obj...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f072d892680>
           └ <botocore.client.S3 object at 0x7f070fbd46d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1009, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 16:46:51.553 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40004 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:51:18.707 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:51:18.809 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:51:18.811 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:51:18.812 request id: app - uvicorn.server:serve - Finished server process [91020]
INFO     2024-02-20 16:51:20.440 request id: app - uvicorn.server:serve - Started server process [92804]
INFO     2024-02-20 16:51:20.442 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:51:20.442 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:51:33.474 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.png [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1007)
ERROR    2024-02-20 16:51:33.477 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7f498fc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7f498fc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7f4ad0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7f4ae5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=92802 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7f4ae5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=92802 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7f4ad54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=92802 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=92802 started>
    │    └ <function subprocess_started at 0x7f7f4a272440>
    └ <SpawnProcess name='SpawnProcess-1' parent=92802 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7f4ad54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7f4a271900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7f4ad54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7f4ab06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7f4ab063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7f4ab07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7f4acf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7f4823d3c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7f4823d3c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7f4823d3c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7f4823d3c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7f4a130550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7f4a1305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7f4ad55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7f494d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7f4ad55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f3b7c1420>
          └ <fastapi.applications.FastAPI object at 0x7f7f494d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7f4823d8d0>
                     │    └ <function error_handle_business at 0x7f7f49363250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f3b7c1420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ SSLError('SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.p...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7f3b615cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f3b7c3160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f3b7c1420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7f3b615cf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f7f4938f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f3b7c3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f7f3b7c3160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f3b7c02b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f3b7c3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7f3b615d80>
                     │    │             └ <starlette.requests.Request object at 0x7f7f3b645990>
                     │    └ <function process_middleware_common at 0x7f7f493631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f3b7c02b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7f3b645990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7f3b615d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ SSLError('SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.p...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7f498fca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7f49464770>
          │    │   │      └ <starlette.requests.Request object at 0x7f7f3b645990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7f3b8fc7c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f3b7c02b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f3b616c20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7f3b8febf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7f3b8fc7c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f3b616c20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7f493522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7f3b8febf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f3b616c20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7f494a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f7f3b7c3bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f3b616c20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f3b646050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7f3b7e37f0>
          └ <fastapi.routing.APIRoute object at 0x7f7f3b7c3bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7f3b689fc0>
                     └ <function get_request_handler.<locals>.app at 0x7f7f3b7e3760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7f494a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f7f3b84f6d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f7f3b7c3c70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f7f4823ce80>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f7f3b688580>
                 │                └ <function ResourceService.upload_resource at 0x7f7f4112b400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f7f425c70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ '/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f7f4112b2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f7f425c7130>
    │    └ <app.src.services.base_service.BaseService object at 0x7f7f425c7100>
    └ <app.src.services.resource_service.ResourceService object at 0x7f7f425c70d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f7f3b84edd0>
    │    └ <botocore.client.S3 object at 0x7f7f3bb79960>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f7f425c7130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f7f3b814a60>
           └ <s3transfer.futures.TransferFuture object at 0x7f7f4823d1e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f7f3b8153f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f7f4823d1e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ SSLError('SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.p...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f7f3bb79960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f7f4823d6f0...
           │    └ <function Task._execute_main at 0x7f7f3b82c790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_args': ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f7f3bb79960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f7f4823d6f0...
                   │    └ <function PutObjectTask._main at 0x7f7f3b84ce50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_args': ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f7f4823d6f0>
    │      │                 │           └ '/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f7f3bb72320>
    └ <botocore.client.S3 object at 0x7f7f3bb79960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChunk obj...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f7f4159e4d0>
           └ <botocore.client.S3 object at 0x7f7f3bb79960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 989, in _make_api_call
    http, parsed_response = self._make_request(
                            │    └ <function BaseClient._make_request at 0x7f7f4159e560>
                            └ <botocore.client.S3 object at 0x7f7f3bb79960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1015, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
           │    │         │            │                └ {'url_path': '//images/5_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers': {'Us...
           │    │         │            └ OperationModel(name=PutObject)
           │    │         └ <function Endpoint.make_request at 0x7f7f419d5360>
           │    └ s3(https://192.168.20.200:9001)
           └ <botocore.client.S3 object at 0x7f7f3bb79960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 119, in make_request
    return self._send_request(request_dict, operation_model)
           │    │             │             └ OperationModel(name=PutObject)
           │    │             └ {'url_path': '//images/5_Screenshot%20from%202024-02-15%2010-13-51.png', 'query_string': {}, 'method': 'PUT', 'headers': {'Us...
           │    └ <function Endpoint._send_request at 0x7f7f419d5750>
           └ s3(https://192.168.20.200:9001)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 202, in _send_request
    while self._needs_retry(
          │    └ <function Endpoint._needs_retry at 0x7f7f419d5990>
          └ s3(https://192.168.20.200:9001)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 354, in _needs_retry
    responses = self._event_emitter.emit(
                │    │              └ <function EventAliaser.emit at 0x7f7f419aa5f0>
                │    └ <botocore.hooks.EventAliaser object at 0x7f7f3bb79ed0>
                └ s3(https://192.168.20.200:9001)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 412, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
           │    │        │    │                     └ {'response': None, 'endpoint': s3(https://192.168.20.200:9001), 'operation': OperationModel(name=PutObject), 'attempts': 5, '...
           │    │        │    └ 'needs-retry.s3.PutObject'
           │    │        └ <function HierarchicalEmitter.emit at 0x7f7f419aa0e0>
           │    └ <botocore.hooks.HierarchicalEmitter object at 0x7f7f3bb79660>
           └ <botocore.hooks.EventAliaser object at 0x7f7f3bb79ed0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 256, in emit
    return self._emit(event_name, kwargs)
           │    │     │           └ {'response': None, 'endpoint': s3(https://192.168.20.200:9001), 'operation': OperationModel(name=PutObject), 'attempts': 5, '...
           │    │     └ 'needs-retry.s3.PutObject'
           │    └ <function HierarchicalEmitter._emit at 0x7f7f419aa050>
           └ <botocore.hooks.HierarchicalEmitter object at 0x7f7f3bb79660>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/hooks.py", line 239, in _emit
    response = handler(**kwargs)
               │         └ {'response': None, 'endpoint': s3(https://192.168.20.200:9001), 'operation': OperationModel(name=PutObject), 'attempts': 5, '...
               └ <botocore.retryhandler.RetryHandler object at 0x7f7f3b893250>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 207, in __call__
    if self._checker(**checker_kwargs):
       │    │          └ {'attempt_number': 5, 'response': None, 'caught_exception': SSLError('SSL validation failed for https://192.168.20.200:9001/b...
       │    └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f7f3b893220>
       └ <botocore.retryhandler.RetryHandler object at 0x7f7f3b893250>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 284, in __call__
    should_retry = self._should_retry(
                   │    └ <function MaxAttemptsDecorator._should_retry at 0x7f7f4159fd00>
                   └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f7f3b893220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 320, in _should_retry
    return self._checker(attempt_number, response, caught_exception)
           │    │        │               │         └ SSLError('SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.p...
           │    │        │               └ None
           │    │        └ 5
           │    └ <botocore.retryhandler.MultiChecker object at 0x7f7f3b8931c0>
           └ <botocore.retryhandler.MaxAttemptsDecorator object at 0x7f7f3b893220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 363, in __call__
    checker_response = checker(
                       └ <botocore.retryhandler.ExceptionRaiser object at 0x7f7f3b823ee0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 247, in __call__
    return self._check_caught_exception(
           │    └ <function ExceptionRaiser._check_caught_exception at 0x7f7f415b0280>
           └ <botocore.retryhandler.ExceptionRaiser object at 0x7f7f3b823ee0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/retryhandler.py", line 416, in _check_caught_exception
    raise caught_exception
          └ SSLError('SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.p...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 281, in _do_get_response
    http_response = self._send(request)
                    │    │     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%2020...
                    │    └ <function Endpoint._send at 0x7f7f419d5a20>
                    └ s3(https://192.168.20.200:9001)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/endpoint.py", line 377, in _send
    return self.http_session.send(request)
           │    │            │    └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%2020...
           │    │            └ <function URLLib3Session.send at 0x7f7f4194e320>
           │    └ <botocore.httpsession.URLLib3Session object at 0x7f7f3b823fd0>
           └ s3(https://192.168.20.200:9001)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/httpsession.py", line 491, in send
    raise SSLError(endpoint_url=request.url, error=e)
          │                     │       └ 'https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.png'
          │                     └ <AWSPreparedRequest stream_output=False, method=PUT, url=https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%2020...
          └ <class 'botocore.exceptions.SSLError'>

botocore.exceptions.SSLError: SSL validation failed for https://192.168.20.200:9001/bigdata//images/5_Screenshot%20from%202024-02-15%2010-13-51.png [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1007)
INFO     2024-02-20 16:51:33.504 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45922 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:51:59.793 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:51:59.895 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:51:59.898 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:51:59.900 request id: app - uvicorn.server:serve - Finished server process [92804]
INFO     2024-02-20 16:52:28.177 request id: app - uvicorn.server:serve - Started server process [93200]
INFO     2024-02-20 16:52:28.179 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:52:28.179 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 16:52:32.415 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
ERROR    2024-02-20 16:52:32.417 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f1251050310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f12510503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f125240fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f1252562950>
           └ <SpawnProcess name='SpawnProcess-1' parent=93197 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1252561fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=93197 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1252458100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=93197 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=93197 started>
    │    └ <function subprocess_started at 0x7f1251992440>
    └ <SpawnProcess name='SpawnProcess-1' parent=93197 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1252458220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1251991900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1252458220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1251daa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1251daa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1251dabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f12523fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1242e29510>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1242e29510>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1242e29510>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1242e29510>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f125185c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f125185c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1252459f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1250c36b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1252459f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1242fa9420>
          └ <fastapi.applications.FastAPI object at 0x7f1250c36b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1242e2a6b0>
                     │    └ <function error_handle_business at 0x7f1250acb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1242fa9420>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1242ff9cf0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1242fab160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1242fa9420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '61770', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1242ff9cf0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f1250af7760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1242fab160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f1242fab160>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1242fa82b0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1242fab160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1242ff9d80>
                     │    │             └ <starlette.requests.Request object at 0x7f1242e29990>
                     │    └ <function process_middleware_common at 0x7f1250acb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1242fa82b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1242e29990>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1242ff9d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1251050a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1250bc85e0>
          │    │   │      └ <starlette.requests.Request object at 0x7f1242e29990>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f12433e87c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1242fa82b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1242ffac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f12433eabf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f12433e87c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1242ffac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1250aba2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f12433eabf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1242ffac20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1250c064d0>
          └ <fastapi.routing.APIRoute object at 0x7f1242fabbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1242ffac20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1242e2a050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1242fcb7f0>
          └ <fastapi.routing.APIRoute object at 0x7f1242fabbb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1242e75fc0>
                     └ <function get_request_handler.<locals>.app at 0x7f1242fcb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1250c07130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f124333b6d0>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f1242fabc70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 28, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f125018ce50>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvb...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='TTA3'...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f1242e74520>
                 │                └ <function ResourceService.upload_resource at 0x7f1248b2b400>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f1249d730d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 50, in upload_resource
    self.base_service.engine_s3.put_object(key, content)
    │    │            │         │          │    └ b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x02\xa4\x00\x00\x02\x99\x08\x06\x00\x00\x00n\xa29\xda\x00\x00\x00\x04sBIT\x08\x...
    │    │            │         │          └ '/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │    │            │         └ <function S3Storage.put_object at 0x7f1248b2b2e0>
    │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f1249d73130>
    │    └ <app.src.services.base_service.BaseService object at 0x7f1249d73100>
    └ <app.src.services.resource_service.ResourceService object at 0x7f1249d730d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 50, in put_object
    self.client.upload_fileobj(
    │    │      └ <function upload_fileobj at 0x7f124333add0>
    │    └ <botocore.client.S3 object at 0x7f1243f75960>
    └ <app.src.services.s3_connector.S3Storage object at 0x7f1249d73130>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/boto3/s3/inject.py", line 642, in upload_fileobj
    return future.result()
           │      └ <function TransferFuture.result at 0x7f1243300a60>
           └ <s3transfer.futures.TransferFuture object at 0x7f125018d1b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           │    │            └ <function TransferCoordinator.result at 0x7f12433013f0>
           │    └ TransferCoordinator(transfer_id=0)
           └ <s3transfer.futures.TransferFuture object at 0x7f125018d1b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          │    └ ClientError('An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API po...
          └ TransferCoordinator(transfer_id=0)
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           │    │             └ {'client': <botocore.client.S3 object at 0x7f1243f75960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f125018d6c0...
           │    └ <function Task._execute_main at 0x7f1243318790>
           └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_args': ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   │    │       └ {'client': <botocore.client.S3 object at 0x7f1243f75960>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f125018d6c0...
                   │    └ <function PutObjectTask._main at 0x7f1243338e50>
                   └ PutObjectTask(transfer_id=0, {'bucket': 'bigdata', 'key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'extra_args': ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/s3transfer/upload.py", line 764, in _main
    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)
    │      │                 │           │         │       └ {}
    │      │                 │           │         └ <s3transfer.utils.ReadFileChunk object at 0x7f125018d6c0>
    │      │                 │           └ '/images/5_Screenshot from 2024-02-15 10-13-51.png'
    │      │                 └ 'bigdata'
    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f1243f6e320>
    └ <botocore.client.S3 object at 0x7f1243f75960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': '/images/5_Screenshot from 2024-02-15 10-13-51.png', 'Body': <s3transfer.utils.ReadFileChunk obj...
           │    │              └ 'PutObject'
           │    └ <function BaseClient._make_api_call at 0x7f1248f9e4d0>
           └ <botocore.client.S3 object at 0x7f1243f75960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1009, in _make_api_call
    raise error_class(parsed_response, operation_name)
          │           │                └ 'PutObject'
          │           └ {'Error': {'Code': 'InvalidArgument', 'Message': 'S3 API Requests must be made to API port.'}, 'ResponseMetadata': {'HTTPStat...
          └ <class 'botocore.exceptions.ClientError'>

botocore.exceptions.ClientError: An error occurred (InvalidArgument) when calling the PutObject operation: S3 API Requests must be made to API port.
INFO     2024-02-20 16:52:32.435 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42316 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-20 16:53:25.730 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:53:25.832 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:53:25.833 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:53:25.833 request id: app - uvicorn.server:serve - Finished server process [93200]
INFO     2024-02-20 16:53:27.014 request id: app - uvicorn.server:serve - Started server process [93569]
INFO     2024-02-20 16:53:27.016 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:53:27.016 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 16:53:30.413 request id: app - app.src.services.s3_connector:put_object - Push /images/5_Screenshot from 2024-02-15 10-13-51.png to bucket bigdata done
INFO     2024-02-20 16:53:30.452 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49384 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-20 16:56:37.493 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:56:37.597 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:56:37.598 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:56:37.599 request id: app - uvicorn.server:serve - Finished server process [93569]
INFO     2024-02-20 16:56:38.641 request id: app - uvicorn.server:serve - Started server process [95113]
INFO     2024-02-20 16:56:38.643 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:56:38.643 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 16:57:55.355 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 16:57:55.456 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 16:57:55.457 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 16:57:55.458 request id: app - uvicorn.server:serve - Finished server process [95113]
INFO     2024-02-20 16:57:56.450 request id: app - uvicorn.server:serve - Started server process [95720]
INFO     2024-02-20 16:57:56.451 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 16:57:56.451 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:00:08.491 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:00:08.593 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:00:08.596 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:00:08.598 request id: app - uvicorn.server:serve - Finished server process [95720]
INFO     2024-02-20 17:00:10.525 request id: app - uvicorn.server:serve - Started server process [96718]
INFO     2024-02-20 17:00:10.526 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:00:10.527 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:00:57.827 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:00:57.930 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:00:57.932 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:00:57.933 request id: app - uvicorn.server:serve - Finished server process [96718]
INFO     2024-02-20 17:00:59.003 request id: app - uvicorn.server:serve - Started server process [97003]
INFO     2024-02-20 17:00:59.004 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:00:59.005 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:01:15.473 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:01:15.577 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:01:15.579 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:01:15.581 request id: app - uvicorn.server:serve - Finished server process [97003]
INFO     2024-02-20 17:01:25.446 request id: app - uvicorn.server:serve - Started server process [97162]
INFO     2024-02-20 17:01:25.447 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:01:25.448 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:01:33.378 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:01:33.479 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:01:33.480 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:01:33.480 request id: app - uvicorn.server:serve - Finished server process [97162]
INFO     2024-02-20 17:01:34.419 request id: app - uvicorn.server:serve - Started server process [97245]
INFO     2024-02-20 17:01:34.421 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:01:34.421 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:01:48.478 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:01:48.580 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:01:48.581 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:01:48.581 request id: app - uvicorn.server:serve - Finished server process [97245]
INFO     2024-02-20 17:01:49.510 request id: app - uvicorn.server:serve - Started server process [97335]
INFO     2024-02-20 17:01:49.511 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:01:49.512 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:01:50.416 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:01:52.467 request id: app - uvicorn.server:serve - Started server process [97370]
INFO     2024-02-20 17:01:52.468 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:01:52.469 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:01:57.007 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52026 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 17:01:57.348 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52026 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 17:02:26.157 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-20 17:02:26.433 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQyNTE0Nn0.0n8-uS22Y2HYIJjqXmK7PnVhqwF05b5Y_mY1vF-yw9g","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODQ0MTM0Nn0.jZa7O3kmKaIM2HzfAPE1Xlxqw9Bzlc9l8OOHNRZwk7A"},"links":null,"relationships":null,"timestamp":"2024-02-20 17:01:52"}'}
INFO     2024-02-20 17:02:26.435 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52028 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-20 17:03:03.668 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcb2fa50310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcb2fa503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcb30e0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcb30f62950>
           └ <SpawnProcess name='SpawnProcess-1' parent=97368 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcb30f61fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=97368 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcb30e58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=97368 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=97368 started>
    │    └ <function subprocess_started at 0x7fcb30392440>
    └ <SpawnProcess name='SpawnProcess-1' parent=97368 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcb30e58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcb30391900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcb30e58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcb307aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcb307aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcb307abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcb30dfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcb25975c90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcb25975c90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcb25975c90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcb25975c90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcb3025c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcb3025c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcb30e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcb2f62ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcb30e59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcb25ab9810>
          └ <fastapi.applications.FastAPI object at 0x7fcb2f62ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcb25976470>
                     │    └ <function error_handle_business at 0x7fcb2f4bf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcb25ab9810>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_single_data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcb2e36ff40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcb25abb550>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcb25ab9810>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcb2e36ff40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcb25ab86a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcb25abb550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcb2e36feb0>
                     │    │             └ <starlette.requests.Request object at 0x7fcb25977bb0>
                     │    └ <function process_middleware_common at 0x7fcb2f4bf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcb25ab86a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcb25977bb0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcb2e36feb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_single_data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcb2fa50a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcb2f5bc7c0>
          │    │   │      └ <starlette.requests.Request object at 0x7fcb25977bb0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcb25bf8bb0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcb25ab86a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcb259060e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcb25bfafe0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcb25bf8bb0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcb259060e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcb2f4ae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcb25bfafe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcb259060e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcb2f5fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcb25aea3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcb259060e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcb259765f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcb25904160>
          └ <fastapi.routing.APIRoute object at 0x7fcb25aea3b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcb2e3af400>
                     └ <function get_request_handler.<locals>.app at 0x7fcb259040d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcb2f5fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7fcb25bc81f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fcb25aea470>
                 └ <function run_in_threadpool at 0x7fcb2ff4add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fcb25bc81f0>, item_id='f336c507-57dd-5cc3-9d89-09855be2b31a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fcb25bb06c0>
                 │     │         └ <function run_sync at 0x7fcb3000d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fcb3000c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'PostgreSQLDB' object has no attribute 'get_single_data'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7fcb25bc81f0>, item_id='f336c507-57dd-5cc3-9d89-09855be2b31a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fcb25bb06c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fcb25be3180>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 73, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                └ <function ResourceService.download_resource at 0x7fcb27f37490>
                └ <app.src.services.resource_service.ResourceService object at 0x7fcb2c7d7100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 59, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, item_id).key
             │    │            │                                 │      │         └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
             │    │            │                                 │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                                 └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcb2c809270>
             │    └ <app.src.services.base_service.BaseService object at 0x7fcb2c7d7130>
             └ <app.src.services.resource_service.ResourceService object at 0x7fcb2c7d7100>

AttributeError: 'PostgreSQLDB' object has no attribute 'get_single_data'
INFO     2024-02-20 17:03:03.685 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41184 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-20 17:08:50.577 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:08:50.702 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:08:50.705 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:08:50.707 request id: app - uvicorn.server:serve - Finished server process [97370]
INFO     2024-02-20 17:08:51.662 request id: app - uvicorn.server:serve - Started server process [100041]
INFO     2024-02-20 17:08:51.663 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:08:51.664 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:08:59.595 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:08:59.696 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:08:59.698 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:08:59.699 request id: app - uvicorn.server:serve - Finished server process [100041]
INFO     2024-02-20 17:09:00.617 request id: app - uvicorn.server:serve - Started server process [100100]
INFO     2024-02-20 17:09:00.620 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:09:00.625 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:09:15.687 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:09:15.788 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:09:15.789 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:09:15.790 request id: app - uvicorn.server:serve - Finished server process [100100]
INFO     2024-02-20 17:09:16.779 request id: app - uvicorn.server:serve - Started server process [100209]
INFO     2024-02-20 17:09:16.780 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:09:16.781 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:09:33.050 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:09:33.152 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:09:33.152 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:09:33.153 request id: app - uvicorn.server:serve - Finished server process [100209]
INFO     2024-02-20 17:09:34.058 request id: app - uvicorn.server:serve - Started server process [100336]
INFO     2024-02-20 17:09:34.059 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:09:34.060 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:09:34.562 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:09:36.517 request id: app - uvicorn.server:serve - Started server process [100346]
INFO     2024-02-20 17:09:36.519 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:09:36.519 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 17:09:41.450 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f193edec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f193edec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f194020bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f194035e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=100344 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f194035dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=100344 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1940254100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=100344 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=100344 started>
    │    └ <function subprocess_started at 0x7f193f766440>
    └ <SpawnProcess name='SpawnProcess-1' parent=100344 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1940254220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f193f765900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1940254220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f193fba6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f193fba63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f193fba7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f19401f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1934a89c30>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1934a89c30>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1934a89c30>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1934a89c30>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f193f624550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f193f6245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1940255f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f193e9c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1940255f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1934bc9870>
          └ <fastapi.applications.FastAPI object at 0x7f193e9c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1934a4ada0>
                     │    └ <function error_handle_business at 0x7f193e85b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1934bc9870>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'db_session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1934a1a050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1934bcb5b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1934bc9870>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1934a1a050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1934bc8700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1934bcb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1934a1a0e0>
                     │    │             └ <starlette.requests.Request object at 0x7f1934a4a140>
                     │    └ <function process_middleware_common at 0x7f193e85b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1934bc8700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1934a4a140>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1934a1a0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'db_session'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f193edeca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f193e9587c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f1934a4a140>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1934d00c10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1934bc8700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1934a1af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1934d03040>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1934d00c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1934a1af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f193e84a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1934d03040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1934a1af80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f193e9964d0>
          └ <fastapi.routing.APIRoute object at 0x7f1934bfa410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1934a1af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1934a4a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1934a18160>
          └ <fastapi.routing.APIRoute object at 0x7f1934bfa410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1934a8a6b0>
                     └ <function get_request_handler.<locals>.app at 0x7f1934a180d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f193e997130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7f1934cd41f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f1934bfa4d0>
                 └ <function run_in_threadpool at 0x7f193f2f2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f1934cd41f0>, item_id='f336c507-57dd-5cc3-9d89-09855be2b31a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1934a7bac0>
                 │     │         └ <function run_sync at 0x7f193f3b5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f193f3b4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'PostgreSQLDB' object has no attribute 'db_session'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f1934cd41f0>, item_id='f336c507-57dd-5cc3-9d89-09855be2b31a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1934a7bac0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1934a8e080>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 73, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                └ <function ResourceService.download_resource at 0x7f193652b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7f193c1cb100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 59, in download_resource
    resource = self.file_repository.get(self.base_service.engine_postgresql.db_session, item_id)
               │    │               │   │    │            │                             └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
               │    │               │   │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f193c1f92d0>
               │    │               │   │    └ <app.src.services.base_service.BaseService object at 0x7f193c1cb130>
               │    │               │   └ <app.src.services.resource_service.ResourceService object at 0x7f193c1cb100>
               │    │               └ <function BaseSQLRepository.get at 0x7f193ca2a200>
               │    └ <app.src.repositories.resource.FileRepository object at 0x7f1934c97910>
               └ <app.src.services.resource_service.ResourceService object at 0x7f193c1cb100>

AttributeError: 'PostgreSQLDB' object has no attribute 'db_session'
INFO     2024-02-20 17:09:41.469 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59522 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-20 17:10:24.125 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:10:24.227 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:10:24.227 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:10:24.228 request id: app - uvicorn.server:serve - Finished server process [100346]
INFO     2024-02-20 17:10:25.175 request id: app - uvicorn.server:serve - Started server process [100631]
INFO     2024-02-20 17:10:25.177 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:10:25.177 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:10:33.110 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:10:33.212 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:10:33.214 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:10:33.216 request id: app - uvicorn.server:serve - Finished server process [100631]
INFO     2024-02-20 17:10:34.213 request id: app - uvicorn.server:serve - Started server process [100684]
INFO     2024-02-20 17:10:34.215 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:10:34.215 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 17:10:36.043 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2f2a950310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f2f2a9503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2f2bd0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2f2be5e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=100344 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2f2be5dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=100344 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2f2bd54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=100344 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=100344 started>
    │    └ <function subprocess_started at 0x7f2f2b28e440>
    └ <SpawnProcess name='SpawnProcess-3' parent=100344 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2f2bd54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2f2b28d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2f2bd54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f2f2bb06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2f2bb063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2f2bb07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2f2bcf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f2f20799c90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f2f20799c90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f2f20799c90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f2f20799c90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2f2b15c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2f2b15c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2f2bd55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2f2a52ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2f2bd55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2f208d58d0>
          └ <fastapi.applications.FastAPI object at 0x7f2f2a52ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f2f2075ae00>
                     │    └ <function error_handle_business at 0x7f2f2a3bf250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2f208d58d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2f2072dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2f208d7610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f2f208d58d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f2f2072dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2f208d4760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f2f208d7610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2f2072e050>
                     │    │             └ <starlette.requests.Request object at 0x7f2f2075a1a0>
                     │    └ <function process_middleware_common at 0x7f2f2a3bf1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2f208d4760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f2f2075a1a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f2f2072e050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2f2a950a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2f2a4bc770>
          │    │   │      └ <starlette.requests.Request object at 0x7f2f2075a1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2f20814c70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f2f208d4760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2f2072eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2f208170a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f2f20814c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2f2072eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2f2a3ae2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f2f208170a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2f2072eef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f2f2a4fa4d0>
          └ <fastapi.routing.APIRoute object at 0x7f2f2090a470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f2f2072eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f2f2075a620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f2f2072c0d0>
          └ <fastapi.routing.APIRoute object at 0x7f2f2090a470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f2f2079a710>
                     └ <function get_request_handler.<locals>.app at 0x7f2f2072c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2f2a4fb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7f2f209e4160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f2f2090a530>
                 └ <function run_in_threadpool at 0x7f2f2ae4add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f2f209e4160>, item_id='f336c507-57dd-5cc3-9d89-09855be2b31a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f2f207942c0>
                 │     │         └ <function run_sync at 0x7f2f2af0d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f2f2af0c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f2f209e4160>, item_id='f336c507-57dd-5cc3-9d89-09855be2b31a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f2f207942c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f2f20796880>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 73, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                └ <function ResourceService.download_resource at 0x7f2f22537400>
                └ <app.src.services.resource_service.ResourceService object at 0x7f2f236cf100>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'item_id'
INFO     2024-02-20 17:10:36.061 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50760 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-20 17:11:28.353 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:11:28.455 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:11:28.456 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:11:28.456 request id: app - uvicorn.server:serve - Finished server process [100684]
INFO     2024-02-20 17:11:29.339 request id: app - uvicorn.server:serve - Started server process [101037]
INFO     2024-02-20 17:11:29.340 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:11:29.341 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:11:42.896 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:11:42.998 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:11:42.999 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:11:42.999 request id: app - uvicorn.server:serve - Finished server process [101037]
INFO     2024-02-20 17:15:58.012 request id: app - uvicorn.server:serve - Started server process [102836]
INFO     2024-02-20 17:15:58.013 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:15:58.014 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:16:01.328 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:21:36.065 request id: app - uvicorn.server:serve - Started server process [104853]
INFO     2024-02-20 17:21:36.067 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:21:36.067 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:21:38.726 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33950 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 422
INFO     2024-02-20 17:21:53.124 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43398 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 422
INFO     2024-02-20 17:22:55.227 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50124 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 422
INFO     2024-02-20 17:23:46.101 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:23:46.203 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:23:46.204 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:23:46.204 request id: app - uvicorn.server:serve - Finished server process [104853]
INFO     2024-02-20 17:23:47.094 request id: app - uvicorn.server:serve - Started server process [105654]
INFO     2024-02-20 17:23:47.095 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:23:47.096 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 17:23:52.264 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7faef60d4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7faef60d43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7faef750bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7faef765e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=104851 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7faef765dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=104851 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7faef7554100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=104851 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=104851 started>
    │    └ <function subprocess_started at 0x7faef6a4e440>
    └ <SpawnProcess name='SpawnProcess-2' parent=104851 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7faef7554220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7faef6a4d900>
    │    │                  └ <uvicorn.server.Server object at 0x7faef7554220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7faef72e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7faef72e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7faef72e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7faef74f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7faee7ed31c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7faee7ed31c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7faee7ed31c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7faee7ed31c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7faef690c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7faef690c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7faef7555f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7faef5caeb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7faef7555f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7faee7fb5960>
          └ <fastapi.applications.FastAPI object at 0x7faef5caeb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7faee7e36ec0>
                     │    └ <function error_handle_business at 0x7faef5b43250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7faee7fb5960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7faee7e09fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7faee7fb76a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7faee7fb5960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7faee7e09fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7faee7fb47f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7faee7fb76a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7faee7e0a050>
                     │    │             └ <starlette.requests.Request object at 0x7faee7e36260>
                     │    └ <function process_middleware_common at 0x7faef5b431c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7faee7fb47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7faee7e36260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7faee7e0a050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7faef60d4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7faef5c40720>
          │    │   │      └ <starlette.requests.Request object at 0x7faee7e36260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7faeec104d00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7faee7fb47f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faee7e0aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7faeec107130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7faeec104d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faee7e0aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7faef5b322f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7faeec107130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faee7e0aef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7faef5c7e4d0>
          └ <fastapi.routing.APIRoute object at 0x7faee7fe6500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7faee7e0aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7faee7e366e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7faee7e080d0>
          └ <fastapi.routing.APIRoute object at 0x7faee7fe6500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7faee7e7a7d0>
                     └ <function get_request_handler.<locals>.app at 0x7faee7e08040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7faef5c7f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7faee7e79de0>, 'resource_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7faeec0d8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7faee7fe65c0>
                 └ <function run_in_threadpool at 0x7faef65dadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7faeec0d8160>, db_session=<sqlalchemy.orm.session.Session object at 0x7faee7e7...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7faeefed7480>
                 │     │         └ <function run_sync at 0x7faef669d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7faef669c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not Resource')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7faee7...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7faee7e70d00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7faee7e734c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    return ResponseObject(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │              │                                                          │  │    │        └ <app.src.models.resource.Resource object at 0x7faef49af100>
           │              │                                                          │  │    └ <function basename at 0x7faef7772cb0>
           │              │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │              │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │              └ <app.src.models.resource.Resource object at 0x7faef49af100>
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ <app.src.models.resource.Resource object at 0x7faef49af100>
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not Resource
INFO     2024-02-20 17:23:52.280 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52836 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-20 17:25:41.673 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:25:41.777 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:25:41.777 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:25:41.778 request id: app - uvicorn.server:serve - Finished server process [105654]
INFO     2024-02-20 17:25:42.687 request id: app - uvicorn.server:serve - Started server process [106817]
INFO     2024-02-20 17:25:42.688 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:25:42.689 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:25:56.543 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:25:56.645 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:25:56.646 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:25:56.646 request id: app - uvicorn.server:serve - Finished server process [106817]
INFO     2024-02-20 17:25:57.702 request id: app - uvicorn.server:serve - Started server process [106906]
INFO     2024-02-20 17:25:57.704 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:25:57.705 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-20 17:26:10.356 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:26:10.460 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:26:10.462 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:26:10.465 request id: app - uvicorn.server:serve - Finished server process [106906]
INFO     2024-02-20 17:26:14.499 request id: app - uvicorn.server:serve - Started server process [107027]
INFO     2024-02-20 17:26:14.500 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-20 17:26:14.501 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-20 17:26:18.092 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcfe447c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcfe447c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcfe58c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcfe5a5e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=104851 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcfe5a5dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=104851 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcfe590c100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=104851 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=104851 started>
    │    └ <function subprocess_started at 0x7fcfe4d96440>
    └ <SpawnProcess name='SpawnProcess-6' parent=104851 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcfe590c220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcfe4d95900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcfe590c220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcfe51ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcfe51ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcfe51afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcfe58b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfda2ef1c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcfda2ef1c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcfda2ef1c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcfda2ef1c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcfe4c90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcfe4c905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfe590df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcfe4052b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcfe590df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfda3cd960>
          └ <fastapi.applications.FastAPI object at 0x7fcfe4052b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcfda252ec0>
                     │    └ <function error_handle_business at 0x7fcfe3ee3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfda3cd960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfda221fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfda3cf6a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcfda3cd960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcfda221fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfda3cc7f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcfda3cf6a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfda222050>
                     │    │             └ <starlette.requests.Request object at 0x7fcfda252260>
                     │    └ <function process_middleware_common at 0x7fcfe3ee31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfda3cc7f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcfda252260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcfda222050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcfe447ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcfe3fe4900>
          │    │   │      └ <starlette.requests.Request object at 0x7fcfda252260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfda310d00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcfda3cc7f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfda222ef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfda313130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcfda310d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfda222ef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcfe3ed22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcfda313130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfda222ef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcfe40224d0>
          └ <fastapi.routing.APIRoute object at 0x7fcfda402500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcfda222ef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcfda2526e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcfda2200d0>
          └ <fastapi.routing.APIRoute object at 0x7fcfda402500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcfda2927d0>
                     └ <function get_request_handler.<locals>.app at 0x7fcfda220040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcfe4023130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fcfda291de0>, 'resource_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7fcfda4e0160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fcfda4025c0>
                 └ <function run_in_threadpool at 0x7fcfe497edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fcfda4e0160>, db_session=<sqlalchemy.orm.session.Session object at 0x7fcfda29...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fcfda783640>
                 │     │         └ <function run_sync at 0x7fcfe4a41090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fcfe4a40820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not Resource')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fcfda...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fcfda27b0c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fcfda28b300>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return FileResponse(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │            │                                                          │  │    │        └ <app.src.models.resource.Resource object at 0x7fcfe2d63100>
           │            │                                                          │  │    └ <function basename at 0x7fcfe5b72cb0>
           │            │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │            │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │            └ <app.src.models.resource.Resource object at 0x7fcfe2d63100>
           └ <class 'starlette.responses.FileResponse'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ <app.src.models.resource.Resource object at 0x7fcfe2d63100>
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not Resource
INFO     2024-02-20 17:26:18.107 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37712 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-20 17:29:07.872 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53008 - "GET /download/123 HTTP/1.1" 404
INFO     2024-02-20 17:30:26.603 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33388 - "GET /docs HTTP/1.1" 200
INFO     2024-02-20 17:30:26.945 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33388 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-20 17:30:43.416 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-20 17:30:43.518 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-20 17:30:43.520 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-20 17:30:43.522 request id: app - uvicorn.server:serve - Finished server process [107027]
INFO     2024-02-22 12:57:18.635 request id: app - uvicorn.server:serve - Started server process [1058970]
INFO     2024-02-22 12:57:18.636 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 12:57:18.636 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 12:57:19.714 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35662 - "GET / HTTP/1.1" 404
INFO     2024-02-22 12:57:24.090 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35662 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 12:57:24.323 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35662 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-22 12:57:28.287 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35662 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 12:57:28.422 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35662 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-22 12:58:13.743 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc3ee470310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc3ee4703a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc3ef8c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc3efa5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc3efa5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc3ef90c100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1058968 started>
    │    └ <function subprocess_started at 0x7fc3eed96440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc3ef90c220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc3eed95900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc3ef90c220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc3ef1ae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc3ef1ae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc3ef1afeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc3ef8b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc3e42efc70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc3e42efc70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc3e42efc70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc3e42efc70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc3eec90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc3eec905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc3ef90df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc3ee04eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc3ef90df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3e43d9930>
          └ <fastapi.applications.FastAPI object at 0x7fc3ee04eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc3eccab250>
                     │    └ <function error_handle_business at 0x7fc3edee3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3e43d9930>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc3e42b1090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3e43db670>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc3e43d9930>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc3e42b1090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3e43d87c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc3e43db670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc3e42b15a0>
                     │    │             └ <starlette.requests.Request object at 0x7fc3e429b880>
                     │    └ <function process_middleware_common at 0x7fc3edee31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3e43d87c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc3e429b880>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc3e42b15a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc3ee470a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc3edfdca90>
          │    │   │      └ <starlette.requests.Request object at 0x7fc3e429b880>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc3e431ccd0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc3e43d87c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3e42b1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc3e431f100>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc3e431ccd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3e42b1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc3eded22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc3e431f100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3e42b1990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc3ee01e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fc3e42124d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc3e42b1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc3e4298cd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc3e422c160>
          └ <fastapi.routing.APIRoute object at 0x7fc3e42124d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc3e429b610>
                     └ <function get_request_handler.<locals>.app at 0x7fc3e422c0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc3ee01f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fc3e429bc10>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fc3e44e81f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc3e4212590>
                 └ <function run_in_threadpool at 0x7fc3ee96add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fc3e44e81f0>, db_session=<sqlalchemy.orm.session.Session object at 0x7fc3e429...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc3e42673c0>
                 │     │         └ <function run_sync at 0x7fc3eea2d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc3eea2c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not Resource')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fc3e4...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc3e488e600>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc3e4265080>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return FileResponse(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │            │                                                          │  │    │        └ <app.src.models.resource.Resource object at 0x7fc3eccabc40>
           │            │                                                          │  │    └ <function basename at 0x7fc3efb72cb0>
           │            │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │            │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │            └ <app.src.models.resource.Resource object at 0x7fc3eccabc40>
           └ <class 'starlette.responses.FileResponse'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ <app.src.models.resource.Resource object at 0x7fc3eccabc40>
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not Resource
INFO     2024-02-22 12:58:13.767 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35672 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 12:59:41.090 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 12:59:41.191 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 12:59:41.192 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 12:59:41.193 request id: app - uvicorn.server:serve - Finished server process [1058970]
INFO     2024-02-22 12:59:42.222 request id: app - uvicorn.server:serve - Started server process [1060232]
INFO     2024-02-22 12:59:42.223 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 12:59:42.224 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:00:03.701 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:00:03.803 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:00:03.804 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:00:03.805 request id: app - uvicorn.server:serve - Finished server process [1060232]
INFO     2024-02-22 13:00:04.760 request id: app - uvicorn.server:serve - Started server process [1060386]
INFO     2024-02-22 13:00:04.762 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:00:04.762 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:00:09.541 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2803c08310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f2803c083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f280500fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2805162950>
           └ <SpawnProcess name='SpawnProcess-3' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2805161fc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2805058100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1058968 started>
    │    └ <function subprocess_started at 0x7f2804576440>
    └ <SpawnProcess name='SpawnProcess-3' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2805058220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2804575900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2805058220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f28049aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f28049aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f28049abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2804ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f27f9a89c60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f27f9a89c60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f27f9a89c60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f27f9a89c60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f280443c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f280443c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2805059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f28037deb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2805059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f27f9bc58a0>
          └ <fastapi.applications.FastAPI object at 0x7f28037deb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f27f9a46dd0>
                     │    └ <function error_handle_business at 0x7f280366f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f27f9bc58a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f27f9a19fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f27f9bc75e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f27f9bc58a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f27f9a19fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f27f9bc4730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f27f9bc75e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f27f9a1a050>
                     │    │             └ <starlette.requests.Request object at 0x7f27f9a46170>
                     │    └ <function process_middleware_common at 0x7f280366f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f27f9bc4730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f27f9a46170>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f27f9a1a050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2803c08a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f280377c4a0>
          │    │   │      └ <starlette.requests.Request object at 0x7f27f9a46170>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f27f9d00c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f27f9bc4730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f27f9a1aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f27f9d03070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f27f9d00c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f27f9a1aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f280365e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f27f9d03070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f27f9a1aef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f28037ae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f27f9bf6440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f27f9a1aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f27f9a465f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f27f9a180d0>
          └ <fastapi.routing.APIRoute object at 0x7f27f9bf6440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f27f9a8a6e0>
                     └ <function get_request_handler.<locals>.app at 0x7f27f9a18040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f28037af130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f27f9cd8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f27f9bf6500>
                 └ <function run_in_threadpool at 0x7f280410add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f27f9cd8160>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f27f9a80300>
                 │     │         └ <function run_sync at 0x7f28041cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f28041cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f27f9cd8160>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f27f9a80300>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f27f9a82a00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7f27fbb2b400>
                └ <app.src.services.resource_service.ResourceService object at 0x7f2800a00040>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'item_id'
INFO     2024-02-22 13:00:09.563 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43278 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:00:23.831 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:00:23.933 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:00:23.934 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:00:23.935 request id: app - uvicorn.server:serve - Finished server process [1060386]
INFO     2024-02-22 13:00:24.874 request id: app - uvicorn.server:serve - Started server process [1060501]
INFO     2024-02-22 13:00:24.875 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:00:24.876 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:00:35.314 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:00:35.417 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:00:35.418 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:00:35.419 request id: app - uvicorn.server:serve - Finished server process [1060501]
INFO     2024-02-22 13:00:36.411 request id: app - uvicorn.server:serve - Started server process [1060581]
INFO     2024-02-22 13:00:36.412 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:00:36.412 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:00:45.049 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:00:45.150 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:00:45.151 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:00:45.152 request id: app - uvicorn.server:serve - Finished server process [1060581]
INFO     2024-02-22 13:00:46.073 request id: app - uvicorn.server:serve - Started server process [1060658]
INFO     2024-02-22 13:00:46.075 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:00:46.075 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:00:47.130 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7ff9ad310310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7ff9ad3103a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7ff9ae70bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7ff9ae85e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7ff9ae85dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7ff9ae754100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=1058968 started>
    │    └ <function subprocess_started at 0x7ff9adc72440>
    └ <SpawnProcess name='SpawnProcess-6' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7ff9ae754220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7ff9adc71900>
    │    │                  └ <uvicorn.server.Server object at 0x7ff9ae754220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7ff9ae506440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7ff9ae5063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7ff9ae507eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7ff9ae6f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7ff99f181c60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7ff99f181c60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7ff99f181c60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7ff99f181c60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7ff9adb3c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7ff9adb3c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff9ae755f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7ff9aceeeb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7ff9ae755f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff99f2c18a0>
          └ <fastapi.applications.FastAPI object at 0x7ff9aceeeb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7ff99f13edd0>
                     │    └ <function error_handle_business at 0x7ff9acd83250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff99f2c18a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff99f10dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff99f2c35e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7ff99f2c18a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7ff99f10dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff99f2c0730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7ff99f2c35e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff99f10e050>
                     │    │             └ <starlette.requests.Request object at 0x7ff99f13e170>
                     │    └ <function process_middleware_common at 0x7ff9acd831c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff99f2c0730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7ff99f13e170>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7ff99f10e050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7ff9ad310a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7ff9ace807c0>
          │    │   │      └ <starlette.requests.Request object at 0x7ff99f13e170>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff99f200c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7ff99f2c0730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff99f10eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff99f203070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7ff99f200c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff99f10eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7ff9acd722f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7ff99f203070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff99f10eef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7ff9acebe4d0>
          └ <fastapi.routing.APIRoute object at 0x7ff99f2ee440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7ff99f10eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7ff99f13e5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7ff99f10c0d0>
          └ <fastapi.routing.APIRoute object at 0x7ff99f2ee440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7ff99f1826e0>
                     └ <function get_request_handler.<locals>.app at 0x7ff99f10c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7ff9acebf130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7ff99f3d4160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7ff99f2ee500>
                 └ <function run_in_threadpool at 0x7ff9ad812dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7ff99f3d4160>, resource_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7ff99f169e00>
                 │     │         └ <function run_sync at 0x7ff9ad8d5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7ff9ad8d4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'item_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7ff99f3d4160>, resource_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7ff99f169e00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7ff99f17e600>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(resource_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7ff9a4b3f400>
                └ <app.src.services.resource_service.ResourceService object at 0x7ff9a6014040>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'item_id'
INFO     2024-02-22 13:00:47.148 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48208 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:01:22.719 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:01:22.822 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:01:22.824 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:01:22.826 request id: app - uvicorn.server:serve - Finished server process [1060658]
INFO     2024-02-22 13:03:41.512 request id: app - uvicorn.server:serve - Started server process [1061857]
INFO     2024-02-22 13:03:41.513 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:03:41.514 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:03:45.167 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fec47bac310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fec47bac3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fec4900fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fec49162950>
           └ <SpawnProcess name='SpawnProcess-10' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fec49161fc0>
    └ <SpawnProcess name='SpawnProcess-10' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fec49058100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=1058968 started>
    │    └ <function subprocess_started at 0x7fec48526440>
    └ <SpawnProcess name='SpawnProcess-10' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fec49058220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fec48525900>
    │    │                  └ <uvicorn.server.Server object at 0x7fec49058220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fec48db6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fec48db63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fec48db7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fec48ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fec3dae71c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fec3dae71c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fec3dae71c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fec3dae71c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fec483e0550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fec483e05e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fec49059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fec47782b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fec49059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fec3dbc5960>
          └ <fastapi.applications.FastAPI object at 0x7fec47782b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fec3da4aec0>
                     │    └ <function error_handle_business at 0x7fec47613250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fec3dbc5960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fec3da1dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fec3dbc76a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fec3dbc5960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fec3da1dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fec3dbc47f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fec3dbc76a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fec3da1e050>
                     │    │             └ <starlette.requests.Request object at 0x7fec3da4a260>
                     │    └ <function process_middleware_common at 0x7fec476131c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fec3dbc47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fec3da4a260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fec3da1e050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fec47baca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fec47714770>
          │    │   │      └ <starlette.requests.Request object at 0x7fec3da4a260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fec3dd04d00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fec3dbc47f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fec3da1eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fec3dd07130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fec3dd04d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fec3da1eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fec476022f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fec3dd07130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fec3da1eef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fec477524d0>
          └ <fastapi.routing.APIRoute object at 0x7fec3dbf6500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fec3da1eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fec3da4a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fec3da1c0d0>
          └ <fastapi.routing.APIRoute object at 0x7fec3dbf6500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fec3da8a7d0>
                     └ <function get_request_handler.<locals>.app at 0x7fec3da1c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fec47753130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fec3da89de0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fec3dcd8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fec3dbf65c0>
                 └ <function run_in_threadpool at 0x7fec480aedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fec3dcd8160>, db_session=<sqlalchemy.orm.session.Session object at 0x7fec3da8...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fec3da51700>
                 │     │         └ <function run_sync at 0x7fec48171090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fec48170820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not Resource')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fec3d...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fec3da80a80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fec3da83100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return FileResponse(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │            │                                                          │  │    │        └ <app.src.models.resource.Resource object at 0x7fec46497100>
           │            │                                                          │  │    └ <function basename at 0x7fec49b76cb0>
           │            │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │            │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │            └ <app.src.models.resource.Resource object at 0x7fec46497100>
           └ <class 'starlette.responses.FileResponse'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ <app.src.models.resource.Resource object at 0x7fec46497100>
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not Resource
INFO     2024-02-22 13:03:45.183 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60782 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:04:04.304 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:04:04.406 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:04:04.407 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:04:04.408 request id: app - uvicorn.server:serve - Finished server process [1061857]
INFO     2024-02-22 13:04:05.320 request id: app - uvicorn.server:serve - Started server process [1062022]
INFO     2024-02-22 13:04:05.322 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:04:05.322 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:04:12.664 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f21b446c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f21b446c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f21b58c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f21b5a62950>
           └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f21b5a61fc0>
    └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f21b5910100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
    │    └ <function subprocess_started at 0x7f21b4d9a440>
    └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f21b5910220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f21b4d99900>
    │    │                  └ <uvicorn.server.Server object at 0x7f21b5910220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f21b51b2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f21b51b23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f21b51b3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f21b5103250>
    └ <Handle <TaskStepMethWrapper object at 0x7f21aa2f6440>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f21aa2f6440>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f21aa2f6440>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f21aa2f6440>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f21b4c94550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f21b4c945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f21b5911f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f21b4046b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f21b5911f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f21aa3d5960>
          └ <fastapi.applications.FastAPI object at 0x7f21b4046b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f21aa25aec0>
                     │    └ <function error_handle_business at 0x7f21b3edb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f21aa3d5960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f21aa22dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f21aa3d76a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f21aa3d5960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f21aa22dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f21aa3d47f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f21aa3d76a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f21aa22e050>
                     │    │             └ <starlette.requests.Request object at 0x7f21aa25a260>
                     │    └ <function process_middleware_common at 0x7f21b3edb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f21aa3d47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f21aa25a260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f21aa22e050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f21b446ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f21b3fd8810>
          │    │   │      └ <starlette.requests.Request object at 0x7f21aa25a260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f21aa318d00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f21aa3d47f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21aa22eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f21aa31b130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f21aa318d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21aa22eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f21b3eca2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f21aa31b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21aa22eef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f21b40164d0>
          └ <fastapi.routing.APIRoute object at 0x7f21aa406500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21aa22eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21aa25a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f21aa22c0d0>
          └ <fastapi.routing.APIRoute object at 0x7f21aa406500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f21aa29a7d0>
                     └ <function get_request_handler.<locals>.app at 0x7f21aa22c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f21b4017130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f21aa299de0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f21aa4e8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f21aa4065c0>
                 └ <function run_in_threadpool at 0x7f21b496edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f21aa4e8160>, db_session=<sqlalchemy.orm.session.Session object at 0x7f21aa29...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f21aa293040>
                 │     │         └ <function run_sync at 0x7f21b4a31090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f21b4a30820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not Resource')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f21aa...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f21aa282740>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f21aa292f40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return ResponseObject(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │              │                                                          │  │    │        └ <app.src.models.resource.Resource object at 0x7f21b2c5f100>
           │              │                                                          │  │    └ <function basename at 0x7f21b5b76cb0>
           │              │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │              │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │              └ <app.src.models.resource.Resource object at 0x7f21b2c5f100>
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ <app.src.models.resource.Resource object at 0x7f21b2c5f100>
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not Resource
INFO     2024-02-22 13:04:12.680 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37782 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
ERROR    2024-02-22 13:04:18.357 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f21b446c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f21b446c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f21b58c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f21b5a62950>
           └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f21b5a61fc0>
    └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f21b5910100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
    │    └ <function subprocess_started at 0x7f21b4d9a440>
    └ <SpawnProcess name='SpawnProcess-11' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f21b5910220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f21b4d99900>
    │    │                  └ <uvicorn.server.Server object at 0x7f21b5910220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f21b51b2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f21b51b23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f21b51b3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f21b5103250>
    └ <Handle <TaskStepMethWrapper object at 0x7f21b2c99420>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f21b2c99420>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f21b2c99420>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f21b2c99420>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f21b4c94550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f21b4c945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f21b5911f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f21b4046b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f21b5911f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f21aa3d5960>
          └ <fastapi.applications.FastAPI object at 0x7f21b4046b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f21b2c9b2e0>
                     │    └ <function error_handle_business at 0x7f21b3edb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f21aa3d5960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f21a96f2320>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f21aa3d76a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f21aa3d5960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f21a96f2320>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f21aa3d47f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f21aa3d76a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f21a96f23b0>
                     │    │             └ <starlette.requests.Request object at 0x7f21b2c9b550>
                     │    └ <function process_middleware_common at 0x7f21b3edb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f21aa3d47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f21b2c9b550>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f21a96f23b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not Resource')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f21b446ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f21b3fd8810>
          │    │   │      └ <starlette.requests.Request object at 0x7f21b2c9b550>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f21aa318d00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f21aa3d47f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21a96f25f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f21aa31b130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f21aa318d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21a96f25f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f21b3eca2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f21aa31b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21a96f25f0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f21b40164d0>
          └ <fastapi.routing.APIRoute object at 0x7f21aa406500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f21a96f25f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f21b2c9b010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f21aa22c0d0>
          └ <fastapi.routing.APIRoute object at 0x7f21aa406500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f21b2c9aec0>
                     └ <function get_request_handler.<locals>.app at 0x7f21aa22c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f21b4017130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f21b2c9b040>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f21aa4e8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f21aa4065c0>
                 └ <function run_in_threadpool at 0x7f21b496edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f21aa4e8160>, db_session=<sqlalchemy.orm.session.Session object at 0x7f21b2c9...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f21aa32b5c0>
                 │     │         └ <function run_sync at 0x7f21b4a31090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f21b4a30820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not Resource')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f21b2...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f21a970ddc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f21a970df80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return ResponseObject(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │              │                                                          │  │    │        └ <app.src.models.resource.Resource object at 0x7f21b2c99870>
           │              │                                                          │  │    └ <function basename at 0x7f21b5b76cb0>
           │              │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │              │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │              └ <app.src.models.resource.Resource object at 0x7f21b2c99870>
           └ <class 'app.src.schemas.response.ResponseObject'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ <app.src.models.resource.Resource object at 0x7f21b2c99870>
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not Resource
INFO     2024-02-22 13:04:18.372 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37798 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:05:14.702 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:05:14.803 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:05:14.805 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:05:14.805 request id: app - uvicorn.server:serve - Finished server process [1062022]
INFO     2024-02-22 13:05:15.799 request id: app - uvicorn.server:serve - Started server process [1062458]
INFO     2024-02-22 13:05:15.800 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:05:15.801 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:05:23.442 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f9b8be8c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f9b8be8c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f9b8d30bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f9b8d45e950>
           └ <SpawnProcess name='SpawnProcess-12' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f9b8d45dfc0>
    └ <SpawnProcess name='SpawnProcess-12' parent=1058968 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f9b8d354100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-12' parent=1058968 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-12' parent=1058968 started>
    │    └ <function subprocess_started at 0x7f9b8c78e440>
    └ <SpawnProcess name='SpawnProcess-12' parent=1058968 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f9b8d354220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f9b8c78d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f9b8d354220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f9b8cba6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f9b8cba63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f9b8cba7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f9b8d2f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f9b81dc31c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f9b81dc31c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f9b81dc31c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f9b81dc31c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f9b8c688550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f9b8c6885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9b8d355f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f9b8ba6ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f9b8d355f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9b81ea5960>
          └ <fastapi.applications.FastAPI object at 0x7f9b8ba6ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f9b81d22ec0>
                     │    └ <function error_handle_business at 0x7f9b8b8ff250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9b81ea5960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'Resource' object has no attribute 'file_path'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9b81ef9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9b81ea76a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f9b81ea5960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f9b81ef9fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9b81ea47f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f9b81ea76a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9b81efa050>
                     │    │             └ <starlette.requests.Request object at 0x7f9b81d22260>
                     │    └ <function process_middleware_common at 0x7f9b8b8ff1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9b81ea47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f9b81d22260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f9b81efa050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'Resource' object has no attribute 'file_path'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f9b8be8ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f9b8b9fc860>
          │    │   │      └ <starlette.requests.Request object at 0x7f9b81d22260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9b81fe8d00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f9b81ea47f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b81efaef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9b81feb130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f9b81fe8d00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b81efaef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f9b8b8ee2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f9b81feb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b81efaef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f9b8ba3a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f9b81ed6500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f9b81efaef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f9b81d226e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f9b81ef80d0>
          └ <fastapi.routing.APIRoute object at 0x7f9b81ed6500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f9b81d667d0>
                     └ <function get_request_handler.<locals>.app at 0x7f9b81ef8040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f9b8ba3b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f9b81d65de0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f9b81fbc160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f9b81ed65c0>
                 └ <function run_in_threadpool at 0x7f9b8c38edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f9b81fbc160>, db_session=<sqlalchemy.orm.session.Session object at 0x7f9b81d6...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f9b81d5f180>
                 │     │         └ <function run_sync at 0x7f9b8c451090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f9b8c450820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'Resource' object has no attribute 'file_path'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f9b81...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f9b81d5e880>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f9b81d5ef40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource.file_path() if hasattr(resource, 'file_path') else resource.file_path
                │                               │                           └ <app.src.models.resource.Resource object at 0x7f9b8a763100>
                │                               └ <app.src.models.resource.Resource object at 0x7f9b8a763100>
                └ <app.src.models.resource.Resource object at 0x7f9b8a763100>

AttributeError: 'Resource' object has no attribute 'file_path'
INFO     2024-02-22 13:05:23.456 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60120 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:07:20.507 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:07:20.608 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:07:20.609 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:07:20.609 request id: app - uvicorn.server:serve - Finished server process [1062458]
INFO     2024-02-22 13:07:21.524 request id: app - uvicorn.server:serve - Started server process [1063205]
INFO     2024-02-22 13:07:21.526 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:07:21.526 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:08:27.904 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:08:28.006 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:08:28.007 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:08:28.008 request id: app - uvicorn.server:serve - Finished server process [1063205]
INFO     2024-02-22 13:08:28.967 request id: app - uvicorn.server:serve - Started server process [1063607]
INFO     2024-02-22 13:08:28.968 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:08:28.969 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:08:43.825 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:13:20.390 request id: app - uvicorn.server:serve - Started server process [1065521]
INFO     2024-02-22 13:13:20.391 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:13:20.392 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:13:23.024 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa999e18310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa999e183a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa99b20fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa99b362950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa99b361fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa99b258100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1065499 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1065499 started>
    │    └ <function subprocess_started at 0x7fa99a776440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1065499 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa99b258220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa99a775900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa99b258220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa99abaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa99abaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa99ababeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa99b1fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa98bc7eaa0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa98bc7eaa0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa98bc7eaa0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa98bc7eaa0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa99a63c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa99a63c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa99b259f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa9999f2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa99b259f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa98bdb5960>
          └ <fastapi.applications.FastAPI object at 0x7fa9999f2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa98bc3aec0>
                     │    └ <function error_handle_business at 0x7fa999887250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa98bdb5960>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ NameError("name 'version' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa98bc0de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa98bdb76a0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa98bdb5960>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa98bc0de10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa98bdb47f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa98bdb76a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa98bc0dea0>
                     │    │             └ <starlette.requests.Request object at 0x7fa98bc3a260>
                     │    └ <function process_middleware_common at 0x7fa9998871c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa98bdb47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa98bc3a260>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa98bc0dea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ NameError("name 'version' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa999e18a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa999984540>
          │    │   │      └ <starlette.requests.Request object at 0x7fa98bc3a260>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa98befcd00>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa98bdb47f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa98bc0ed40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa98beff130>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa98befcd00>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa98bc0ed40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa9998762f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa98beff130>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa98bc0ed40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa9999c24d0>
          └ <fastapi.routing.APIRoute object at 0x7fa98bdee500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa98bc0ed40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa98bc3a6e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa98bde3eb0>
          └ <fastapi.routing.APIRoute object at 0x7fa98bdee500>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa98bc7e7d0>
                     └ <function get_request_handler.<locals>.app at 0x7fa98bde3e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa9999c3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa98bc7dde0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fa98be4ff40>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fa98bdee5c0>
                 └ <function run_in_threadpool at 0x7fa99a312dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fa98be4ff40>, db_session=<sqlalchemy.orm.session.Session object at 0x7fa98bc7...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fa98bc43080>
                 │     │         └ <function run_sync at 0x7fa99a3d5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fa99a3d4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=NameError("name 'version' is not defined")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fa98b...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fa98bc70e00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fa98bc73780>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id, version, filename)
                │                │                 │           └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7fa98bc7dde0>
                │                └ <function ResourceService.download_resource at 0x7fa991737250>
                └ <app.src.services.resource_service.ResourceService object at 0x7fa992c08040>

NameError: name 'version' is not defined
INFO     2024-02-22 13:13:23.041 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42408 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:13:41.578 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:13:41.680 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:13:41.682 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:13:41.685 request id: app - uvicorn.server:serve - Finished server process [1065521]
INFO     2024-02-22 13:13:42.664 request id: app - uvicorn.server:serve - Started server process [1065664]
INFO     2024-02-22 13:13:42.665 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:13:42.666 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:14:12.892 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:14:12.994 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:14:12.995 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:14:12.995 request id: app - uvicorn.server:serve - Finished server process [1065664]
INFO     2024-02-22 13:14:22.101 request id: app - uvicorn.server:serve - Started server process [1065921]
INFO     2024-02-22 13:14:22.103 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:14:22.104 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:14:26.482 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47420 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 13:14:26.763 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47420 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-22 13:14:39.132 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4ef1c08310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f4ef1c083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f4ef300fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4ef3162950>
           └ <SpawnProcess name='SpawnProcess-5' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4ef3161fc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4ef3058100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=1065499 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=1065499 started>
    │    └ <function subprocess_started at 0x7f4ef2576440>
    └ <SpawnProcess name='SpawnProcess-5' parent=1065499 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4ef3058220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4ef2575900>
    │    │                  └ <uvicorn.server.Server object at 0x7f4ef3058220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f4ef29aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f4ef29aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f4ef29abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f4ef2ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f4ee3969bd0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4ee3969bd0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4ee3969bd0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4ee3969bd0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4ef243c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4ef243c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4ef3059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4ef17deb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4ef3059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4ee3aad900>
          └ <fastapi.applications.FastAPI object at 0x7f4ef17deb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4ee3968e20>
                     │    └ <function error_handle_business at 0x7f4ef166f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4ee3aad900>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ NameError("name 'item_id' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4ee3902b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4ee3aaf640>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4ee3aad900>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4ee3902b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4ee3aac790>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4ee3aaf640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4ee3903010>
                     │    │             └ <starlette.requests.Request object at 0x7f4ee39680d0>
                     │    └ <function process_middleware_common at 0x7f4ef166f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4ee3aac790>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4ee39680d0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4ee3903010>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ NameError("name 'item_id' is not defined")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4ef1c08a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4ef1770770>
          │    │   │      └ <starlette.requests.Request object at 0x7f4ee39680d0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4ee3bf0ca0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4ee3aac790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4ee39855a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4ee3bf30d0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4ee3bf0ca0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4ee39855a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4ef165e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4ee3bf30d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4ee39855a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f4ef17ae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f4ee3ade4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4ee39855a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4ee396ab00>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4ee39000d0>
          └ <fastapi.routing.APIRoute object at 0x7f4ee3ade4a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4ee396a470>
                     └ <function get_request_handler.<locals>.app at 0x7f4ee3900040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4ef17af130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f4ee39692d0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f4ee3bc4160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f4ee3ade560>
                 └ <function run_in_threadpool at 0x7f4ef210add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f4ee3bc4160>, db_session=<sqlalchemy.orm.session.Session object at 0x7f4ee396...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f4ee3935140>
                 │     │         └ <function run_sync at 0x7f4ef21cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4ef21cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=NameError("name 'item_id' is not defined")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f4ee3...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f4ee3935dc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f4ee39362c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f4ee39692d0>
                │                └ <function ResourceService.download_resource at 0x7f4ee9727400>
                └ <app.src.services.resource_service.ResourceService object at 0x7f4eea9a8040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 59, in download_resource
    resource = self.file_repository.get(db_session, item_id)
               │    │               │   └ <sqlalchemy.orm.session.Session object at 0x7f4ee39692d0>
               │    │               └ <function BaseSQLRepository.get at 0x7f4eeb732200>
               │    └ <app.src.repositories.resource.FileRepository object at 0x7f4ee3b87910>
               └ <app.src.services.resource_service.ResourceService object at 0x7f4eea9a8040>

NameError: name 'item_id' is not defined
INFO     2024-02-22 13:14:39.151 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47424 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:15:00.449 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:15:00.551 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:15:00.552 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:15:00.552 request id: app - uvicorn.server:serve - Finished server process [1065921]
INFO     2024-02-22 13:15:01.511 request id: app - uvicorn.server:serve - Started server process [1066149]
INFO     2024-02-22 13:15:01.512 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:15:01.513 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:15:39.552 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:15:39.654 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:15:39.655 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:15:39.656 request id: app - uvicorn.server:serve - Finished server process [1066149]
INFO     2024-02-22 13:15:40.637 request id: app - uvicorn.server:serve - Started server process [1066406]
INFO     2024-02-22 13:15:40.638 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:15:40.639 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:15:44.185 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7febd3244310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7febd32443a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7febd460bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7febd475e950>
           └ <SpawnProcess name='SpawnProcess-7' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7febd475dfc0>
    └ <SpawnProcess name='SpawnProcess-7' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7febd4654100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1065499 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1065499 started>
    │    └ <function subprocess_started at 0x7febd3b8e440>
    └ <SpawnProcess name='SpawnProcess-7' parent=1065499 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7febd4654220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7febd3b8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7febd4654220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7febd3fa6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7febd3fa63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7febd3fa7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7febd45f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7febc8fea410>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7febc8fea410>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7febc8fea410>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7febc8fea410>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7febd3a58550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7febd3a585e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7febd4655f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7febd2e1ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7febd4655f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febc90c5930>
          └ <fastapi.applications.FastAPI object at 0x7febd2e1ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7febc8f4ae90>
                     │    └ <function error_handle_business at 0x7febd2cab250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febc90c5930>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 'get_object'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7febc8f1dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7febc90c7670>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7febc90c5930>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7febc8f1dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febc90c47c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7febc90c7670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7febc8f1e050>
                     │    │             └ <starlette.requests.Request object at 0x7febc8f4a230>
                     │    └ <function process_middleware_common at 0x7febd2cab1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febc90c47c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7febc8f4a230>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7febc8f1e050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 'get_object'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7febd3244a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7febd2dac630>
          │    │   │      └ <starlette.requests.Request object at 0x7febc8f4a230>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7febc9204cd0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7febc90c47c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febc8f1eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7febc9207100>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7febc9204cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febc8f1eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7febd2c9a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7febc9207100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febc8f1eef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7febd2dea4d0>
          └ <fastapi.routing.APIRoute object at 0x7febc90fa4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7febc8f1eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7febc8f4a6b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7febc8f1c0d0>
          └ <fastapi.routing.APIRoute object at 0x7febc90fa4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7febc8f8e7a0>
                     └ <function get_request_handler.<locals>.app at 0x7febc8f1c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7febd2deb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7febc8f8ddb0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7febc91d8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7febc90fa590>
                 └ <function run_in_threadpool at 0x7febd3746dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7febc91d8160>, db_session=<sqlalchemy.orm.session.Session object at 0x7febc8f8...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7febc8f83480>
                 │     │         └ <function run_sync at 0x7febd3809090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7febd3808820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'S3Storage' object has no attribute 'get_object'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7febc8...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7febc8f80a80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7febc8f83300>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7febc8f8ddb0>
                │                └ <function ResourceService.download_resource at 0x7febcad2b400>
                └ <app.src.services.resource_service.ResourceService object at 0x7febcbf6f100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 62, in download_resource
    content = self.base_service.engine_s3.get_object(resource.key)
              │    │            │                    │        └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7febd0e22ca0>
              │    │            │                    └ <app.src.models.resource.Resource object at 0x7febd1b370d0>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7febcbf6f160>
              │    └ <app.src.services.base_service.BaseService object at 0x7febcbf6f130>
              └ <app.src.services.resource_service.ResourceService object at 0x7febcbf6f100>

AttributeError: 'S3Storage' object has no attribute 'get_object'
INFO     2024-02-22 13:15:44.203 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51328 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:16:58.346 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:16:58.447 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:16:58.448 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:16:58.449 request id: app - uvicorn.server:serve - Finished server process [1066406]
INFO     2024-02-22 13:16:59.409 request id: app - uvicorn.server:serve - Started server process [1066895]
INFO     2024-02-22 13:16:59.411 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:16:59.412 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:17:06.080 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f07ba4dc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f07ba4dc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f07bb90bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f07bba5e950>
           └ <SpawnProcess name='SpawnProcess-8' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f07bba5dfc0>
    └ <SpawnProcess name='SpawnProcess-8' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f07bb954100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=1065499 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=1065499 started>
    │    └ <function subprocess_started at 0x7f07bae52440>
    └ <SpawnProcess name='SpawnProcess-8' parent=1065499 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f07bb954220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f07bae51900>
    │    │                  └ <uvicorn.server.Server object at 0x7f07bb954220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f07bb6e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f07bb6e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f07bb6e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f07bb8f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f07b03e2410>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f07b03e2410>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f07b03e2410>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f07b03e2410>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f07bad10550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f07bad105e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f07bb955f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f07ba0b2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f07bb955f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f07b04bd930>
          └ <fastapi.applications.FastAPI object at 0x7f07ba0b2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f07b0342e90>
                     │    └ <function error_handle_business at 0x7f07b9f43250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f07b04bd930>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("S3Storage.put_object() missing 1 required positional argument: 'data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f07b0319fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f07b04bf670>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f07b04bd930>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f07b0319fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f07b04bc7c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f07b04bf670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f07b031a050>
                     │    │             └ <starlette.requests.Request object at 0x7f07b0342230>
                     │    └ <function process_middleware_common at 0x7f07b9f431c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f07b04bc7c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f07b0342230>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f07b031a050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("S3Storage.put_object() missing 1 required positional argument: 'data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f07ba4dca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f07ba044770>
          │    │   │      └ <starlette.requests.Request object at 0x7f07b0342230>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f07b05fccd0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f07b04bc7c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f07b031aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f07b05ff100>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f07b05fccd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f07b031aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f07b9f322f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f07b05ff100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f07b031aef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f07ba0824d0>
          └ <fastapi.routing.APIRoute object at 0x7f07b04f24d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f07b031aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f07b03426b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f07b03180d0>
          └ <fastapi.routing.APIRoute object at 0x7f07b04f24d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f07b038a7a0>
                     └ <function get_request_handler.<locals>.app at 0x7f07b0318040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f07ba083130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f07b0389db0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f07b05d0160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f07b04f2590>
                 └ <function run_in_threadpool at 0x7f07ba9dedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f07b05d0160>, db_session=<sqlalchemy.orm.session.Session object at 0x7f07b038...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f07b037b000>
                 │     │         └ <function run_sync at 0x7f07baaa1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f07baaa0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("S3Storage.put_object() missing 1 required positional argument: 'data'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f07b0...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f07b037a800>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f07b037aec0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f07b0389db0>
                │                └ <function ResourceService.download_resource at 0x7f07b1b23400>
                └ <app.src.services.resource_service.ResourceService object at 0x7f07b2f67100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 62, in download_resource
    content = self.base_service.engine_s3.put_object(resource.key)
              │    │            │         │          │        └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f07b8122ca0>
              │    │            │         │          └ <app.src.models.resource.Resource object at 0x7f07b8dc30d0>
              │    │            │         └ <function S3Storage.put_object at 0x7f07b1b23250>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f07b2f67160>
              │    └ <app.src.services.base_service.BaseService object at 0x7f07b2f67130>
              └ <app.src.services.resource_service.ResourceService object at 0x7f07b2f67100>

TypeError: S3Storage.put_object() missing 1 required positional argument: 'data'
INFO     2024-02-22 13:17:06.095 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36400 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:18:58.382 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:18:58.484 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:18:58.484 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:18:58.485 request id: app - uvicorn.server:serve - Finished server process [1066895]
INFO     2024-02-22 13:18:59.598 request id: app - uvicorn.server:serve - Started server process [1067637]
INFO     2024-02-22 13:18:59.599 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:18:59.600 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:19:27.800 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fa811fb4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fa811fb43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fa81340bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fa81355e950>
           └ <SpawnProcess name='SpawnProcess-9' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fa81355dfc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=1065499 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fa813454100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1065499 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1065499 started>
    │    └ <function subprocess_started at 0x7fa812922440>
    └ <SpawnProcess name='SpawnProcess-9' parent=1065499 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fa813454220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fa812921900>
    │    │                  └ <uvicorn.server.Server object at 0x7fa813454220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fa8131b2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fa8131b23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fa8131b3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fa8133f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fa803ed6410>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fa803ed6410>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fa803ed6410>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fa803ed6410>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fa8127e8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fa8127e85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa813455f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fa811b8ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fa813455f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa803fb5930>
          └ <fastapi.applications.FastAPI object at 0x7fa811b8ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fa803e36e90>
                     │    └ <function error_handle_business at 0x7fa811a1b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa803fb5930>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("S3Storage.download_file() missing 1 required positional argument: 'local_file_path'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa803e0dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa803fb7670>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fa803fb5930>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fa803e0dfc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa803fb47c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fa803fb7670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa803e0e050>
                     │    │             └ <starlette.requests.Request object at 0x7fa803e36230>
                     │    └ <function process_middleware_common at 0x7fa811a1b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa803fb47c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fa803e36230>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fa803e0e050>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("S3Storage.download_file() missing 1 required positional argument: 'local_file_path'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fa811fb4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fa811b1c720>
          │    │   │      └ <starlette.requests.Request object at 0x7fa803e36230>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa808104cd0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fa803fb47c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa803e0eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa808107100>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fa808104cd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa803e0eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fa811a0a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fa808107100>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa803e0eef0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fa811b5a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fa803fea4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fa803e0eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fa803e366b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fa803e0c0d0>
          └ <fastapi.routing.APIRoute object at 0x7fa803fea4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fa803e7a7a0>
                     └ <function get_request_handler.<locals>.app at 0x7fa803e0c040>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fa811b5b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fa803e79db0>, 'resource_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fa8080d8160>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fa803fea590>
                 └ <function run_in_threadpool at 0x7fa8124b6dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fa8080d8160>, db_session=<sqlalchemy.orm.session.Session object at 0x7fa803e7...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fa803e6f1c0>
                 │     │         └ <function run_sync at 0x7fa812579090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fa812578820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("S3Storage.download_file() missing 1 required positional argument: 'local_file_path'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fa803...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fa803e5efc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fa803e6f000>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7fa803e79db0>
                │                └ <function ResourceService.download_resource at 0x7fa80992b400>
                └ <app.src.services.resource_service.ResourceService object at 0x7fa80adc7100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 62, in download_resource
    content = self.base_service.engine_s3.download_file(resource.key)
              │    │            │         │             │        └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7fa80bc1eca0>
              │    │            │         │             └ <app.src.models.resource.Resource object at 0x7fa8108a30d0>
              │    │            │         └ <function S3Storage.download_file at 0x7fa80992b1c0>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fa80adc7160>
              │    └ <app.src.services.base_service.BaseService object at 0x7fa80adc7130>
              └ <app.src.services.resource_service.ResourceService object at 0x7fa80adc7100>

TypeError: S3Storage.download_file() missing 1 required positional argument: 'local_file_path'
INFO     2024-02-22 13:19:27.818 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40300 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:20:24.255 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:20:24.357 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:20:24.358 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:20:24.359 request id: app - uvicorn.server:serve - Finished server process [1067637]
INFO     2024-02-22 13:20:25.355 request id: app - uvicorn.server:serve - Started server process [1068188]
INFO     2024-02-22 13:20:25.356 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:20:25.356 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:20:28.669 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:20:28.770 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:20:28.771 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:20:28.772 request id: app - uvicorn.server:serve - Finished server process [1068188]
INFO     2024-02-22 13:20:29.803 request id: app - uvicorn.server:serve - Started server process [1068226]
INFO     2024-02-22 13:20:29.804 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:20:29.805 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:22:16.552 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:22:16.654 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:22:16.654 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:22:16.655 request id: app - uvicorn.server:serve - Finished server process [1068226]
INFO     2024-02-22 13:22:17.564 request id: app - uvicorn.server:serve - Started server process [1068877]
INFO     2024-02-22 13:22:17.565 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:22:17.566 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:23:21.704 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:23:21.806 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:23:21.807 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:23:21.807 request id: app - uvicorn.server:serve - Finished server process [1068877]
INFO     2024-02-22 13:23:23.006 request id: app - uvicorn.server:serve - Started server process [1069293]
INFO     2024-02-22 13:23:23.008 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:23:23.009 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:23:31.741 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:23:31.843 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:23:31.844 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:23:31.844 request id: app - uvicorn.server:serve - Finished server process [1069293]
INFO     2024-02-22 13:23:35.462 request id: app - uvicorn.server:serve - Started server process [1069384]
INFO     2024-02-22 13:23:35.463 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:23:35.464 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:23:41.488 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:23:41.590 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:23:41.591 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:23:41.592 request id: app - uvicorn.server:serve - Finished server process [1069384]
INFO     2024-02-22 13:23:42.528 request id: app - uvicorn.server:serve - Started server process [1069445]
INFO     2024-02-22 13:23:42.558 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:23:42.558 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:23:56.005 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:23:56.106 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:23:56.107 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:23:56.108 request id: app - uvicorn.server:serve - Finished server process [1069445]
INFO     2024-02-22 13:23:57.034 request id: app - uvicorn.server:serve - Started server process [1069558]
INFO     2024-02-22 13:23:57.036 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:23:57.036 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:24:00.950 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:24:01.053 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:24:01.055 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:24:01.057 request id: app - uvicorn.server:serve - Finished server process [1069558]
INFO     2024-02-22 13:24:02.062 request id: app - uvicorn.server:serve - Started server process [1069584]
INFO     2024-02-22 13:24:02.064 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:24:02.064 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:24:03.169 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:24:03.271 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:24:03.272 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:24:03.272 request id: app - uvicorn.server:serve - Finished server process [1069584]
INFO     2024-02-22 13:24:04.186 request id: app - uvicorn.server:serve - Started server process [1069596]
INFO     2024-02-22 13:24:04.188 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:24:04.188 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:24:23.566 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:24:23.668 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:24:23.668 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:24:23.669 request id: app - uvicorn.server:serve - Finished server process [1069596]
INFO     2024-02-22 13:24:24.610 request id: app - uvicorn.server:serve - Started server process [1069724]
INFO     2024-02-22 13:24:24.611 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:24:24.612 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:24:31.743 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:24:31.846 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:24:31.849 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:24:31.851 request id: app - uvicorn.server:serve - Finished server process [1069724]
INFO     2024-02-22 13:24:32.922 request id: app - uvicorn.server:serve - Started server process [1069787]
INFO     2024-02-22 13:24:32.923 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:24:32.924 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:24:43.565 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:24:43.668 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:24:43.670 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:24:43.672 request id: app - uvicorn.server:serve - Finished server process [1069787]
INFO     2024-02-22 13:24:44.663 request id: app - uvicorn.server:serve - Started server process [1069867]
INFO     2024-02-22 13:24:44.664 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:24:44.664 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:25:00.428 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:25:00.530 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:25:00.532 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:25:00.533 request id: app - uvicorn.server:serve - Finished server process [1069867]
INFO     2024-02-22 13:25:01.510 request id: app - uvicorn.server:serve - Started server process [1069983]
INFO     2024-02-22 13:25:01.511 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:25:01.511 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:25:10.144 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:25:10.245 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:25:10.246 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:25:10.247 request id: app - uvicorn.server:serve - Finished server process [1069983]
INFO     2024-02-22 13:25:11.171 request id: app - uvicorn.server:serve - Started server process [1070427]
INFO     2024-02-22 13:25:11.172 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:25:11.173 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:25:16.095 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:25:16.198 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:25:16.199 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:25:16.200 request id: app - uvicorn.server:serve - Finished server process [1070427]
INFO     2024-02-22 13:25:17.139 request id: app - uvicorn.server:serve - Started server process [1070542]
INFO     2024-02-22 13:25:17.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:25:17.141 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:25:27.182 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:25:27.283 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:25:27.284 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:25:27.284 request id: app - uvicorn.server:serve - Finished server process [1070542]
INFO     2024-02-22 13:25:41.183 request id: app - uvicorn.server:serve - Started server process [1070695]
INFO     2024-02-22 13:25:41.184 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:25:41.185 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:26:05.573 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:26:05.675 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:26:05.676 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:26:05.677 request id: app - uvicorn.server:serve - Finished server process [1070695]
INFO     2024-02-22 13:26:06.827 request id: app - uvicorn.server:serve - Started server process [1070858]
INFO     2024-02-22 13:26:06.828 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:26:06.829 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:26:14.563 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:26:14.665 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:26:14.667 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:26:14.669 request id: app - uvicorn.server:serve - Finished server process [1070858]
INFO     2024-02-22 13:26:15.782 request id: app - uvicorn.server:serve - Started server process [1070939]
INFO     2024-02-22 13:26:15.783 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:26:15.783 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:26:23.333 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37936 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 200
INFO     2024-02-22 13:27:06.082 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:27:06.184 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:27:06.185 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:27:06.185 request id: app - uvicorn.server:serve - Finished server process [1070939]
INFO     2024-02-22 13:27:09.099 request id: app - uvicorn.server:serve - Started server process [1071256]
INFO     2024-02-22 13:27:09.101 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:27:09.102 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:29:14.415 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:29:14.518 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-22 13:29:17.034 request id: app - uvicorn.server:serve - Finished server process [1071256]
INFO     2024-02-22 13:30:30.890 request id: app - uvicorn.server:serve - Started server process [1072794]
INFO     2024-02-22 13:30:30.891 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:30:30.892 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:30:34.180 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7dd2bac310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7dd2bac3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7dd400fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7dd4162950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7dd4161fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7dd4058100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1072792 started>
    │    └ <function subprocess_started at 0x7f7dd3496440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7dd4058220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7dd3495900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7dd4058220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7dd3db6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7dd3db63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7dd3db7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7dd3ffb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7dc899dc60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7dc899dc60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7dc899dc60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7dc899dc60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7dd3390550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7dd33905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7dd4059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7dd2786b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7dd4059f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7dc8ad58a0>
          └ <fastapi.applications.FastAPI object at 0x7f7dd2786b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7dc895add0>
                     │    └ <function error_handle_business at 0x7f7dd261b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7dc8ad58a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_single_data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7dc8929f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7dc8ad75e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7dc8ad58a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7dc8929f30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7dc8ad4730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7dc8ad75e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7dc8929fc0>
                     │    │             └ <starlette.requests.Request object at 0x7f7dc895a170>
                     │    └ <function process_middleware_common at 0x7f7dd261b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7dc8ad4730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7dc895a170>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7dc8929fc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'get_single_data'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7dd2baca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7dd2718770>
          │    │   │      └ <starlette.requests.Request object at 0x7f7dc895a170>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7dc8a1cc40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7dc8ad4730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7dc892ae60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7dc8a1f070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7dc8a1cc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7dc892ae60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7dd260a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7dc8a1f070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7dc892ae60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7dd27564d0>
          └ <fastapi.routing.APIRoute object at 0x7f7dc8b0a440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7dc892ae60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7dc895a5f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7dc8928040>
          └ <fastapi.routing.APIRoute object at 0x7f7dc8b0a440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7dc899e6e0>
                     └ <function get_request_handler.<locals>.app at 0x7f7dc8b07f40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7dd2757130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f7dc8bec0d0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f7dc8b0a500>
                 └ <function run_in_threadpool at 0x7f7dd30aedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f7dc8bec0d0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f7dc89842c0>
                 │     │         └ <function run_sync at 0x7f7dd3171090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f7dd3170820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'PostgreSQLDB' object has no attribute 'get_single_data'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f7dc8bec0d0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f7dc89842c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f7dc89969c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7f7dca73b370>
                └ <app.src.services.resource_service.ResourceService object at 0x7f7dcb9b4040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, item_id).key
             │    │            │                                 │      │         └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
             │    │            │                                 │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                                 └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f7dcb9bbaf0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f7dcb9b4070>
             └ <app.src.services.resource_service.ResourceService object at 0x7f7dcb9b4040>

AttributeError: 'PostgreSQLDB' object has no attribute 'get_single_data'
INFO     2024-02-22 13:30:34.204 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52312 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:32:45.292 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:32:45.394 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:32:45.395 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:32:45.395 request id: app - uvicorn.server:serve - Finished server process [1072794]
INFO     2024-02-22 13:33:56.629 request id: app - uvicorn.server:serve - Started server process [1074035]
INFO     2024-02-22 13:33:56.631 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:33:56.631 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:34:03.206 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f177a750310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f177a7503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f177bb0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f177bc5e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f177bc5dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f177bb54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1072792 started>
    │    └ <function subprocess_started at 0x7f177b08e440>
    └ <SpawnProcess name='SpawnProcess-3' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f177bb54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f177b08d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f177bb54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f177b906440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f177b9063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f177b907eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f177baf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1770489c30>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1770489c30>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1770489c30>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1770489c30>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f177af5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f177af5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f177bb55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f177a336b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f177bb55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f17705c5870>
          └ <fastapi.applications.FastAPI object at 0x7f177a336b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f177044ada0>
                     │    └ <function error_handle_business at 0x7f177a1cb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f17705c5870>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f177041a050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f17705c75b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f17705c5870>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f177041a050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17705c4700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f17705c75b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f177041a0e0>
                     │    │             └ <starlette.requests.Request object at 0x7f177044a140>
                     │    └ <function process_middleware_common at 0x7f177a1cb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17705c4700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f177044a140>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f177041a0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f177a750a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f177a2c87c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f177044a140>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1770700c10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f17705c4700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f177041af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1770703040>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1770700c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f177041af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f177a1ba2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1770703040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f177041af80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f177a3064d0>
          └ <fastapi.routing.APIRoute object at 0x7f17705f6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f177041af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f177044a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1770418160>
          └ <fastapi.routing.APIRoute object at 0x7f17705f6410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f177048a6b0>
                     └ <function get_request_handler.<locals>.app at 0x7f17704180d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f177a307130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f17706d01f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f17705f64d0>
                 └ <function run_in_threadpool at 0x7f177ac4add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f17706d01f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1770472240>
                 │     │         └ <function run_sync at 0x7f177ad0d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f177ad0c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f17706d01f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1770472240>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f17704827c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7f1771f2b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7f177346f100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, item_id).key
             │    │            │                 │               │      │         └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f1773483400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f17734a4cd0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f177346f130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f177346f100>

TypeError: PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given
INFO     2024-02-22 13:34:03.224 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53770 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:34:33.168 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:34:33.270 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:34:33.271 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:34:33.271 request id: app - uvicorn.server:serve - Finished server process [1074035]
INFO     2024-02-22 13:34:34.259 request id: app - uvicorn.server:serve - Started server process [1074277]
INFO     2024-02-22 13:34:34.261 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:34:34.261 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:34:35.552 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc5ba270310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc5ba2703a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc5bb6c3b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc5bb85e950>
           └ <SpawnProcess name='SpawnProcess-4' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc5bb85dfc0>
    └ <SpawnProcess name='SpawnProcess-4' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc5bb70c100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=1072792 started>
    │    └ <function subprocess_started at 0x7fc5bab96440>
    └ <SpawnProcess name='SpawnProcess-4' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc5bb70c220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc5bab95900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc5bb70c220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc5bafae440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc5bafae3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc5bafafeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc5bb6b3250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc5b009dc90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc5b009dc90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc5b009dc90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc5b009dc90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc5baa90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc5baa905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc5bb70df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc5b9e4eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc5bb70df30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc5b01d98d0>
          └ <fastapi.applications.FastAPI object at 0x7fc5b9e4eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc5b005ee00>
                     │    └ <function error_handle_business at 0x7fc5b9ce3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc5b01d98d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc5b002e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc5b01db610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc5b01d98d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc5b002e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc5b01d8760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc5b01db610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc5b002e0e0>
                     │    │             └ <starlette.requests.Request object at 0x7fc5b005e1a0>
                     │    └ <function process_middleware_common at 0x7fc5b9ce31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc5b01d8760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc5b005e1a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc5b002e0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc5ba270a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc5b9de0950>
          │    │   │      └ <starlette.requests.Request object at 0x7fc5b005e1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc5b0118c70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc5b01d8760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc5b002ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc5b011b0a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc5b0118c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc5b002ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc5b9cd22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc5b011b0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc5b002ef80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc5b9e1e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fc5b0012470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc5b002ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc5b005e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc5b002c160>
          └ <fastapi.routing.APIRoute object at 0x7fc5b0012470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc5b009e710>
                     └ <function get_request_handler.<locals>.app at 0x7fc5b002c0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc5b9e1f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fc5b02e41f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc5b0012530>
                 └ <function run_in_threadpool at 0x7fc5ba76add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fc5b02e41f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc5b006aa80>
                 │     │         └ <function run_sync at 0x7fc5ba82d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc5ba82c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7fc5b02e41f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc5b006aa80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc5b0096d80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7fc5b1b3f490>
                └ <app.src.services.resource_service.ResourceService object at 0x7fc5b2fdb100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource).key
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7fc5b2fef400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fc5b301b9a0>
             │    └ <app.src.services.base_service.BaseService object at 0x7fc5b2fdb130>
             └ <app.src.services.resource_service.ResourceService object at 0x7fc5b2fdb100>

TypeError: PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given
INFO     2024-02-22 13:34:35.568 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45404 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:34:47.214 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:34:47.316 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:34:47.317 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:34:47.317 request id: app - uvicorn.server:serve - Finished server process [1074277]
INFO     2024-02-22 13:34:48.314 request id: app - uvicorn.server:serve - Started server process [1074372]
INFO     2024-02-22 13:34:48.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:34:48.315 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:34:49.322 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f3c80d78310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f3c80d783a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f3c821c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f3c82362950>
           └ <SpawnProcess name='SpawnProcess-5' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f3c82361fc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f3c82210100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=1072792 started>
    │    └ <function subprocess_started at 0x7f3c8169e440>
    └ <SpawnProcess name='SpawnProcess-5' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f3c82210220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f3c8169d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f3c82210220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f3c81f76440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f3c81f763b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f3c81f77eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f3c81ec7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f3c76c7dc90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f3c76c7dc90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f3c76c7dc90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f3c76c7dc90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f3c81598550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f3c815985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3c82211f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f3c80956b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f3c82211f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3c76dbd8d0>
          └ <fastapi.applications.FastAPI object at 0x7f3c80956b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3c76c3ee00>
                     │    └ <function error_handle_business at 0x7f3c807eb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3c76dbd8d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3c76c12050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3c76dbf610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3c76dbd8d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3c76c12050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3c76dbc760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3c76dbf610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3c76c120e0>
                     │    │             └ <starlette.requests.Request object at 0x7f3c76c3e1a0>
                     │    └ <function process_middleware_common at 0x7f3c807eb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3c76dbc760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3c76c3e1a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3c76c120e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f3c80d78a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f3c808e88b0>
          │    │   │      └ <starlette.requests.Request object at 0x7f3c76c3e1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3c76efcc70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3c76dbc760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3c76c12f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3c76eff0a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3c76efcc70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3c76c12f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f3c807da2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3c76eff0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3c76c12f80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f3c809264d0>
          └ <fastapi.routing.APIRoute object at 0x7f3c76df2470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3c76c12f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3c76c3e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3c76c10160>
          └ <fastapi.routing.APIRoute object at 0x7f3c76df2470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3c76c7e710>
                     └ <function get_request_handler.<locals>.app at 0x7f3c76c100d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f3c80927130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f3c76ecc1f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f3c76df2530>
                 └ <function run_in_threadpool at 0x7f3c81272dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f3c76ecc1f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f3c76c74c00>
                 │     │         └ <function run_sync at 0x7f3c81335090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f3c81334820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f3c76ecc1f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f3c76c74c00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f3c76c76e00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7f3c7c93b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7f3c7db7f100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f3c7db93400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f3c7dbbb9a0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f3c7db7f130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f3c7db7f100>

TypeError: PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given
INFO     2024-02-22 13:34:49.338 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55216 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:35:36.805 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:35:36.908 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:35:36.909 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:35:36.909 request id: app - uvicorn.server:serve - Finished server process [1074372]
INFO     2024-02-22 13:35:37.870 request id: app - uvicorn.server:serve - Started server process [1074768]
INFO     2024-02-22 13:35:37.871 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:35:37.872 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:35:43.425 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f7f2db08310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f7f2db083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f7f2ef0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f7f2f05e950>
           └ <SpawnProcess name='SpawnProcess-6' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f7f2f05dfc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f7f2ef54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=1072792 started>
    │    └ <function subprocess_started at 0x7f7f2e472440>
    └ <SpawnProcess name='SpawnProcess-6' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f7f2ef54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f7f2e471900>
    │    │                  └ <uvicorn.server.Server object at 0x7f7f2ef54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f7f2ed06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f7f2ed063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f7f2ed07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f7f2eef7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7f1f971c90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7f1f971c90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7f1f971c90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7f1f971c90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f7f2e33c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f7f2e33c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7f2ef55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f7f2d6deb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f7f2ef55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f1fab18d0>
          └ <fastapi.applications.FastAPI object at 0x7f7f2d6deb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7f1f932e00>
                     │    └ <function error_handle_business at 0x7f7f2d56f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f1fab18d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7f1f902050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f1fab3610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7f1fab18d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7f1f902050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f1fab0760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7f1fab3610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7f1f9020e0>
                     │    │             └ <starlette.requests.Request object at 0x7f7f1f9321a0>
                     │    └ <function process_middleware_common at 0x7f7f2d56f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f1fab0760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7f1f9321a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7f1f9020e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f7f2db08a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f7f2d670680>
          │    │   │      └ <starlette.requests.Request object at 0x7f7f1f9321a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7f240f0c70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7f1fab0760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f1f902f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7f240f30a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7f240f0c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f1f902f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f7f2d55e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7f240f30a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f1f902f80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f7f2d6ae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f7f1fae6470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7f1f902f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7f1f932620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7f1f900160>
          └ <fastapi.routing.APIRoute object at 0x7f7f1fae6470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7f1f972710>
                     └ <function get_request_handler.<locals>.app at 0x7f7f1f9000d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f7f2d6af130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f7f240c01f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f7f1fae6530>
                 └ <function run_in_threadpool at 0x7f7f2e00add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f7f240c01f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f7f1f96a8c0>
                 │     │         └ <function run_sync at 0x7f7f2e0cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f7f2e0cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f7f240c01f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f7f1f96a8c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f7f1f96b080>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7f7f25333490>
                └ <app.src.services.resource_service.ResourceService object at 0x7f7f267d3100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(resource_id).key
             │    │            │                 │               └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f7f267e3400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f7f2680b970>
             │    └ <app.src.services.base_service.BaseService object at 0x7f7f267d3130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f7f267d3100>

TypeError: PostgreSQLDB.get_single_data() takes 1 positional argument but 2 were given
INFO     2024-02-22 13:35:43.442 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:32890 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:36:21.866 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:36:21.971 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:36:21.972 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:36:21.973 request id: app - uvicorn.server:serve - Finished server process [1074768]
INFO     2024-02-22 13:36:23.046 request id: app - uvicorn.server:serve - Started server process [1075043]
INFO     2024-02-22 13:36:23.059 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:36:23.060 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:36:26.173 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:36:26.275 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:36:26.276 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:36:26.277 request id: app - uvicorn.server:serve - Finished server process [1075043]
INFO     2024-02-22 13:36:27.234 request id: app - uvicorn.server:serve - Started server process [1075072]
INFO     2024-02-22 13:36:27.236 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:36:27.236 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:36:27.840 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:36:27.942 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:36:27.943 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:36:27.944 request id: app - uvicorn.server:serve - Finished server process [1075072]
INFO     2024-02-22 13:36:28.947 request id: app - uvicorn.server:serve - Started server process [1075086]
INFO     2024-02-22 13:36:28.948 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:36:28.948 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:36:32.988 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fcc64784310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fcc647843a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fcc65c0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fcc65d62950>
           └ <SpawnProcess name='SpawnProcess-9' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fcc65d61fc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fcc65c58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1072792 started>
    │    └ <function subprocess_started at 0x7fcc65096440>
    └ <SpawnProcess name='SpawnProcess-9' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fcc65c58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fcc65095900>
    │    │                  └ <uvicorn.server.Server object at 0x7fcc65c58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fcc65996440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fcc659963b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fcc65997eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fcc65be7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fcc5a56dc90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fcc5a56dc90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fcc5a56dc90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fcc5a56dc90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fcc64f90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fcc64f905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcc65c59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fcc6435eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fcc65c59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcc5a6ad8d0>
          └ <fastapi.applications.FastAPI object at 0x7fcc6435eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fcc5a52ee00>
                     │    └ <function error_handle_business at 0x7fcc641f3250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcc5a6ad8d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcc5a6fe050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcc5a6af610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fcc5a6ad8d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fcc5a6fe050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcc5a6ac760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fcc5a6af610>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcc5a6fe0e0>
                     │    │             └ <starlette.requests.Request object at 0x7fcc5a52e1a0>
                     │    └ <function process_middleware_common at 0x7fcc641f31c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcc5a6ac760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fcc5a52e1a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fcc5a6fe0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fcc64784a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fcc642f0860>
          │    │   │      └ <starlette.requests.Request object at 0x7fcc5a52e1a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcc5a7ecc70>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fcc5a6ac760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcc5a6fef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcc5a7ef0a0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fcc5a7ecc70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcc5a6fef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fcc641e22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fcc5a7ef0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcc5a6fef80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fcc6432e4d0>
          └ <fastapi.routing.APIRoute object at 0x7fcc5a6e2470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fcc5a6fef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fcc5a52e620>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fcc5a6fc160>
          └ <fastapi.routing.APIRoute object at 0x7fcc5a6e2470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fcc5a56e710>
                     └ <function get_request_handler.<locals>.app at 0x7fcc5a6fc0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fcc6432f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fcc5a7bc1f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fcc5a6e2530>
                 └ <function run_in_threadpool at 0x7fcc64c7edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fcc5a7bc1f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fcc5a556980>
                 │     │         └ <function run_sync at 0x7fcc64d41090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fcc64d40820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7fcc5a7bc1f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fcc5a556980>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fcc5a566b80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7fcc6032b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7fcc6156f100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7fcc61583400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7fcc615ab9a0>
             │    └ <app.src.services.base_service.BaseService object at 0x7fcc6156f130>
             └ <app.src.services.resource_service.ResourceService object at 0x7fcc6156f100>

TypeError: PostgreSQLDB.get_single_data() takes 1 positional argument but 3 were given
INFO     2024-02-22 13:36:33.008 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47672 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:37:22.558 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:37:22.662 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:37:22.663 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:37:22.663 request id: app - uvicorn.server:serve - Finished server process [1075086]
INFO     2024-02-22 13:37:23.557 request id: app - uvicorn.server:serve - Started server process [1075415]
INFO     2024-02-22 13:37:23.558 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:37:23.559 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:37:26.176 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:37:26.277 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:37:26.278 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:37:26.279 request id: app - uvicorn.server:serve - Finished server process [1075415]
INFO     2024-02-22 13:37:27.215 request id: app - uvicorn.server:serve - Started server process [1075451]
INFO     2024-02-22 13:37:27.216 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:37:27.216 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:37:34.840 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:37:34.942 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:37:34.942 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:37:34.943 request id: app - uvicorn.server:serve - Finished server process [1075451]
INFO     2024-02-22 13:37:35.916 request id: app - uvicorn.server:serve - Started server process [1075510]
INFO     2024-02-22 13:37:35.917 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:37:35.918 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:37:42.635 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f743af78310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f743af783a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f743c3c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f743c562950>
           └ <SpawnProcess name='SpawnProcess-12' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f743c561fc0>
    └ <SpawnProcess name='SpawnProcess-12' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f743c410100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-12' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-12' parent=1072792 started>
    │    └ <function subprocess_started at 0x7f743b89e440>
    └ <SpawnProcess name='SpawnProcess-12' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f743c410220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f743b89d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f743c410220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f743c176440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f743c1763b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f743c177eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f743c0c7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f7430badc30>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f7430badc30>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f7430badc30>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f7430badc30>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f743b798550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f743b7985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f743c411f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f743ab56b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f743c411f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7430ce5870>
          └ <fastapi.applications.FastAPI object at 0x7f743ab56b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f7430b6ada0>
                     │    └ <function error_handle_business at 0x7f743a9eb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7430ce5870>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'PostgreSQLDB' object has no attribute 'composer'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7430b3e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7430ce75b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f7430ce5870>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f7430b3e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7430ce4700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f7430ce75b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7430b3e0e0>
                     │    │             └ <starlette.requests.Request object at 0x7f7430b6a140>
                     │    └ <function process_middleware_common at 0x7f743a9eb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7430ce4700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f7430b6a140>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f7430b3e0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'PostgreSQLDB' object has no attribute 'composer'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f743af78a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f743aae8770>
          │    │   │      └ <starlette.requests.Request object at 0x7f7430b6a140>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7430c24c10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f7430ce4700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7430b3ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7430c27040>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f7430c24c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7430b3ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f743a9da2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f7430c27040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7430b3ef80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f743ab264d0>
          └ <fastapi.routing.APIRoute object at 0x7f7430b1e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f7430b3ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f7430b6a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f7430b3c160>
          └ <fastapi.routing.APIRoute object at 0x7f7430b1e410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f7430bae6b0>
                     └ <function get_request_handler.<locals>.app at 0x7f7430b3c0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f743ab27130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7f7430df01f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f7430b1e4d0>
                 └ <function run_in_threadpool at 0x7f743b472dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f7430df01f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f7430b92580>
                 │     │         └ <function run_sync at 0x7f743b535090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f743b534820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'PostgreSQLDB' object has no attribute 'composer'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f7430df01f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f7430b92580>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f7430ba6480>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7f743294b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7f74382e3100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f74382f7400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f7438318cd0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f74382e3130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f74382e3100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 60, in get_single_data
    node = self.composer.get_single_node()
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f7438318cd0>

AttributeError: 'PostgreSQLDB' object has no attribute 'composer'
INFO     2024-02-22 13:37:42.654 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56008 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:39:24.058 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:39:24.159 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:39:24.160 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:39:24.161 request id: app - uvicorn.server:serve - Finished server process [1075510]
INFO     2024-02-22 13:39:25.087 request id: app - uvicorn.server:serve - Started server process [1076179]
INFO     2024-02-22 13:39:25.088 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:39:25.089 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:40:30.954 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:40:31.057 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:40:31.058 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:40:31.058 request id: app - uvicorn.server:serve - Finished server process [1076179]
INFO     2024-02-22 13:40:32.027 request id: app - uvicorn.server:serve - Started server process [1076579]
INFO     2024-02-22 13:40:32.029 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:40:32.029 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:40:35.332 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fc919e24310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fc919e243a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fc91b20fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fc91b362950>
           └ <SpawnProcess name='SpawnProcess-14' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fc91b361fc0>
    └ <SpawnProcess name='SpawnProcess-14' parent=1072792 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fc91b258100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=1072792 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=1072792 started>
    │    └ <function subprocess_started at 0x7fc91a792440>
    └ <SpawnProcess name='SpawnProcess-14' parent=1072792 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fc91b258220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fc91a791900>
    │    │                  └ <uvicorn.server.Server object at 0x7fc91b258220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fc91abaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc91abaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc91ababeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc91b1fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fc918706ef0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fc918706ef0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fc918706ef0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fc918706ef0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fc91a65c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fc91a65c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc91b259f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fc9199feb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fc91b259f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc90bdb9870>
          └ <fastapi.applications.FastAPI object at 0x7fc9199feb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fc90bc3ada0>
                     │    └ <function error_handle_business at 0x7fc919893250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc90bdb9870>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'S3Storage' object has no attribute 'get_object'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc90bc0e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc90bdbb5b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fc90bdb9870>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fc90bc0e050>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc90bdb8700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fc90bdbb5b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc90bc0e0e0>
                     │    │             └ <starlette.requests.Request object at 0x7fc90bc3a140>
                     │    └ <function process_middleware_common at 0x7fc9198931c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc90bdb8700>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fc90bc3a140>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fc90bc0e0e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'S3Storage' object has no attribute 'get_object'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fc919e24a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fc919990770>
          │    │   │      └ <starlette.requests.Request object at 0x7fc90bc3a140>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc90bef8c10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fc90bdb8700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc90bc0ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc90befb040>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fc90bef8c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc90bc0ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fc9198822f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fc90befb040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc90bc0ef80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fc9199ce4d0>
          └ <fastapi.routing.APIRoute object at 0x7fc90bdea410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fc90bc0ef80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fc90bc3a5c0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fc90bc0c160>
          └ <fastapi.routing.APIRoute object at 0x7fc90bdea410>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fc90bc7a6b0>
                     └ <function get_request_handler.<locals>.app at 0x7fc90bc0c0d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fc9199cf130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'}
                 │                 │         └ <function download_one at 0x7fc90bec81f0>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fc90bdea4d0>
                 └ <function run_in_threadpool at 0x7fc91a32add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fc90bec81f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fc90bc61e80>
                 │     │         └ <function run_sync at 0x7fc91a3ed090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fc91a3ec820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'S3Storage' object has no attribute 'get_object'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7fc90bec81f0>, item_id='b4c07ad7-874f-5f03-b586-9a97e0ecce40'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fc90bc61e80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fc90bc72a00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ 'b4c07ad7-874f-5f03-b586-9a97e0ecce40'
                │                └ <function ResourceService.download_resource at 0x7fc91173b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7fc912bd3100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 61, in download_resource
    content = self.base_service.engine_s3.get_object(s3_key)
              │    │            │                    └ 'static/images/3_Screenshot from 2024-02-15 10-13-51.png'
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fc912bd3160>
              │    └ <app.src.services.base_service.BaseService object at 0x7fc912bd3130>
              └ <app.src.services.resource_service.ResourceService object at 0x7fc912bd3100>

AttributeError: 'S3Storage' object has no attribute 'get_object'
INFO     2024-02-22 13:40:35.347 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45634 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:41:19.827 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:41:19.928 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:41:19.930 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:41:19.930 request id: app - uvicorn.server:serve - Finished server process [1076579]
INFO     2024-02-22 13:41:32.045 request id: app - uvicorn.server:serve - Started server process [1076985]
INFO     2024-02-22 13:41:32.046 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:41:32.047 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:41:40.553 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57374 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:41:48.713 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:41:48.815 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:41:48.817 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:41:48.819 request id: app - uvicorn.server:serve - Finished server process [1076985]
INFO     2024-02-22 13:41:50.593 request id: app - uvicorn.server:serve - Started server process [1077098]
INFO     2024-02-22 13:41:50.594 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:41:50.595 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:41:52.725 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59688 - "GET /rms/v1.0/download/b4c07ad7-874f-5f03-b586-9a97e0ecce40 HTTP/1.1" 500
INFO     2024-02-22 13:47:44.361 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:47:44.463 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:47:44.464 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:47:44.465 request id: app - uvicorn.server:serve - Finished server process [1077098]
INFO     2024-02-22 13:49:23.856 request id: app - uvicorn.server:serve - Started server process [1079774]
INFO     2024-02-22 13:49:23.857 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:49:23.857 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:49:30.718 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37872 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 13:49:30.945 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37872 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-22 13:49:42.684 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d75d50; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a	"
LINE 3: WHERE resources.id = '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a '...
                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f1a17a0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f1a17b5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1a17b5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1a17a54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    └ <function subprocess_started at 0x7f1a16e92440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1a17a54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1a16e91900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1a17a54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1a177a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1a177a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1a177a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f1a179f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3dc0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3dc0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3dc0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3dc0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1a16d8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1a16d8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
          └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1a14dc3d60>
                     │    └ <function error_handle_business at 0x7f1a16003250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "8decd5b4-b8ab-5ea3-9ef4-182cf4eb4...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c423010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c423010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a0c4a1000>
                     │    │             └ <starlette.requests.Request object at 0x7f1a0c48ded0>
                     │    └ <function process_middleware_common at 0x7f1a160031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1a0c48ded0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a0c4a1000>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "8decd5b4-b8ab-5ea3-9ef4-182cf4eb4...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1a16590a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1a16100720>
          │    │   │      └ <starlette.requests.Request object at 0x7f1a0c48ded0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a0c4a15a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a0c4a15a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1a15ff22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a0c4a15a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1a1613e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a0c4a15a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a0c48e3b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1a0c4201f0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1a0c4c1d20>
                     └ <function get_request_handler.<locals>.app at 0x7f1a0c420160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1a1613f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t'}
                 │                 │         └ <function download_one at 0x7f1a0c6d4280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f1a0c5fe500>
                 └ <function run_in_threadpool at 0x7f1a16a92dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1a0c48a7c0>
                 │     │         └ <function run_sync at 0x7f1a16b55090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f1a16b54820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "8decd5...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1a0c48a7c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1a0c4bfc00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t'
                │                └ <function ResourceService.download_resource at 0x7f1a0df2f5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f1a0f487400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f1a0f473130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 59, in get_single_data
    return self.session.query(model).filter(model.id == id_value).first()
           │    │       │     │             │     │     └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t'
           │    │       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f1a1422e5c0>
           │    │       │     │             └ <class 'app.src.models.resource.Resource'>
           │    │       │     └ <class 'app.src.models.resource.Resource'>
           │    │       └ <function Session.query at 0x7f1a144ef5b0>
           │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x7f1a14470e50>
           └ <sqlalchemy.orm.query.Query object at 0x7f1a0c4c2320>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f1a144eef80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f1a0c4c1b10>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f1a144eeef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f1a145af0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f1a147cb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f1a14d63a60>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f1a147cba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f1a147cbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f1a147cbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f1a147cbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t"\nLINE 3: WHERE resour...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "8decd5b...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "8decd5b4-b8ab-5ea3-9ef4-182cf4eb4...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d75d50; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a	"
LINE 3: WHERE resources.id = '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a '...
                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.id = %(id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a\t', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-02-22 13:49:42.705 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50196 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a%09 HTTP/1.1" 500
ERROR    2024-02-22 13:50:05.614 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d76110; closed: -1>

psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f1a17a0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f1a17b5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1a17b5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1a17a54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    └ <function subprocess_started at 0x7f1a16e92440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1a17a54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1a16e91900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1a17a54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1a177a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1a177a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1a177a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f1a179f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14df7c40>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1a14df7c40>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1a14df7c40>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14df7c40>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1a16d8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1a16d8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
          └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1a14df4520>
                     │    └ <function error_handle_business at 0x7f1a16003250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c4a1750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c4a1750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a0c16bd00>
                     │    │             └ <starlette.requests.Request object at 0x7f1a14df4190>
                     │    └ <function process_middleware_common at 0x7f1a160031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1a14df4190>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a0c16bd00>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1a16590a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1a16100720>
          │    │   │      └ <starlette.requests.Request object at 0x7f1a14df4190>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a077237f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a077237f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1a15ff22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a077237f0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1a1613e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a077237f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df47f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1a0c4201f0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1a14df4940>
                     └ <function get_request_handler.<locals>.app at 0x7f1a0c420160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1a1613f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7f1a0c6d4280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f1a0c5fe500>
                 └ <function run_in_threadpool at 0x7f1a16a92dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1a0c459700>
                 │     │         └ <function run_sync at 0x7f1a16b55090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f1a16b54820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1a0c459700>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1a07668440>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                └ <function ResourceService.download_resource at 0x7f1a0df2f5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f1a0f487400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f1a0f473130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 59, in get_single_data
    return self.session.query(model).filter(model.id == id_value).first()
           │    │       │     │             │     │     └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
           │    │       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f1a1422e5c0>
           │    │       │     │             └ <class 'app.src.models.resource.Resource'>
           │    │       │     └ <class 'app.src.models.resource.Resource'>
           │    │       └ <function Session.query at 0x7f1a144ef5b0>
           │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x7f1a14470e50>
           └ <sqlalchemy.orm.query.Query object at 0x7f1a14df7af0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f1a144eef80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f1a14df7c70>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f1a144eeef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f1a145af0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f1a147cb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f1a14df47c0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f1a147cba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f1a147cbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f1a147cbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f1a147cbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InFailedSqlTransaction('current transaction is aborted, commands ignored until end of transaction block\n')
          │                    │              └ (<class 'psycopg2.errors.InFailedSqlTransaction'>, InFailedSqlTransaction('current transaction is aborted, commands ignored u...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d76110; closed: -1>

sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.id = %(id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
INFO     2024-02-22 13:50:05.628 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38774 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
ERROR    2024-02-22 13:50:36.252 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d76020; closed: -1>

psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f1a17a0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f1a17b5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1a17b5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1a17a54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    └ <function subprocess_started at 0x7f1a16e92440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1a17a54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1a16e91900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1a17a54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1a177a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1a177a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1a177a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f1a179f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3e20>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3e20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3e20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14dc3e20>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1a16d8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1a16d8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
          └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1a14df5900>
                     │    └ <function error_handle_business at 0x7f1a16003250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c4220e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c4220e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a07723b50>
                     │    │             └ <starlette.requests.Request object at 0x7f1a14df64a0>
                     │    └ <function process_middleware_common at 0x7f1a160031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1a14df64a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a07723b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1a16590a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1a16100720>
          │    │   │      └ <starlette.requests.Request object at 0x7f1a14df64a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07723d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07723d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1a15ff22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07723d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1a1613e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07723d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df6770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1a0c4201f0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1a14df7fd0>
                     └ <function get_request_handler.<locals>.app at 0x7f1a0c420160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1a1613f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7f1a0c6d4280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f1a0c5fe500>
                 └ <function run_in_threadpool at 0x7f1a16a92dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1a0766bc40>
                 │     │         └ <function run_sync at 0x7f1a16b55090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f1a16b54820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1a0766bc40>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1a0766bd40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                └ <function ResourceService.download_resource at 0x7f1a0df2f5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f1a0f487400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f1a0f473130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 59, in get_single_data
    return self.session.query(model).filter(model.id == id_value).first()
           │    │       │     │             │     │     └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
           │    │       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f1a1422e5c0>
           │    │       │     │             └ <class 'app.src.models.resource.Resource'>
           │    │       │     └ <class 'app.src.models.resource.Resource'>
           │    │       └ <function Session.query at 0x7f1a144ef5b0>
           │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x7f1a14470e50>
           └ <sqlalchemy.orm.query.Query object at 0x7f1a14df6fe0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f1a144eef80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f1a14df6c50>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f1a144eeef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f1a145af0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f1a147cb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f1a14df67a0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f1a147cba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f1a147cbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f1a147cbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f1a147cbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InFailedSqlTransaction('current transaction is aborted, commands ignored until end of transaction block\n')
          │                    │              └ (<class 'psycopg2.errors.InFailedSqlTransaction'>, InFailedSqlTransaction('current transaction is aborted, commands ignored u...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d76020; closed: -1>

sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.id = %(id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
INFO     2024-02-22 13:50:36.270 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39824 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
ERROR    2024-02-22 13:52:04.535 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d76200; closed: -1>

psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f1a17a0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f1a17b5e950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1a17b5dfc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1a17a54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
    │    └ <function subprocess_started at 0x7f1a16e92440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1079265 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1a17a54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1a16e91900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1a17a54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1a177a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1a177a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1a177a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f1a179f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14df6a70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1a14df6a70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1a14df6a70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1a14df6a70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1a16d8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1a16d8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1a17a55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
          └ <fastapi.applications.FastAPI object at 0x7f1a1616eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1a14df4a60>
                     │    └ <function error_handle_business at 0x7f1a16003250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c4a1630>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1a0c5c98a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1a0c4a1630>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1a0c5cb5e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a07680040>
                     │    │             └ <starlette.requests.Request object at 0x7f1a14df7760>
                     │    └ <function process_middleware_common at 0x7f1a160031c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1a14df7760>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1a07680040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1a16590a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1a16100720>
          │    │   │      └ <starlette.requests.Request object at 0x7f1a14df7760>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1a0c5c8730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07680280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1a0c704c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07680280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1a15ff22f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1a0c707070>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07680280>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1a1613e4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1a07680280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1a14df4b20>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1a0c4201f0>
          └ <fastapi.routing.APIRoute object at 0x7f1a0c5fe440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f1a14df48e0>
                     └ <function get_request_handler.<locals>.app at 0x7f1a0c420160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f1a1613f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7f1a0c6d4280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f1a0c5fe500>
                 └ <function run_in_threadpool at 0x7f1a16a92dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f1a0767b2c0>
                 │     │         └ <function run_sync at 0x7f1a16b55090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f1a16b54820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f1a0c6d4280>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f1a0767b2c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f1a0767b400>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                └ <function ResourceService.download_resource at 0x7f1a0df2f5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7f1a0f487400>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>
             │    └ <app.src.services.base_service.BaseService object at 0x7f1a0f473130>
             └ <app.src.services.resource_service.ResourceService object at 0x7f1a0f473100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 59, in get_single_data
    return self.session.query(model).filter(model.id == id_value).first()
           │    │       │     │             │     │     └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
           │    │       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f1a1422e5c0>
           │    │       │     │             └ <class 'app.src.models.resource.Resource'>
           │    │       │     └ <class 'app.src.models.resource.Resource'>
           │    │       └ <function Session.query at 0x7f1a144ef5b0>
           │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f1a0f4acdc0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x7f1a14470e50>
           └ <sqlalchemy.orm.query.Query object at 0x7f1a07684130>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f1a144eef80>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f1a14df4460>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f1a144eeef0>
           └ <sqlalchemy.orm.session.Session object at 0x7f1a0c69b760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f1a145af0a0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f1a147cb760>
             └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f1a14df4550>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f1a147cba30>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f1a147cbbe0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f1a147cbc70>
           └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f1a147cbeb0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InFailedSqlTransaction('current transaction is aborted, commands ignored until end of transaction block\n')
          │                    │              └ (<class 'psycopg2.errors.InFailedSqlTransaction'>, InFailedSqlTransaction('current transaction is aborted, commands ignored u...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ InternalError('(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transac...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f1a14662440>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f1a0df02c20>
    └ <sqlalchemy.engine.base.Connection object at 0x7f1a14dc36d0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f1a14d76200; closed: -1>

sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.id = %(id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'id_1': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
INFO     2024-02-22 13:52:04.552 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44860 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 13:52:40.641 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:52:40.743 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:52:40.746 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:52:40.748 request id: app - uvicorn.server:serve - Finished server process [1079774]
INFO     2024-02-22 13:52:43.298 request id: app - uvicorn.server:serve - Started server process [1080964]
INFO     2024-02-22 13:52:43.300 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:52:43.301 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:53:08.363 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fd1ec487910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fd1ec4879a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fd1eefc9120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fd1eef93e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=1080958 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fd1eef93490>
    └ <SpawnProcess name='SpawnProcess-1' parent=1080958 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fd1eefe2890>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1080958 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1080958 started>
    │    └ <function subprocess_started at 0x7fd1ecd09bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1080958 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fd1eefe1ab0>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fd1ecd08ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7fd1eefe1ab0>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fd1eef0da20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd1eef0d990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd1eef0f490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd1ef19e830>
    └ <Handle <TaskStepMethWrapper object at 0x7fd1d231fc70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fd1d231fc70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fd1d231fc70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fd1d231fc70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fd1ecd93250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fd1ecd932e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd1eef6a6e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fd1dffd0df0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fd1eef6a6e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd1d22b0550>
          └ <fastapi.applications.FastAPI object at 0x7fd1dffd0df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fd1d231d9c0>
                     │    └ <function error_handle_business at 0x7fd1dfff6830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd1d22b0550>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd1d22cfeb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd1d22b2200>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fd1d22b0550>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fd1d22cfeb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd1d245b340>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fd1d22b2200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd1d22cff40>
                     │    │             └ <starlette.requests.Request object at 0x7fd1d231cd60>
                     │    └ <function process_middleware_common at 0x7fd1dfff68c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd1d245b340>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fd1d231cd60>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fd1d22cff40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fd1ec4a00d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fd1dff5e520>
          │    │   │      └ <starlette.requests.Request object at 0x7fd1d231cd60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd1d23c77f0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fd1d245b340>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd1d2340e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd1d23c7790>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fd1d23c77f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd1d2340e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fd1dfe09240>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fd1d23c7790>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd1d2340e50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fd1dff95630>
          └ <fastapi.routing.APIRoute object at 0x7fd1d22e1030>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fd1d2340e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fd1d231d1e0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fd1d22cd5a0>
          └ <fastapi.routing.APIRoute object at 0x7fd1d22e1030>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fd1d231fa90>
                     └ <function get_request_handler.<locals>.app at 0x7fd1d22cd510>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fd1dff96290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7fd1d2394550>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fd1d22e10f0>
                 └ <function run_in_threadpool at 0x7fd1ecae24d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fd1d2394550>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fd1d2352a00>
                 │     │         └ <function run_sync at 0x7fd1ec4144c0>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fd1ecae3be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, t...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7fd1d2394550>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fd1d2352a00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fd1d2436500>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                └ <function ResourceService.download_resource at 0x7fd1dc56b5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7fd1dd39bf70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 61, in download_resource
    content = self.base_service.engine_s3.get_object(s3_key)
              │    │            │         │          └ None
              │    │            │         └ <function S3Storage.get_object at 0x7fd1dc56b490>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fd1dd39bf10>
              │    └ <app.src.services.base_service.BaseService object at 0x7fd1dd39bf40>
              └ <app.src.services.resource_service.ResourceService object at 0x7fd1dd39bf70>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 59, in get_object
    file_obj = self.client.get_object(Bucket=self.s3_bucket, Key=object_name)
               │    │      │                 │    │              └ None
               │    │      │                 │    └ 'bigdata'
               │    │      │                 └ <app.src.services.s3_connector.S3Storage object at 0x7fd1dd39bf10>
               │    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fd1d2bacee0>
               │    └ <botocore.client.S3 object at 0x7fd1d2bc47f0>
               └ <app.src.services.s3_connector.S3Storage object at 0x7fd1dd39bf10>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': None}
           │    │              └ 'GetObject'
           │    └ <function BaseClient._make_api_call at 0x7fd1ec8be560>
           └ <botocore.client.S3 object at 0x7fd1d2bc47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 962, in _make_api_call
    request_dict = self._convert_to_request_dict(
                   │    └ <function BaseClient._convert_to_request_dict at 0x7fd1ec8be680>
                   └ <botocore.client.S3 object at 0x7fd1d2bc47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1036, in _convert_to_request_dict
    request_dict = self._serializer.serialize_to_request(
                   │    │           └ <function ParamValidationDecorator.serialize_to_request at 0x7fd1dc9c7010>
                   │    └ <botocore.validate.ParamValidationDecorator object at 0x7fd1d24eaf50>
                   └ <botocore.client.S3 object at 0x7fd1d2bc47f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/validate.py", line 381, in serialize_to_request
    raise ParamValidationError(report=report.generate_report())
          │                           │      └ <function ValidationErrors.generate_report at 0x7fd1dc9c5b40>
          │                           └ <botocore.validate.ValidationErrors object at 0x7fd1dfe49570>
          └ <class 'botocore.exceptions.ParamValidationError'>

botocore.exceptions.ParamValidationError: Parameter validation failed:
Invalid type for parameter Key, value: None, type: <class 'NoneType'>, valid types: <class 'str'>
INFO     2024-02-22 13:53:08.440 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44944 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 13:53:56.563 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:53:56.665 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:53:56.667 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:53:56.667 request id: app - uvicorn.server:serve - Finished server process [1080964]
INFO     2024-02-22 13:54:43.558 request id: app - uvicorn.server:serve - Started server process [1081855]
INFO     2024-02-22 13:54:43.560 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:54:43.561 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:54:57.766 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fdbf9863910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fdbf98639a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7fdbfc399120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7fdbfc363e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=1081850 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fdbfc363490>
    └ <SpawnProcess name='SpawnProcess-1' parent=1081850 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fdbfc3b28c0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1081850 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1081850 started>
    │    └ <function subprocess_started at 0x7fdbfa0c1bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1081850 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fdbfc3b1a80>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fdbfa0c0ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7fdbfc3b1a80>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fdbfc2dda20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fdbfc2dd990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fdbfc2df490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fdbfc56a830>
    └ <Handle <TaskStepMethWrapper object at 0x7fdbdb63fb20>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fdbdb63fb20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fdbdb63fb20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fdbdb63fb20>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fdbfa14b250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fdbfa14b2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdbfc33a6b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fdbf946ce20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fdbfc33a6b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbdb5c8580>
          └ <fastapi.applications.FastAPI object at 0x7fdbf946ce20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fdbdb63d9f0>
                     │    └ <function error_handle_business at 0x7fdbf929a830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbdb5c8580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdbdb5efd90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbdb5ca230>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fdbdb5c8580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fdbdb5efd90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdbdb77b370>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fdbdb5ca230>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdbdb5efe20>
                     │    │             └ <starlette.requests.Request object at 0x7fdbdb63cd90>
                     │    └ <function process_middleware_common at 0x7fdbf929a8c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdbdb77b370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fdbdb63cd90>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fdbdb5efe20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fdbf987c0d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fdbf93ee340>
          │    │   │      └ <starlette.requests.Request object at 0x7fdbdb63cd90>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbdb6e3820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fdbdb77b370>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbdb66cd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbdb6e37c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fdbdb6e3820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbdb66cd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fdbf92a9270>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fdbdb6e37c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbdb66cd30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fdbf9431630>
          └ <fastapi.routing.APIRoute object at 0x7fdbdb5fd060>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fdbdb66cd30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fdbdb63d210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fdbdb5ed480>
          └ <fastapi.routing.APIRoute object at 0x7fdbdb5fd060>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fdbdb63fa30>
                     └ <function get_request_handler.<locals>.app at 0x7fdbdb5ed3f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fdbf9432290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7fdbdb6b4430>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fdbdb5fd120>
                 └ <function run_in_threadpool at 0x7fdbf9f124d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fdbdb6b4430>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fdbdb6f9900>
                 │     │         └ <function run_sync at 0x7fdbf97f04c0>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fdbf9f13be0>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7fdbdb6b4430>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fdbdb6f9900>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fdbf92ebd80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                └ <function ResourceService.download_resource at 0x7fdbf9c1f490>
                └ <app.src.services.resource_service.ResourceService object at 0x7fdbe2613fa0>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-22 13:54:57.820 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41162 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 13:55:00.453 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:55:00.555 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:55:00.556 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:55:00.557 request id: app - uvicorn.server:serve - Finished server process [1081855]
INFO     2024-02-22 13:55:04.214 request id: app - uvicorn.server:serve - Started server process [1082452]
INFO     2024-02-22 13:55:04.216 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:55:04.217 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:55:21.614 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:55:32.756 request id: app - uvicorn.server:serve - Started server process [1082810]
INFO     2024-02-22 13:55:32.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:55:32.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:55:33.305 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51306 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 13:55:33.482 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51306 - "GET /openapi.json HTTP/1.1" 200
ERROR    2024-02-22 13:55:58.388 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6eda3fb910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6eda3fb9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f6ee0f5d120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f6ee0f27e20>
           └ <SpawnProcess name='SpawnProcess-1' parent=1082785 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6ee0f27490>
    └ <SpawnProcess name='SpawnProcess-1' parent=1082785 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6ee0f768c0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1082785 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1082785 started>
    │    └ <function subprocess_started at 0x7f6ee0481bd0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1082785 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6ee0f75a80>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6ee0480ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f6ee0f75a80>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6ee0ea1a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6ee0ea1990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6ee0ea3490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6ee1122830>
    └ <Handle <TaskStepMethWrapper object at 0x7f6ed9e8d150>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6ed9e8d150>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6ed9e8d150>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6ed9e8d150>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6ee050b250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6ee050b2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6ee0efe6b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6eda010e20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6ee0efe6b0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6ec00c0580>
          └ <fastapi.applications.FastAPI object at 0x7f6eda010e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6ebff9bc10>
                     │    └ <function error_handle_business at 0x7f6eda036830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6ec00c0580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6ec0158940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6ec00c2230>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f6ec00c0580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6ec0158940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6ec0273370>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f6ec00c2230>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6ec0158040>
                     │    │             └ <starlette.requests.Request object at 0x7f6ec0137fd0>
                     │    └ <function process_middleware_common at 0x7f6eda0368c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6ec0273370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6ec0137fd0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6ec0158040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6eda4140d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6ed9f9e480>
          │    │   │      └ <starlette.requests.Request object at 0x7f6ec0137fd0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6ec01db820>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f6ec0273370>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ebff972e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6ec01db7c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f6ec01db820>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ebff972e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6ed9e49960>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f6ec01db7c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ebff972e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6ed9fd5630>
          └ <fastapi.routing.APIRoute object at 0x7f6ec00f5060>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6ebff972e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6ec0135210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f6ec00e5480>
          └ <fastapi.routing.APIRoute object at 0x7f6ec00f5060>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6ebff98190>
                     └ <function get_request_handler.<locals>.app at 0x7f6ec00e53f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6ed9fd6290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'item_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7f6ec01a8430>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f6ec00f5120>
                 └ <function run_in_threadpool at 0x7f6ee02ce4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f6ec01a8430>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f6ec013ccc0>
                 │     │         └ <function run_sync at 0x7f6eda3884c0>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f6ee02cfbe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f6ec01a8430>, item_id='8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f6ec013ccc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f6ec013ce40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(item_id)
                │                │                 └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                └ <function ResourceService.download_resource at 0x7f6ec216b490>
                └ <app.src.services.resource_service.ResourceService object at 0x7f6ec339bfa0>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-22 13:55:58.473 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51318 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 13:56:28.359 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:56:28.461 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 13:56:28.462 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 13:56:28.463 request id: app - uvicorn.server:serve - Finished server process [1082810]
INFO     2024-02-22 13:57:12.130 request id: app - uvicorn.server:serve - Started server process [1083567]
INFO     2024-02-22 13:57:12.131 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:57:12.132 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:57:14.886 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe144d84310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe144d843a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe1461c7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe146362950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1083565 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe146361fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1083565 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe146210100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1083565 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1083565 started>
    │    └ <function subprocess_started at 0x7fe14569e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1083565 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe146210220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe14569d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe146210220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe145f9a440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe145f9a3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe145f9beb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe145eeb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe1435517e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe1435517e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe1435517e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe1435517e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe145598550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe1455985e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe146211f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe14495ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe146211f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe13adb1990>
          └ <fastapi.applications.FastAPI object at 0x7fe14495ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe13ac32ef0>
                     │    └ <function error_handle_business at 0x7fe1447eb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe13adb1990>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe13ac020e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe13adb36d0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe13adb1990>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe13ac020e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe13adb0820>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe13adb36d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe13ac02170>
                     │    │             └ <starlette.requests.Request object at 0x7fe13ac32290>
                     │    └ <function process_middleware_common at 0x7fe1447eb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe13adb0820>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe13ac32290>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe13ac02170>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe144d84a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe1448ec770>
          │    │   │      └ <starlette.requests.Request object at 0x7fe13ac32290>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe13aef0d30>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe13adb0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe13ac03010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe13aef3160>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe13aef0d30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe13ac03010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe1447da2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe13aef3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe13ac03010>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe14492a4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe13ade6530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe13ac03010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe13ac32710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe13ac001f0>
          └ <fastapi.routing.APIRoute object at 0x7fe13ade6530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe13ac72800>
                     └ <function get_request_handler.<locals>.app at 0x7fe13ac00160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe14492b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe13ac71e10>, 'resource_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7fe13aec4280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe13ade65f0>
                 └ <function run_in_threadpool at 0x7fe145286dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fe13aec4280>, db_session=<sqlalchemy.orm.session.Session object at 0x7fe13ac7...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe13ac6b4c0>
                 │     │         └ <function run_sync at 0x7fe145349090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe145348820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, t...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe13a...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe13ac68e00>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe13ac6b280>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7fe13ac71e10>
                │                └ <function ResourceService.download_resource at 0x7fe14092f5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7fe141ba8040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 62, in download_resource
    content = self.base_service.engine_s3.get_object(s3_key)
              │    │            │         │          └ None
              │    │            │         └ <function S3Storage.get_object at 0x7fe14092f490>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7fe141ba80a0>
              │    └ <app.src.services.base_service.BaseService object at 0x7fe141ba8070>
              └ <app.src.services.resource_service.ResourceService object at 0x7fe141ba8040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 59, in get_object
    file_obj = self.client.get_object(Bucket=self.s3_bucket, Key=object_name)
               │    │      │                 │    │              └ None
               │    │      │                 │    └ 'bigdata'
               │    │      │                 └ <app.src.services.s3_connector.S3Storage object at 0x7fe141ba80a0>
               │    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7fe13af70ca0>
               │    └ <botocore.client.S3 object at 0x7fe13af7da80>
               └ <app.src.services.s3_connector.S3Storage object at 0x7fe141ba80a0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': None}
           │    │              └ 'GetObject'
           │    └ <function BaseClient._make_api_call at 0x7fe140da65f0>
           └ <botocore.client.S3 object at 0x7fe13af7da80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 962, in _make_api_call
    request_dict = self._convert_to_request_dict(
                   │    └ <function BaseClient._convert_to_request_dict at 0x7fe140da6710>
                   └ <botocore.client.S3 object at 0x7fe13af7da80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1036, in _convert_to_request_dict
    request_dict = self._serializer.serialize_to_request(
                   │    │           └ <function ParamValidationDecorator.serialize_to_request at 0x7fe14119b0a0>
                   │    └ <botocore.validate.ParamValidationDecorator object at 0x7fe13ae50340>
                   └ <botocore.client.S3 object at 0x7fe13af7da80>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/validate.py", line 381, in serialize_to_request
    raise ParamValidationError(report=report.generate_report())
          │                           │      └ <function ValidationErrors.generate_report at 0x7fe141199bd0>
          │                           └ <botocore.validate.ValidationErrors object at 0x7fe143553550>
          └ <class 'botocore.exceptions.ParamValidationError'>

botocore.exceptions.ParamValidationError: Parameter validation failed:
Invalid type for parameter Key, value: None, type: <class 'NoneType'>, valid types: <class 'str'>
INFO     2024-02-22 13:57:14.902 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54972 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 13:57:18.659 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:57:21.510 request id: app - uvicorn.server:serve - Started server process [1083630]
INFO     2024-02-22 13:57:21.512 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:57:21.513 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:57:37.218 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:57:37.320 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-22 13:58:21.427 request id: app - uvicorn.server:serve - Started server process [1084246]
INFO     2024-02-22 13:58:21.428 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:58:21.429 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-22 13:58:22.880 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4007524310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f40075243a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f400890bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4008a5e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1084244 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4008a5dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1084244 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4008954100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1084244 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1084244 started>
    │    └ <function subprocess_started at 0x7f4007e8e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1084244 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4008954220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4007e8d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f4008954220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f4008706440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f40087063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f4008707eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f40088f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f4005e15810>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4005e15810>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4005e15810>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4005e15810>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4007d5c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4007d5c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4008955f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f40070feb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4008955f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3ffd3c99c0>
          └ <fastapi.applications.FastAPI object at 0x7f40070feb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f3ffd252f20>
                     │    └ <function error_handle_business at 0x7f4006f93250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3ffd3c99c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3ffd2220e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3ffd3cb700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f3ffd3c99c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f3ffd2220e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3ffd3c8850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f3ffd3cb700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3ffd222170>
                     │    │             └ <starlette.requests.Request object at 0x7f3ffd2522c0>
                     │    └ <function process_middleware_common at 0x7f4006f931c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3ffd3c8850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f3ffd2522c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f3ffd222170>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4007524a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4007090810>
          │    │   │      └ <starlette.requests.Request object at 0x7f3ffd2522c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3ffd504d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f3ffd3c8850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3ffd223010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3ffd507190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f3ffd504d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3ffd223010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4006f822f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f3ffd507190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3ffd223010>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f40070ce4d0>
          └ <fastapi.routing.APIRoute object at 0x7f3ffd402560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f3ffd223010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f3ffd252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f3ffd2201f0>
          └ <fastapi.routing.APIRoute object at 0x7f3ffd402560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f3ffd28e830>
                     └ <function get_request_handler.<locals>.app at 0x7f3ffd220160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f40070cf130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f3ffd28de40>, 'resource_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7f3ffd4d4280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f3ffd402620>
                 └ <function run_in_threadpool at 0x7f4007a2add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f3ffd4d4280>, db_session=<sqlalchemy.orm.session.Session object at 0x7f3ffd28...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f3ffd287700>
                 │     │         └ <function run_sync at 0x7f4007aed090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4007aec820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, t...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f3ffd...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f3ffd273540>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f3ffd2874c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f3ffd28de40>
                │                └ <function ResourceService.download_resource at 0x7f3fff32f5b0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f400436b100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 62, in download_resource
    content = self.base_service.engine_s3.get_object(s3_key)
              │    │            │         │          └ None
              │    │            │         └ <function S3Storage.get_object at 0x7f3fff32f490>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f400436b160>
              │    └ <app.src.services.base_service.BaseService object at 0x7f400436b130>
              └ <app.src.services.resource_service.ResourceService object at 0x7f400436b100>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 59, in get_object
    file_obj = self.client.get_object(Bucket=self.s3_bucket, Key=object_name)
               │    │      │                 │    │              └ None
               │    │      │                 │    └ 'bigdata'
               │    │      │                 └ <app.src.services.s3_connector.S3Storage object at 0x7f400436b160>
               │    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f3ffd774ca0>
               │    └ <botocore.client.S3 object at 0x7f3ffd781ab0>
               └ <app.src.services.s3_connector.S3Storage object at 0x7f400436b160>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': None}
           │    │              └ 'GetObject'
           │    └ <function BaseClient._make_api_call at 0x7f3fff7a65f0>
           └ <botocore.client.S3 object at 0x7f3ffd781ab0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 962, in _make_api_call
    request_dict = self._convert_to_request_dict(
                   │    └ <function BaseClient._convert_to_request_dict at 0x7f3fff7a6710>
                   └ <botocore.client.S3 object at 0x7f3ffd781ab0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1036, in _convert_to_request_dict
    request_dict = self._serializer.serialize_to_request(
                   │    │           └ <function ParamValidationDecorator.serialize_to_request at 0x7f3fffb9f0a0>
                   │    └ <botocore.validate.ParamValidationDecorator object at 0x7f3ffd464370>
                   └ <botocore.client.S3 object at 0x7f3ffd781ab0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/validate.py", line 381, in serialize_to_request
    raise ParamValidationError(report=report.generate_report())
          │                           │      └ <function ValidationErrors.generate_report at 0x7f3fffb9dbd0>
          │                           └ <botocore.validate.ValidationErrors object at 0x7f4005e17580>
          └ <class 'botocore.exceptions.ParamValidationError'>

botocore.exceptions.ParamValidationError: Parameter validation failed:
Invalid type for parameter Key, value: None, type: <class 'NoneType'>, valid types: <class 'str'>
INFO     2024-02-22 13:58:22.897 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44416 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 13:58:46.642 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:58:49.516 request id: app - uvicorn.server:serve - Started server process [1084430]
INFO     2024-02-22 13:58:49.518 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 13:58:49.520 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 13:59:58.861 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 13:59:58.963 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-02-22 14:00:09.531 request id: app - uvicorn.server:serve - Started server process [1084998]
INFO     2024-02-22 14:00:09.533 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:00:09.534 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:00:20.010 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:00:46.967 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49844 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:07:24.236 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:07:24.339 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:07:24.340 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:07:24.341 request id: app - uvicorn.server:serve - Finished server process [1084998]
INFO     2024-02-22 14:07:52.946 request id: app - uvicorn.server:serve - Started server process [1088648]
INFO     2024-02-22 14:07:52.947 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:07:52.948 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:07:55.575 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:07:55.577 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44044 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:09:25.104 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:09:25.206 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:09:25.207 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:09:25.208 request id: app - uvicorn.server:serve - Finished server process [1088648]
INFO     2024-02-22 14:09:26.142 request id: app - uvicorn.server:serve - Started server process [1089263]
INFO     2024-02-22 14:09:26.143 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:09:26.144 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:09:32.170 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:09:32.172 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51734 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:10:51.904 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:10:52.006 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:10:52.007 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:10:52.007 request id: app - uvicorn.server:serve - Finished server process [1089263]
INFO     2024-02-22 14:14:38.828 request id: app - uvicorn.server:serve - Started server process [1091665]
INFO     2024-02-22 14:14:38.829 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:14:38.830 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:14:40.523 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:14:40.528 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe74e210310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe74e2103a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe74f60fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe74f762950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1091663 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe74f761fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1091663 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe74f658100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1091663 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1091663 started>
    │    └ <function subprocess_started at 0x7fe74eb76440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1091663 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe74f658220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe74eb75900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe74f658220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe74efaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe74efaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe74efabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe74f5fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe744099c90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe744099c90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe744099c90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe744099c90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe74ea3c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe74ea3c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe74f659f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe74ddeab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe74f659f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe7441d19c0>
          └ <fastapi.applications.FastAPI object at 0x7fe74ddeab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe744099ed0>
                     │    └ <function error_handle_business at 0x7fe74dc7f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe7441d19c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not tuple')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe74402a0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe7441d3700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe7441d19c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe74402a0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe7441d0850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe7441d3700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe74402a170>
                     │    │             └ <starlette.requests.Request object at 0x7fe74405a2c0>
                     │    └ <function process_middleware_common at 0x7fe74dc7f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe7441d0850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe74405a2c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe74402a170>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not tuple')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe74e210a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe74dd7c6d0>
          │    │   │      └ <starlette.requests.Request object at 0x7fe74405a2c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe744110d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe7441d0850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe74402b010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe744113190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe744110d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe74402b010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe74dc6e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe744113190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe74402b010>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe74ddba4d0>
          └ <fastapi.routing.APIRoute object at 0x7fe744206560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe74402b010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe74405a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe7440281f0>
          └ <fastapi.routing.APIRoute object at 0x7fe744206560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe74409a860>
                     └ <function get_request_handler.<locals>.app at 0x7fe744028160>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe74ddbb130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe744099e70>, 'resource_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7fe7442dc280>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe744206620>
                 └ <function run_in_threadpool at 0x7fe74e70add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fe7442dc280>, db_session=<sqlalchemy.orm.session.Session object at 0x7fe74409...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe74408f0c0>
                 │     │         └ <function run_sync at 0x7fe74e7cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe74e7cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not tuple')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe744...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe74407e800>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe74408ef00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return FileResponse(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │            │                                                          │  │    │        └ ('/home/rb103/Downloads/resource-management/app/static/images/5_TTA3', 'image/png')
           │            │                                                          │  │    └ <function basename at 0x7fe750176cb0>
           │            │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │            │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │            └ ('/home/rb103/Downloads/resource-management/app/static/images/5_TTA3', 'image/png')
           └ <class 'starlette.responses.FileResponse'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ ('/home/rb103/Downloads/resource-management/app/static/images/5_TTA3', 'image/png')
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not tuple
INFO     2024-02-22 14:14:40.547 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43104 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:15:02.726 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:15:02.828 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:15:02.828 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:15:02.829 request id: app - uvicorn.server:serve - Finished server process [1091665]
INFO     2024-02-22 14:15:03.753 request id: app - uvicorn.server:serve - Started server process [1091838]
INFO     2024-02-22 14:15:03.754 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:15:03.755 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:15:04.056 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:15:04.158 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:15:04.158 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:15:04.159 request id: app - uvicorn.server:serve - Finished server process [1091838]
INFO     2024-02-22 14:15:05.584 request id: app - uvicorn.server:serve - Started server process [1091868]
INFO     2024-02-22 14:15:05.586 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:15:05.586 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:15:07.749 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:15:07.751 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37758 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:15:14.825 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:15:14.928 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:15:14.929 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:15:14.930 request id: app - uvicorn.server:serve - Finished server process [1091868]
INFO     2024-02-22 14:15:15.955 request id: app - uvicorn.server:serve - Started server process [1091933]
INFO     2024-02-22 14:15:15.956 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:15:15.957 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:15:18.601 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:15:18.603 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46242 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:16:13.059 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:16:13.160 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:16:13.162 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:16:13.163 request id: app - uvicorn.server:serve - Finished server process [1091933]
INFO     2024-02-22 14:16:44.020 request id: app - uvicorn.server:serve - Started server process [1092497]
INFO     2024-02-22 14:16:44.022 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:16:44.022 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:16:46.386 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:16:46.389 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f8b1a798310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f8b1a7983a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f8b1bc0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f8b1bd5e950>
           └ <SpawnProcess name='SpawnProcess-5' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f8b1bd5dfc0>
    └ <SpawnProcess name='SpawnProcess-5' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f8b1bc54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=1091866 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=1091866 started>
    │    └ <function subprocess_started at 0x7f8b1b08e440>
    └ <SpawnProcess name='SpawnProcess-5' parent=1091866 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f8b1bc54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f8b1b08d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f8b1bc54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8b1b9a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8b1b9a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8b1b9a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8b1bbf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f8b105969e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8b105969e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8b105969e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8b105969e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f8b1af8c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8b1af8c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8b1bc55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8b1a372b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8b1bc55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b106d19c0>
          └ <fastapi.applications.FastAPI object at 0x7f8b1a372b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f8b10595ed0>
                     │    └ <function error_handle_business at 0x7f8b1a207250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b106d19c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ RuntimeError('File at path Dowload Thành Công does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8b10526170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b106d3700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8b106d19c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8b10526170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b106d0850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8b106d3700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8b10526200>
                     │    │             └ <starlette.requests.Request object at 0x7f8b1055a2c0>
                     │    └ <function process_middleware_common at 0x7f8b1a2071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b106d0850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f8b1055a2c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8b10526200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ RuntimeError('File at path Dowload Thành Công does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f8b1a798a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f8b1a3047c0>
          │    │   │      └ <starlette.requests.Request object at 0x7f8b1055a2c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8b10610d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8b106d0850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b105270a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8b10613190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8b10610d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b105270a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8b1a1f62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8b10613190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b105270a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f8b1a3424d0>
          └ <fastapi.routing.APIRoute object at 0x7f8b10706560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b105270a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8b10524280>
          └ <fastapi.routing.APIRoute object at 0x7f8b10706560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 64, in app
    await response(scope, receive, send)
          │        │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8b105270a0>
          │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8b1055a7d0>>
          │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          └ <starlette.responses.FileResponse object at 0x7f8b1908b190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/responses.py", line 302, in __call__
    raise RuntimeError(f"File at path {self.path} does not exist.")

RuntimeError: File at path Dowload Thành Công does not exist.
INFO     2024-02-22 14:16:46.405 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57852 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:17:09.311 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:17:09.412 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:17:09.413 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:17:09.414 request id: app - uvicorn.server:serve - Finished server process [1092497]
INFO     2024-02-22 14:17:10.430 request id: app - uvicorn.server:serve - Started server process [1092674]
INFO     2024-02-22 14:17:10.432 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:17:10.432 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:17:11.883 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:17:11.885 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f60563dc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f60563dc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f605780fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f6057962950>
           └ <SpawnProcess name='SpawnProcess-6' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f6057961fc0>
    └ <SpawnProcess name='SpawnProcess-6' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6057858100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=1091866 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=1091866 started>
    │    └ <function subprocess_started at 0x7f6056d56440>
    └ <SpawnProcess name='SpawnProcess-6' parent=1091866 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6057858220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6056d55900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6057858220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f60571aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f60571aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f60571abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f60577fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f604c291c60>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f604c291c60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f604c291c60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f604c291c60>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6056c10550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f6056c105e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6057859f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f6055fb2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6057859f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f604c3cd9c0>
          └ <fastapi.applications.FastAPI object at 0x7f6055fb2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f604c291ea0>
                     │    └ <function error_handle_business at 0x7f6055e43250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f604c3cd9c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not set')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f604c222170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f604c3cf700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f604c3cd9c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f604c222170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f604c3cc850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f604c3cf700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f604c222200>
                     │    │             └ <starlette.requests.Request object at 0x7f604c2522c0>
                     │    └ <function process_middleware_common at 0x7f6055e431c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f604c3cc850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f604c2522c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f604c222200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not set')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f60563dca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6055f44810>
          │    │   │      └ <starlette.requests.Request object at 0x7f604c2522c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f604c508d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f604c3cc850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f604c2230a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f604c50b190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f604c508d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f604c2230a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f6055e322f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f604c50b190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f604c2230a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f6055f824d0>
          └ <fastapi.routing.APIRoute object at 0x7f604c402560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f604c2230a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f604c252740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f604c220280>
          └ <fastapi.routing.APIRoute object at 0x7f604c402560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f604c292830>
                     └ <function get_request_handler.<locals>.app at 0x7f604c2201f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f6055f83130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f604c291e40>, 'resource_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7f604c4d8310>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f604c402620>
                 └ <function run_in_threadpool at 0x7f60568dedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f604c4d8310>, db_session=<sqlalchemy.orm.session.Session object at 0x7f604c29...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f604c28aec0>
                 │     │         └ <function run_sync at 0x7f60569a1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f60569a0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not set')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f604c...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f604c2885c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f604c28acc0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return FileResponse(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │            │                                                          │  │    │        └ {'Dowload Thành Công '}
           │            │                                                          │  │    └ <function basename at 0x7f6058376cb0>
           │            │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │            │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │            └ {'Dowload Thành Công '}
           └ <class 'starlette.responses.FileResponse'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ {'Dowload Thành Công '}
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not set
INFO     2024-02-22 14:17:11.902 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33002 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:17:38.551 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:17:38.657 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:17:38.658 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:17:38.659 request id: app - uvicorn.server:serve - Finished server process [1092674]
INFO     2024-02-22 14:17:39.599 request id: app - uvicorn.server:serve - Started server process [1092857]
INFO     2024-02-22 14:17:39.600 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:17:39.601 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:17:41.776 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:17:41.779 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f2647594310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f26475943a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f2648a0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f2648b62950>
           └ <SpawnProcess name='SpawnProcess-7' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f2648b61fc0>
    └ <SpawnProcess name='SpawnProcess-7' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f2648a58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1091866 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1091866 started>
    │    └ <function subprocess_started at 0x7f2647e96440>
    └ <SpawnProcess name='SpawnProcess-7' parent=1091866 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f2648a58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f2647e95900>
    │    │                  └ <uvicorn.server.Server object at 0x7f2648a58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f26487a6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f26487a63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f26487a7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f26489fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f263d2a9c90>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f263d2a9c90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f263d2a9c90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f263d2a9c90>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f2647d90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f2647d905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2648a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f2647172b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f2648a59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f263d3e19f0>
          └ <fastapi.applications.FastAPI object at 0x7f2647172b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f263d2a9ed0>
                     │    └ <function error_handle_business at 0x7f2647007250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f263d3e19f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError('expected str, bytes or os.PathLike object, not NoneType')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f263d23a170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f263d3e3730>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f263d3e19f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f263d23a170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f263d3e0880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f263d3e3730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f263d23a200>
                     │    │             └ <starlette.requests.Request object at 0x7f263d26a2f0>
                     │    └ <function process_middleware_common at 0x7f26470071c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f263d3e0880>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f263d26a2f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f263d23a200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError('expected str, bytes or os.PathLike object, not NoneType')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f2647594a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f2647104400>
          │    │   │      └ <starlette.requests.Request object at 0x7f263d26a2f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f263d320d90>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f263d3e0880>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f263d23b0a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f263d3231c0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f263d320d90>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f263d23b0a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f2646ff62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f263d3231c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f263d23b0a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f26471424d0>
          └ <fastapi.routing.APIRoute object at 0x7f263d21a590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f263d23b0a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f263d26a770>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f263d238280>
          └ <fastapi.routing.APIRoute object at 0x7f263d21a590>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f263d2aa860>
                     └ <function get_request_handler.<locals>.app at 0x7f263d2381f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f2647143130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f263d2a9e70>, 'resource_id': 'f336c507-57dd-5cc3-9d89-09855be2b31a'}
                 │                 │         └ <function download_one at 0x7f263d4ec310>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f263d21a650>
                 └ <function run_in_threadpool at 0x7f2647a96dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f263d4ec310>, db_session=<sqlalchemy.orm.session.Session object at 0x7f263d2a...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f263d333800>
                 │     │         └ <function run_sync at 0x7f2647b59090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f2647b58820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError('expected str, bytes or os.PathLike object, not NoneType')>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f263d...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f263d29cb80>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f263d29f340>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 75, in download_one
    return FileResponse(file_path, media_type='application/octet-stream', filename=os.path.basename(file_path))
           │            │                                                          │  │    │        └ None
           │            │                                                          │  │    └ <function basename at 0x7f2649576cb0>
           │            │                                                          │  └ <module 'posixpath' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py'>
           │            │                                                          └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>
           │            └ None
           └ <class 'starlette.responses.FileResponse'>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/posixpath.py", line 142, in basename
    p = os.fspath(p)
        │  │      └ None
        │  └ <built-in function fspath>
        └ <module 'os' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/os.py'>

TypeError: expected str, bytes or os.PathLike object, not NoneType
INFO     2024-02-22 14:17:41.793 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52828 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:18:02.174 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:18:02.276 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:18:02.277 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:18:02.277 request id: app - uvicorn.server:serve - Finished server process [1092857]
INFO     2024-02-22 14:18:03.260 request id: app - uvicorn.server:serve - Started server process [1093026]
INFO     2024-02-22 14:18:03.261 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:18:03.261 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:18:04.373 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:18:04.375 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56816 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:18:56.574 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:18:56.676 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:18:56.676 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:18:56.677 request id: app - uvicorn.server:serve - Finished server process [1093026]
INFO     2024-02-22 14:18:57.773 request id: app - uvicorn.server:serve - Started server process [1093353]
INFO     2024-02-22 14:18:57.774 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:18:57.775 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:19:01.431 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:19:01.434 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f1da3948310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f1da39483a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f1da4d0bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f1da4e5e950>
           └ <SpawnProcess name='SpawnProcess-9' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f1da4e5dfc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f1da4d54100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1091866 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1091866 started>
    │    └ <function subprocess_started at 0x7f1da428e440>
    └ <SpawnProcess name='SpawnProcess-9' parent=1091866 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f1da4d54220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f1da428d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f1da4d54220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f1da4b06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f1da4b063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f1da4b07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f1da4cf7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f1d998669e0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f1d998669e0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f1d998669e0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f1d998669e0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f1da415c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f1da415c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1da4d55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f1da351eb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f1da4d55f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1d999a19c0>
          └ <fastapi.applications.FastAPI object at 0x7f1da351eb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f1d99865ed0>
                     │    └ <function error_handle_business at 0x7f1da33af250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1d999a19c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ RuntimeError('File at path Download thành công does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1d999f6170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1d999a3700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f1d999a19c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f1d999f6170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1d999a0850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f1d999a3700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1d999f6200>
                     │    │             └ <starlette.requests.Request object at 0x7f1d998262c0>
                     │    └ <function process_middleware_common at 0x7f1da33af1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1d999a0850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f1d998262c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f1d999f6200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ RuntimeError('File at path Download thành công does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f1da3948a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f1da34b0770>
          │    │   │      └ <starlette.requests.Request object at 0x7f1d998262c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1d99ae0d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f1d999a0850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d999f70a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1d99ae3190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f1d99ae0d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d999f70a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f1da339e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f1d99ae3190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d999f70a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f1da34ee4d0>
          └ <fastapi.routing.APIRoute object at 0x7f1d999de560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d999f70a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f1d999f4280>
          └ <fastapi.routing.APIRoute object at 0x7f1d999de560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 64, in app
    await response(scope, receive, send)
          │        │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f1d999f70a0>
          │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f1d998267d0>>
          │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          └ <starlette.responses.FileResponse object at 0x7f1da2217190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/responses.py", line 302, in __call__
    raise RuntimeError(f"File at path {self.path} does not exist.")

RuntimeError: File at path Download thành công does not exist.
INFO     2024-02-22 14:19:01.448 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50710 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:19:25.876 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:19:25.977 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:19:25.979 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:19:25.980 request id: app - uvicorn.server:serve - Finished server process [1093353]
INFO     2024-02-22 14:19:26.955 request id: app - uvicorn.server:serve - Started server process [1093543]
INFO     2024-02-22 14:19:26.956 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:19:26.957 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:19:27.630 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:19:27.633 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe1374e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe1374e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe13890bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe138a5e950>
           └ <SpawnProcess name='SpawnProcess-10' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe138a5dfc0>
    └ <SpawnProcess name='SpawnProcess-10' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe138954100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=1091866 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=1091866 started>
    │    └ <function subprocess_started at 0x7fe137e5a440>
    └ <SpawnProcess name='SpawnProcess-10' parent=1091866 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe138954220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe137e59900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe138954220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe1386e6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe1386e63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe1386e7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe1388f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe12d2a29b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe12d2a29b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe12d2a29b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe12d2a29b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe137d1c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe137d1c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe138955f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe1370c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe138955f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe12d3d99c0>
          └ <fastapi.applications.FastAPI object at 0x7fe1370c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe12d2a1ea0>
                     │    └ <function error_handle_business at 0x7fe136f5b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe12d3d99c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ RuntimeError('File at path Download success does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe12d232170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe12d3db700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe12d3d99c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe12d232170>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe12d3d8850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe12d3db700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe12d232200>
                     │    │             └ <starlette.requests.Request object at 0x7fe12d2622c0>
                     │    └ <function process_middleware_common at 0x7fe136f5b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe12d3d8850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe12d2622c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe12d232200>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ RuntimeError('File at path Download success does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe1374e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe137058810>
          │    │   │      └ <starlette.requests.Request object at 0x7fe12d2622c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe12d318d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe12d3d8850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe12d2330a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe12d31b190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe12d318d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe12d2330a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe136f4a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe12d31b190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe12d2330a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe1370964d0>
          └ <fastapi.routing.APIRoute object at 0x7fe12d212560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe12d2330a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe12d230280>
          └ <fastapi.routing.APIRoute object at 0x7fe12d212560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 64, in app
    await response(scope, receive, send)
          │        │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe12d2330a0>
          │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe12d262740>>
          │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          └ <starlette.responses.FileResponse object at 0x7fe135ce3160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/responses.py", line 302, in __call__
    raise RuntimeError(f"File at path {self.path} does not exist.")

RuntimeError: File at path Download success does not exist.
INFO     2024-02-22 14:19:27.645 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33008 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:20:44.853 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:20:44.954 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:20:44.955 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:20:44.955 request id: app - uvicorn.server:serve - Finished server process [1093543]
INFO     2024-02-22 14:20:45.936 request id: app - uvicorn.server:serve - Started server process [1094021]
INFO     2024-02-22 14:20:45.937 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:20:45.938 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:20:49.671 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
ERROR    2024-02-22 14:20:49.673 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f83e407c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f83e407c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f83e550bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f83e565e950>
           └ <SpawnProcess name='SpawnProcess-11' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f83e565dfc0>
    └ <SpawnProcess name='SpawnProcess-11' parent=1091866 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f83e5554100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=1091866 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=1091866 started>
    │    └ <function subprocess_started at 0x7f83e498e440>
    └ <SpawnProcess name='SpawnProcess-11' parent=1091866 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f83e5554220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f83e498d900>
    │    │                  └ <uvicorn.server.Server object at 0x7f83e5554220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f83e4da6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f83e4da63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f83e4da7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f83e54f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f83da0669b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f83da0669b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f83da0669b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f83da0669b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f83e4888550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f83e48885e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f83e5555f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f83e3c62b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f83e5555f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f83da1a19c0>
          └ <fastapi.applications.FastAPI object at 0x7f83e3c62b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f83da065ea0>
                     │    └ <function error_handle_business at 0x7f83e3af7250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f83da1a19c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ RuntimeError('File at path Download thành công does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f83da1fa0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f83da1a3700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f83da1a19c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f83da1fa0e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f83da1a0850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f83da1a3700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f83da1fa170>
                     │    │             └ <starlette.requests.Request object at 0x7f83da0262c0>
                     │    └ <function process_middleware_common at 0x7f83e3af71c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f83da1a0850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f83da0262c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f83da1fa170>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ RuntimeError('File at path Download thành công does not exist.')
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f83e407ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f83e3bf4630>
          │    │   │      └ <starlette.requests.Request object at 0x7f83da0262c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f83da2e0d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f83da1a0850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f83da1fb010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f83da2e3190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f83da2e0d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f83da1fb010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f83e3ae62f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f83da2e3190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f83da1fb010>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f83e3c324d0>
          └ <fastapi.routing.APIRoute object at 0x7f83da1da560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f83da1fb010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f83da1f81f0>
          └ <fastapi.routing.APIRoute object at 0x7f83da1da560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 64, in app
    await response(scope, receive, send)
          │        │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f83da1fb010>
          │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f83da026740>>
          │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          └ <starlette.responses.FileResponse object at 0x7f83da0fb160>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/responses.py", line 302, in __call__
    raise RuntimeError(f"File at path {self.path} does not exist.")

RuntimeError: File at path Download thành công does not exist.
INFO     2024-02-22 14:20:49.688 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55686 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-22 14:21:08.924 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:21:09.026 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:21:09.028 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:21:09.030 request id: app - uvicorn.server:serve - Finished server process [1094021]
INFO     2024-02-22 14:21:10.997 request id: app - uvicorn.server:serve - Started server process [1094189]
INFO     2024-02-22 14:21:10.998 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:21:10.999 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:21:12.715 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:21:12.718 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44596 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:22:01.818 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:22:01.922 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:22:01.923 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:22:01.924 request id: app - uvicorn.server:serve - Finished server process [1094189]
INFO     2024-02-22 14:22:02.979 request id: app - uvicorn.server:serve - Started server process [1094503]
INFO     2024-02-22 14:22:02.980 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:22:02.981 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:22:20.554 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:22:20.657 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:22:20.659 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:22:20.661 request id: app - uvicorn.server:serve - Finished server process [1094503]
INFO     2024-02-22 14:22:21.615 request id: app - uvicorn.server:serve - Started server process [1094627]
INFO     2024-02-22 14:22:21.617 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:22:21.617 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:22:52.945 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:22:53.047 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:22:53.047 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:22:53.048 request id: app - uvicorn.server:serve - Finished server process [1094627]
INFO     2024-02-22 14:22:54.004 request id: app - uvicorn.server:serve - Started server process [1094823]
INFO     2024-02-22 14:22:54.005 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:22:54.006 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:23:03.443 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:23:03.544 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:23:03.547 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:23:03.549 request id: app - uvicorn.server:serve - Finished server process [1094823]
INFO     2024-02-22 14:23:04.601 request id: app - uvicorn.server:serve - Started server process [1094879]
INFO     2024-02-22 14:23:04.603 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:23:04.603 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:23:27.296 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:23:27.397 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:23:27.398 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:23:27.399 request id: app - uvicorn.server:serve - Finished server process [1094879]
INFO     2024-02-22 14:23:28.334 request id: app - uvicorn.server:serve - Started server process [1095042]
INFO     2024-02-22 14:23:28.335 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:23:28.336 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:23:35.763 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:23:35.864 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:23:35.865 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:23:35.866 request id: app - uvicorn.server:serve - Finished server process [1095042]
INFO     2024-02-22 14:23:36.857 request id: app - uvicorn.server:serve - Started server process [1095103]
INFO     2024-02-22 14:23:36.858 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:23:36.859 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:23:39.988 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:23:39.991 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54190 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:24:48.756 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:24:48.858 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:24:48.859 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:24:48.860 request id: app - uvicorn.server:serve - Finished server process [1095103]
INFO     2024-02-22 14:24:49.959 request id: app - uvicorn.server:serve - Started server process [1095557]
INFO     2024-02-22 14:24:49.960 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:24:49.961 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:24:57.791 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:24:57.893 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:24:57.894 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:24:57.894 request id: app - uvicorn.server:serve - Finished server process [1095557]
INFO     2024-02-22 14:24:58.817 request id: app - uvicorn.server:serve - Started server process [1095618]
INFO     2024-02-22 14:24:58.818 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:24:58.819 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:25:01.439 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:25:01.441 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:39294 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
ERROR    2024-02-22 14:25:16.068 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4130fbc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f4130fbc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f413240fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4132562950>
           └ <SpawnProcess name='SpawnProcess-9' parent=1094187 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4132561fc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=1094187 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4132458100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1094187 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1094187 started>
    │    └ <function subprocess_started at 0x7f4131922440>
    └ <SpawnProcess name='SpawnProcess-9' parent=1094187 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4132458220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4131921900>
    │    │                  └ <uvicorn.server.Server object at 0x7f4132458220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f41321d2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f41321d23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f41321d3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f41323fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f4122e2ad70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4122e2ad70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4122e2ad70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4122e2ad70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f41317e8550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f41317e85e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4132459f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4130b9ab90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4132459f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4122fa99c0>
          └ <fastapi.applications.FastAPI object at 0x7f4130b9ab90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4122e29d50>
                     │    └ <function error_handle_business at 0x7f4130a2f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4122fa99c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4122ffab90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4122fab700>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4122fa99c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4122ffab90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4122fa8850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4122fab700>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4122ffb0a0>
                     │    │             └ <starlette.requests.Request object at 0x7f4122e29ea0>
                     │    └ <function process_middleware_common at 0x7f4130a2f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4122fa8850>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4122e29ea0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4122ffb0a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, type: <class 'NoneType'>, va...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4130fbca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4130b2c6d0>
          │    │   │      └ <starlette.requests.Request object at 0x7f4122e29ea0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f41233e8d60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4122fa8850>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4122e7d5a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f41233eb190>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f41233e8d60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4122e7d5a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4130a1e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f41233eb190>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4122e7d5a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f4130b6a4d0>
          └ <fastapi.routing.APIRoute object at 0x7f4122fda560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4122e7d5a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4122e2b700>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4122ff8280>
          └ <fastapi.routing.APIRoute object at 0x7f4122fda560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f41300d9d80>
                     └ <function get_request_handler.<locals>.app at 0x7f4122ff81f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4130b6b130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f4122e6de70>, 'resource_id': '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'}
                 │                 │         └ <function download_one at 0x7f41233bc310>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f4122fda620>
                 └ <function run_in_threadpool at 0x7f41314bedd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f41233bc310>, db_session=<sqlalchemy.orm.session.Session object at 0x7f4122e6...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f4122e62fc0>
                 │     │         └ <function run_sync at 0x7f4131581090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4131580820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ParamValidationError("Parameter validation failed:\nInvalid type for parameter Key, value: None, t...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f4130...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f41233f4180>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f413011c800>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 74, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ '8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f4122e6de70>
                │                └ <function ResourceService.download_resource at 0x7f4128b27640>
                └ <app.src.services.resource_service.ResourceService object at 0x7f4129da0040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 63, in download_resource
    content = self.base_service.engine_s3.get_object(s3_key)
              │    │            │         │          └ None
              │    │            │         └ <function S3Storage.get_object at 0x7f4128b27520>
              │    │            └ <app.src.services.s3_connector.S3Storage object at 0x7f4129da00a0>
              │    └ <app.src.services.base_service.BaseService object at 0x7f4129da0070>
              └ <app.src.services.resource_service.ResourceService object at 0x7f4129da0040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/s3_connector.py", line 59, in get_object
    file_obj = self.client.get_object(Bucket=self.s3_bucket, Key=object_name)
               │    │      │                 │    │              └ None
               │    │      │                 │    └ 'bigdata'
               │    │      │                 └ <app.src.services.s3_connector.S3Storage object at 0x7f4129da00a0>
               │    │      └ <function ClientCreator._create_api_method.<locals>._api_call at 0x7f4123f68d30>
               │    └ <botocore.client.S3 object at 0x7f4123f76050>
               └ <app.src.services.s3_connector.S3Storage object at 0x7f4129da00a0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 553, in _api_call
    return self._make_api_call(operation_name, kwargs)
           │    │              │               └ {'Bucket': 'bigdata', 'Key': None}
           │    │              └ 'GetObject'
           │    └ <function BaseClient._make_api_call at 0x7f4128f9e680>
           └ <botocore.client.S3 object at 0x7f4123f76050>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 962, in _make_api_call
    request_dict = self._convert_to_request_dict(
                   │    └ <function BaseClient._convert_to_request_dict at 0x7f4128f9e7a0>
                   └ <botocore.client.S3 object at 0x7f4123f76050>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/client.py", line 1036, in _convert_to_request_dict
    request_dict = self._serializer.serialize_to_request(
                   │    │           └ <function ParamValidationDecorator.serialize_to_request at 0x7f4129393130>
                   │    └ <botocore.validate.ParamValidationDecorator object at 0x7f41233483a0>
                   └ <botocore.client.S3 object at 0x7f4123f76050>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/botocore/validate.py", line 381, in serialize_to_request
    raise ParamValidationError(report=report.generate_report())
          │                           │      └ <function ValidationErrors.generate_report at 0x7f4129391c60>
          │                           └ <botocore.validate.ValidationErrors object at 0x7f41300da230>
          └ <class 'botocore.exceptions.ParamValidationError'>

botocore.exceptions.ParamValidationError: Parameter validation failed:
Invalid type for parameter Key, value: None, type: <class 'NoneType'>, valid types: <class 'str'>
INFO     2024-02-22 14:25:16.088 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57120 - "GET /rms/v1.0/download/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 500
INFO     2024-02-22 14:25:41.790 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:25:41.893 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:25:41.896 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:25:41.898 request id: app - uvicorn.server:serve - Finished server process [1095618]
INFO     2024-02-22 14:25:43.065 request id: app - uvicorn.server:serve - Started server process [1096356]
INFO     2024-02-22 14:25:43.066 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:25:43.067 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:26:58.431 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:26:58.434 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:60848 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:27:06.497 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:27:06.598 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:27:06.599 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:27:06.600 request id: app - uvicorn.server:serve - Finished server process [1096356]
INFO     2024-02-22 14:27:07.604 request id: app - uvicorn.server:serve - Started server process [1096882]
INFO     2024-02-22 14:27:07.605 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:27:07.606 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:27:11.856 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:27:11.858 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48978 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:29:28.469 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:29:28.572 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:29:28.573 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:29:28.574 request id: app - uvicorn.server:serve - Finished server process [1096882]
INFO     2024-02-22 14:29:29.619 request id: app - uvicorn.server:serve - Started server process [1097916]
INFO     2024-02-22 14:29:29.620 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:29:29.621 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:29:41.194 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-22 14:29:41.196 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49578 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-22 14:34:10.193 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-22 14:34:10.459 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODU4OTA1MH0.YNVTxUaj8ZwBMt49QUXphx9ebgKgXpWAVgGqQCcjv28","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODYwNTI1MH0.RDKIFaMFDlSOgMW0KCS6YgI7XxQM4mldk86z71t4P4Q"},"links":null,"relationships":null,"timestamp":"2024-02-22 14:29:29"}'}
INFO     2024-02-22 14:34:10.461 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49106 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-22 14:34:30.378 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:48250 - "GET /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-22 14:40:38.946 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:40:39.048 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:40:39.048 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:40:39.049 request id: app - uvicorn.server:serve - Finished server process [1097916]
INFO     2024-02-22 14:40:52.138 request id: app - uvicorn.server:serve - Started server process [1101942]
INFO     2024-02-22 14:40:52.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:40:52.140 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:40:56.254 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:41:06.897 request id: app - uvicorn.server:serve - Started server process [1102058]
INFO     2024-02-22 14:41:06.898 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 14:41:06.898 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 14:41:09.588 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33988 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 14:41:09.762 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33988 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-22 14:41:32.716 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33996 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 403
INFO     2024-02-22 14:41:47.863 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 14:41:47.965 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 14:41:47.966 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 14:41:47.968 request id: app - uvicorn.server:serve - Finished server process [1102058]
INFO     2024-02-22 16:39:03.080 request id: app - uvicorn.server:serve - Started server process [1148510]
INFO     2024-02-22 16:39:03.082 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 16:39:03.083 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 16:39:06.595 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58172 - "GET /docs HTTP/1.1" 200
INFO     2024-02-22 16:39:06.945 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58172 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-22 16:39:34.479 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-22 16:39:34.756 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODU5NjU3NH0.OihA65uUUsDJbBAgBUqksd2KmZVLYEgBiqlVWXHh8ZA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODYxMjc3NH0.xwh_yD7DjROJsFUI5WB2e7-fHyIidLt-H9CwFiIqZQw"},"links":null,"relationships":null,"timestamp":"2024-02-22 16:39:02"}'}
INFO     2024-02-22 16:39:34.757 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58184 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-22 16:40:07.038 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:50156 - "GET /rms/v1.0/resources/8decd5b4-b8ab-5ea3-9ef4-182cf4eb456a HTTP/1.1" 200
INFO     2024-02-22 16:40:14.689 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 16:40:14.790 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 16:40:14.793 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 16:40:14.795 request id: app - uvicorn.server:serve - Finished server process [1148510]
INFO     2024-02-22 16:47:21.153 request id: app - uvicorn.server:serve - Started server process [1151568]
INFO     2024-02-22 16:47:21.155 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 16:47:21.155 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 16:47:22.863 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 16:47:22.965 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 16:47:22.967 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 16:47:22.969 request id: app - uvicorn.server:serve - Finished server process [1151568]
INFO     2024-02-22 16:47:25.969 request id: app - uvicorn.server:serve - Started server process [1151585]
INFO     2024-02-22 16:47:25.971 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 16:47:25.971 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 16:50:01.518 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-22 16:50:01.621 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-22 16:50:01.625 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-22 16:50:01.627 request id: app - uvicorn.server:serve - Finished server process [1151585]
INFO     2024-02-22 16:50:10.425 request id: app - uvicorn.server:serve - Started server process [1152570]
INFO     2024-02-22 16:50:10.426 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-22 16:50:10.427 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-22 16:50:21.411 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 10:26:39.812 request id: app - uvicorn.server:serve - Started server process [1547484]
INFO     2024-02-23 10:26:39.813 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 10:26:39.814 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 10:26:46.640 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 10:26:46.742 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 10:26:46.742 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 10:26:46.743 request id: app - uvicorn.server:serve - Finished server process [1547484]
INFO     2024-02-23 12:38:21.540 request id: app - uvicorn.server:serve - Started server process [1633393]
INFO     2024-02-23 12:38:21.541 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:38:21.542 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:38:34.997 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53804 - "GET /docs HTTP/1.1" 200
INFO     2024-02-23 12:38:35.079 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53804 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-02-23 12:38:35.081 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53806 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-23 12:38:35.271 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53806 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-23 12:39:07.948 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-23 12:39:08.251 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY2ODU0OH0.6d5dfa0YI4dPY2PMBdt6YwEgTgf9ZlDVel7FhtyzYrw","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY4NDc0OH0.ZPrFkt4X2M-ABVEwoMy8EkTmPkLSew4LmDXJ_1R15rU"},"links":null,"relationships":null,"timestamp":"2024-02-23 12:38:20"}'}
INFO     2024-02-23 12:39:08.252 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44590 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-23 12:40:00.673 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f048b050310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f048b0503a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f048c40fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f048c562950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f048c561fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f048c458100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1633390 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1633390 started>
    │    └ <function subprocess_started at 0x7f048b992440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1633390 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f048c458220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f048b991900>
    │    │                  └ <uvicorn.server.Server object at 0x7f048c458220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f048bdaa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f048bdaa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f048bdabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f048c3fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f04899ff4c0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f04899ff4c0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f04899ff4c0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f04899ff4c0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f048b85c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f048b85c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f048c459f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f048ac36b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f048c459f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0480d28910>
          └ <fastapi.applications.FastAPI object at 0x7f048ac36b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f04899fdb10>
                     │    └ <function error_handle_business at 0x7f048aacb250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0480d28910>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0480dea8c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0480d2a650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f0480d28910>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f0480dea8c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0480ecb760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f0480d2a650>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0480d4edd0>
                     │    │             └ <starlette.requests.Request object at 0x7f0480ddf880>
                     │    └ <function process_middleware_common at 0x7f048aacb1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0480ecb760>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f0480ddf880>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f0480d4edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f048b050a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f048abc0c20>
          │    │   │      └ <starlette.requests.Request object at 0x7f0480ddf880>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0480e27c40>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f0480ecb760>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0480199000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0480e27c70>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f0480e27c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0480199000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f048aaba2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f0480e27c70>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0480199000>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f048ac064d0>
          └ <fastapi.routing.APIRoute object at 0x7f0480d65450>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f0480199000>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f04899ffdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f0480d4d000>
          └ <fastapi.routing.APIRoute object at 0x7f0480d65450>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f0480d90970>
                     └ <function get_request_handler.<locals>.app at 0x7f0480d4cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f048ac07130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f0480ddf2b0>, '_': (<app.src.models.user.User object at 0x7f04801...
                 │                 │         └ <function download_one at 0x7f0480fa5090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f0480d65510>
                 └ <function run_in_threadpool at 0x7f048b54add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f0480fa5090>, db_session=<sqlalchemy.orm.session.Session object at 0x7f0480dd...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f0480e67380>
                 │     │         └ <function run_sync at 0x7f048b60d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f048b60c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f0480...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f0480de1280>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f0480de1a00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 76, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f0480ddf2b0>
                │                └ <function ResourceService.download_resource at 0x7f0482b6c430>
                └ <app.src.services.resource_service.ResourceService object at 0x7f0483dc5f30>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-23 12:40:00.703 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37962 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-23 12:40:55.848 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:40:55.949 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:40:55.950 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:40:55.951 request id: app - uvicorn.server:serve - Finished server process [1633393]
INFO     2024-02-23 12:40:57.032 request id: app - uvicorn.server:serve - Started server process [1635113]
INFO     2024-02-23 12:40:57.033 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:40:57.034 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:41:13.000 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:41:13.103 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:41:13.104 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:41:13.105 request id: app - uvicorn.server:serve - Finished server process [1635113]
INFO     2024-02-23 12:41:16.373 request id: app - uvicorn.server:serve - Started server process [1635300]
INFO     2024-02-23 12:41:16.374 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:41:16.375 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:41:25.810 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:41:25.912 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:41:25.913 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:41:25.913 request id: app - uvicorn.server:serve - Finished server process [1635300]
INFO     2024-02-23 12:41:43.109 request id: app - uvicorn.server:serve - Started server process [1635620]
INFO     2024-02-23 12:41:43.110 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:41:43.110 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-23 12:41:49.051 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f886b418310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f886b4183a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f886c80fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f886c962950>
           └ <SpawnProcess name='SpawnProcess-7' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f886c961fc0>
    └ <SpawnProcess name='SpawnProcess-7' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f886c858100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1633390 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=1633390 started>
    │    └ <function subprocess_started at 0x7f886bd92440>
    └ <SpawnProcess name='SpawnProcess-7' parent=1633390 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f886c858220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f886bd91900>
    │    │                  └ <uvicorn.server.Server object at 0x7f886c858220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f886c1aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f886c1aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f886c1abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f886c7fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f8869d04070>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8869d04070>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8869d04070>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8869d04070>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f886bc50550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f886bc505e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f886c859f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f886aff2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f886c859f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88611388e0>
          └ <fastapi.applications.FastAPI object at 0x7f886aff2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f886119df00>
                     │    └ <function error_handle_business at 0x7f886ae87250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88611388e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f886115eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f886113a620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f88611388e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f886115eef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88612d7730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f886113a620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f886115ef80>
                     │    │             └ <starlette.requests.Request object at 0x7f886119d270>
                     │    └ <function process_middleware_common at 0x7f886ae871c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88612d7730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f886119d270>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f886115ef80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f886b418a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f886af84680>
          │    │   │      └ <starlette.requests.Request object at 0x7f886119d270>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8861233c10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f88612d7730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f886115fe20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8861233c40>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8861233c10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f886115fe20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f886ae762f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8861233c40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f886115fe20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f886afc24d0>
          └ <fastapi.routing.APIRoute object at 0x7f886116d420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f886115fe20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f886119d780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f886115d000>
          └ <fastapi.routing.APIRoute object at 0x7f886116d420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f88611f4160>
                     └ <function get_request_handler.<locals>.app at 0x7f886115cf70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f886afc3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f88611f4340>, '_': (<app.src.models.user.User object at 0x7f8869d...
                 │                 │         └ <function download_one at 0x7f88613b5090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f886116d4e0>
                 └ <function run_in_threadpool at 0x7f886b91edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f88613b5090>, db_session=<sqlalchemy.orm.session.Session object at 0x7f88611f...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f88611cc2c0>
                 │     │         └ <function run_sync at 0x7f886b9e1090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f886b9e0820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f8861...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f88611e5000>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f88612100c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f88611f4340>
                │                └ <function ResourceService.download_resource at 0x7f8862f70430>
                └ <app.src.services.resource_service.ResourceService object at 0x7f886824a710>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-23 12:41:49.068 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40364 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-23 12:42:03.892 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:42:03.993 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:42:03.994 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:42:03.995 request id: app - uvicorn.server:serve - Finished server process [1635620]
INFO     2024-02-23 12:42:04.901 request id: app - uvicorn.server:serve - Started server process [1635842]
INFO     2024-02-23 12:42:04.903 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:42:04.903 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-23 12:42:07.352 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fb2471e8310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fb2471e83a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fb24860fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fb248762950>
           └ <SpawnProcess name='SpawnProcess-8' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fb248761fc0>
    └ <SpawnProcess name='SpawnProcess-8' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fb248658100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=1633390 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=1633390 started>
    │    └ <function subprocess_started at 0x7fb247b5e440>
    └ <SpawnProcess name='SpawnProcess-8' parent=1633390 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fb248658220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fb247b5d900>
    │    │                  └ <uvicorn.server.Server object at 0x7fb248658220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fb247faa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fb247faa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fb247fabeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fb2485fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7fb245ad1510>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fb245ad1510>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fb245ad1510>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fb245ad1510>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fb247a1c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fb247a1c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb248659f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fb246dc6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fb248659f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb23cf448e0>
          └ <fastapi.applications.FastAPI object at 0x7fb246dc6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fb23cfa9f00>
                     │    └ <function error_handle_business at 0x7fb246c5b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb23cf448e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb23cf6aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb23cf46620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fb23cf448e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fb23cf6aef0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb23d0e3730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fb23cf46620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb23cf6af80>
                     │    │             └ <starlette.requests.Request object at 0x7fb23cfa9270>
                     │    └ <function process_middleware_common at 0x7fb246c5b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb23d0e3730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fb23cfa9270>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fb23cf6af80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fb2471e8a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fb246d58860>
          │    │   │      └ <starlette.requests.Request object at 0x7fb23cfa9270>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb23d03fc10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fb23d0e3730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb23cf6be20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb23d03fc40>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fb23d03fc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb23cf6be20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fb246c4a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fb23d03fc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb23cf6be20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fb246d964d0>
          └ <fastapi.routing.APIRoute object at 0x7fb23cf79420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fb23cf6be20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fb23cfa9780>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fb23cf69000>
          └ <fastapi.routing.APIRoute object at 0x7fb23cf79420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fb23cffc160>
                     └ <function get_request_handler.<locals>.app at 0x7fb23cf68f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fb246d97130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fb23cffc340>, '_': (<app.src.models.user.User object at 0x7fb245b...
                 │                 │         └ <function download_one at 0x7fb23d1bd090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fb23cf794e0>
                 └ <function run_in_threadpool at 0x7fb2476eadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fb23d1bd090>, db_session=<sqlalchemy.orm.session.Session object at 0x7fb23cff...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fb23cfe3e40>
                 │     │         └ <function run_sync at 0x7fb2477ad090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fb2477ac820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fb23c...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fb23d0087c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fb23d01e8c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7fb23cffc340>
                │                └ <function ResourceService.download_resource at 0x7fb23ed78430>
                └ <app.src.services.resource_service.ResourceService object at 0x7fb23fffe710>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-23 12:42:07.368 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49438 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-23 12:42:31.411 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:42:31.513 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:42:31.514 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:42:31.514 request id: app - uvicorn.server:serve - Finished server process [1635842]
INFO     2024-02-23 12:42:32.424 request id: app - uvicorn.server:serve - Started server process [1636160]
INFO     2024-02-23 12:42:32.426 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:42:32.426 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:42:48.449 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44072 - "GET /docs HTTP/1.1" 200
INFO     2024-02-23 12:42:48.530 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44072 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-02-23 12:42:48.532 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44076 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-23 12:42:48.726 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44076 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-23 12:43:17.100 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-23 12:43:17.372 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY2ODc5N30.nriKzkjgRL0FVyihvOY8K4wfbjoCy3kUQGXygVejk0E","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY4NDk5N30.bScT49BWKL6qlkM1NMAMvJNSGKIOd5UhT3RyygPTsgg"},"links":null,"relationships":null,"timestamp":"2024-02-23 12:42:32"}'}
INFO     2024-02-23 12:43:17.373 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47550 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-23 12:43:38.178 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f60dc9ec310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f60dc9ec3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f60dde0fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f60ddf62950>
           └ <SpawnProcess name='SpawnProcess-9' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f60ddf61fc0>
    └ <SpawnProcess name='SpawnProcess-9' parent=1633390 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f60dde58100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1633390 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=1633390 started>
    │    └ <function subprocess_started at 0x7f60dd366440>
    └ <SpawnProcess name='SpawnProcess-9' parent=1633390 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f60dde58220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f60dd365900>
    │    │                  └ <uvicorn.server.Server object at 0x7f60dde58220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f60dd7aa440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f60dd7aa3b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f60dd7abeb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f60dddfb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f60d14879a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f60d14879a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f60d14879a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f60d14879a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f60dd224550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f60dd2245e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f60dde59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f60dc5c6b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f60dde59f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60d28208e0>
          └ <fastapi.applications.FastAPI object at 0x7f60dc5c6b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f60d287dc30>
                     │    └ <function error_handle_business at 0x7f60dc45b250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60d28208e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'str' object has no attribute 'query'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f60d28daa70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60d2822620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f60d28208e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f60d28daa70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60d29bf730>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f60d2822620>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f60d28da5f0>
                     │    │             └ <starlette.requests.Request object at 0x7f60d28d0670>
                     │    └ <function process_middleware_common at 0x7f60dc45b1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60d29bf730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f60d28d0670>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f60d28da5f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'str' object has no attribute 'query'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f60dc9eca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f60dc564450>
          │    │   │      └ <starlette.requests.Request object at 0x7f60d28d0670>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f60d291bc10>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f60d29bf730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f60d1495090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f60d291bc40>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f60d291bc10>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f60d1495090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f60dc44a2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f60d291bc40>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f60d1495090>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f60dc5964d0>
          └ <fastapi.routing.APIRoute object at 0x7f60d2851420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f60d1495090>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f60d14b92a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f60d2841000>
          └ <fastapi.routing.APIRoute object at 0x7f60d2851420>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f60d14b9330>
                     └ <function get_request_handler.<locals>.app at 0x7f60d2840f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f60dc597130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f60d28d24d0>, '_': (<app.src.models.user.User object at 0x7f60d14...
                 │                 │         └ <function download_one at 0x7f60d2aa1090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f60d28514e0>
                 └ <function run_in_threadpool at 0x7f60dcef2dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f60d2aa1090>, db_session=<sqlalchemy.orm.session.Session object at 0x7f60d28d...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f60d2883d40>
                 │     │         └ <function run_sync at 0x7f60dcfb5090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f60dcfb4820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'str' object has no attribute 'query'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f60d1...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f60d28945c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f60d2882c00>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource_service.download_resource(db_session, resource_id, request)
                │                │                 │           │            └ <starlette.requests.Request object at 0x7f60d14b9330>
                │                │                 │           └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f60d28d24d0>
                │                └ <function ResourceService.download_resource at 0x7f60d8374430>
                └ <app.src.services.resource_service.ResourceService object at 0x7f60d984a710>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    resource = self.file_repository.get(db_session, resource_id)
               │    │               │   │           └ <starlette.requests.Request object at 0x7f60d14b9330>
               │    │               │   └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'
               │    │               └ <function BaseSQLRepository.get at 0x7f60da6625f0>
               │    └ <app.src.repositories.resource.FileRepository object at 0x7f60d2ada860>
               └ <app.src.services.resource_service.ResourceService object at 0x7f60d984a710>

  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 36, in get
    data = session.query(self.model).filter(self.model.id == obj_id,
           │             │    │             │    │     │     └ <starlette.requests.Request object at 0x7f60d14b9330>
           │             │    │             │    │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f60da681b20>
           │             │    │             │    └ <class 'app.src.models.resource.Resource'>
           │             │    │             └ <app.src.repositories.resource.FileRepository object at 0x7f60d2ada860>
           │             │    └ <class 'app.src.models.resource.Resource'>
           │             └ <app.src.repositories.resource.FileRepository object at 0x7f60d2ada860>
           └ 'f336c507-57dd-5cc3-9d89-09855be2b31a'

AttributeError: 'str' object has no attribute 'query'
INFO     2024-02-23 12:43:38.197 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:38160 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 500
INFO     2024-02-23 12:46:48.147 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:46:48.248 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:46:48.249 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:46:48.249 request id: app - uvicorn.server:serve - Finished server process [1636160]
INFO     2024-02-23 12:46:49.241 request id: app - uvicorn.server:serve - Started server process [1638857]
INFO     2024-02-23 12:46:49.245 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:46:49.245 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:47:04.505 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:47:04.608 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:47:04.610 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:47:04.611 request id: app - uvicorn.server:serve - Finished server process [1638857]
INFO     2024-02-23 12:47:05.771 request id: app - uvicorn.server:serve - Started server process [1639006]
INFO     2024-02-23 12:47:05.772 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:47:05.772 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:47:44.223 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:47:44.324 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:47:44.325 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:47:44.326 request id: app - uvicorn.server:serve - Finished server process [1639006]
INFO     2024-02-23 12:47:45.234 request id: app - uvicorn.server:serve - Started server process [1639435]
INFO     2024-02-23 12:47:45.236 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:47:45.236 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:47:50.658 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:47:50.760 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:47:50.761 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:47:50.761 request id: app - uvicorn.server:serve - Finished server process [1639435]
INFO     2024-02-23 12:47:51.710 request id: app - uvicorn.server:serve - Started server process [1639535]
INFO     2024-02-23 12:47:51.711 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:47:51.711 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:47:57.633 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:47:57.735 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:47:57.737 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:47:57.739 request id: app - uvicorn.server:serve - Finished server process [1639535]
INFO     2024-02-23 12:47:58.819 request id: app - uvicorn.server:serve - Started server process [1639611]
INFO     2024-02-23 12:47:58.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:47:58.820 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:48:06.149 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:48:06.256 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:48:06.257 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:48:06.257 request id: app - uvicorn.server:serve - Finished server process [1639611]
INFO     2024-02-23 12:48:07.470 request id: app - uvicorn.server:serve - Started server process [1639712]
INFO     2024-02-23 12:48:07.472 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:48:07.472 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:48:21.126 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:48:21.227 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:48:21.228 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:48:21.229 request id: app - uvicorn.server:serve - Finished server process [1639712]
INFO     2024-02-23 12:48:22.117 request id: app - uvicorn.server:serve - Started server process [1639866]
INFO     2024-02-23 12:48:22.118 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:48:22.118 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:48:30.048 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 12:48:30.149 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 12:48:30.150 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 12:48:30.151 request id: app - uvicorn.server:serve - Finished server process [1639866]
INFO     2024-02-23 12:48:31.065 request id: app - uvicorn.server:serve - Started server process [1639976]
INFO     2024-02-23 12:48:31.067 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 12:48:31.067 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 12:48:53.407 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-23 12:48:53.409 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51416 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-23 12:53:09.203 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-23 12:53:09.207 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51550 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-23 13:01:01.008 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47216 - "GET /docs/ HTTP/1.1" 307
INFO     2024-02-23 13:01:01.012 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47216 - "GET /docs HTTP/1.1" 200
INFO     2024-02-23 13:01:01.237 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47216 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-23 13:02:48.545 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-23 13:02:48.547 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40072 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-23 13:05:24.322 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 13:05:24.424 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 13:05:24.425 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 13:05:24.426 request id: app - uvicorn.server:serve - Finished server process [1639976]
INFO     2024-02-23 13:05:25.492 request id: app - uvicorn.server:serve - Started server process [1651139]
INFO     2024-02-23 13:05:25.493 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 13:05:25.494 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 13:06:36.342 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-23 13:06:36.344 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34198 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-23 13:10:03.465 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-23 13:10:03.470 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.13:57538 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-23 13:18:28.556 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 13:18:28.658 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 13:18:28.659 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 13:18:28.659 request id: app - uvicorn.server:serve - Finished server process [1651139]
INFO     2024-02-23 13:29:13.399 request id: app - uvicorn.server:serve - Started server process [1666652]
INFO     2024-02-23 13:29:13.401 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 13:29:13.401 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 13:29:41.682 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 13:29:41.784 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 13:29:41.784 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 13:29:41.785 request id: app - uvicorn.server:serve - Finished server process [1666652]
INFO     2024-02-23 13:29:42.714 request id: app - uvicorn.server:serve - Started server process [1666996]
INFO     2024-02-23 13:29:42.715 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 13:29:42.715 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 13:30:49.099 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 13:30:49.201 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 13:30:49.202 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 13:30:49.202 request id: app - uvicorn.server:serve - Finished server process [1666996]
INFO     2024-02-23 16:27:34.204 request id: app - uvicorn.server:serve - Started server process [1779253]
INFO     2024-02-23 16:27:34.205 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 16:27:34.206 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 16:27:46.951 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 16:27:47.055 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 16:27:47.055 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 16:27:47.056 request id: app - uvicorn.server:serve - Finished server process [1779253]
INFO     2024-02-23 16:27:47.942 request id: app - uvicorn.server:serve - Started server process [1779353]
INFO     2024-02-23 16:27:47.943 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 16:27:47.944 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 16:28:16.836 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-23 16:28:17.113 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY4MjI5N30.USg1lBKY5Usz2Kch9ZaT_2_ek3vHvwzsn9jwcx5Is7g","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY5ODQ5N30.QGzFps1EyqUHH3mbrQqxUQF3sthHsLhYzHk07Ao7vNU"},"links":null,"relationships":null,"timestamp":"2024-02-23 16:27:47"}'}
INFO     2024-02-23 16:28:17.115 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52612 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-23 16:29:53.125 request id: app - app.src.services.s3_connector:put_object - Push /images/10_Screenshot from 2024-02-23 15-26-57.png to bucket bigdata done
INFO     2024-02-23 16:29:53.173 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59940 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-23 17:00:36.470 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 17:00:36.572 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 17:00:36.572 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 17:00:36.573 request id: app - uvicorn.server:serve - Finished server process [1779353]
INFO     2024-02-23 17:30:55.730 request id: app - uvicorn.server:serve - Started server process [1806469]
INFO     2024-02-23 17:30:55.731 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-23 17:30:55.732 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-23 17:31:00.480 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:58730 - "GET /docs HTTP/1.1" 200
INFO     2024-02-23 17:31:00.550 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:58734 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-23 17:31:00.551 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:58730 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-02-23 17:31:00.767 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:58734 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-23 17:31:25.734 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-23 17:31:26.033 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODY4NjA4Nn0.0T3FP7PhrC64JVxQf7FYmWzFlCb3gnF5C3wa23Ix4WQ","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwODcwMjI4Nn0.2_JlwxZ_1IpjMx5ggeL2FdEthu-G_WIWW18JGO3XM-I"},"links":null,"relationships":null,"timestamp":"2024-02-23 17:30:55"}'}
INFO     2024-02-23 17:31:26.034 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:51226 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-23 17:32:05.690 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:38624 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-23 17:32:48.702 request id: app - app.src.services.s3_connector:get_object - Get object /images/5_Screenshot from 2024-02-15 10-13-51.png from bucket bigdata done
INFO     2024-02-23 17:32:48.708 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.10.34:58438 - "GET /rms/v1.0/download/f336c507-57dd-5cc3-9d89-09855be2b31a HTTP/1.1" 200
INFO     2024-02-23 17:49:28.528 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-23 17:49:28.630 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-23 17:49:28.631 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-23 17:49:28.631 request id: app - uvicorn.server:serve - Finished server process [1806469]
INFO     2024-02-29 13:01:59.576 request id: app - uvicorn.server:serve - Started server process [1446431]
INFO     2024-02-29 13:01:59.578 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:01:59.578 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:02:06.818 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46360 - "GET / HTTP/1.1" 404
INFO     2024-02-29 13:02:06.824 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46360 - "GET / HTTP/1.1" 404
INFO     2024-02-29 13:02:06.828 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46376 - "GET / HTTP/1.1" 404
INFO     2024-02-29 13:02:06.835 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46376 - "GET / HTTP/1.1" 404
INFO     2024-02-29 13:02:06.839 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46386 - "GET / HTTP/1.1" 404
INFO     2024-02-29 13:02:07.229 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46376 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-29 13:02:07.264 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46376 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-29 13:02:07.267 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46360 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-29 13:02:07.277 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46360 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-29 13:02:07.280 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46386 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-29 13:02:16.627 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55960 - "GET / HTTP/1.1" 404
INFO     2024-02-29 13:02:21.116 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55960 - "GET /docs HTTP/1.1" 200
INFO     2024-02-29 13:02:21.190 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55960 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-02-29 13:02:21.191 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55974 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-29 13:02:21.376 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55974 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-29 13:02:44.550 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-29 13:02:44.947 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTE4ODM2NH0.M8QV5iGu25cZW7Qx5-1OcnMkJqmgzx1vzfDUXg4-MV0","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTIwNDU2NH0.eFTFysXrBfSffedHKUSdOsQ2r8slE4XDJTEL4nmnLgk"},"links":null,"relationships":null,"timestamp":"2024-02-29 13:01:59"}'}
INFO     2024-02-29 13:02:44.948 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54050 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 13:03:04.168 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40220 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-29 13:04:02.384 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 13:04:02.485 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 13:04:02.486 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 13:04:02.486 request id: app - uvicorn.server:serve - Finished server process [1446431]
INFO     2024-02-29 13:04:03.691 request id: app - uvicorn.server:serve - Started server process [1447767]
INFO     2024-02-29 13:04:03.692 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:04:03.692 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:05:08.343 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 13:05:08.445 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 13:05:08.446 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 13:05:08.446 request id: app - uvicorn.server:serve - Finished server process [1447767]
INFO     2024-02-29 13:05:09.434 request id: app - uvicorn.server:serve - Started server process [1448303]
INFO     2024-02-29 13:05:09.435 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:05:09.435 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:05:15.551 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 13:05:15.653 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 13:05:15.654 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 13:05:15.654 request id: app - uvicorn.server:serve - Finished server process [1448303]
INFO     2024-02-29 13:05:16.623 request id: app - uvicorn.server:serve - Started server process [1448350]
INFO     2024-02-29 13:05:16.625 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:05:16.625 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:05:23.750 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 13:05:23.851 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 13:05:23.852 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 13:05:23.852 request id: app - uvicorn.server:serve - Finished server process [1448350]
INFO     2024-02-29 13:05:24.798 request id: app - uvicorn.server:serve - Started server process [1448412]
INFO     2024-02-29 13:05:24.799 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:05:24.800 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:05:30.598 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41880 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-29 13:10:32.902 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34260 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-29 13:10:43.285 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 13:10:43.386 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 13:10:43.388 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 13:10:43.390 request id: app - uvicorn.server:serve - Finished server process [1448412]
INFO     2024-02-29 13:10:44.411 request id: app - uvicorn.server:serve - Started server process [1450187]
INFO     2024-02-29 13:10:44.412 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:10:44.413 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:10:48.081 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52090 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
INFO     2024-02-29 13:10:53.350 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 13:10:53.453 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 13:10:53.454 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 13:10:53.454 request id: app - uvicorn.server:serve - Finished server process [1450187]
INFO     2024-02-29 13:10:54.467 request id: app - uvicorn.server:serve - Started server process [1450265]
INFO     2024-02-29 13:10:54.468 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 13:10:54.469 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 13:11:00.537 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53906 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
ERROR    2024-02-29 14:30:46.235 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-29 14:30:46.237 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42128 - "GET /rms/v1.0/users HTTP/1.1" 400
INFO     2024-02-29 15:21:01.922 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:21:02.024 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:21:02.027 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:21:02.029 request id: app - uvicorn.server:serve - Finished server process [1450265]
INFO     2024-02-29 15:21:05.281 request id: app - uvicorn.server:serve - Started server process [1504822]
INFO     2024-02-29 15:21:05.282 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:21:05.283 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:21:54.161 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:21:54.262 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:21:54.264 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:21:54.264 request id: app - uvicorn.server:serve - Finished server process [1504822]
INFO     2024-02-29 15:21:55.301 request id: app - uvicorn.server:serve - Started server process [1505164]
INFO     2024-02-29 15:21:55.302 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:21:55.303 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:49:26.644 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:49:28.679 request id: app - uvicorn.server:serve - Started server process [1516039]
INFO     2024-02-29 15:49:28.680 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:49:28.681 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:52:28.939 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:52:29.042 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:52:29.045 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:52:29.047 request id: app - uvicorn.server:serve - Finished server process [1516039]
INFO     2024-02-29 15:52:30.046 request id: app - uvicorn.server:serve - Started server process [1517355]
INFO     2024-02-29 15:52:30.048 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:52:30.048 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:52:35.566 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:52:35.667 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:52:35.669 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:52:35.671 request id: app - uvicorn.server:serve - Finished server process [1517355]
INFO     2024-02-29 15:52:36.685 request id: app - uvicorn.server:serve - Started server process [1517422]
INFO     2024-02-29 15:52:36.687 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:52:36.687 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:52:41.701 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:52:41.804 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:52:41.805 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:52:41.805 request id: app - uvicorn.server:serve - Finished server process [1517422]
INFO     2024-02-29 15:52:42.686 request id: app - uvicorn.server:serve - Started server process [1517494]
INFO     2024-02-29 15:52:42.688 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:52:42.688 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:52:49.105 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:52:49.207 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:52:49.208 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:52:49.208 request id: app - uvicorn.server:serve - Finished server process [1517494]
INFO     2024-02-29 15:52:50.168 request id: app - uvicorn.server:serve - Started server process [1517588]
INFO     2024-02-29 15:52:50.169 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 15:52:50.170 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 15:52:58.802 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 15:52:58.903 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 15:52:58.904 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 15:52:58.904 request id: app - uvicorn.server:serve - Finished server process [1517588]
INFO     2024-02-29 16:09:25.571 request id: app - uvicorn.server:serve - Started server process [1524732]
INFO     2024-02-29 16:09:25.572 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 16:09:25.573 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 16:09:34.175 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43604 - "GET /docs HTTP/1.1" 200
INFO     2024-02-29 16:09:34.297 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43604 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-29 16:09:34.508 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43604 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-29 16:09:57.185 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-29 16:09:57.477 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTE5OTU5N30.khx_XZjWS7QYfHzXMreJRPGLfbWyzf-HsI7ZumkO4fY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTIxNTc5N30.xJROhDTD-y8LirvS3KxZaGMQSHe7WpaSzzgJdHKkJAI"},"links":null,"relationships":null,"timestamp":"2024-02-29 16:09:25"}'}
INFO     2024-02-29 16:09:57.478 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43606 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 16:11:11.845 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42496 - "POST /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-29 16:11:27.506 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTE5OTU5N30.khx_XZjWS7QYfHzXMreJRPGLfbWyzf-HsI7ZumkO4fY'}}
INFO     2024-02-29 16:11:27.525 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-29 16:09:25"}'}
INFO     2024-02-29 16:11:27.526 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52586 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-02-29 16:11:49.878 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abc@gmail.com', 'password': '123456'}}
INFO     2024-02-29 16:11:50.140 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MTk5NzEwfQ.-RUkWAp4XrYqeZP8KODpZKbzGgV_PkzQ5ottce4HuAI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjE1OTEwfQ.14rs0AtYi5GkBsxf1nGjbZmEstzOGxLr8gnGDtIfA_s"},"links":null,"relationships":null,"timestamp":"2024-02-29 16:09:25"}'}
INFO     2024-02-29 16:11:50.142 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47720 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 16:12:47.523 request id: app - app.src.services.s3_connector:put_object - Push /images/121_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:12:47.540 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2024-02-29 16:12:47.541 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6432d8d900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6430544a90>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': ...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6429fee7a0; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f64336638b0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f64336638b0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f64336638b0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f64336638b0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f642a081210>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f642a088b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23654', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f642a088b80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f642a08a290>
                     │    │             └ <starlette.requests.Request object at 0x7f6429ebc2e0>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6429ebc2e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f642a08a290>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6429ebc2e0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f642a089b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f642a089b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f642a089b40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f642a089b40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebc0d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6429ebe350>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id=None, status_id=None, name='RabilooDemo', version='121', platform_id=None, produc...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6429f145e0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id=None, status_id=None, name='RabilooDemo', version='121', platform_id=None, product_type_id=None, repo...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6429ebcb80>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': None, 'status_id': None, 'name': 'RabilooDemo', 'version': '121', 'platform_id': None, 'product_type_id': None, ...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f6431bec160>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f6432a1add0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f6432a1a050>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
                └ <function SessionTransaction.commit at 0x7f6432a19fc0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x7f6432a19f30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "<string>", line 2, in _prepare_impl
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
                └ <function SessionTransaction._prepare_impl at 0x7f6432a19e10>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x7f6432a24b80>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f6432a24d30>
    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f6429f4b100>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f6432bf2ef0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f6429ebe410>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f6429ebe410>
    │   └ <function SaveUpdateAll.execute at 0x7f6432bf37f0>
    └ SaveUpdateAll(Mapper[Resource(resources)])
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f6432be9d80>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sq...
    │    └ <module 'sqlalchemy.util.preloaded' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sql...
    └ <module 'sqlalchemy.util' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/ut...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f6432bea7a0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f6432eee5f0>
             └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f6429f140d0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f6432eee8c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f6432eeea70>
          └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f6432eeeb00>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f6432eeed40>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "stage_id" of relation "resources" violates not-null constraint\nDETAIL:  Failing row ...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "stage_id" of relation "resources" violat...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null ...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6432d8d900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6430544a90>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6433663b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': ...
    │      │       └ 'INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, ...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6429fee7a0; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2024-02-29 16:12:47.581 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52050 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:14:05.671 request id: app - app.src.services.s3_connector:put_object - Push /images/121_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:14:05.682 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^

[SQL: SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS resource_stages_created_at, resource_stages.updated_at AS resource_stages_updated_at, resource_stages.is_deleted AS resource_stages_is_deleted 
FROM resource_stages 
WHERE resource_stages.id = %(id_1)s::UUID]
[parameters: {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2024-02-29 16:14:05.683 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6432d8d900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6430544a90>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6429fee890; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6433611060>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6433611060>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6433611060>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6433611060>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6433611000>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f642a089480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23871', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f642a089480>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f642a089f30>
                     │    │             └ <starlette.requests.Request object at 0x7f6429f17b20>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6429f17b20>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f642a089f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6429f17b20>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428cb3520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428cb3520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428cb3520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428cb3520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429f15960>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6429f157e0>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f]', status_id='535816d8-5da3-5539-aee9-f512d...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6429f17280>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f]', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabi...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6429f16560>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 48, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f]', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabi...
    │    └ <function ResourceService.check_info at 0x7f6430564280>
    └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 68, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '367814e6-063c-560c-b428-20ed1ed85f4f]'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f6431bec1f0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
               │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
               └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 53, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f6432b8d120>
             └ <sqlalchemy.orm.query.Query object at 0x7f6429f17400>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2672, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f6432b8d870>
           └ <sqlalchemy.orm.query.Query object at 0x7f6429f17400>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2826, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f6432a1b0a0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f6431105c90>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f6429f17400>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f6432a1b010>
           └ <sqlalchemy.orm.session.Session object at 0x7f6431105c90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f6432cd2a70>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f6432eee5f0>
             └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f6429f17880>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f6432eee8c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f6432eeea70>
          └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f6432eeeb00>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f6432eeed40>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"\nLINE 3: WHERE resourc...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "367814e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6432d8d900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6430544a90>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6429f16ce0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6429fee890; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^

[SQL: SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS resource_stages_created_at, resource_stages.updated_at AS resource_stages_updated_at, resource_stages.is_deleted AS resource_stages_is_deleted 
FROM resource_stages 
WHERE resource_stages.id = %(id_1)s::UUID]
[parameters: {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-02-29 16:14:05.700 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:51822 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:14:08.138 request id: app - app.src.services.s3_connector:put_object - Push /images/121_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:14:08.140 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^

[SQL: SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS resource_stages_created_at, resource_stages.updated_at AS resource_stages_updated_at, resource_stages.is_deleted AS resource_stages_is_deleted 
FROM resource_stages 
WHERE resource_stages.id = %(id_1)s::UUID]
[parameters: {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2024-02-29 16:14:08.142 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6432d8d900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6430544a90>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6429feea70; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6429f16980>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6429f16980>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6429f16980>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6429f16980>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6429f16a10>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6429f89ab0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23871', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6429f89ab0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6431111ea0>
                     │    │             └ <starlette.requests.Request object at 0x7f6429f17100>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6429f17100>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6431111ea0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6429f17100>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c24ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c24ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c24ee0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c24ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6429ebd0f0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6429ebeec0>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f]', status_id='535816d8-5da3-5539-aee9-f512d...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6428a8c4f0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f]', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabi...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6429ebc850>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 48, in upload_resource
    self.check_info(resource_create)
    │    │          └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f]', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabi...
    │    └ <function ResourceService.check_info at 0x7f6430564280>
    └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 68, in check_info
    info_obj = self.base_service.engine_postgresql.get_by_attribute(getattr(models, k), "id", info_value)
               │    │            │                 │                        │       │         └ '367814e6-063c-560c-b428-20ed1ed85f4f]'
               │    │            │                 │                        │       └ 'ResourceStage'
               │    │            │                 │                        └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
               │    │            │                 └ <function PostgreSQLDB.get_by_attribute at 0x7f6431bec1f0>
               │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
               │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
               └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 53, in get_by_attribute
    result = query.all()
             │     └ <function Query.all at 0x7f6432b8d120>
             └ <sqlalchemy.orm.query.Query object at 0x7f642a0829b0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2672, in all
    return self._iter().all()  # type: ignore
           │    └ <function Query._iter at 0x7f6432b8d870>
           └ <sqlalchemy.orm.query.Query object at 0x7f642a0829b0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2826, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7f6432a1b0a0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7f6433663370>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7f642a0829b0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7f6432a1b010>
           └ <sqlalchemy.orm.session.Session object at 0x7f6433663370>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7f6432cd2a70>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7f6432eee5f0>
             └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7f6429f16920>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f6432eee8c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f6432eeea70>
          └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f6432eeeb00>
           └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f6432eeed40>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"\nLINE 3: WHERE resourc...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "367814e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f6432d8d900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7f6430544a90>
    └ <sqlalchemy.engine.base.Connection object at 0x7f6429ebf220>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}
    │      │       └ 'SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7f6429feea70; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "367814e6-063c-560c-b428-20ed1ed85f4f]"
LINE 3: WHERE resource_stages.id = '367814e6-063c-560c-b428-20ed1ed8...
                                   ^

[SQL: SELECT resource_stages.id AS resource_stages_id, resource_stages.name AS resource_stages_name, resource_stages.created_at AS resource_stages_created_at, resource_stages.updated_at AS resource_stages_updated_at, resource_stages.is_deleted AS resource_stages_is_deleted 
FROM resource_stages 
WHERE resource_stages.id = %(id_1)s::UUID]
[parameters: {'id_1': '367814e6-063c-560c-b428-20ed1ed85f4f]'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-02-29 16:14:08.158 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:52106 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:14:27.979 request id: app - app.src.services.s3_connector:put_object - Push /images/121_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:14:27.991 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-29 16:14:27.993 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6434cfc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6434cfc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6433663790>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6433663790>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6433663790>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6433663790>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f64336607c0>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428c24e50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23870', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428c24e50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428c25120>
                     │    │             └ <starlette.requests.Request object at 0x7f6428a8c6a0>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6428a8c6a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428c25120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6428a8c6a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c251b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c251b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c251b0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c251b0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428a8cdc0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6428a8ce80>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6428a8dc90>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6428a8d6c0>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'RabilooDem...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f6431bec160>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f6432a1add0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f6432a1a050>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7f6432a19fc0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7f6432a19240>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 928, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-29 16:14:28.004 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57548 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:14:29.664 request id: app - app.src.services.s3_connector:put_object - Push /images/121_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:14:29.671 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-29 16:14:29.673 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6434cfc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6434cfc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6428a8d5a0>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6428a8d5a0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6428a8d5a0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6428a8d5a0>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6428a8d120>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428c24f70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23870', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428c24f70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428c27e20>
                     │    │             └ <starlette.requests.Request object at 0x7f6428a8f3a0>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6428a8f3a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428c27e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6428a8f3a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c27d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c27d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c27d90>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428c27d90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa9180>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6428aa9450>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6428aaa2c0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6428aa9660>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'RabilooDem...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f6431bec160>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f6432a1add0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f6432a1a050>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7f6432a19fc0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7f6432a19240>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 928, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-29 16:14:29.689 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57560 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:14:45.887 request id: app - app.src.services.s3_connector:put_object - Push /images/121_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:14:45.896 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-29 16:14:45.898 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6434cfc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6434cfc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6428aaad70>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6428aaad70>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6428aaad70>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6428aaad70>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6428aa9d20>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428c27d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23870', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428c27d00>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428c25d80>
                     │    │             └ <starlette.requests.Request object at 0x7f6428aaa830>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6428aaa830>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428c25d80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6428aaa830>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac4040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aaa1d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6428aaa260>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6428aab6d0>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6428aaab90>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'RabilooDem...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f6431bec160>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f6432a1add0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f6432a1a050>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7f6432a19fc0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7f6432a19240>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 928, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-29 16:14:45.912 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41562 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:15:00.316 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58160 - "GET /docs HTTP/1.1" 200
INFO     2024-02-29 16:15:00.657 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58160 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-29 16:15:17.511 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abc@gmail.com', 'password': '123456'}}
INFO     2024-02-29 16:15:17.783 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MTk5OTE3fQ.h4xEz4pxgaUq6iXYFXg4uFTvEmLqL1pChCN-9zOA9-o","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjE2MTE3fQ.uFX40KFqGmXxYC20c8NIdcelmoQNgBHggt4kbZ-26zI"},"links":null,"relationships":null,"timestamp":"2024-02-29 16:09:25"}'}
INFO     2024-02-29 16:15:17.784 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58170 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 16:16:38.615 request id: app - app.src.services.s3_connector:put_object - Push /images/14_hrm_logo.png to bucket bigdata done
ERROR    2024-02-29 16:16:38.624 request id: app - app.src.services.resource_service:upload_resource - Lỗi khi tải lên tài nguyên: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR    2024-02-29 16:16:38.625 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f6434cfc310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f6434cfc3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f643610bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f643625e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f643625dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f6436158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
    │    └ <function subprocess_started at 0x7f6435676440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1524729 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f6436158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f6435675900>
    │    │                  └ <uvicorn.server.Server object at 0x7f6436158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f6435f06440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6435f063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6435f07eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f64360f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f6428aa9390>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f6428aa9390>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f6428aa9390>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f6428aa9390>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f6435530550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f64355305e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f6436159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
          └ <fastapi.applications.FastAPI object at 0x7f64348d2b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f6428aab580>
                     │    └ <function error_handle_business at 0x7f6434763250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428ac40d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f64335b07f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '0.0.0.0:30111', 'connection': 'keep-alive', 'content-length': '23869', 'accept': 'application/json', 'autho...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f6428ac40d0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function CORSMiddleware.simple_response at 0x7f643478f760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>>, ...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f64335b2530>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428ac44c0>
                     │    │             └ <starlette.requests.Request object at 0x7f6428aab520>
                     │    └ <function process_middleware_common at 0x7f64347631c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f6428aab520>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f6428ac44c0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a n...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f6434cfca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f6434864a40>
          │    │   │      └ <starlette.requests.Request object at 0x7f6428aab520>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f642abb7640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac49d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f642ab13b20>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac49d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f64347522f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f642ab13b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac49d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f64348a24d0>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f6428ac49d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f6428aa97b0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f64335d0700>
          └ <fastapi.routing.APIRoute object at 0x7f64335b2f80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f6428aaa4d0>
                     └ <function get_request_handler.<locals>.app at 0x7f64335d0670>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f64348a3130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'resource_create': ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7...
                 │         └ <function create_one at 0x7f642acdc430>
                 └ <fastapi.dependencies.models.Dependant object at 0x7f64335b3040>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 30, in create_one
    return await resource_service.upload_resource(file_upload, resource_create, user[0])
                 │                │               │            │                └ (<app.src.models.user.User object at 0x7f6428aa9a20>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                 │                │               │            └ ResourceCreate(stage_id='367814e6-063c-560c-b428-20ed1ed85f4f', status_id='535816d8-5da3-5539-aee9-f512d7eb6519', name='Rabil...
                 │                │               └ <starlette.datastructures.UploadFile object at 0x7f6428aaa0b0>
                 │                └ <function ResourceService.upload_resource at 0x7f6430564160>
                 └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 49, in upload_resource
    uploaded_file_metadata = self.base_service.engine_postgresql.create(models.Resource, resource_create_dict)
                             │    │            │                 │      │      │         └ {'stage_id': '367814e6-063c-560c-b428-20ed1ed85f4f', 'status_id': '535816d8-5da3-5539-aee9-f512d7eb6519', 'name': 'RabilooDem...
                             │    │            │                 │      │      └ <class 'app.src.models.resource.Resource'>
                             │    │            │                 │      └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
                             │    │            │                 └ <function PostgreSQLDB.create at 0x7f6431bec160>
                             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>
                             │    └ <app.src.services.base_service.BaseService object at 0x7f6431bda710>
                             └ <app.src.services.resource_service.ResourceService object at 0x7f6431bda6e0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 44, in create
    self.session.commit()
    │    │       └ <function Session.commit at 0x7f6432a1add0>
    │    └ <sqlalchemy.orm.session.Session object at 0x7f642acca710>
    └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7f6431bea890>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x7f6432a1a050>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "<string>", line 2, in commit
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    │    │                             │  │         └ <SessionTransactionState.DEACTIVE: 4>
    │    │                             │  └ <attribute '__name__' of 'function' objects>
    │    │                             └ <function SessionTransaction.commit at 0x7f6432a19fc0>
    │    └ <function SessionTransaction._raise_for_prerequisite_state at 0x7f6432a19240>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x7f6431db24c0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 928, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
          │      └ <class 'sqlalchemy.exc.PendingRollbackError'>
          └ <module 'sqlalchemy.exc' from '/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/exc...

sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "stage_id" of relation "resources" violates not-null constraint
DETAIL:  Failing row contains (7090ed04-6a4f-587e-a9d0-40a670e8022a, RabilooDemo, 121, null, null, null, null, null, null, c2328100-1dcd-54b9-957c-4fb45529ec0c, 2024-02-29 09:12:47.539168, f, /images/121_hrm_logo.png).

[SQL: INSERT INTO resources (id, name, version, stage_id, status_id, platform_id, product_type_id, repo_id, tag_id, user_id, key, is_deleted) VALUES (%(id)s::UUID, %(name)s, %(version)s, %(stage_id)s::UUID, %(status_id)s::UUID, %(platform_id)s::UUID, %(product_type_id)s::UUID, %(repo_id)s::UUID, %(tag_id)s::UUID, %(user_id)s::UUID, %(key)s, %(is_deleted)s) RETURNING resources.created_at]
[parameters: {'id': UUID('7090ed04-6a4f-587e-a9d0-40a670e8022a'), 'name': 'RabilooDemo', 'version': '121', 'stage_id': None, 'status_id': None, 'platform_id': None, 'product_type_id': None, 'repo_id': None, 'tag_id': None, 'user_id': 'c2328100-1dcd-54b9-957c-4fb45529ec0c', 'key': '/images/121_hrm_logo.png', 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO     2024-02-29 16:16:38.639 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47242 - "POST /rms/v1.0/ HTTP/1.1" 500
INFO     2024-02-29 16:18:55.175 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 16:18:55.277 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 16:18:55.278 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 16:18:55.279 request id: app - uvicorn.server:serve - Finished server process [1524732]
INFO     2024-02-29 16:18:57.896 request id: app - uvicorn.server:serve - Started server process [1528402]
INFO     2024-02-29 16:18:57.898 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 16:18:57.899 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 16:19:32.416 request id: app - app.src.services.s3_connector:put_object - Push /images/14_hrm_logo.png to bucket bigdata done
INFO     2024-02-29 16:20:00.791 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54784 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-29 16:20:39.081 request id: app - app.src.services.s3_connector:put_object - Push /images/15_hrm_logo.png to bucket bigdata done
INFO     2024-02-29 16:20:39.285 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53424 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-29 16:20:43.109 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 16:20:43.211 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 16:20:43.212 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 16:20:43.213 request id: app - uvicorn.server:serve - Finished server process [1528402]
INFO     2024-02-29 16:20:44.786 request id: app - uvicorn.server:serve - Started server process [1529200]
INFO     2024-02-29 16:20:44.787 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 16:20:44.788 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 16:20:50.360 request id: app - app.src.services.s3_connector:put_object - Push /images/16_hrm_logo.png to bucket bigdata done
INFO     2024-02-29 16:20:50.393 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:42132 - "POST /rms/v1.0/ HTTP/1.1" 200
ERROR    2024-02-29 16:25:43.674 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-29 16:25:43.676 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:44572 - "GET /rms/v1.0/resources/?name=Rabiloo%20Demo HTTP/1.1" 400
INFO     2024-02-29 16:25:56.172 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41750 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 200
INFO     2024-02-29 16:33:14.525 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60308 - "GET / HTTP/1.1" 404
INFO     2024-02-29 16:33:15.496 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60308 - "GET /favicon.ico HTTP/1.1" 404
INFO     2024-02-29 16:33:23.339 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60309 - "GET /docs HTTP/1.1" 200
INFO     2024-02-29 16:33:23.404 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60315 - "GET /static/swagger-ui-bundle.js HTTP/1.1" 200
INFO     2024-02-29 16:33:23.405 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60309 - "GET /static/swagger-ui.css HTTP/1.1" 200
INFO     2024-02-29 16:33:23.862 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60315 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-29 16:39:26.119 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60342 - "GET /docs HTTP/1.1" 200
INFO     2024-02-29 16:39:26.257 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60342 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-29 16:42:37.070 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'admin@rabiloo.com', 'password': 'Rabiloo@123'}}
INFO     2024-02-29 16:42:37.341 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTIwMTU1N30.vnz-YZQbjRKnpv-IfMqWvPyJZHH4T3cfxuMrxl-L4wQ","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTIxNzc1N30.v3GQg1FJUdnmOV7EPwNUFWdC6MqAl4HU4HFc84zKqbA"},"links":null,"relationships":null,"timestamp":"2024-02-29 16:20:44"}'}
INFO     2024-02-29 16:42:37.342 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60378 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 16:43:26.772 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60383 - "POST /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-29 16:43:58.014 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTIwMTU1N30.vnz-YZQbjRKnpv-IfMqWvPyJZHH4T3cfxuMrxl-L4wQ'}}
INFO     2024-02-29 16:43:58.022 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"BE0000","message":"success","data":{"4b2928c1-0a72-5cd4-9747-b29a380d9ce5":{"updated_at":"2024-01-25T08:04:29.398984","id":"4b2928c1-0a72-5cd4-9747-b29a380d9ce5","name":"Admin","created_at":"2024-01-25T08:04:29.398984","is_deleted":false},"57986dcc-c12d-5f29-ab07-5632c47995da":{"updated_at":"2024-01-25T08:04:29.398984","id":"57986dcc-c12d-5f29-ab07-5632c47995da","name":"Editor","created_at":"2024-01-25T08:04:29.398984","is_deleted":false},"82a288f9-3f5f-55fc-8e68-aee5acc1e37d":{"updated_at":"2024-01-25T08:04:29.398984","id":"82a288f9-3f5f-55fc-8e68-aee5acc1e37d","name":"Customer","created_at":"2024-01-25T08:04:29.398984","is_deleted":false},"1986d379-7b5b-5268-be1d-4caf90e88d07":{"updated_at":"2024-01-25T08:04:29.398984","id":"1986d379-7b5b-5268-be1d-4caf90e88d07","name":"Guest","created_at":"2024-01-25T08:04:29.398984","is_deleted":false}},"links":null,"relationships":null,"timestamp":"2024-02-29 16:20:44"}'}
INFO     2024-02-29 16:43:58.023 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60384 - "GET /rms/v1.0/role HTTP/1.1" 200
INFO     2024-02-29 16:44:42.170 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60385 - "GET /rms/v1.0/users HTTP/1.1" 200
INFO     2024-02-29 16:45:00.245 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkByYWJpbG9vLmNvbSIsImV4cCI6MTcwOTIwMTU1N30.vnz-YZQbjRKnpv-IfMqWvPyJZHH4T3cfxuMrxl-L4wQ'}}
INFO     2024-02-29 16:45:00.277 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-29 16:20:44"}'}
INFO     2024-02-29 16:45:00.280 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60388 - "POST /rms/v1.0/logout HTTP/1.1" 200
ERROR    2024-02-29 16:45:18.190 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Blacklisted Token
None
INFO     2024-02-29 16:45:18.192 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60389 - "GET /rms/v1.0/users HTTP/1.1" 400
INFO     2024-02-29 16:45:46.220 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abcd@gmail.com', 'password': '123456'}}
INFO     2024-02-29 16:45:46.526 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNkQGdtYWlsLmNvbSIsImV4cCI6MTcwOTIwMTc0Nn0.zPJHDhOBPBZMMUvRqdWZ4KIJMgVXG1pEgBbf1f9atRA","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNkQGdtYWlsLmNvbSIsImV4cCI6MTcwOTIxNzk0Nn0.mIt8Ud4AkzhAqeyFemWdX0s55fvSdZ1pfGQn3RNGniw"},"links":null,"relationships":null,"timestamp":"2024-02-29 16:20:44"}'}
INFO     2024-02-29 16:45:46.527 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60390 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 16:47:46.111 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60415 - "GET /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-02-29 16:47:48.335 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60415 - "GET /rms/v1.0/resource_stages HTTP/1.1" 200
INFO     2024-02-29 16:59:55.332 request id: app - app.src.services.s3_connector:put_object - Push /images/1_download.png to bucket bigdata done
INFO     2024-02-29 16:59:55.359 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60445 - "POST /rms/v1.0/ HTTP/1.1" 200
INFO     2024-02-29 17:00:23.704 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60446 - "GET /rms/v1.0/resources/?name=Rabiloo HTTP/1.1" 200
INFO     2024-02-29 17:00:52.204 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60447 - "GET /rms/v1.0/resources/?version=1 HTTP/1.1" 200
INFO     2024-02-29 17:01:10.559 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60448 - "GET /rms/v1.0/resources/?version=12 HTTP/1.1" 200
ERROR    2024-02-29 17:01:22.805 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-29 17:01:22.809 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60449 - "GET /rms/v1.0/resources/?version=99999 HTTP/1.1" 400
INFO     2024-02-29 17:02:11.749 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60450 - "GET /rms/v1.0/resources/?version=12 HTTP/1.1" 200
INFO     2024-02-29 17:06:40.059 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60458 - "DELETE /rms/v1.0/resource/dd9d8358-3243-5aa3-9be7-ac2ce2951972 HTTP/1.1" 200
INFO     2024-02-29 17:07:00.668 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60459 - "GET /rms/v1.0/resources/ HTTP/1.1" 200
ERROR    2024-02-29 17:07:38.715 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Resource Not Found
None
INFO     2024-02-29 17:07:38.719 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60461 - "GET /rms/v1.0/resources/?name=RabilooGrow HTTP/1.1" 400
INFO     2024-02-29 17:08:08.604 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60462 - "DELETE /rms/v1.0/resoures/dd9d8358-3243-5aa3-9be7-ac2ce2951972 HTTP/1.1" 200
INFO     2024-02-29 17:08:17.462 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60464 - "GET /rms/v1.0/resources/?name=RabilooGrow HTTP/1.1" 200
INFO     2024-02-29 17:09:01.747 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60466 - "GET /rms/v1.0/download/dd9d8358-3243-5aa3-9be7-ac2ce2951972 HTTP/1.1" 500
ERROR    2024-02-29 17:09:19.517 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7efdd1d99900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7efdcbb509d0>
    └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': "dd9d8358-3243-5aa3-9be7-ac2ce2951972'", 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7efdd258e890; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "dd9d8358-3243-5aa3-9be7-ac2ce2951972'"
LINE 3: WHERE resources.id = 'dd9d8358-3243-5aa3-9be7-ac2ce2951972''...
                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7efdd510bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7efdd525e950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1529198 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7efdd525dfc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1529198 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7efdd5158100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1529198 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1529198 started>
    │    └ <function subprocess_started at 0x7efdd464e440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1529198 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7efdd5158220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7efdd464d900>
    │    │                  └ <uvicorn.server.Server object at 0x7efdd5158220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7efdd4ee6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7efdd4ee63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7efdd4ee7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7efdd50f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7efdc85eac50>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7efdc85eac50>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7efdc85eac50>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7efdc85eac50>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7efdd450c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7efdd450c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efdd5159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
                 │    └ <fastapi.applications.FastAPI object at 0x7efdd38aeb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7efdd5159f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efdc9a24730>
          └ <fastapi.applications.FastAPI object at 0x7efdd38aeb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7efdc85eb040>
                     │    └ <function error_handle_business at 0x7efdd3743250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efdc9a24730>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "dd9d8358-3243-5aa3-9be7-ac2ce2951...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efdc853d2d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7efdc9a26470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7efdc9a24730>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7efdc853d2d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc9bc7580>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7efdc9a26470>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efdc853d3f0>
                     │    │             └ <starlette.requests.Request object at 0x7efdc85ea710>
                     │    └ <function process_middleware_common at 0x7efdd37431c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc9bc7580>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7efdc85ea710>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7efdc853d3f0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "dd9d8358-3243-5aa3-9be7-ac2ce2951...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7efdd3cd4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7efdd3840860>
          │    │   │      └ <starlette.requests.Request object at 0x7efdc85ea710>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7efdc9b23a60>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7efdc9bc7580>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc853d6c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efdc9b23a90>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7efdc9b23a60>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc853d6c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <fastapi.routing.APIRouter object at 0x7efdd37322f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7efdc9b23a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc853d6c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │     └ <function Route.handle at 0x7efdd387e4d0>
          └ <fastapi.routing.APIRoute object at 0x7efdc9a59270>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7efdc853d6c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7efdc85eb370>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('192.168.10.16', 30111)...
          │    └ <function request_response.<locals>.app at 0x7efdc9a4d090>
          └ <fastapi.routing.APIRoute object at 0x7efdc9a59270>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7efdc85eaf80>
                     └ <function get_request_handler.<locals>.app at 0x7efdc9a4d000>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7efdd387f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'resource_id': "dd9d8358-3243-5aa3-9be7-ac2ce2951972'"}
                 │                 │         └ <function download_one at 0x7efdc9ca5120>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7efdc9a59330>
                 └ <function run_in_threadpool at 0x7efdd41dadd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7efdc9ca5120>, resource_id="dd9d8358-3243-5aa3-9be7-ac2ce2951972'"),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7efdc85ef000>
                 │     │         └ <function run_sync at 0x7efdd429d090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7efdd429c820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "dd9d83...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7efdc9ca5120>, resource_id="dd9d8358-3243-5aa3-9be7-ac2ce2951972'"),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7efdc85ef000>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7efdc9cfcd80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 76, in download_one
    file_path = resource_service.download_resource(resource_id)
                │                │                 └ "dd9d8358-3243-5aa3-9be7-ac2ce2951972'"
                │                └ <function ResourceService.download_resource at 0x7efdcbb704c0>
                └ <app.src.services.resource_service.ResourceService object at 0x7efdd0bc5f30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 55, in download_resource
    s3_key = self.base_service.engine_postgresql.get_single_data(models.Resource, resource_id).key
             │    │            │                 │               │      │         └ "dd9d8358-3243-5aa3-9be7-ac2ce2951972'"
             │    │            │                 │               │      └ <class 'app.src.models.resource.Resource'>
             │    │            │                 │               └ <module 'app.src.models' from '/home/rb103/Downloads/resource-management/app/../app/src/models/__init__.py'>
             │    │            │                 └ <function PostgreSQLDB.get_single_data at 0x7efdd0be8430>
             │    │            └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7efdd0bf02b0>
             │    └ <app.src.services.base_service.BaseService object at 0x7efdd0bc5f60>
             └ <app.src.services.resource_service.ResourceService object at 0x7efdd0bc5f30>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/postgres_connector.py", line 60, in get_single_data
    return self.session.query(model).filter(model.id == id_value).first()
           │    │       │     │             │     │     └ "dd9d8358-3243-5aa3-9be7-ac2ce2951972'"
           │    │       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7efdd1981b20>
           │    │       │     │             └ <class 'app.src.models.resource.Resource'>
           │    │       │     └ <class 'app.src.models.resource.Resource'>
           │    │       └ <function Session.query at 0x7efdd1a27760>
           │    └ <sqlalchemy.orm.session.Session object at 0x7efdc9cde650>
           └ <app.src.services.postgres_connector.PostgreSQLDB object at 0x7efdd0bf02b0>

  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2727, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x7efdd1b98ca0>
           └ <sqlalchemy.orm.query.Query object at 0x7efdc85eaa40>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2826, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x7efdd1a270a0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x7efdc9cde650>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x7efdc85eae30>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x7efdd1a27010>
           └ <sqlalchemy.orm.session.Session object at 0x7efdc9cde650>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7efdd1cdea70>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x7efdd1efa5f0>
             └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x7efdc85eaaa0>>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7efdd1efa8c0>
           └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7efdd1efaa70>
          └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7efdd1efab00>
           └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7efdd1efad40>
    └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type uuid: "dd9d8358-3243-5aa3-9be7-ac2ce2951972\'"\nLINE 3: WHERE resour...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type uuid: "dd9d835...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "dd9d8358-3243-5aa3-9be7-ac2ce2951...
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7efdd1d99900>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x7efdcbb509d0>
    └ <sqlalchemy.engine.base.Connection object at 0x7efdc8763040>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'id_1': "dd9d8358-3243-5aa3-9be7-ac2ce2951972'", 'param_1': 1}
    │      │       └ 'SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.cre...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x7efdd258e890; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "dd9d8358-3243-5aa3-9be7-ac2ce2951972'"
LINE 3: WHERE resources.id = 'dd9d8358-3243-5aa3-9be7-ac2ce2951972''...
                             ^

[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted 
FROM resources 
WHERE resources.id = %(id_1)s::UUID 
 LIMIT %(param_1)s]
[parameters: {'id_1': "dd9d8358-3243-5aa3-9be7-ac2ce2951972'", 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2024-02-29 17:09:19.576 request id: app - uvicorn.protocols.http.h11_impl:send - 192.168.50.231:60467 - "GET /rms/v1.0/download/dd9d8358-3243-5aa3-9be7-ac2ce2951972%27 HTTP/1.1" 500
INFO     2024-02-29 17:33:29.071 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:33:29.175 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:33:29.177 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:33:29.177 request id: app - uvicorn.server:serve - Finished server process [1529200]
INFO     2024-02-29 17:33:30.287 request id: app - uvicorn.server:serve - Started server process [1556190]
INFO     2024-02-29 17:33:30.288 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:33:30.289 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:33:56.493 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:33:56.595 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:33:56.596 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:33:56.596 request id: app - uvicorn.server:serve - Finished server process [1556190]
INFO     2024-02-29 17:33:58.998 request id: app - uvicorn.server:serve - Started server process [1556383]
INFO     2024-02-29 17:33:59.000 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:33:59.001 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-29 17:34:02.293 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Expired Access Token
None
INFO     2024-02-29 17:34:02.295 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:35864 - "POST /rms/v1.0/ HTTP/1.1" 400
INFO     2024-02-29 17:34:53.462 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abc@gmail.com', 'password': '123456'}}
INFO     2024-02-29 17:34:53.725 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA0NjkzfQ.yYWFq6gqjv3dAEGifLxvx0ObRoqdAgXbJwDjTvrneGQ","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjIwODkzfQ.J4ycZQaDoZgP0vMhRVTZqErKTWOiH4S1NIXdsp96ehM"},"links":null,"relationships":null,"timestamp":"2024-02-29 17:33:58"}'}
INFO     2024-02-29 17:34:53.727 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54788 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-02-29 17:51:55.094 request id: app - uvicorn.server:serve - Started server process [1563237]
INFO     2024-02-29 17:51:55.095 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:51:55.096 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:52:01.319 request id: app - app.src.services.s3_connector:put_object - Push /images/17_hrm_logo.png to bucket bigdata done
INFO     2024-02-29 17:52:02.351 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57492 - "POST /rms/v1.0/ HTTP/1.1" 200
ERROR    2024-02-29 17:52:26.524 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f8a7a08b910>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f8a7a08b9a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 5
               │     └ 8
               └ <function _main at 0x7f8a80bed120>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 5
           │    └ <function BaseProcess._bootstrap at 0x7f8a80ba7e20>
           └ <SpawnProcess name='SpawnProcess-4' parent=1562854 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f8a80ba7490>
    └ <SpawnProcess name='SpawnProcess-4' parent=1562854 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f8a80bfecb0>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=1562854 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=1562854 started>
    │    └ <function subprocess_started at 0x7f8a80101bd0>
    └ <SpawnProcess name='SpawnProcess-4' parent=1562854 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f8a80bfe560>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=4, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f8a80100ee0>
    │    │                  └ <uvicorn.server.Server object at 0x7f8a80bfe560>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f8a80b25a20>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f8a80b25990>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f8a80b27490>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f8a80d06830>
    └ <Handle <TaskStepMethWrapper object at 0x7f8a5fc9ed10>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f8a5fc9ed10>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f8a5fc9ed10>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f8a5fc9ed10>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f8a8018f250>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f8a8018f2e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8a80b9e260>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f8a79ca9210>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f8a80b9e260>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8a5fe19a50>
          └ <fastapi.applications.FastAPI object at 0x7f8a79ca9210>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f8a5fe73d00>
                     │    └ <function error_handle_business at 0x7f8a79ada830>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8a5fe19a50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8a5fe76a70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8a5fe18640>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f8a5fe19a50>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f8a5fe76a70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8a5fddabf0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f8a5fe18640>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8a5fce1120>
                     │    │             └ <starlette.requests.Request object at 0x7f8a5fc9fa30>
                     │    └ <function process_middleware_common at 0x7f8a79ada8c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8a5fddabf0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f8a5fc9fa30>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f8a5fce1120>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f8a7a0a80d0>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f8a79c36480>
          │    │   │      └ <starlette.requests.Request object at 0x7f8a5fc9fa30>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8a5ff370a0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f8a5fddabf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5f397910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8a5ff37040>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f8a5ff370a0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5f397910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f8a79ae5660>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f8a5ff37040>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5f397910>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f8a79c6d630>
          └ <fastapi.routing.APIRoute object at 0x7f8a5fe4c880>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f8a5f397910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f8a5e2ff970>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f8a5fe2f1c0>
          └ <fastapi.routing.APIRoute object at 0x7f8a5fe4c880>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f8a5fe73fd0>
                     └ <function get_request_handler.<locals>.app at 0x7f8a5fe2f130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f8a79c6e290>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'resource_id': '09f15872-7269-5e83-bcd3-5acf6e0679d0'}
                 │                 │         └ <function download_one at 0x7f8a6007e170>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f8a5fe4c940>
                 └ <function run_in_threadpool at 0x7f8a7a71e4d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f8a6007e170>, resource_id='09f15872-7269-5e83-bcd3-5acf6e0679d0'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f8a5fe9a7c0>
                 │     │         └ <function run_sync at 0x7f8a7a01c4c0>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f8a7a71fbe0>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f8a6007e170>, resource_id='09f15872-7269-5e83-bcd3-5acf6e0679d0'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f8a5fe9a7c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f8a5fcee000>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 76, in download_one
    file_path = resource_service.download_resource(resource_id)
                │                │                 └ '09f15872-7269-5e83-bcd3-5acf6e0679d0'
                │                └ <function ResourceService.download_resource at 0x7f8a7a499240>
                └ <app.src.services.resource_service.ResourceService object at 0x7f8a62ff72b0>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-29 17:52:26.570 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43946 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 500
INFO     2024-02-29 17:52:32.716 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:52:32.819 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:52:32.822 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:52:32.826 request id: app - uvicorn.server:serve - Finished server process [1563237]
INFO     2024-02-29 17:52:34.888 request id: app - uvicorn.server:serve - Started server process [1563538]
INFO     2024-02-29 17:52:34.889 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:52:34.890 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-29 17:52:37.447 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f4e313a4310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f4e313a43a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f4e3280fb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f4e32962950>
           └ <SpawnProcess name='SpawnProcess-1' parent=1563530 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4e32961fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=1563530 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4e32858100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1563530 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1563530 started>
    │    └ <function subprocess_started at 0x7f4e31c96440>
    └ <SpawnProcess name='SpawnProcess-1' parent=1563530 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4e32858220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f4e31c95900>
    │    │                  └ <uvicorn.server.Server object at 0x7f4e32858220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f4e325b6440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f4e325b63b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f4e325b7eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f4e327fb250>
    └ <Handle <TaskStepMethWrapper object at 0x7f4e2328fc40>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f4e2328fc40>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f4e2328fc40>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f4e2328fc40>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f4e31b90550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f4e31b905e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4e32859f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4e30f82b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4e32859f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4e23224820>
          └ <fastapi.applications.FastAPI object at 0x7f4e30f82b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f4e2328dcf0>
                     │    └ <function error_handle_business at 0x7f4e30e17250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4e23224820>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4e2324af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4e23226560>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4e23224820>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4e2324af80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4e233c7670>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f4e23226560>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4e2324b010>
                     │    │             └ <starlette.requests.Request object at 0x7f4e2328d090>
                     │    └ <function process_middleware_common at 0x7f4e30e171c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4e233c7670>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f4e2328d090>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f4e2324b010>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f4e313a4a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f4e30f10b80>
          │    │   │      └ <starlette.requests.Request object at 0x7f4e2328d090>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4e23323b50>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f4e233c7670>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4e2324beb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4e23323b80>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f4e23323b50>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4e2324beb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f4e30e062f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f4e23323b80>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4e2324beb0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f4e30f524d0>
          └ <fastapi.routing.APIRoute object at 0x7f4e23255360>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f4e2324beb0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f4e2328d510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4e23249090>
          └ <fastapi.routing.APIRoute object at 0x7f4e23255360>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f4e2328fc70>
                     └ <function get_request_handler.<locals>.app at 0x7f4e23249000>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4e30f53130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'resource_id': '09f15872-7269-5e83-bcd3-5acf6e0679d0'}
                 │                 │         └ <function download_one at 0x7f4e237a9120>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f4e23255420>
                 └ <function run_in_threadpool at 0x7f4e318a6dd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f4e237a9120>, resource_id='09f15872-7269-5e83-bcd3-5acf6e0679d0'),)
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f4e232ae180>
                 │     │         └ <function run_sync at 0x7f4e31969090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f4e31968820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'resource_i...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<function download_one at 0x7f4e237a9120>, resource_id='09f15872-7269-5e83-bcd3-5acf6e0679d0'),)
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f4e232ae180>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f4e232bec80>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 76, in download_one
    file_path = resource_service.download_resource(resource_id)
                │                │                 └ '09f15872-7269-5e83-bcd3-5acf6e0679d0'
                │                └ <function ResourceService.download_resource at 0x7f4e28f884c0>
                └ <app.src.services.resource_service.ResourceService object at 0x7f4e2a1de020>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'resource_id'
INFO     2024-02-29 17:52:37.471 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:49354 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 500
INFO     2024-02-29 17:52:53.465 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:52:53.567 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:52:53.568 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:52:53.568 request id: app - uvicorn.server:serve - Finished server process [1563538]
INFO     2024-02-29 17:52:54.507 request id: app - uvicorn.server:serve - Started server process [1563652]
INFO     2024-02-29 17:52:54.508 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:52:54.509 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:53:04.945 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:53:05.047 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:53:05.047 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:53:05.048 request id: app - uvicorn.server:serve - Finished server process [1563652]
INFO     2024-02-29 17:53:05.980 request id: app - uvicorn.server:serve - Started server process [1563733]
INFO     2024-02-29 17:53:05.981 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:53:05.982 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:53:08.749 request id: app - app.src.services.s3_connector:get_object - Get object /images/17_hrm_logo.png from bucket bigdata done
INFO     2024-02-29 17:53:08.752 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:59192 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 200
INFO     2024-02-29 17:54:31.105 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:54:31.207 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:54:31.208 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:54:31.208 request id: app - uvicorn.server:serve - Finished server process [1563733]
INFO     2024-02-29 17:56:37.146 request id: app - uvicorn.server:serve - Started server process [1565455]
INFO     2024-02-29 17:56:37.147 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:56:37.148 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:56:44.175 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:56:44.277 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:56:44.277 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:56:44.278 request id: app - uvicorn.server:serve - Finished server process [1565455]
INFO     2024-02-29 17:56:45.196 request id: app - uvicorn.server:serve - Started server process [1565513]
INFO     2024-02-29 17:56:45.197 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:56:45.198 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:56:58.555 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:56:58.657 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:56:58.658 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:56:58.658 request id: app - uvicorn.server:serve - Finished server process [1565513]
INFO     2024-02-29 17:56:59.565 request id: app - uvicorn.server:serve - Started server process [1565589]
INFO     2024-02-29 17:56:59.566 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:56:59.567 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:58:23.561 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:58:23.663 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:58:23.665 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:58:23.667 request id: app - uvicorn.server:serve - Finished server process [1565589]
INFO     2024-02-29 17:59:12.470 request id: app - uvicorn.server:serve - Started server process [1566634]
INFO     2024-02-29 17:59:12.471 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:59:12.472 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:59:18.793 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:59:18.894 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:59:18.896 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:59:18.896 request id: app - uvicorn.server:serve - Finished server process [1566634]
INFO     2024-02-29 17:59:19.813 request id: app - uvicorn.server:serve - Started server process [1566676]
INFO     2024-02-29 17:59:19.814 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:59:19.815 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 17:59:23.226 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 17:59:23.327 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 17:59:23.328 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 17:59:23.329 request id: app - uvicorn.server:serve - Finished server process [1566676]
INFO     2024-02-29 17:59:24.280 request id: app - uvicorn.server:serve - Started server process [1566712]
INFO     2024-02-29 17:59:24.281 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 17:59:24.281 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 18:00:02.440 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 18:00:02.542 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 18:00:02.543 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 18:00:02.543 request id: app - uvicorn.server:serve - Finished server process [1566712]
INFO     2024-02-29 18:00:03.515 request id: app - uvicorn.server:serve - Started server process [1566951]
INFO     2024-02-29 18:00:03.516 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 18:00:03.517 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 18:00:13.254 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 18:00:38.799 request id: app - uvicorn.server:serve - Started server process [1567190]
INFO     2024-02-29 18:00:38.800 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 18:00:38.800 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 18:00:40.553 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41954 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 403
INFO     2024-02-29 18:01:33.308 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 18:01:33.410 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 18:01:33.411 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 18:01:33.412 request id: app - uvicorn.server:serve - Finished server process [1567190]
INFO     2024-02-29 18:01:34.307 request id: app - uvicorn.server:serve - Started server process [1567528]
INFO     2024-02-29 18:01:34.308 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 18:01:34.309 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-02-29 18:01:35.506 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41862 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 403
INFO     2024-02-29 18:01:39.252 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41862 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 403
INFO     2024-02-29 18:01:45.347 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54986 - "GET /docs HTTP/1.1" 200
INFO     2024-02-29 18:01:45.580 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:54986 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-02-29 18:02:11.569 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abc@gmail.com', 'password': '123456'}}
INFO     2024-02-29 18:02:11.862 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUynHW-hLvye0E","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjIyNTMxfQ.LTOnCiL-yn2QhkkhspC3_lIREZt7bmbdDqTmoBhKkiU"},"links":null,"relationships":null,"timestamp":"2024-02-29 18:01:34"}'}
INFO     2024-02-29 18:02:11.863 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55000 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-02-29 18:02:36.113 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Invalid Access Token
None
INFO     2024-02-29 18:02:36.115 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58440 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
ERROR    2024-02-29 18:02:57.797 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7fe9e866c310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7fe9e866c3a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7fe9e9ac7b50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7fe9e9c62950>
           └ <SpawnProcess name='SpawnProcess-2' parent=1567188 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7fe9e9c61fc0>
    └ <SpawnProcess name='SpawnProcess-2' parent=1567188 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7fe9e9b10100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1567188 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=1567188 started>
    │    └ <function subprocess_started at 0x7fe9e8f9a440>
    └ <SpawnProcess name='SpawnProcess-2' parent=1567188 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7fe9e9b10220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7fe9e8f99900>
    │    │                  └ <uvicorn.server.Server object at 0x7fe9e9b10220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7fe9e93b2440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fe9e93b23b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fe9e93b3eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fe9e9303250>
    └ <Handle <TaskStepMethWrapper object at 0x7fe9de581750>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7fe9de581750>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7fe9de581750>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7fe9de581750>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7fe9e8e94550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7fe9e8e945e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe9e9b11f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7fe9e8246b90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7fe9e9b11f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe9de520ac0>
          └ <fastapi.applications.FastAPI object at 0x7fe9e8246b90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7fe9de580ee0>
                     │    └ <function error_handle_business at 0x7fe9e80db250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe9de520ac0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'user'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe9e6fd15a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe9de522800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7fe9de520ac0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7fe9e6fd15a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe9de6c3910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7fe9de522800>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe9e6fd1c60>
                     │    │             └ <starlette.requests.Request object at 0x7fe9e6ff8d00>
                     │    └ <function process_middleware_common at 0x7fe9e80db1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe9de6c3910>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7fe9e6ff8d00>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7fe9e6fd1c60>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ TypeError("ResourceService.download_resource() missing 1 required positional argument: 'user'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7fe9e866ca60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7fe9e81d8810>
          │    │   │      └ <starlette.requests.Request object at 0x7fe9e6ff8d00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe9de623df0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7fe9de6c3910>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe9de5de440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe9de623e20>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7fe9de623df0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe9de5de440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7fe9e80ca2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7fe9de623e20>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe9de5de440>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7fe9e82164d0>
          └ <fastapi.routing.APIRoute object at 0x7fe9de555600>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7fe9de5de440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7fe9e6ff98a0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7fe9de545000>
          └ <fastapi.routing.APIRoute object at 0x7fe9de555600>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7fe9e6fba8c0>
                     └ <function get_request_handler.<locals>.app at 0x7fe9de544f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7fe9e8217130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7fe9de5d1e70>, 'user': (<app.src.models.user.User object at 0x7fe9...
                 │                 │         └ <function download_one at 0x7fe9de7a1090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7fe9de5556c0>
                 └ <function run_in_threadpool at 0x7fe9e8b6edd0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7fe9de7a1090>, db_session=<sqlalchemy.orm.session.Session object at 0x7fe9de5d...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7fe9de7f87c0>
                 │     │         └ <function run_sync at 0x7fe9e8c31090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7fe9e8c30820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=TypeError("ResourceService.download_resource() missing 1 required positional argument: 'user'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7fe9de...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7fe9de5f8480>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7fe9de5878c0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource_service.download_resource(db_session, resource_id)
                │                │                 │           └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUy...
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7fe9de5d1e70>
                │                └ <function ResourceService.download_resource at 0x7fe9e4284430>
                └ <app.src.services.resource_service.ResourceService object at 0x7fe9e5435ff0>

TypeError: ResourceService.download_resource() missing 1 required positional argument: 'user'
INFO     2024-02-29 18:02:57.836 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57122 - "GET /rms/v1.0/download/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUynHW-hLvye0E HTTP/1.1" 500
INFO     2024-02-29 18:03:27.757 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 18:03:27.859 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 18:03:27.860 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 18:03:27.860 request id: app - uvicorn.server:serve - Finished server process [1567528]
INFO     2024-02-29 18:03:28.788 request id: app - uvicorn.server:serve - Started server process [1568221]
INFO     2024-02-29 18:03:28.790 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 18:03:28.791 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-29 18:03:29.804 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUynHW-hLvye0E"\nLINE 3: WHERE resources.id = \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e...\n                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2727, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2826, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUynHW-hLvye0E"\nLINE 3: WHERE resources.id = \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e...\n                             ^\n\n[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted \nFROM resources \nWHERE resources.id = %(id_1)s::UUID AND resources.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUynHW-hLvye0E\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-02-29 18:03:29.805 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:47646 - "GET /rms/v1.0/download/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjA4MTMxfQ.o4DBZO-y9y6FkrNQW1O83ye_cwPkKHUynHW-hLvye0E HTTP/1.1" 500
ERROR    2024-02-29 18:05:09.437 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f87e0308310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f87e03083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f87e170bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f87e185e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f87e185dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f87e1758100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
    │    └ <function subprocess_started at 0x7f87e0c76440>
    └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f87e1758220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f87e0c75900>
    │    │                  └ <uvicorn.server.Server object at 0x7f87e1758220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f87e1506440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f87e15063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f87e1507eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f87e16f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f87dec11990>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f87dec11990>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f87dec11990>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f87dec11990>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f87e0b3c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f87e0b3c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f87e1759f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f87dfedeb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f87e1759f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f87debb0a90>
          └ <fastapi.applications.FastAPI object at 0x7f87dfedeb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f87dec10f70>
                     │    └ <function error_handle_business at 0x7f87dfd6f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f87debb0a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'User' object has no attribute 'user_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f87debd7910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f87debb27d0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f87debb0a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f87debd7910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f87d63a38e0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f87debb27d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f87dec6a320>
                     │    │             └ <starlette.requests.Request object at 0x7f87d5831ab0>
                     │    └ <function process_middleware_common at 0x7f87dfd6f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f87d63a38e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f87d5831ab0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f87dec6a320>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'User' object has no attribute 'user_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f87e0308a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f87dfe70810>
          │    │   │      └ <starlette.requests.Request object at 0x7f87d5831ab0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f87d67ffdc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f87d63a38e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d55e49d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f87d67ffdf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f87d67ffdc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d55e49d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f87dfd5e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f87d67ffdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d55e49d0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f87dfeae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f87debe55d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d55e49d0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5831db0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f87debd5000>
          └ <fastapi.routing.APIRoute object at 0x7f87debe55d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f87d5831f90>
                     └ <function get_request_handler.<locals>.app at 0x7f87debd4f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f87dfeaf130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f87dec644f0>, 'user': (<app.src.models.user.User object at 0x7f87...
                 │                 │         └ <function download_one at 0x7f87d6781090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f87debe5690>
                 └ <function run_in_threadpool at 0x7f87e080add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f87d6781090>, db_session=<sqlalchemy.orm.session.Session object at 0x7f87dec6...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f87d6bb50c0>
                 │     │         └ <function run_sync at 0x7f87e08cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f87e08cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'User' object has no attribute 'user_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f87d5...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f87dec6ccc0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f87d67f3e40>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource_service.download_resource(db_session, resource_id, user[0])
                │                │                 │           │            └ (<app.src.models.user.User object at 0x7f87d5832890>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                │                │                 │           └ '09f15872-7269-5e83-bcd3-5acf6e0679d0'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f87dec644f0>
                │                └ <function ResourceService.download_resource at 0x7f87dc260430>
                └ <app.src.services.resource_service.ResourceService object at 0x7f87dd1da7d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    if resource.user_id == user.user_id :
       │        │          └ <app.src.models.user.User object at 0x7f87d5832890>
       │        └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f87ddf72160>
       └ <app.src.models.resource.Resource object at 0x7f87d5832dd0>

AttributeError: 'User' object has no attribute 'user_id'
INFO     2024-02-29 18:05:09.454 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43386 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 500
ERROR    2024-02-29 18:05:10.896 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           │    └ <function MemoryObjectReceiveStream.receive_nowait at 0x7f87e0308310>
           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
          └ <class 'anyio.WouldBlock'>

anyio.WouldBlock


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
                    │           └ <function MemoryObjectReceiveStream.receive at 0x7f87e03083a0>
                    └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
          └ <class 'anyio.EndOfStream'>

anyio.EndOfStream


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x7f87e170bb50>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x7f87e185e950>
           └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f87e185dfc0>
    └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f87e1758100>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
    │    └ <function subprocess_started at 0x7f87e0c76440>
    └ <SpawnProcess name='SpawnProcess-3' parent=1567188 started>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f87e1758220>>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/server.py", line 50, in run
    loop.run_until_complete(self.serve(sockets=sockets))
    │    │                  │    │             └ [<socket.socket fd=3, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 30111)>]
    │    │                  │    └ <function Server.serve at 0x7f87e0c75900>
    │    │                  └ <uvicorn.server.Server object at 0x7f87e1758220>
    │    └ <function BaseEventLoop.run_until_complete at 0x7f87e1506440>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f87e15063b0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f87e1507eb0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f87e16f7250>
    └ <Handle <TaskStepMethWrapper object at 0x7f87d5833e20>()>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x7f87d5833e20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x7f87d5833e20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x7f87d5833e20>()>
> File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 369, in run_asgi
    result = await app(self.scope, self.receive, self.send)
                   │   │    │      │    │        │    └ <function RequestResponseCycle.send at 0x7f87e0b3c550>
                   │   │    │      │    │        └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>
                   │   │    │      │    └ <function RequestResponseCycle.receive at 0x7f87e0b3c5e0>
                   │   │    │      └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>
                   │   │    └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                   │   └ <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f87e1759f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 59, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f87dfedeb90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f87e1759f30>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/applications.py", line 259, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f87debb0a90>
          └ <fastapi.applications.FastAPI object at 0x7f87dfedeb90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 172, in __call__
    response = await self.handler(request, exc)
                     │    │       └ <starlette.requests.Request object at 0x7f87d5832a70>
                     │    └ <function error_handle_business at 0x7f87dfd6f250>
                     └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f87debb0a90>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 16, in error_handle_business
    raise ee
          └ AttributeError("'User' object has no attribute 'user_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f87d57e0d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x7f87debb27d0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f87debb0a90>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f87d57e0d30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f87d63a38e0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x7f87debb27d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f87d54f6440>
                     │    │             └ <starlette.requests.Request object at 0x7f87d58328f0>
                     │    └ <function process_middleware_common at 0x7f87dfd6f1c0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f87d63a38e0>
  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/rbl_fastapi_base/middleware/exception_handler.py", line 21, in process_middleware_common
    response = await call_next(request)
                     │         └ <starlette.requests.Request object at 0x7f87d58328f0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x7f87d54f6440>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
          └ AttributeError("'User' object has no attribute 'user_id'")
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
          │    │   │      │       │        │           └ <function MemoryObjectSendStream.send at 0x7f87e0308a60>
          │    │   │      │       │        └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
          │    │   │      │       └ <property object at 0x7f87dfe70810>
          │    │   │      └ <starlette.requests.Request object at 0x7f87d58328f0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <starlette.exceptions.ExceptionMiddleware object at 0x7f87d67ffdc0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x7f87d63a38e0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d54f65f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f87d67ffdf0>
          └ <starlette.exceptions.ExceptionMiddleware object at 0x7f87d67ffdc0>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d54f65f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <fastapi.routing.APIRouter object at 0x7f87dfd5e2f0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x7f87d67ffdf0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d54f65f0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │     └ <function Route.handle at 0x7f87dfeae4d0>
          └ <fastapi.routing.APIRoute object at 0x7f87debe55d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x7f87d54f65f0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7f87d5832bf0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.1'}, 'http_version': '1.1', 'server': ('127.0.0.1', 30111), 'c...
          │    └ <function request_response.<locals>.app at 0x7f87debd5000>
          └ <fastapi.routing.APIRoute object at 0x7f87debe55d0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x7f87d5832740>
                     └ <function get_request_handler.<locals>.app at 0x7f87debd4f70>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f87dfeaf130>
  File "/home/rb103/.local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'db_session': <sqlalchemy.orm.session.Session object at 0x7f87d5832c20>, 'user': (<app.src.models.user.User object at 0x7f87...
                 │                 │         └ <function download_one at 0x7f87d6781090>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x7f87debe5690>
                 └ <function run_in_threadpool at 0x7f87e080add0>
  File "/home/rb103/.local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ (functools.partial(<function download_one at 0x7f87d6781090>, db_session=<sqlalchemy.orm.session.Session object at 0x7f87d583...
                 │     │         │        └ <built-in method run of _contextvars.Context object at 0x7f87d5518280>
                 │     │         └ <function run_sync at 0x7f87e08cd090>
                 │     └ <module 'anyio.to_thread' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py'>
                 └ <module 'anyio' from '/home/rb103/.local/lib/python3.10/site-packages/anyio/__init__.py'>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x7f87e08cc820>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=AttributeError("'User' object has no attribute 'user_id'")>
  File "/home/rb103/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             │       │   │      └ (functools.partial(<bound method _GeneratorContextManager.__exit__ of <contextlib._GeneratorContextManager object at 0x7f87d5...
             │       │   └ <built-in method run of _contextvars.Context object at 0x7f87d56186c0>
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x7f87d5519180>

  File "/home/rb103/Downloads/resource-management/app/../app/src/controllers/resource_controller.py", line 77, in download_one
    file_path = resource_service.download_resource(db_session, resource_id, user[0])
                │                │                 │           │            └ (<app.src.models.user.User object at 0x7f87d5833d30>, 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZ...
                │                │                 │           └ '09f15872-7269-5e83-bcd3-5acf6e0679d0'
                │                │                 └ <sqlalchemy.orm.session.Session object at 0x7f87d5832c20>
                │                └ <function ResourceService.download_resource at 0x7f87dc260430>
                └ <app.src.services.resource_service.ResourceService object at 0x7f87dd1da7d0>

  File "/home/rb103/Downloads/resource-management/app/../app/src/services/resource_service.py", line 60, in download_resource
    if resource.user_id == user.user_id :
       │        │          └ <app.src.models.user.User object at 0x7f87d5833d30>
       │        └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x7f87ddf72160>
       └ <app.src.models.resource.Resource object at 0x7f87d5833fd0>

AttributeError: 'User' object has no attribute 'user_id'
INFO     2024-02-29 18:05:10.909 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:43388 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 500
INFO     2024-02-29 18:05:29.248 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-02-29 18:05:29.349 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-02-29 18:05:29.350 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-02-29 18:05:29.351 request id: app - uvicorn.server:serve - Finished server process [1568221]
INFO     2024-02-29 18:05:30.400 request id: app - uvicorn.server:serve - Started server process [1569013]
INFO     2024-02-29 18:05:30.401 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-02-29 18:05:30.402 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-02-29 18:05:32.151 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-02-29 18:05:32.152 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:36720 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 08:44:34.670 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40056 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:44:34.919 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40056 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:46:10.338 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abcd@gmail.com', 'password': '123456'}}
INFO     2024-03-01 08:46:10.603 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNkQGdtYWlsLmNvbSIsImV4cCI6MTcwOTI2MTE3MH0.Io0OaQGM3JBeHMZhf2nQQyX2OADyYmNgtWjg5dYVt9U","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNkQGdtYWlsLmNvbSIsImV4cCI6MTcwOTI3NTU3MH0.eNmLBQKgRyMfnTOP7JNTC6QHXaGjY7IgIp9vlk-RR2M"},"links":null,"relationships":null,"timestamp":"2024-02-29 18:05:30"}'}
INFO     2024-03-01 08:46:10.604 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:53322 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-03-01 08:46:40.507 request id: app - app.src.exceptions.exception_handler:business_exception_handler - Database Error
{'data': 'Traceback (most recent call last):\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "09f15872-7269-5e83-bcd3-5acf6e0679d0\t"\nLINE 3: WHERE resources.id = \'09f15872-7269-5e83-bcd3-5acf6e0679d0 \'...\n                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/home/rb103/Downloads/resource-management/app/../app/src/repositories/base_sql.py", line 37, in get\n    self.model.is_deleted.is_(False)).first()\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2727, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2826, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute\n    return self._execute_internal(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement\n    result = conn.execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute\n    return meth(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement\n    ret = self._execute_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context\n    return self._exec_single_context(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context\n    self._handle_dbapi_exception(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context\n    self.dialect.do_execute(\n  File "/home/rb103/anaconda3/envs/resource-management-dev/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "09f15872-7269-5e83-bcd3-5acf6e0679d0\t"\nLINE 3: WHERE resources.id = \'09f15872-7269-5e83-bcd3-5acf6e0679d0 \'...\n                             ^\n\n[SQL: SELECT resources.id AS resources_id, resources.name AS resources_name, resources.version AS resources_version, resources.created_at AS resources_created_at, resources.stage_id AS resources_stage_id, resources.status_id AS resources_status_id, resources.platform_id AS resources_platform_id, resources.product_type_id AS resources_product_type_id, resources.repo_id AS resources_repo_id, resources.tag_id AS resources_tag_id, resources.user_id AS resources_user_id, resources.key AS resources_key, resources.is_deleted AS resources_is_deleted \nFROM resources \nWHERE resources.id = %(id_1)s::UUID AND resources.is_deleted IS false \n LIMIT %(param_1)s]\n[parameters: {\'id_1\': \'09f15872-7269-5e83-bcd3-5acf6e0679d0\\t\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)\n'}
INFO     2024-03-01 08:46:40.508 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41756 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0%09 HTTP/1.1" 500
ERROR    2024-03-01 08:48:09.419 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 08:48:09.421 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45454 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 08:48:16.928 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNkQGdtYWlsLmNvbSIsImV4cCI6MTcwOTI2MTE3MH0.Io0OaQGM3JBeHMZhf2nQQyX2OADyYmNgtWjg5dYVt9U'}}
INFO     2024-03-01 08:48:16.949 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"Logout Success","data":null,"links":null,"relationships":null,"timestamp":"2024-02-29 18:05:30"}'}
INFO     2024-03-01 08:48:16.951 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:34056 - "POST /rms/v1.0/logout HTTP/1.1" 200
INFO     2024-03-01 08:48:26.868 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abc@gmail.com', 'password': '123456'}}
INFO     2024-03-01 08:48:27.120 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjYxMzA3fQ.NEUrZ4uhfmvpEsyoSggh37hLRHhEAY3jmdlWFKMXiGY","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5Mjc1NzA3fQ.Eutn1BwInxDv4oI3mEau4RNQ1YKSujzXdFEYnsN6Ukk"},"links":null,"relationships":null,"timestamp":"2024-02-29 18:05:30"}'}
INFO     2024-03-01 08:48:27.121 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33270 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
ERROR    2024-03-01 08:48:49.296 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 08:48:49.297 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33698 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 08:48:54.718 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33702 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:48:54.998 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:33702 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:43.712 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:44.045 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:44.202 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:44.316 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:44.391 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:44.490 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:44.576 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:44.659 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:44.775 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:44.854 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:44.974 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:45.049 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:55:45.170 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:55:45.242 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55328 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:56:05.826 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55338 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:56:05.918 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:55338 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:57:23.043 request id: app - uvicorn.server:serve - Started server process [1884314]
INFO     2024-03-01 08:57:23.045 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 08:57:23.046 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 08:57:25.401 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56020 - "GET /docs HTTP/1.1" 200
INFO     2024-03-01 08:57:25.585 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56020 - "GET /openapi.json HTTP/1.1" 200
INFO     2024-03-01 08:57:58.130 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'headers': {'content-type': 'application/json'}, 'request_body': {'email': 'abc@gmail.com', 'password': '123456'}}
INFO     2024-03-01 08:57:58.428 request id: app - rbl_fastapi_base.base.base_router:custom_route_handler - {'response_data': '{"code":"AUTH0000","message":"success","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5MjYxODc4fQ.eQkXQOjVTNeah4Xep4_CVZqpO20GW-YrTrL3srSzSTI","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhYmNAZ21haWwuY29tIiwiZXhwIjoxNzA5Mjc2Mjc4fQ.g_MS14BJv8Pk3SmW7M7kLLPG7wZCxo2MQ0TbK4GSpn0"},"links":null,"relationships":null,"timestamp":"2024-03-01 08:57:22"}'}
INFO     2024-03-01 08:57:58.430 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:56022 - "POST /rms/v1.0/login/access-token HTTP/1.1" 200
INFO     2024-03-01 08:59:22.002 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 08:59:22.104 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-03-01 08:59:33.136 request id: app - uvicorn.server:serve - Started server process [1885345]
INFO     2024-03-01 08:59:33.137 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 08:59:33.138 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-03-01 08:59:35.530 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 08:59:35.531 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:45592 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 09:00:05.362 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:00:05.463 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:00:05.464 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:00:05.465 request id: app - uvicorn.server:serve - Finished server process [1885345]
INFO     2024-03-01 09:00:11.590 request id: app - uvicorn.server:serve - Started server process [1885567]
INFO     2024-03-01 09:00:11.592 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:00:11.593 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:00:12.496 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:00:12.597 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:00:12.599 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:00:12.600 request id: app - uvicorn.server:serve - Finished server process [1885567]
INFO     2024-03-01 09:00:14.038 request id: app - uvicorn.server:serve - Started server process [1885599]
INFO     2024-03-01 09:00:14.039 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:00:14.040 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-03-01 09:00:15.825 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 09:00:15.826 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:46268 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 09:08:32.039 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:08:32.141 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:08:32.143 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:08:32.144 request id: app - uvicorn.server:serve - Finished server process [1885599]
INFO     2024-03-01 09:08:41.016 request id: app - uvicorn.server:serve - Started server process [1888729]
INFO     2024-03-01 09:08:41.018 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:08:41.019 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:08:47.248 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:08:47.350 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:08:47.352 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:08:47.354 request id: app - uvicorn.server:serve - Finished server process [1888729]
INFO     2024-03-01 09:08:51.249 request id: app - uvicorn.server:serve - Started server process [1888836]
INFO     2024-03-01 09:08:51.250 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:08:51.250 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-03-01 09:08:56.793 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 09:08:56.794 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:40220 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 09:09:00.184 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:09:00.286 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:09:00.286 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:09:00.287 request id: app - uvicorn.server:serve - Finished server process [1888836]
INFO     2024-03-01 09:09:03.449 request id: app - uvicorn.server:serve - Started server process [1888898]
INFO     2024-03-01 09:09:03.452 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:09:03.453 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:09:07.678 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:09:10.543 request id: app - uvicorn.server:serve - Started server process [1888975]
INFO     2024-03-01 09:09:10.545 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:09:10.546 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:09:33.879 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:09:33.982 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-03-01 09:09:57.544 request id: app - uvicorn.server:serve - Started server process [1889354]
INFO     2024-03-01 09:09:57.546 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:09:57.547 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-03-01 09:10:04.560 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 09:10:04.562 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:41508 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 09:11:22.479 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:11:22.581 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:11:22.582 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:11:22.582 request id: app - uvicorn.server:serve - Finished server process [1889354]
INFO     2024-03-01 09:11:23.623 request id: app - uvicorn.server:serve - Started server process [1889861]
INFO     2024-03-01 09:11:23.624 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:11:23.625 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:11:25.132 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:11:25.234 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:11:25.235 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:11:25.236 request id: app - uvicorn.server:serve - Finished server process [1889861]
INFO     2024-03-01 09:11:27.138 request id: app - uvicorn.server:serve - Started server process [1889893]
INFO     2024-03-01 09:11:27.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:11:27.140 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
ERROR    2024-03-01 09:11:30.717 request id: app - app.src.exceptions.exception_handler:business_exception_handler - User Not Permission
None
INFO     2024-03-01 09:11:30.759 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:58090 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 400
INFO     2024-03-01 09:12:24.965 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:12:25.066 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:12:25.067 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:12:25.067 request id: app - uvicorn.server:serve - Finished server process [1889893]
INFO     2024-03-01 09:12:26.032 request id: app - uvicorn.server:serve - Started server process [1890253]
INFO     2024-03-01 09:12:26.033 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:12:26.034 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:12:30.146 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:12:30.256 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:12:30.257 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:12:30.258 request id: app - uvicorn.server:serve - Finished server process [1890253]
INFO     2024-03-01 09:12:31.252 request id: app - uvicorn.server:serve - Started server process [1890282]
INFO     2024-03-01 09:12:31.253 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:12:31.254 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:12:35.168 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:12:35.269 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:12:35.270 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:12:35.270 request id: app - uvicorn.server:serve - Finished server process [1890282]
INFO     2024-03-01 09:12:36.301 request id: app - uvicorn.server:serve - Started server process [1890330]
INFO     2024-03-01 09:12:36.303 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:12:36.303 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:12:37.809 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:12:37.911 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:12:37.913 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:12:37.915 request id: app - uvicorn.server:serve - Finished server process [1890330]
INFO     2024-03-01 09:12:44.662 request id: app - uvicorn.server:serve - Started server process [1890398]
INFO     2024-03-01 09:12:44.664 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:12:44.664 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:12:45.660 request id: app - app.src.services.s3_connector:get_object - Get object /images/17_hrm_logo.png from bucket bigdata done
INFO     2024-03-01 09:12:45.662 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:37182 - "GET /rms/v1.0/download/09f15872-7269-5e83-bcd3-5acf6e0679d0 HTTP/1.1" 200
INFO     2024-03-01 09:16:56.741 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:16:56.843 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:16:56.844 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:16:56.844 request id: app - uvicorn.server:serve - Finished server process [1890398]
INFO     2024-03-01 09:16:57.834 request id: app - uvicorn.server:serve - Started server process [1891832]
INFO     2024-03-01 09:16:57.835 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:16:57.836 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:17:04.960 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:17:05.062 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:17:05.063 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:17:05.063 request id: app - uvicorn.server:serve - Finished server process [1891832]
INFO     2024-03-01 09:17:06.026 request id: app - uvicorn.server:serve - Started server process [1891901]
INFO     2024-03-01 09:17:06.027 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:17:06.028 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:17:36.432 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:17:36.533 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:17:36.534 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:17:36.535 request id: app - uvicorn.server:serve - Finished server process [1891901]
INFO     2024-03-01 09:17:37.462 request id: app - uvicorn.server:serve - Started server process [1892103]
INFO     2024-03-01 09:17:37.463 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:17:37.464 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:23:05.395 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:23:05.496 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:23:05.497 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:23:05.497 request id: app - uvicorn.server:serve - Finished server process [1892103]
INFO     2024-03-01 09:23:06.532 request id: app - uvicorn.server:serve - Started server process [1894072]
INFO     2024-03-01 09:23:06.534 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:23:06.534 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:23:38.155 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:23:38.256 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 09:23:38.257 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 09:23:38.258 request id: app - uvicorn.server:serve - Finished server process [1894072]
INFO     2024-03-01 09:23:40.767 request id: app - uvicorn.server:serve - Started server process [1894297]
INFO     2024-03-01 09:23:40.769 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 09:23:40.770 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 09:29:10.782 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 09:29:10.885 request id: app - uvicorn.server:shutdown - Waiting for connections to close. (CTRL+C to force quit)
INFO     2024-03-01 17:19:39.832 request id: app - uvicorn.server:serve - Started server process [2073891]
INFO     2024-03-01 17:19:39.833 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 17:19:39.834 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 17:19:43.044 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 17:19:43.145 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 17:19:43.146 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 17:19:43.146 request id: app - uvicorn.server:serve - Finished server process [2073891]
INFO     2024-03-01 18:22:06.606 request id: app - uvicorn.server:serve - Started server process [2098274]
INFO     2024-03-01 18:22:06.607 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 18:22:06.608 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 18:22:30.876 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 18:22:30.978 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 18:22:30.979 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 18:22:30.979 request id: app - uvicorn.server:serve - Finished server process [2098274]
INFO     2024-03-01 18:22:32.002 request id: app - uvicorn.server:serve - Started server process [2098424]
INFO     2024-03-01 18:22:32.004 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-01 18:22:32.006 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-01 18:23:53.743 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-01 18:23:53.844 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-01 18:23:53.845 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-01 18:23:53.846 request id: app - uvicorn.server:serve - Finished server process [2098424]
INFO     2024-03-05 17:27:13.935 request id: app - uvicorn.server:serve - Started server process [4132636]
INFO     2024-03-05 17:27:13.937 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2024-03-05 17:27:13.938 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2024-03-05 17:27:17.454 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2024-03-05 17:27:17.556 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2024-03-05 17:27:17.557 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2024-03-05 17:27:17.557 request id: app - uvicorn.server:serve - Finished server process [4132636]
